<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>errors</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <h3 id="navigation">Navigation</h3>
    <ul>
      <li>
        <a href="https://docs.python.org/3/genindex.html" title="General Index"
          >index</a
        >
      </li>
      <li>
        <a
          href="https://docs.python.org/3/py-modindex.html"
          title="Python Module Index"
          >modules</a
        >
        |
      </li>
      <li><a href="classes.html" title="9. Classes">next</a> |</li>
      <li>
        <a href="inputoutput.html" title="7. Input and Output">previous</a> |
      </li>
      <li><img src="../_static/py.png" /></li>
      <li><a href="https://www.python.org/">Python</a> »</li>
      <li>
        <a href="https://docs.python.org/3/index.html">3.9.5 Documentation</a> »
      </li>
      <li><a href="index.html">The Python Tutorial</a> »</li>
      <li></li>
    </ul>
    <p><span id="tut-errors"></span></p>
    <h1 id="errors-and-exceptions">
      <span class="section-number">8. </span>Errors and Exceptions<a
        href="#errors-and-exceptions"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h1>
    <p>
      Until now error messages haven’t been more than mentioned, but if you have
      tried out the examples you have probably seen some. There are (at least)
      two distinguishable kinds of errors: <em>syntax errors</em> and
      <em>exceptions</em>.
    </p>
    <p><span id="tut-syntaxerrors"></span></p>
    <h2 id="syntax-errors">
      <span class="section-number">8.1. </span>Syntax Errors<a
        href="#syntax-errors"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h2>
    <p>
      Syntax errors, also known as parsing errors, are perhaps the most common
      kind of complaint you get while you are still learning Python:
    </p>
    <pre><code>&gt;&gt;&gt; while True print(&#39;Hello world&#39;)
  File &quot;&lt;stdin&gt;&quot;, line 1
    while True print(&#39;Hello world&#39;)
                   ^
SyntaxError: invalid syntax</code></pre>
    <p>
      The parser repeats the offending line and displays a little ‘arrow’
      pointing at the earliest point in the line where the error was detected.
      The error is caused by (or at least detected at) the token
      <em>preceding</em> the arrow: in the example, the error is detected at the
      function
      <a
        href="https://docs.python.org/3/library/functions.html#print"
        class="reference internal"
        title="print"
        ><code class="sourceCode python"
          ><span class="bu">print</span>()</code
        ></a
      >, since a colon (<code>':'</code>) is missing before it. File name and
      line number are printed so you know where to look in case the input came
      from a script.
    </p>
    <p><span id="tut-exceptions"></span></p>
    <h2 id="exceptions">
      <span class="section-number">8.2. </span>Exceptions<a
        href="#exceptions"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h2>
    <p>
      Even if a statement or expression is syntactically correct, it may cause
      an error when an attempt is made to execute it. Errors detected during
      execution are called <em>exceptions</em> and are not unconditionally
      fatal: you will soon learn how to handle them in Python programs. Most
      exceptions are not handled by programs, however, and result in error
      messages as shown here:
    </p>
    <pre><code>&gt;&gt;&gt; 10 * (1/0)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
ZeroDivisionError: division by zero
&gt;&gt;&gt; 4 + spam*3
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
NameError: name &#39;spam&#39; is not defined
&gt;&gt;&gt; &#39;2&#39; + 2
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: Can&#39;t convert &#39;int&#39; object to str implicitly</code></pre>
    <p>
      The last line of the error message indicates what happened. Exceptions
      come in different types, and the type is printed as part of the message:
      the types in the example are
      <a
        href="https://docs.python.org/3/library/exceptions.html#ZeroDivisionError"
        class="reference internal"
        title="ZeroDivisionError"
        ><code class="sourceCode python"
          ><span class="pp">ZeroDivisionError</span></code
        ></a
      >,
      <a
        href="https://docs.python.org/3/library/exceptions.html#NameError"
        class="reference internal"
        title="NameError"
        ><code class="sourceCode python"
          ><span class="pp">NameError</span></code
        ></a
      >
      and
      <a
        href="https://docs.python.org/3/library/exceptions.html#TypeError"
        class="reference internal"
        title="TypeError"
        ><code class="sourceCode python"
          ><span class="pp">TypeError</span></code
        ></a
      >. The string printed as the exception type is the name of the built-in
      exception that occurred. This is true for all built-in exceptions, but
      need not be true for user-defined exceptions (although it is a useful
      convention). Standard exception names are built-in identifiers (not
      reserved keywords).
    </p>
    <p>
      The rest of the line provides detail based on the type of exception and
      what caused it.
    </p>
    <p>
      The preceding part of the error message shows the context where the
      exception occurred, in the form of a stack traceback. In general it
      contains a stack traceback listing source lines; however, it will not
      display lines read from standard input.
    </p>
    <p>
      <a
        href="https://docs.python.org/3/library/exceptions.html#bltin-exceptions"
        class="reference internal"
        ><span class="std std-ref">Built-in Exceptions</span></a
      >
      lists the built-in exceptions and their meanings.
    </p>
    <p><span id="tut-handling"></span></p>
    <h2 id="handling-exceptions">
      <span class="section-number">8.3. </span>Handling Exceptions<a
        href="#handling-exceptions"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h2>
    <p>
      It is possible to write programs that handle selected exceptions. Look at
      the following example, which asks the user for input until a valid integer
      has been entered, but allows the user to interrupt the program (using
      Control-C or whatever the operating system supports); note that a
      user-generated interruption is signalled by raising the
      <a
        href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt"
        class="reference internal"
        title="KeyboardInterrupt"
        ><code class="sourceCode python"
          ><span class="pp">KeyboardInterrupt</span></code
        ></a
      >
      exception.
    </p>
    <pre><code>&gt;&gt;&gt; while True:
...     try:
...         x = int(input(&quot;Please enter a number: &quot;))
...         break
...     except ValueError:
...         print(&quot;Oops!  That was no valid number.  Try again...&quot;)
...</code></pre>
    <p>
      The
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#try"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >try</code
        ></a
      >
      statement works as follows.
    </p>
    <ul>
      <li>
        <p>
          First, the <em>try clause</em> (the statement(s) between the
          <a
            href="https://docs.python.org/3/reference/compound_stmts.html#try"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >try</code
            ></a
          >
          and
          <a
            href="https://docs.python.org/3/reference/compound_stmts.html#except"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >except</code
            ></a
          >
          keywords) is executed.
        </p>
      </li>
      <li>
        <p>
          If no exception occurs, the <em>except clause</em> is skipped and
          execution of the
          <a
            href="https://docs.python.org/3/reference/compound_stmts.html#try"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >try</code
            ></a
          >
          statement is finished.
        </p>
      </li>
      <li>
        <p>
          If an exception occurs during execution of the try clause, the rest of
          the clause is skipped. Then if its type matches the exception named
          after the
          <a
            href="https://docs.python.org/3/reference/compound_stmts.html#except"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >except</code
            ></a
          >
          keyword, the except clause is executed, and then execution continues
          after the
          <a
            href="https://docs.python.org/3/reference/compound_stmts.html#try"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >try</code
            ></a
          >
          statement.
        </p>
      </li>
      <li>
        <p>
          If an exception occurs which does not match the exception named in the
          except clause, it is passed on to outer
          <a
            href="https://docs.python.org/3/reference/compound_stmts.html#try"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >try</code
            ></a
          >
          statements; if no handler is found, it is an
          <em>unhandled exception</em> and execution stops with a message as
          shown above.
        </p>
      </li>
    </ul>
    <p>
      A
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#try"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >try</code
        ></a
      >
      statement may have more than one except clause, to specify handlers for
      different exceptions. At most one handler will be executed. Handlers only
      handle exceptions that occur in the corresponding try clause, not in other
      handlers of the same <code>try</code> statement. An except clause may name
      multiple exceptions as a parenthesized tuple, for example:
    </p>
    <pre><code>... except (RuntimeError, TypeError, NameError):
...     pass</code></pre>
    <p>
      A class in an
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#except"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >except</code
        ></a
      >
      clause is compatible with an exception if it is the same class or a base
      class thereof (but not the other way around — an except clause listing a
      derived class is not compatible with a base class). For example, the
      following code will print B, C, D in that order:
    </p>
    <pre><code>class B(Exception):
    pass

class C(B):
    pass

class D(C):
    pass

for cls in [B, C, D]:
    try:
        raise cls()
    except D:
        print(&quot;D&quot;)
    except C:
        print(&quot;C&quot;)
    except B:
        print(&quot;B&quot;)</code></pre>
    <p>
      Note that if the except clauses were reversed (with
      <code>except B</code> first), it would have printed B, B, B — the first
      matching except clause is triggered.
    </p>
    <p>
      The last except clause may omit the exception name(s), to serve as a
      wildcard. Use this with extreme caution, since it is easy to mask a real
      programming error in this way! It can also be used to print an error
      message and then re-raise the exception (allowing a caller to handle the
      exception as well):
    </p>
    <pre><code>import sys

try:
    f = open(&#39;myfile.txt&#39;)
    s = f.readline()
    i = int(s.strip())
except OSError as err:
    print(&quot;OS error: {0}&quot;.format(err))
except ValueError:
    print(&quot;Could not convert data to an integer.&quot;)
except:
    print(&quot;Unexpected error:&quot;, sys.exc_info()[0])
    raise</code></pre>
    <p>
      The
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#try"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >try</code
        ></a
      >
      …
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#except"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >except</code
        ></a
      >
      statement has an optional <em>else clause</em>, which, when present, must
      follow all except clauses. It is useful for code that must be executed if
      the try clause does not raise an exception. For example:
    </p>
    <pre><code>for arg in sys.argv[1:]:
    try:
        f = open(arg, &#39;r&#39;)
    except OSError:
        print(&#39;cannot open&#39;, arg)
    else:
        print(arg, &#39;has&#39;, len(f.readlines()), &#39;lines&#39;)
        f.close()</code></pre>
    <p>
      The use of the <code>else</code> clause is better than adding additional
      code to the
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#try"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >try</code
        ></a
      >
      clause because it avoids accidentally catching an exception that wasn’t
      raised by the code being protected by the <code>try</code> …
      <code>except</code> statement.
    </p>
    <p>
      When an exception occurs, it may have an associated value, also known as
      the exception’s <em>argument</em>. The presence and type of the argument
      depend on the exception type.
    </p>
    <p>
      The except clause may specify a variable after the exception name. The
      variable is bound to an exception instance with the arguments stored in
      <code>instance.args</code>. For convenience, the exception instance
      defines
      <a
        href="https://docs.python.org/3/reference/datamodel.html#object.__str__"
        class="reference internal"
        title="object.__str__"
        ><code class="sourceCode python"><span class="bu">str</span>()</code></a
      >
      so the arguments can be printed directly without having to reference
      <code>.args</code>. One may also instantiate an exception first before
      raising it and add any attributes to it as desired.
    </p>
    <pre><code>&gt;&gt;&gt; try:
...     raise Exception(&#39;spam&#39;, &#39;eggs&#39;)
... except Exception as inst:
...     print(type(inst))    # the exception instance
...     print(inst.args)     # arguments stored in .args
...     print(inst)          # __str__ allows args to be printed directly,
...                          # but may be overridden in exception subclasses
...     x, y = inst.args     # unpack args
...     print(&#39;x =&#39;, x)
...     print(&#39;y =&#39;, y)
...
&lt;class &#39;Exception&#39;&gt;
(&#39;spam&#39;, &#39;eggs&#39;)
(&#39;spam&#39;, &#39;eggs&#39;)
x = spam
y = eggs</code></pre>
    <p>
      If an exception has arguments, they are printed as the last part
      (‘detail’) of the message for unhandled exceptions.
    </p>
    <p>
      Exception handlers don’t just handle exceptions if they occur immediately
      in the try clause, but also if they occur inside functions that are called
      (even indirectly) in the try clause. For example:
    </p>
    <pre><code>&gt;&gt;&gt; def this_fails():
...     x = 1/0
...
&gt;&gt;&gt; try:
...     this_fails()
... except ZeroDivisionError as err:
...     print(&#39;Handling run-time error:&#39;, err)
...
Handling run-time error: division by zero</code></pre>
    <p><span id="tut-raising"></span></p>
    <h2 id="raising-exceptions">
      <span class="section-number">8.4. </span>Raising Exceptions<a
        href="#raising-exceptions"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h2>
    <p>
      The
      <a
        href="https://docs.python.org/3/reference/simple_stmts.html#raise"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >raise</code
        ></a
      >
      statement allows the programmer to force a specified exception to occur.
      For example:
    </p>
    <pre><code>&gt;&gt;&gt; raise NameError(&#39;HiThere&#39;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
NameError: HiThere</code></pre>
    <p>
      The sole argument to
      <a
        href="https://docs.python.org/3/reference/simple_stmts.html#raise"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >raise</code
        ></a
      >
      indicates the exception to be raised. This must be either an exception
      instance or an exception class (a class that derives from
      <a
        href="https://docs.python.org/3/library/exceptions.html#Exception"
        class="reference internal"
        title="Exception"
        ><code class="sourceCode python"
          ><span class="pp">Exception</span></code
        ></a
      >). If an exception class is passed, it will be implicitly instantiated by
      calling its constructor with no arguments:
    </p>
    <pre><code>raise ValueError  # shorthand for &#39;raise ValueError()&#39;</code></pre>
    <p>
      If you need to determine whether an exception was raised but don’t intend
      to handle it, a simpler form of the
      <a
        href="https://docs.python.org/3/reference/simple_stmts.html#raise"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >raise</code
        ></a
      >
      statement allows you to re-raise the exception:
    </p>
    <pre><code>&gt;&gt;&gt; try:
...     raise NameError(&#39;HiThere&#39;)
... except NameError:
...     print(&#39;An exception flew by!&#39;)
...     raise
...
An exception flew by!
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 2, in &lt;module&gt;
NameError: HiThere</code></pre>
    <p><span id="tut-exception-chaining"></span></p>
    <h2 id="exception-chaining">
      <span class="section-number">8.5. </span>Exception Chaining<a
        href="#exception-chaining"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h2>
    <p>
      The
      <a
        href="https://docs.python.org/3/reference/simple_stmts.html#raise"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >raise</code
        ></a
      >
      statement allows an optional
      <a
        href="https://docs.python.org/3/reference/simple_stmts.html#raise"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >from</code
        ></a
      >
      which enables chaining exceptions. For example:
    </p>
    <pre><code># exc must be exception instance or None.
raise RuntimeError from exc</code></pre>
    <p>This can be useful when you are transforming exceptions. For example:</p>
    <pre><code>&gt;&gt;&gt; def func():
...     raise IOError
...
&gt;&gt;&gt; try:
...     func()
... except IOError as exc:
...     raise RuntimeError(&#39;Failed to open database&#39;) from exc
...
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 2, in &lt;module&gt;
  File &quot;&lt;stdin&gt;&quot;, line 2, in func
OSError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 4, in &lt;module&gt;
RuntimeError: Failed to open database</code></pre>
    <p>
      Exception chaining happens automatically when an exception is raised
      inside an
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#except"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >except</code
        ></a
      >
      or
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#finally"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >finally</code
        ></a
      >
      section. Exception chaining can be disabled by using
      <code>from None</code> idiom:
    </p>
    <pre><code>&gt;&gt;&gt; try:
...     open(&#39;database.sqlite&#39;)
... except OSError:
...     raise RuntimeError from None
...
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 4, in &lt;module&gt;
RuntimeError</code></pre>
    <p>
      For more information about chaining mechanics, see
      <a
        href="https://docs.python.org/3/library/exceptions.html#bltin-exceptions"
        class="reference internal"
        ><span class="std std-ref">Built-in Exceptions</span></a
      >.
    </p>
    <p><span id="tut-userexceptions"></span></p>
    <h2 id="user-defined-exceptions">
      <span class="section-number">8.6. </span>User-defined Exceptions<a
        href="#user-defined-exceptions"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h2>
    <p>
      Programs may name their own exceptions by creating a new exception class
      (see
      <a href="classes.html#tut-classes" class="reference internal"
        ><span class="std std-ref">Classes</span></a
      >
      for more about Python classes). Exceptions should typically be derived
      from the
      <a
        href="https://docs.python.org/3/library/exceptions.html#Exception"
        class="reference internal"
        title="Exception"
        ><code class="sourceCode python"
          ><span class="pp">Exception</span></code
        ></a
      >
      class, either directly or indirectly.
    </p>
    <p>
      Exception classes can be defined which do anything any other class can do,
      but are usually kept simple, often only offering a number of attributes
      that allow information about the error to be extracted by handlers for the
      exception. When creating a module that can raise several distinct errors,
      a common practice is to create a base class for exceptions defined by that
      module, and subclass that to create specific exception classes for
      different error conditions:
    </p>
    <pre><code>class Error(Exception):
    &quot;&quot;&quot;Base class for exceptions in this module.&quot;&quot;&quot;
    pass

class InputError(Error):
    &quot;&quot;&quot;Exception raised for errors in the input.

    Attributes:
        expression -- input expression in which the error occurred
        message -- explanation of the error
    &quot;&quot;&quot;

    def __init__(self, expression, message):
        self.expression = expression
        self.message = message

class TransitionError(Error):
    &quot;&quot;&quot;Raised when an operation attempts a state transition that&#39;s not
    allowed.

    Attributes:
        previous -- state at beginning of transition
        next -- attempted new state
        message -- explanation of why the specific transition is not allowed
    &quot;&quot;&quot;

    def __init__(self, previous, next, message):
        self.previous = previous
        self.next = next
        self.message = message</code></pre>
    <p>
      Most exceptions are defined with names that end in “Error”, similar to the
      naming of the standard exceptions.
    </p>
    <p>
      Many standard modules define their own exceptions to report errors that
      may occur in functions they define. More information on classes is
      presented in chapter
      <a href="classes.html#tut-classes" class="reference internal"
        ><span class="std std-ref">Classes</span></a
      >.
    </p>
    <p><span id="tut-cleanup"></span></p>
    <h2 id="defining-clean-up-actions">
      <span class="section-number">8.7. </span>Defining Clean-up Actions<a
        href="#defining-clean-up-actions"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h2>
    <p>
      The
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#try"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >try</code
        ></a
      >
      statement has another optional clause which is intended to define clean-up
      actions that must be executed under all circumstances. For example:
    </p>
    <pre><code>&gt;&gt;&gt; try:
...     raise KeyboardInterrupt
... finally:
...     print(&#39;Goodbye, world!&#39;)
...
Goodbye, world!
KeyboardInterrupt
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 2, in &lt;module&gt;</code></pre>
    <p>
      If a
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#finally"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >finally</code
        ></a
      >
      clause is present, the <code>finally</code> clause will execute as the
      last task before the
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#try"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >try</code
        ></a
      >
      statement completes. The <code>finally</code> clause runs whether or not
      the <code>try</code> statement produces an exception. The following points
      discuss more complex cases when an exception occurs:
    </p>
    <ul>
      <li>
        <p>
          If an exception occurs during execution of the
          <code>try</code> clause, the exception may be handled by an
          <a
            href="https://docs.python.org/3/reference/compound_stmts.html#except"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >except</code
            ></a
          >
          clause. If the exception is not handled by an
          <code>except</code> clause, the exception is re-raised after the
          <code>finally</code> clause has been executed.
        </p>
      </li>
      <li>
        <p>
          An exception could occur during execution of an <code>except</code> or
          <code>else</code> clause. Again, the exception is re-raised after the
          <code>finally</code> clause has been executed.
        </p>
      </li>
      <li>
        <p>
          If the <code>finally</code> clause executes a
          <a
            href="https://docs.python.org/3/reference/simple_stmts.html#break"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >break</code
            ></a
          >,
          <a
            href="https://docs.python.org/3/reference/simple_stmts.html#continue"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >continue</code
            ></a
          >
          or
          <a
            href="https://docs.python.org/3/reference/simple_stmts.html#return"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >return</code
            ></a
          >
          statement, exceptions are not re-raised.
        </p>
      </li>
      <li>
        <p>
          If the <code>try</code> statement reaches a
          <a
            href="https://docs.python.org/3/reference/simple_stmts.html#break"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >break</code
            ></a
          >,
          <a
            href="https://docs.python.org/3/reference/simple_stmts.html#continue"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >continue</code
            ></a
          >
          or
          <a
            href="https://docs.python.org/3/reference/simple_stmts.html#return"
            class="reference internal"
            ><code class="xref std std-keyword docutils literal notranslate"
              >return</code
            ></a
          >
          statement, the <code>finally</code> clause will execute just prior to
          the <code>break</code>, <code>continue</code> or
          <code>return</code> statement’s execution.
        </p>
      </li>
      <li>
        <p>
          If a <code>finally</code> clause includes a
          <code>return</code> statement, the returned value will be the one from
          the <code>finally</code> clause’s <code>return</code> statement, not
          the value from the <code>try</code> clause’s
          <code>return</code> statement.
        </p>
      </li>
    </ul>
    <p>For example:</p>
    <pre><code>&gt;&gt;&gt; def bool_return():
...     try:
...         return True
...     finally:
...         return False
...
&gt;&gt;&gt; bool_return()
False</code></pre>
    <p>A more complicated example:</p>
    <pre><code>&gt;&gt;&gt; def divide(x, y):
...     try:
...         result = x / y
...     except ZeroDivisionError:
...         print(&quot;division by zero!&quot;)
...     else:
...         print(&quot;result is&quot;, result)
...     finally:
...         print(&quot;executing finally clause&quot;)
...
&gt;&gt;&gt; divide(2, 1)
result is 2.0
executing finally clause
&gt;&gt;&gt; divide(2, 0)
division by zero!
executing finally clause
&gt;&gt;&gt; divide(&quot;2&quot;, &quot;1&quot;)
executing finally clause
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;stdin&gt;&quot;, line 3, in divide
TypeError: unsupported operand type(s) for /: &#39;str&#39; and &#39;str&#39;</code></pre>
    <p>
      As you can see, the
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#finally"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >finally</code
        ></a
      >
      clause is executed in any event. The
      <a
        href="https://docs.python.org/3/library/exceptions.html#TypeError"
        class="reference internal"
        title="TypeError"
        ><code class="sourceCode python"
          ><span class="pp">TypeError</span></code
        ></a
      >
      raised by dividing two strings is not handled by the
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#except"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >except</code
        ></a
      >
      clause and therefore re-raised after the <code>finally</code> clause has
      been executed.
    </p>
    <p>
      In real world applications, the
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#finally"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >finally</code
        ></a
      >
      clause is useful for releasing external resources (such as files or
      network connections), regardless of whether the use of the resource was
      successful.
    </p>
    <p><span id="tut-cleanup-with"></span></p>
    <h2 id="predefined-clean-up-actions">
      <span class="section-number">8.8. </span>Predefined Clean-up Actions<a
        href="#predefined-clean-up-actions"
        class="headerlink"
        title="Permalink to this headline"
        >¶</a
      >
    </h2>
    <p>
      Some objects define standard clean-up actions to be undertaken when the
      object is no longer needed, regardless of whether or not the operation
      using the object succeeded or failed. Look at the following example, which
      tries to open a file and print its contents to the screen.
    </p>
    <pre><code>for line in open(&quot;myfile.txt&quot;):
    print(line, end=&quot;&quot;)</code></pre>
    <p>
      The problem with this code is that it leaves the file open for an
      indeterminate amount of time after this part of the code has finished
      executing. This is not an issue in simple scripts, but can be a problem
      for larger applications. The
      <a
        href="https://docs.python.org/3/reference/compound_stmts.html#with"
        class="reference internal"
        ><code class="xref std std-keyword docutils literal notranslate"
          >with</code
        ></a
      >
      statement allows objects like files to be used in a way that ensures they
      are always cleaned up promptly and correctly.
    </p>
    <pre><code>with open(&quot;myfile.txt&quot;) as f:
    for line in f:
        print(line, end=&quot;&quot;)</code></pre>
    <p>
      After the statement is executed, the file <em>f</em> is always closed,
      even if a problem was encountered while processing the lines. Objects
      which, like files, provide predefined clean-up actions will indicate this
      in their documentation.
    </p>
    <h3 id="table-of-contents">
      <a href="https://docs.python.org/3/contents.html">Table of Contents</a>
    </h3>
    <ul>
      <li>
        <a href="#" class="reference internal">8. Errors and Exceptions</a>
        <ul>
          <li>
            <a href="#syntax-errors" class="reference internal"
              >8.1. Syntax Errors</a
            >
          </li>
          <li>
            <a href="#exceptions" class="reference internal">8.2. Exceptions</a>
          </li>
          <li>
            <a href="#handling-exceptions" class="reference internal"
              >8.3. Handling Exceptions</a
            >
          </li>
          <li>
            <a href="#raising-exceptions" class="reference internal"
              >8.4. Raising Exceptions</a
            >
          </li>
          <li>
            <a href="#exception-chaining" class="reference internal"
              >8.5. Exception Chaining</a
            >
          </li>
          <li>
            <a href="#user-defined-exceptions" class="reference internal"
              >8.6. User-defined Exceptions</a
            >
          </li>
          <li>
            <a href="#defining-clean-up-actions" class="reference internal"
              >8.7. Defining Clean-up Actions</a
            >
          </li>
          <li>
            <a href="#predefined-clean-up-actions" class="reference internal"
              >8.8. Predefined Clean-up Actions</a
            >
          </li>
        </ul>
      </li>
    </ul>
    <h4 id="previous-topic">Previous topic</h4>
    <p>
      <a href="inputoutput.html" title="previous chapter"
        ><span class="section-number">7. </span>Input and Output</a
      >
    </p>
    <h4 id="next-topic">Next topic</h4>
    <p>
      <a href="classes.html" title="next chapter"
        ><span class="section-number">9. </span>Classes</a
      >
    </p>
    <h3 id="this-page">This Page</h3>
    <ul>
      <li><a href="https://docs.python.org/3/bugs.html">Report a Bug</a></li>
      <li>
        <a
          href="https://github.com/python/cpython/blob/3.9/Doc/tutorial/errors.rst"
          >Show Source</a
        >
      </li>
    </ul>
    <h3 id="navigation-1">Navigation</h3>
    <ul>
      <li>
        <a href="https://docs.python.org/3/genindex.html" title="General Index"
          >index</a
        >
      </li>
      <li>
        <a
          href="https://docs.python.org/3/py-modindex.html"
          title="Python Module Index"
          >modules</a
        >
        |
      </li>
      <li><a href="classes.html" title="9. Classes">next</a> |</li>
      <li>
        <a href="inputoutput.html" title="7. Input and Output">previous</a> |
      </li>
      <li><img src="../_static/py.png" /></li>
      <li><a href="https://www.python.org/">Python</a> »</li>
      <li>
        <a href="https://docs.python.org/3/index.html">3.9.5 Documentation</a> »
      </li>
      <li><a href="index.html">The Python Tutorial</a> »</li>
      <li></li>
    </ul>
  </body>
</html>
