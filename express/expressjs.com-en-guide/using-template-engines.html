<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>Using template engines with Express</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Using template engines with Express</h1>
    </header>
    <h1 id="using-template-engines-with-express">
      Using template engines with Express
    </h1>
    <p>
      A <em>template engine</em> enables you to use static template files in
      your application. At runtime, the template engine replaces variables in a
      template file with actual values, and transforms the template into an HTML
      file sent to the client. This approach makes it easier to design an HTML
      page.
    </p>
    <p>
      Some popular template engines that work with Express are
      <a href="https://pugjs.org/api/getting-started.html">Pug</a>,
      <a href="https://www.npmjs.com/package/mustache">Mustache</a>, and
      <a href="https://www.npmjs.com/package/ejs">EJS</a>. The
      <a href="/%7B%7B%20page.lang%20%7D%7D/starter/generator.html"
        >Express application generator</a
      >
      uses <a href="https://www.npmjs.com/package/jade">Jade</a> as its default,
      but it also supports several others.
    </p>
    <p>
      See
      <a href="https://github.com/expressjs/express/wiki#template-engines"
        >Template Engines (Express wiki)</a
      >
      for a list of template engines you can use with Express. See also
      <a
        href="https://strongloop.com/strongblog/compare-javascript-templates-jade-mustache-dust/"
        >Comparing JavaScript Templating Engines: Jade, Mustache, Dust and
        More</a
      >.
    </p>
    <div class="doc-box doc-notice" data-markdown="1">
      <p>
        <strong>Note</strong>: Jade has been renamed to
        <a href="https://www.npmjs.com/package/pug">Pug</a>. You can continue to
        use Jade in your app, and it will work just fine. However if you want
        the latest updates to the template engine, you must replace Jade with
        Pug in your app.
      </p>
    </div>
    <p>
      To render template files, set the following
      <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#app.set"
        >application setting properties</a
      >, set in <code>app.js</code> in the default app created by the generator:
    </p>
    <ul>
      <li>
        <code>views</code>, the directory where the template files are located.
        Eg: <code>app.set('views', './views')</code>. This defaults to the
        <code>views</code> directory in the application root directory.
      </li>
      <li>
        <code>view engine</code>, the template engine to use. For example, to
        use the Pug template engine: <code>app.set('view engine', 'pug')</code>.
      </li>
    </ul>
    <p>
      Then install the corresponding template engine npm package; for example to
      install Pug:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">npm</span> install pug --save</a></code></pre>
    </div>
    <div class="doc-box doc-notice" data-markdown="1">
      <p>
        Express-compliant template engines such as Jade and Pug export a
        function named <code>__express(filePath, options, callback)</code>,
        which is called by the <code>res.render()</code> function to render the
        template code.
      </p>
      <p>
        Some template engines do not follow this convention. The
        <a href="https://www.npmjs.org/package/consolidate">Consolidate.js</a>
        library follows this convention by mapping all of the popular Node.js
        template engines, and therefore works seamlessly within Express.
      </p>
    </div>
    <p>
      After the view engine is set, you don’t have to specify the engine or load
      the template engine module in your app; Express loads the module
      internally, as shown below (for the above example).
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;view engine&#39;</span><span class="op">,</span> <span class="st">&#39;pug&#39;</span>)</a></code></pre>
    </div>
    <p>
      Create a Pug template file named <code>index.pug</code> in the
      <code>views</code> directory, with the following content:
    </p>
    <pre class="pug"><code>html
  head
    title= title
  body
    h1= message</code></pre>
    <p>
      Then create a route to render the <code>index.pug</code> file. If the
      <code>view engine</code> property is not set, you must specify the
      extension of the <code>view</code> file. Otherwise, you can omit it.
    </p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">app</span>.<span class="at">get</span>(<span class="st">&#39;/&#39;</span><span class="op">,</span> <span class="kw">function</span> (req<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="va">res</span>.<span class="at">render</span>(<span class="st">&#39;index&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;Hey&#39;</span><span class="op">,</span> <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;Hello there!&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="op">}</span>)</a></code></pre>
    </div>
    <p>
      When you make a request to the home page, the <code>index.pug</code> file
      will be rendered as HTML.
    </p>
    <p>
      Note: The view engine cache does not cache the contents of the template’s
      output, only the underlying template itself. The view is still re-rendered
      with every request even when the cache is on.
    </p>
    <p>
      To learn more about how template engines work in Express, see:
      <a
        href="/%7B%7B%20page.lang%20%7D%7D/advanced/developing-template-engines.html"
        >“Developing template engines for Express”</a
      >.
    </p>
  </body>
</html>
