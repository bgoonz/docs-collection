<svg xmlns="http://www.w3.org/2000/svg" width="901" height="1117" viewBox="17.5 8.5 901 1117"><defs><marker id="a" stroke-linejoin="miter" stroke-miterlimit="10" color="#000" markerHeight="8" markerUnits="strokeWidth" markerWidth="10" orient="auto" overflow="visible" viewBox="-1 -4 10 8"><path fill="currentColor" stroke="currentColor" d="M8 0L0-3v6z"/></marker></defs><g fill="none"><path fill="#887ee3" fill-opacity=".5" d="M18 81.165h360V1125H18z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M18 81.165h360V1125H18z"/><path fill="#71dcba" fill-opacity=".5" d="M558 81.165h360V1125H558z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M558 81.165h360V1125H558z"/><path fill="#cb965c" fill-opacity=".5" d="M378 81.165h180V1125H378z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M378 81.165h180V1125H378z"/><path fill="#71dcba" fill-opacity=".5" d="M558 9h360v72.165H558z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M558 9h360v72.165H558z"/><text fill="#000" transform="translate(563 31.583)"><tspan x="109.692" y="21" font-family="Open Sans" font-size="20" font-weight="700">Priya (Callee)</tspan></text><path fill="#cb965c" fill-opacity=".5" d="M378 9h180v72.165H378z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M378 9h180v72.165H378z"/><text fill="#000" transform="translate(383 31.583)"><tspan x="5.161" y="21" font-family="Open Sans" font-size="20" font-weight="700">Signaling Server</tspan></text><path fill="#887ee3" fill-opacity=".5" d="M18 9h360v72.165H18z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M18 9h360v72.165H18z"/><text fill="#000" transform="translate(23 31.583)"><tspan x="103.428" y="21" font-family="Open Sans" font-size="20" font-weight="700">Naomi (Caller)</tspan></text><path fill="#fff" fill-opacity=".503" d="M558 108h180v1017H558z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M558 108h180v1017H558zM18 81h180v27H18z"/><text fill="#000" transform="translate(23 86)"><tspan x="50.664" y="17" font-family="Open Sans" font-size="16" font-weight="600">Web App</tspan></text><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M558 81h180v27H558z"/><text fill="#000" transform="translate(563 86)"><tspan x="34.137" y="17" font-family="Open Sans" font-size="16" font-weight="600">Web Browser</tspan></text><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M738 81h180v27H738z"/><text fill="#000" transform="translate(743 86)"><tspan x="50.664" y="17" font-family="Open Sans" font-size="16" font-weight="600">Web App</tspan></text><path fill="#d2ffff" d="M36 144h144v180H36z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M36 144h144v180H36z"/><text fill="#000" transform="translate(41 149)"><tspan x="1" y="11" font-family="Open Sans" font-size="10" font-weight="400">1. Create an </tspan> <tspan x="10.95" y="24" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection</tspan> <tspan x="1" y="37" font-family="Open Sans" font-size="10" font-weight="400">2. Call </tspan> <tspan y="37" font-family="Courier" font-size="10" font-weight="400">getUserMedia()</tspan> <tspan y="37" font-family="Open Sans" font-size="10" font-weight="400"> to </tspan> <tspan x="10.95" y="51" font-family="Open Sans" font-size="10" font-weight="400">access the webcam and </tspan> <tspan x="10.95" y="65" font-family="Open Sans" font-size="10" font-weight="400">microphone</tspan> <tspan x="1" y="79" font-family="Open Sans" font-size="10" font-weight="400">3. Promise fulfilled: add the </tspan> <tspan x="10.95" y="93" font-family="Open Sans" font-size="10" font-weight="400">local stream’s tracks by </tspan> <tspan x="10.95" y="107" font-family="Open Sans" font-size="10" font-weight="400">calling </tspan> <tspan x="10.95" y="120" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection.ad</tspan> <tspan x="10.95" y="132" font-family="Courier" font-size="10" font-weight="400">dTrack()</tspan></text><path fill="#fff6d2" d="M36 126h144v18H36z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M36 126h144v18H36z"/><text fill="#000" transform="translate(41 129)"><tspan x="42.996" y="10" font-family="Courier" font-size="10" font-weight="400">invite()</tspan></text><path fill="#fff" fill-opacity=".503" d="M198 108h180v1017H198z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M198 108h180v1017H198zm0-27h180v27H198z"/><text fill="#000" transform="translate(203 86)"><tspan x="34.137" y="17" font-family="Open Sans" font-size="16" font-weight="600">Web Browser</tspan></text><path fill="#d2ffff" d="M36 398.5h144v210H36z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M36 398.5h144v210H36z"/><text fill="#000" transform="translate(41 403.5)"><tspan x="1" y="11" font-family="Open Sans" font-size="10" font-weight="400">1. Create an SDP offer by </tspan> <tspan x="10.95" y="25" font-family="Open Sans" font-size="10" font-weight="400">calling </tspan> <tspan x="10.95" y="38" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection.cr</tspan> <tspan x="10.95" y="50" font-family="Courier" font-size="10" font-weight="400">eateOffer()</tspan> <tspan x="1" y="63" font-family="Open Sans" font-size="10" font-weight="400">3. Promise fulfilled: set the </tspan> <tspan x="10.95" y="77" font-family="Open Sans" font-size="10" font-weight="400">description of Naomi’s </tspan> <tspan x="10.95" y="91" font-family="Open Sans" font-size="10" font-weight="400">end of the call by calling </tspan> <tspan x="10.95" y="104" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection.se</tspan> <tspan x="10.95" y="116" font-family="Courier" font-size="10" font-weight="400">tLocalDescription()</tspan> <tspan x="1" y="129" font-family="Open Sans" font-size="10" font-weight="400">4. Promise fulfilled: send the </tspan> <tspan x="10.95" y="143" font-family="Open Sans" font-size="10" font-weight="400">offer through the </tspan> <tspan x="10.95" y="157" font-family="Open Sans" font-size="10" font-weight="400">signaling server to Priya in </tspan> <tspan x="10.95" y="171" font-family="Open Sans" font-size="10" font-weight="400">a message of type </tspan> <tspan x="10.95" y="184" font-family="Courier" font-size="10" font-weight="400">“video-offer”</tspan></text><path fill="#fff6d2" d="M36 380.5h144v18H36z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M36 380.5h144v18H36z"/><text fill="#000" transform="translate(41 385.5)"><tspan x="3.99" y="6" font-family="Courier" font-size="7" font-weight="400">handleNegotiationNeededEvent()</tspan></text><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#a)" d="M180 503.5l206.1.477"/><text fill="#000" transform="rotate(.133 -216390.778 97669.229)"><tspan x=".449" y="11" font-family="Open Sans" font-size="10" font-weight="400">Message: </tspan> <tspan y="11" font-family="Courier" font-size="10" font-weight="400">“video-offer”</tspan></text><path fill="#71dcba" d="M234.773 689.8c-23.273-5.8-13.992-54.632 23.134-46.3 3.444-16.242 46.617-13.606 46.335 0 27.07-17.402 61.665 17.297 38.46 34.7 27.845 8.436-.35 53.893-23.202 46.3-1.829 12.657-42.68 17.086-46.266 0-23.132 18.247-71.366-9.809-38.46-34.7z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M234.773 689.8c-23.273-5.8-13.992-54.632 23.134-46.3 3.444-16.242 46.617-13.606 46.335 0 27.07-17.402 61.665 17.297 38.46 34.7 27.845 8.436-.35 53.893-23.202 46.3-1.829 12.657-42.68 17.086-46.266 0-23.132 18.247-71.366-9.809-38.46-34.7z"/><text fill="#000" transform="translate(242.6 663)"><tspan x="10.94" y="11" font-family="Open Sans" font-size="10" font-weight="400">ICE layer starts </tspan> <tspan x=".346" y="25" font-family="Open Sans" font-size="10" font-weight="400">sending candidates </tspan> <tspan x="27.7" y="39" font-family="Open Sans" font-size="10" font-weight="400">to Priya</tspan></text><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#a)" d="M108 608.5l119.276 34.352"/><path fill="#d2ffff" d="M756 513h144v496H756z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M756 513h144v496H756z"/><text fill="#000" transform="translate(761 518)"><tspan x="1" y="11" font-family="Open Sans" font-size="10" font-weight="400">1. Create an </tspan> <tspan x="10.95" y="24" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection</tspan> <tspan x="1" y="37" font-family="Open Sans" font-size="10" font-weight="400">2. Create an </tspan> <tspan x="10.95" y="50" font-family="Courier" font-size="10" font-weight="400">RTCSessionDescriptio</tspan> <tspan x="10.95" y="63" font-family="Courier" font-size="10" font-weight="400">n</tspan> <tspan y="63" font-family="Open Sans" font-size="10" font-weight="400"> using the received SDP </tspan> <tspan x="10.95" y="77" font-family="Open Sans" font-size="10" font-weight="400">offer</tspan> <tspan x="1" y="91" font-family="Open Sans" font-size="10" font-weight="400">3. Call </tspan> <tspan x="10.95" y="104" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection.se</tspan> <tspan x="10.95" y="117" font-family="Courier" font-size="10" font-weight="400">tRemoteDescription()</tspan> <tspan y="117" font-family="Open Sans" font-size="10" font-weight="400"> </tspan> <tspan x="10.95" y="131" font-family="Open Sans" font-size="10" font-weight="400">to tell WebRTC about </tspan> <tspan x="10.95" y="145" font-family="Open Sans" font-size="10" font-weight="400">Naomi’s configuration.</tspan> <tspan x="1" y="159" font-family="Open Sans" font-size="10" font-weight="400">4. Call </tspan> <tspan y="159" font-family="Courier" font-size="10" font-weight="400">getUserMedia()</tspan> <tspan y="159" font-family="Open Sans" font-size="10" font-weight="400"> to </tspan> <tspan x="10.95" y="173" font-family="Open Sans" font-size="10" font-weight="400">access the webcam and </tspan> <tspan x="10.95" y="187" font-family="Open Sans" font-size="10" font-weight="400">microphone</tspan> <tspan x="1" y="201" font-family="Open Sans" font-size="10" font-weight="400">5. Promise fulfilled: add the </tspan> <tspan x="10.95" y="215" font-family="Open Sans" font-size="10" font-weight="400">local stream’s tracks by </tspan> <tspan x="10.95" y="229" font-family="Open Sans" font-size="10" font-weight="400">calling </tspan> <tspan x="10.95" y="242" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection.ad</tspan> <tspan x="10.95" y="254" font-family="Courier" font-size="10" font-weight="400">dTrack()</tspan> <tspan x="1" y="267" font-family="Open Sans" font-size="10" font-weight="400">6. Promise fulfilled: call </tspan> <tspan x="10.95" y="280" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection.cr</tspan> <tspan x="10.95" y="293" font-family="Courier" font-size="10" font-weight="400">eateAnswer()</tspan> <tspan y="293" font-family="Open Sans" font-size="10" font-weight="400"> to create </tspan> <tspan x="10.95" y="307" font-family="Open Sans" font-size="10" font-weight="400">an SDP answer to send to </tspan> <tspan x="10.95" y="321" font-family="Open Sans" font-size="10" font-weight="400">Naomi</tspan> <tspan x="1" y="335" font-family="Open Sans" font-size="10" font-weight="400">7. Promise fulfilled: </tspan> <tspan x="10.95" y="349" font-family="Open Sans" font-size="10" font-weight="400">configure Priya’s end of </tspan> <tspan x="10.95" y="363" font-family="Open Sans" font-size="10" font-weight="400">the connection by match </tspan> <tspan x="10.95" y="377" font-family="Open Sans" font-size="10" font-weight="400">the generated answer by </tspan> <tspan x="10.95" y="391" font-family="Open Sans" font-size="10" font-weight="400">calling </tspan> <tspan x="10.95" y="404" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection.se</tspan> <tspan x="10.95" y="416" font-family="Courier" font-size="10" font-weight="400">tLocalDescription()</tspan> <tspan x="1" y="429" font-family="Open Sans" font-size="10" font-weight="400">8. Promise fulfilled: send the </tspan> <tspan x="10.95" y="443" font-family="Open Sans" font-size="10" font-weight="400">SDP answer through the </tspan> <tspan x="10.95" y="457" font-family="Open Sans" font-size="10" font-weight="400">signaling server to Naomi </tspan> <tspan x="10.95" y="471" font-family="Open Sans" font-size="10" font-weight="400">in a message of type </tspan> <tspan x="10.95" y="484" font-family="Courier" font-size="10" font-weight="400">“video-answer”</tspan></text><path fill="#fff6d2" d="M756 495h144v18H756z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M756 495h144v18H756z"/><text fill="#000" transform="translate(761 498)"><tspan x="3.99" y="10" font-family="Courier" font-size="10" font-weight="400">handleVideoOfferMsg()</tspan></text><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#a)" d="M540 504h206.1"/><text fill="#000" transform="translate(585.5 501.56)"><tspan x=".449" y="11" font-family="Open Sans" font-size="10" font-weight="400">Message: </tspan> <tspan y="11" font-family="Courier" font-size="10" font-weight="400">“video-offer”</tspan></text><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#a)" d="M756 761l-206.103-4.771"/><text fill="#000" transform="rotate(1.326 -32309.396 25547.84)"><tspan x=".449" y="11" font-family="Open Sans" font-size="10" font-weight="400">Message: </tspan> <tspan y="11" font-family="Courier" font-size="10" font-weight="400">“video-answer”</tspan></text><path fill="#887ee3" d="M594.773 1058.8c-23.273-5.8-13.992-54.632 23.134-46.3 3.444-16.242 46.617-13.606 46.335 0 27.07-17.402 61.665 17.297 38.46 34.7 27.845 8.436-.35 53.893-23.202 46.3-1.829 12.657-42.68 17.086-46.266 0-23.132 18.247-71.366-9.809-38.46-34.7z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M594.773 1058.8c-23.273-5.8-13.992-54.632 23.134-46.3 3.444-16.242 46.617-13.606 46.335 0 27.07-17.402 61.665 17.297 38.46 34.7 27.845 8.436-.35 53.893-23.202 46.3-1.829 12.657-42.68 17.086-46.266 0-23.132 18.247-71.366-9.809-38.46-34.7z"/><text fill="#000" transform="translate(602.6 1032)"><tspan x="10.94" y="11" font-family="Open Sans" font-size="10" font-weight="400">ICE layer starts </tspan> <tspan x=".346" y="25" font-family="Open Sans" font-size="10" font-weight="400">sending candidates </tspan> <tspan x="23.83" y="39" font-family="Open Sans" font-size="10" font-weight="400">to Naomi</tspan></text><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#a)" d="M756 1009l-37.442 37.038"/><path fill="#d2ffff" d="M36 765h144v188H36z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M36 765h144v188H36z"/><text fill="#000" transform="translate(41 770)"><tspan x="1" y="11" font-family="Open Sans" font-size="10" font-weight="400">1. Create an </tspan> <tspan x="10.95" y="24" font-family="Courier" font-size="10" font-weight="400">RTCSessionDescriptio</tspan> <tspan x="10.95" y="37" font-family="Courier" font-size="10" font-weight="400">n</tspan> <tspan y="37" font-family="Open Sans" font-size="10" font-weight="400"> using the received SDP </tspan> <tspan x="10.95" y="51" font-family="Open Sans" font-size="10" font-weight="400">answer</tspan> <tspan x="1" y="65" font-family="Open Sans" font-size="10" font-weight="400">2. Pass the session </tspan> <tspan x="10.95" y="79" font-family="Open Sans" font-size="10" font-weight="400">description to </tspan> <tspan x="10.95" y="92" font-family="Courier" font-size="10" font-weight="400">RTCPeerConnection.se</tspan> <tspan x="10.95" y="105" font-family="Courier" font-size="10" font-weight="400">tRemoteDescription()</tspan> <tspan y="105" font-family="Open Sans" font-size="10" font-weight="400"> </tspan> <tspan x="10.95" y="119" font-family="Open Sans" font-size="10" font-weight="400">to configure Naomi’s </tspan> <tspan x="10.95" y="133" font-family="Open Sans" font-size="10" font-weight="400">WebRTC layer to know </tspan> <tspan x="10.95" y="147" font-family="Open Sans" font-size="10" font-weight="400">how Priya’s end of the </tspan> <tspan x="10.95" y="161" font-family="Open Sans" font-size="10" font-weight="400">connection is configured</tspan></text><path fill="#fff6d2" d="M36 747h144v18H36z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M36 747h144v18H36z"/><text fill="#000" transform="translate(41 750)"><tspan x=".989" y="10" font-family="Courier" font-size="10" font-weight="400">handleVideoAnswerMsg()</tspan></text><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#a)" d="M396 756H189.9"/><text fill="#000" transform="translate(224 753.56)"><tspan x=".199" y="11" font-family="Open Sans" font-size="10" font-weight="400">Message: </tspan> <tspan y="11" font-family="Courier" font-size="10" font-weight="400">“video-answer</tspan> <tspan y="11" font-family="Open Sans" font-size="10" font-weight="400">”</tspan></text><path fill="#d2ffff" d="M396 513h144v66H396z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M396 513h144v66H396z"/><text fill="#000" transform="translate(401 518)"><tspan x="0" y="11" font-family="Open Sans" font-size="10" font-weight="400">Receive</tspan> <tspan y="11" font-family="Courier" font-size="10" font-weight="400"> “video-offer” </tspan> <tspan x="0" y="25" font-family="Open Sans" font-size="10" font-weight="400">message and forward it to </tspan> <tspan x="0" y="39" font-family="Open Sans" font-size="10" font-weight="400">Priya</tspan></text><path fill="#fff6d2" d="M396 495h144v18H396z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M396 495h144v18H396z"/><text fill="#000" transform="translate(401 498)"><tspan x="30.994" y="10" font-family="Courier" font-size="10" font-weight="400">on.message()</tspan></text><path fill="#d2ffff" d="M396 765h144v66H396z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M396 765h144v66H396z"/><text fill="#000" transform="translate(401 770)"><tspan x="0" y="11" font-family="Open Sans" font-size="10" font-weight="400">Receive </tspan> <tspan y="11" font-family="Courier" font-size="10" font-weight="400">“video-answer”</tspan> <tspan y="11" font-family="Open Sans" font-size="10" font-weight="400"> </tspan> <tspan x="0" y="25" font-family="Open Sans" font-size="10" font-weight="400">message and forward it to </tspan> <tspan x="0" y="39" font-family="Open Sans" font-size="10" font-weight="400">Naomi</tspan></text><path fill="#fff6d2" d="M396 747h144v18H396z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M396 747h144v18H396z"/><text fill="#000" transform="translate(401 750)"><tspan x="30.994" y="10" font-family="Courier" font-size="10" font-weight="400">on.message()</tspan></text><path stroke="#000" stroke-dasharray="1 4" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#a)" d="M288 303.202L187.423 391.95"/><text fill="#000" transform="rotate(-41.425 606.24 -55.815)"><tspan x=".117" y="10" font-family="Helvetica Neue" font-size="10" font-weight="400">Event: </tspan> <tspan y="10" font-family="Courier" font-size="10" font-weight="400">negotiationneeded</tspan></text><path fill="#71dcba" d="M234.773 257.8c-23.273-5.8-13.992-54.632 23.134-46.3 3.444-16.242 46.617-13.606 46.335 0 27.07-17.402 61.665 17.297 38.46 34.7 27.845 8.436-.35 53.893-23.202 46.3-1.829 12.657-42.68 17.086-46.266 0-23.132 18.247-71.366-9.809-38.46-34.7z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" d="M234.773 257.8c-23.273-5.8-13.992-54.632 23.134-46.3 3.444-16.242 46.617-13.606 46.335 0 27.07-17.402 61.665 17.297 38.46 34.7 27.845 8.436-.35 53.893-23.202 46.3-1.829 12.657-42.68 17.086-46.266 0-23.132 18.247-71.366-9.809-38.46-34.7z"/><text fill="#000" transform="translate(242.6 231)"><tspan x=".517" y="11" font-family="Open Sans" font-size="10" font-weight="400">Ready to negotiate, </tspan> <tspan x="2.048" y="25" font-family="Open Sans" font-size="10" font-weight="400">so ask the caller to </tspan> <tspan x="13.503" y="39" font-family="Open Sans" font-size="10" font-weight="400">start doing so</tspan></text></g></svg>