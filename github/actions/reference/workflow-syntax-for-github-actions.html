<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>Workflow syntax for GitHub Actions</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Workflow syntax for GitHub Actions</h1>
    </header>
    <p>
      {% data reusables.actions.enterprise-beta %} {% data
      reusables.actions.enterprise-github-hosted-runners %} {% data
      reusables.actions.ae-beta %}
    </p>
    <h2 id="about-yaml-syntax-for-workflows">
      About YAML syntax for workflows
    </h2>
    <p>
      Workflow files use YAML syntax, and must have either a
      <code>.yml</code> or <code>.yaml</code> file extension. {% data
      reusables.actions.learn-more-about-yaml %}
    </p>
    <p>
      You must store workflow files in the
      <code>.github/workflows</code> directory of your repository.
    </p>
    <h2 id="name"><code>name</code></h2>
    <p>
      The name of your workflow. {% data variables.product.prodname_dotcom %}
      displays the names of your workflows on your repository’s actions page. If
      you omit <code>name</code>, {% data variables.product.prodname_dotcom %}
      sets it to the workflow file path relative to the root of the repository.
    </p>
    <h2 id="on"><code>on</code></h2>
    <p>
      <strong>Required</strong>. The name of the {% data
      variables.product.prodname_dotcom %} event that triggers the workflow. You
      can provide a single event <code>string</code>, <code>array</code> of
      events, <code>array</code> of event <code>types</code>, or an event
      configuration <code>map</code> that schedules a workflow or restricts the
      execution of a workflow to specific files, tags, or branch changes. For a
      list of available events, see “<a
        href="/articles/events-that-trigger-workflows"
        >Events that trigger workflows</a
      >.”
    </p>
    <p>{% data reusables.github-actions.actions-on-examples %}</p>
    <h2 id="on.event_name.types"><code>on.&lt;event_name&gt;.types</code></h2>
    <p>
      Selects the types of activity that will trigger a workflow run. Most
      GitHub events are triggered by more than one type of activity. For
      example, the event for the release resource is triggered when a release is
      <code>published</code>, <code>unpublished</code>, <code>created</code>,
      <code>edited</code>, <code>deleted</code>, or <code>prereleased</code>.
      The <code>types</code> keyword enables you to narrow down activity that
      causes the workflow to run. When only one activity type triggers a webhook
      event, the <code>types</code> keyword is unnecessary.
    </p>
    <p>
      You can use an array of event <code>types</code>. For more information
      about each event and their activity types, see “<a
        href="/articles/events-that-trigger-workflows#webhook-events"
        >Events that trigger workflows</a
      >.”
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Trigger the workflow on pull request activity</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">on:</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="fu">release:</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="co"># Only use the types keyword to narrow down the activity types that will trigger your workflow.</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="fu">types:</span><span class="at"> </span><span class="kw">[</span>published<span class="kw">,</span> created<span class="kw">,</span> edited<span class="kw">]</span></a></code></pre>
    </div>
    <h2 id="on.pushpull_request.branchestags">
      <code>on.&lt;push|pull_request&gt;.&lt;branches|tags&gt;</code>
    </h2>
    <p>
      When using the <code>push</code> and <code>pull_request</code> events, you
      can configure a workflow to run on specific branches or tags. For a
      <code>pull_request</code> event, only branches and tags on the base are
      evaluated. If you define only <code>tags</code> or only
      <code>branches</code>, the workflow won’t run for events affecting the
      undefined Git ref.
    </p>
    <p>
      The <code>branches</code>, <code>branches-ignore</code>,
      <code>tags</code>, and <code>tags-ignore</code> keywords accept glob
      patterns that use characters like <code>*</code>, <code>**</code>,
      <code>+</code>, <code>?</code>, <code>!</code> and others to match more
      than one branch or tag name. If a name contains any of these characters
      and you want a literal match, you need to <em>escape</em> each of these
      special characters with <code>\</code>. For more information about glob
      patterns, see the “<a href="#filter-pattern-cheat-sheet"
        >Filter pattern cheat sheet</a
      >.”
    </p>
    <h3 id="example-including-branches-and-tags">
      Example: Including branches and tags
    </h3>
    <p>
      The patterns defined in <code>branches</code> and <code>tags</code> are
      evaluated against the Git ref’s name. For example, defining the pattern
      <code>mona/octocat</code> in <code>branches</code> will match the
      <code>refs/heads/mona/octocat</code> Git ref. The pattern
      <code>releases/**</code> will match the
      <code>refs/heads/releases/10</code> Git ref.
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">on:</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="fu">push:</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="co"># Sequence of patterns matched against refs/heads</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="fu">branches:</span><span class="at">    </span></a>
<a class="sourceLine" id="cb2-5" title="5">      <span class="co"># Push events on main branch</span></a>
<a class="sourceLine" id="cb2-6" title="6">      <span class="kw">-</span> main</a>
<a class="sourceLine" id="cb2-7" title="7">      <span class="co"># Push events to branches matching refs/heads/mona/octocat</span></a>
<a class="sourceLine" id="cb2-8" title="8">      <span class="kw">-</span> <span class="st">&#39;mona/octocat&#39;</span></a>
<a class="sourceLine" id="cb2-9" title="9">      <span class="co"># Push events to branches matching refs/heads/releases/10</span></a>
<a class="sourceLine" id="cb2-10" title="10">      <span class="kw">-</span> <span class="st">&#39;releases/**&#39;</span></a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="co"># Sequence of patterns matched against refs/tags</span></a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="fu">tags:</span><span class="at">        </span></a>
<a class="sourceLine" id="cb2-13" title="13">      <span class="kw">-</span> v1             <span class="co"># Push events to v1 tag</span></a>
<a class="sourceLine" id="cb2-14" title="14">      <span class="kw">-</span> v1.*           <span class="co"># Push events to v1.0, v1.1, and v1.9 tags</span></a></code></pre>
    </div>
    <h3 id="example-ignoring-branches-and-tags">
      Example: Ignoring branches and tags
    </h3>
    <p>
      Anytime a pattern matches the <code>branches-ignore</code> or
      <code>tags-ignore</code> pattern, the workflow will not run. The patterns
      defined in <code>branches-ignore</code> and <code>tags-ignore</code> are
      evaluated against the Git ref’s name. For example, defining the pattern
      <code>mona/octocat</code> in <code>branches</code> will match the
      <code>refs/heads/mona/octocat</code> Git ref. The pattern
      <code>releases/**-alpha</code> in <code>branches</code> will match the
      <code>refs/releases/beta/3-alpha</code> Git ref.
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb3-1" title="1"><span class="fu">on:</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="fu">push:</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="co"># Sequence of patterns matched against refs/heads</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="fu">branches-ignore:</span></a>
<a class="sourceLine" id="cb3-5" title="5">      <span class="co"># Push events to branches matching refs/heads/mona/octocat</span></a>
<a class="sourceLine" id="cb3-6" title="6">      <span class="kw">-</span> <span class="st">&#39;mona/octocat&#39;</span></a>
<a class="sourceLine" id="cb3-7" title="7">      <span class="co"># Push events to branches matching refs/heads/releases/beta/3-alpha</span></a>
<a class="sourceLine" id="cb3-8" title="8">      <span class="kw">-</span> <span class="st">&#39;releases/**-alpha&#39;</span></a>
<a class="sourceLine" id="cb3-9" title="9">    <span class="co"># Sequence of patterns matched against refs/tags</span></a>
<a class="sourceLine" id="cb3-10" title="10">    <span class="fu">tags-ignore:</span></a>
<a class="sourceLine" id="cb3-11" title="11">      <span class="kw">-</span> v1.*           <span class="co"># Push events to tags v1.0, v1.1, and v1.9</span></a></code></pre>
    </div>
    <h3 id="excluding-branches-and-tags">Excluding branches and tags</h3>
    <p>
      You can use two types of filters to prevent a workflow from running on
      pushes and pull requests to tags and branches. - <code>branches</code> or
      <code>branches-ignore</code> - You cannot use both the
      <code>branches</code> and <code>branches-ignore</code> filters for the
      same event in a workflow. Use the <code>branches</code> filter when you
      need to filter branches for positive matches and exclude branches. Use the
      <code>branches-ignore</code> filter when you only need to exclude branch
      names. - <code>tags</code> or <code>tags-ignore</code> - You cannot use
      both the <code>tags</code> and <code>tags-ignore</code> filters for the
      same event in a workflow. Use the <code>tags</code> filter when you need
      to filter tags for positive matches and exclude tags. Use the
      <code>tags-ignore</code> filter when you only need to exclude tag names.
    </p>
    <h3 id="example-using-positive-and-negative-patterns">
      Example: Using positive and negative patterns
    </h3>
    <p>
      You can exclude <code>tags</code> and <code>branches</code> using the
      <code>!</code> character. The order that you define patterns matters. - A
      matching negative pattern (prefixed with <code>!</code>) after a positive
      match will exclude the Git ref. - A matching positive pattern after a
      negative match will include the Git ref again.
    </p>
    <p>
      The following workflow will run on pushes to <code>releases/10</code> or
      <code>releases/beta/mona</code>, but not on
      <code>releases/10-alpha</code> or
      <code>releases/beta/3-alpha</code> because the negative pattern
      <code>!releases/**-alpha</code> follows the positive pattern.
    </p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb4-1" title="1"><span class="fu">on:</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="fu">push:</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="fu">branches:</span><span class="at">    </span></a>
<a class="sourceLine" id="cb4-4" title="4">      <span class="kw">-</span> <span class="st">&#39;releases/**&#39;</span></a>
<a class="sourceLine" id="cb4-5" title="5">      <span class="kw">-</span> <span class="st">&#39;!releases/**-alpha&#39;</span></a></code></pre>
    </div>
    <h2 id="on.pushpull_request.paths">
      <code>on.&lt;push|pull_request&gt;.paths</code>
    </h2>
    <p>
      When using the <code>push</code> and <code>pull_request</code> events, you
      can configure a workflow to run when at least one file does not match
      <code>paths-ignore</code> or at least one modified file matches the
      configured <code>paths</code>. Path filters are not evaluated for pushes
      to tags.
    </p>
    <p>
      The <code>paths-ignore</code> and <code>paths</code> keywords accept glob
      patterns that use the <code>*</code> and <code>**</code> wildcard
      characters to match more than one path name. For more information, see the
      “<a href="#filter-pattern-cheat-sheet">Filter pattern cheat sheet</a>.”
    </p>
    <h3 id="example-ignoring-paths">Example: Ignoring paths</h3>
    <p>
      When all the path names match patterns in <code>paths-ignore</code>, the
      workflow will not run. {% data variables.product.prodname_dotcom %}
      evaluates patterns defined in <code>paths-ignore</code> against the path
      name. A workflow with the following path filter will only run on
      <code>push</code> events that include at least one file outside the
      <code>docs</code> directory at the root of the repository.
    </p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb5-1" title="1"><span class="fu">on:</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="fu">push:</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="fu">paths-ignore:</span></a>
<a class="sourceLine" id="cb5-4" title="4">      <span class="kw">-</span> <span class="st">&#39;docs/**&#39;</span></a></code></pre>
    </div>
    <h3 id="example-including-paths">Example: Including paths</h3>
    <p>
      If at least one path matches a pattern in the <code>paths</code> filter,
      the workflow runs. To trigger a build anytime you push a JavaScript file,
      you can use a wildcard pattern.
    </p>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb6-1" title="1"><span class="fu">on:</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="fu">push:</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="fu">paths:</span></a>
<a class="sourceLine" id="cb6-4" title="4">      <span class="kw">-</span> <span class="st">&#39;**.js&#39;</span></a></code></pre>
    </div>
    <h3 id="excluding-paths">Excluding paths</h3>
    <p>
      You can exclude paths using two types of filters. You cannot use both of
      these filters for the same event in a workflow. -
      <code>paths-ignore</code> - Use the <code>paths-ignore</code> filter when
      you only need to exclude path names. - <code>paths</code> - Use the
      <code>paths</code> filter when you need to filter paths for positive
      matches and exclude paths.
    </p>
    <h3 id="example-using-positive-and-negative-patterns-1">
      Example: Using positive and negative patterns
    </h3>
    <p>
      You can exclude <code>paths</code> using the <code>!</code> character. The
      order that you define patterns matters: - A matching negative pattern
      (prefixed with <code>!</code>) after a positive match will exclude the
      path. - A matching positive pattern after a negative match will include
      the path again.
    </p>
    <p>
      This example runs anytime the <code>push</code> event includes a file in
      the <code>sub-project</code> directory or its subdirectories, unless the
      file is in the <code>sub-project/docs</code> directory. For example, a
      push that changed <code>sub-project/index.js</code> or
      <code>sub-project/src/index.js</code> will trigger a workflow run, but a
      push changing only <code>sub-project/docs/readme.md</code> will not.
    </p>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb7-1" title="1"><span class="fu">on:</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="fu">push:</span></a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="fu">paths:</span></a>
<a class="sourceLine" id="cb7-4" title="4">      <span class="kw">-</span> <span class="st">&#39;sub-project/**&#39;</span></a>
<a class="sourceLine" id="cb7-5" title="5">      <span class="kw">-</span> <span class="st">&#39;!sub-project/docs/**&#39;</span></a></code></pre>
    </div>
    <h3 id="git-diff-comparisons">Git diff comparisons</h3>
    <p>{% note %}</p>
    <p>
      <strong>Note:</strong> If you push more than 1,000 commits, or if {% data
      variables.product.prodname_dotcom %} does not generate the diff due to a
      timeout (diffs that are too large diffs), the workflow will always run.
    </p>
    <p>{% endnote %}</p>
    <p>
      The filter determines if a workflow should run by evaluating the changed
      files and running them against the <code>paths-ignore</code> or
      <code>paths</code> list. If there are no files changed, the workflow will
      not run.
    </p>
    <p>
      {% data variables.product.prodname_dotcom %} generates the list of changed
      files using two-dot diffs for pushes and three-dot diffs for pull
      requests: - <strong>Pull requests:</strong> Three-dot diffs are a
      comparison between the most recent version of the topic branch and the
      commit where the topic branch was last synced with the base branch. -
      <strong>Pushes to existing branches:</strong> A two-dot diff compares the
      head and base SHAs directly with each other. -
      <strong>Pushes to new branches:</strong> A two-dot diff against the parent
      of the ancestor of the deepest commit pushed.
    </p>
    <p>
      For more information, see “<a
        href="/articles/about-comparing-branches-in-pull-requests"
        >About comparing branches in pull requests</a
      >.”
    </p>
    <h2 id="on.workflow_dispatch.inputs">
      <code>on.workflow_dispatch.inputs</code>
    </h2>
    <p>
      When using <code>workflow_dispatch</code> event, you can optionally
      specify inputs that are passed to the workflow. Workflow dispatch inputs
      are specified with the same format as action inputs. For more information
      about the format see “<a
        href="/actions/creating-actions/metadata-syntax-for-github-actions#inputs"
        >Metadata syntax for GitHub Actions</a
      >.”
    </p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb8-1" title="1"><span class="fu">on:</span><span class="at"> </span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="fu">workflow_dispatch:</span></a>
<a class="sourceLine" id="cb8-3" title="3">    <span class="fu">inputs:</span></a>
<a class="sourceLine" id="cb8-4" title="4">      <span class="fu">logLevel:</span></a>
<a class="sourceLine" id="cb8-5" title="5">        <span class="fu">description:</span><span class="at"> </span><span class="st">&#39;Log level&#39;</span>     </a>
<a class="sourceLine" id="cb8-6" title="6">        <span class="fu">required:</span><span class="at"> </span><span class="ch">true</span></a>
<a class="sourceLine" id="cb8-7" title="7">        <span class="fu">default:</span><span class="at"> </span><span class="st">&#39;warning&#39;</span></a>
<a class="sourceLine" id="cb8-8" title="8">      <span class="fu">tags:</span></a>
<a class="sourceLine" id="cb8-9" title="9">        <span class="fu">description:</span><span class="at"> </span><span class="st">&#39;Test scenario tags&#39;</span></a>
<a class="sourceLine" id="cb8-10" title="10">        <span class="fu">required:</span><span class="at"> </span><span class="ch">false</span></a></code></pre>
    </div>
    <p>
      The triggered workflow receives the inputs in the
      <code>github.event.inputs</code> context. For more information, see “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions#github-context"
        >Context and expression syntax for GitHub Actions</a
      >.”
    </p>
    <h2 id="on.schedule"><code>on.schedule</code></h2>
    <p>{% data reusables.repositories.actions-scheduled-workflow-example %}</p>
    <p>
      For more information about cron syntax, see “<a
        href="/actions/automating-your-workflow-with-github-actions/events-that-trigger-workflows#scheduled-events"
        >Events that trigger workflows</a
      >.”
    </p>
    <p>
      {% ifversion fpt or ghes &gt; 3.1 or ghae-next %} ##
      <code>permissions</code>
    </p>
    <p>
      You can modify the default permissions granted to the
      <code>GITHUB_TOKEN</code>, adding or removing access as required, so that
      you only allow the minimum required access. For more information, see “<a
        href="/actions/reference/authentication-in-a-workflow#permissions-for-the-github_token"
        >Authentication in a workflow</a
      >.”
    </p>
    <p>
      You can use <code>permissions</code> either as a top-level key, to apply
      to all jobs in the workflow, or within specific jobs. When you add the
      <code>permissions</code> key within a specific job, all actions and run
      commands within that job that use the <code>GITHUB_TOKEN</code> gain the
      access rights you specify. For more information, see
      <a href="#jobsjob_idpermissions"
        ><code>jobs.&lt;job_id&gt;.permissions</code></a
      >.
    </p>
    <p>
      {% data reusables.github-actions.github-token-available-permissions %} {%
      data reusables.github-actions.forked-write-permission %}
    </p>
    <h3 id="example">Example</h3>
    <p>
      This example shows permissions being set for the
      <code>GITHUB_TOKEN</code> that will apply to all jobs in the workflow. All
      permissions are granted read access.
    </p>
    <div class="sourceCode" id="cb9">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb9-1" title="1"><span class="fu">name:</span><span class="at"> </span><span class="st">&quot;My workflow&quot;</span></a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="fu">on:</span><span class="at"> </span><span class="kw">[</span> push <span class="kw">]</span></a>
<a class="sourceLine" id="cb9-4" title="4"></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="fu">permissions:</span><span class="at"> read-all</span></a>
<a class="sourceLine" id="cb9-6" title="6"></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb9-8" title="8">  ...</a></code></pre>
    </div>
    <p>{% endif %}</p>
    <h2 id="env"><code>env</code></h2>
    <p>
      A <code>map</code> of environment variables that are available to the
      steps of all jobs in the workflow. You can also set environment variables
      that are only available to the steps of a single job or to a single step.
      For more information, see
      <a href="#jobsjob_idenv"><code>jobs.&lt;job_id&gt;.env</code></a> and
      <a href="#jobsjob_idstepsenv"
        ><code>jobs.&lt;job_id&gt;.steps[*].env</code></a
      >.
    </p>
    <p>{% data reusables.repositories.actions-env-var-note %}</p>
    <h3 id="example-1">Example</h3>
    <div class="sourceCode" id="cb10">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb10-1" title="1"><span class="fu">env:</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="fu">SERVER:</span><span class="at"> production</span></a></code></pre>
    </div>
    <h2 id="defaults"><code>defaults</code></h2>
    <p>
      A <code>map</code> of default settings that will apply to all jobs in the
      workflow. You can also set default settings that are only available to a
      job. For more information, see
      <a href="#jobsjob_iddefaults"><code>jobs.&lt;job_id&gt;.defaults</code></a
      >.
    </p>
    <p>{% data reusables.github-actions.defaults-override %}</p>
    <h2 id="defaults.run"><code>defaults.run</code></h2>
    <p>
      You can provide default <code>shell</code> and
      <code>working-directory</code> options for all
      <a href="#jobsjob_idstepsrun"><code>run</code></a> steps in a workflow.
      You can also set default settings for <code>run</code> that are only
      available to a job. For more information, see
      <a href="#jobsjob_iddefaultsrun"
        ><code>jobs.&lt;job_id&gt;.defaults.run</code></a
      >. You cannot use contexts or expressions in this keyword.
    </p>
    <p>{% data reusables.github-actions.defaults-override %}</p>
    <h3 id="example-2">Example</h3>
    <div class="sourceCode" id="cb11">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb11-1" title="1"><span class="fu">defaults:</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="fu">run:</span></a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="fu">shell:</span><span class="at"> bash</span></a>
<a class="sourceLine" id="cb11-4" title="4">    <span class="fu">working-directory:</span><span class="at"> scripts</span></a></code></pre>
    </div>
    <p>
      {% ifversion fpt or ghae-next or ghes &gt; 3.1 %} ##
      <code>concurrency</code>
    </p>
    <p>{% data reusables.actions.concurrency-beta %}</p>
    <p>
      Concurrency ensures that only a single job or workflow using the same
      concurrency group will run at a time. A concurrency group can be any
      string or expression. The expression can only use the
      <code>github</code> context. For more information about expressions, see
      “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <p>
      You can also specify <code>concurrency</code> at the job level. For more
      information, see
      <a
        href="/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#jobsjob_idconcurrency"
        ><code>jobs.&lt;job_id&gt;.concurrency</code></a
      >.
    </p>
    <p>{% data reusables.actions.actions-group-concurrency %}</p>
    <p>{% endif %} ## <code>jobs</code></p>
    <p>
      A workflow run is made up of one or more jobs. Jobs run in parallel by
      default. To run jobs sequentially, you can define dependencies on other
      jobs using the <code>jobs.&lt;job_id&gt;.needs</code> keyword.
    </p>
    <p>
      Each job runs in a runner environment specified by <code>runs-on</code>.
    </p>
    <p>
      You can run an unlimited number of jobs as long as you are within the
      workflow usage limits. For more information, see “<a
        href="/actions/reference/usage-limits-billing-and-administration"
        >Usage limits and billing</a
      >” for {% data variables.product.prodname_dotcom %}-hosted runners and “<a
        href="/actions/hosting-your-own-runners/about-self-hosted-runners/#usage-limits"
        >About self-hosted runners</a
      >” for self-hosted runner usage limits.
    </p>
    <p>
      If you need to find the unique identifier of a job running in a workflow
      run, you can use the {% data variables.product.prodname_dotcom %} API. For
      more information, see “<a href="/rest/reference/actions#workflow-jobs"
        >Workflow Jobs</a
      >.”
    </p>
    <h2 id="jobs.job_id"><code>jobs.&lt;job_id&gt;</code></h2>
    <p>
      Each job must have an id to associate with the job. The key
      <code>job_id</code> is a string and its value is a map of the job’s
      configuration data. You must replace <code>&lt;job_id&gt;</code> with a
      string that is unique to the <code>jobs</code> object. The
      <code>&lt;job_id&gt;</code> must start with a letter or <code>_</code> and
      contain only alphanumeric characters, <code>-</code>, or <code>_</code>.
    </p>
    <h3 id="example-3">Example</h3>
    <div class="sourceCode" id="cb12">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb12-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb12-3" title="3">    <span class="fu">name:</span><span class="at"> My first job</span></a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="fu">my_second_job:</span></a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="fu">name:</span><span class="at"> My second job</span></a></code></pre>
    </div>
    <h2 id="jobs.job_id.name"><code>jobs.&lt;job_id&gt;.name</code></h2>
    <p>
      The name of the job displayed on {% data variables.product.prodname_dotcom
      %}.
    </p>
    <h2 id="jobs.job_id.needs"><code>jobs.&lt;job_id&gt;.needs</code></h2>
    <p>
      Identifies any jobs that must complete successfully before this job will
      run. It can be a string or array of strings. If a job fails, all jobs that
      need it are skipped unless the jobs use a conditional expression that
      causes the job to continue.
    </p>
    <h3 id="example-requiring-dependent-jobs-to-be-successful">
      Example: Requiring dependent jobs to be successful
    </h3>
    <div class="sourceCode" id="cb13">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb13-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="fu">job1:</span></a>
<a class="sourceLine" id="cb13-3" title="3">  <span class="fu">job2:</span></a>
<a class="sourceLine" id="cb13-4" title="4">    <span class="fu">needs:</span><span class="at"> job1</span></a>
<a class="sourceLine" id="cb13-5" title="5">  <span class="fu">job3:</span></a>
<a class="sourceLine" id="cb13-6" title="6">    <span class="fu">needs:</span><span class="at"> </span><span class="kw">[</span>job1<span class="kw">,</span> job2<span class="kw">]</span></a></code></pre>
    </div>
    <p>
      In this example, <code>job1</code> must complete successfully before
      <code>job2</code> begins, and <code>job3</code> waits for both
      <code>job1</code> and <code>job2</code> to complete.
    </p>
    <p>The jobs in this example run sequentially:</p>
    <ol type="1">
      <li><code>job1</code></li>
      <li><code>job2</code></li>
      <li><code>job3</code></li>
    </ol>
    <h3 id="example-not-requiring-dependent-jobs-to-be-successful">
      Example: Not requiring dependent jobs to be successful
    </h3>
    <div class="sourceCode" id="cb14">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb14-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="fu">job1:</span></a>
<a class="sourceLine" id="cb14-3" title="3">  <span class="fu">job2:</span></a>
<a class="sourceLine" id="cb14-4" title="4">    <span class="fu">needs:</span><span class="at"> job1</span></a>
<a class="sourceLine" id="cb14-5" title="5">  <span class="fu">job3:</span></a>
<a class="sourceLine" id="cb14-6" title="6">    <span class="fu">if:</span><span class="at"> always()</span></a>
<a class="sourceLine" id="cb14-7" title="7">    <span class="fu">needs:</span><span class="at"> </span><span class="kw">[</span>job1<span class="kw">,</span> job2<span class="kw">]</span></a></code></pre>
    </div>
    <p>
      In this example, <code>job3</code> uses the
      <code>always()</code> conditional expression so that it always runs after
      <code>job1</code> and <code>job2</code> have completed, regardless of
      whether they were successful. For more information, see “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions#job-status-check-functions"
        >Context and expression syntax</a
      >.”
    </p>
    <h2 id="jobs.job_id.runs-on"><code>jobs.&lt;job_id&gt;.runs-on</code></h2>
    <p>
      <strong>Required</strong>. The type of machine to run the job on. The
      machine can be either a {% data variables.product.prodname_dotcom
      %}-hosted runner or a self-hosted runner.
    </p>
    <p>{% ifversion ghae %} ### {% data variables.actions.hosted_runner %}s</p>
    <p>
      If you use an {% data variables.actions.hosted_runner %}, each job runs in
      a fresh instance of a virtual environment specified by
      <code>runs-on</code>.
    </p>
    <h4 id="example-4">Example</h4>
    <div class="sourceCode" id="cb15">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb15-1" title="1"><span class="fu">runs-on:</span><span class="at"> </span><span class="kw">[</span>AE-runner-for-CI<span class="kw">]</span></a></code></pre>
    </div>
    <p>
      For more information, see “<a
        href="/actions/using-github-hosted-runners/about-ae-hosted-runners"
        >About {% data variables.actions.hosted_runner %}s</a
      >.”
    </p>
    <p>
      {% else %} {% data reusables.actions.enterprise-github-hosted-runners %}
    </p>
    <h3 id="data-variables.product.prodname_dotcom--hosted-runners">
      {% data variables.product.prodname_dotcom %}-hosted runners
    </h3>
    <p>
      If you use a {% data variables.product.prodname_dotcom %}-hosted runner,
      each job runs in a fresh instance of a virtual environment specified by
      <code>runs-on</code>.
    </p>
    <p>
      Available {% data variables.product.prodname_dotcom %}-hosted runner types
      are:
    </p>
    <p>{% data reusables.github-actions.supported-github-runners %}</p>
    <p>{% data reusables.github-actions.macos-runner-preview %}</p>
    <h4 id="example-5">Example</h4>
    <div class="sourceCode" id="cb16">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb16-1" title="1"><span class="fu">runs-on:</span><span class="at"> ubuntu-latest</span></a></code></pre>
    </div>
    <p>
      For more information, see “<a
        href="/github/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners"
        >Virtual environments for {% data variables.product.prodname_dotcom
        %}-hosted runners</a
      >.” {% endif %}
    </p>
    <h3 id="self-hosted-runners">Self-hosted runners</h3>
    <p>{% data reusables.actions.ae-self-hosted-runners-notice %}</p>
    <p>{% data reusables.github-actions.self-hosted-runner-labels-runs-on %}</p>
    <h4 id="example-6">Example</h4>
    <div class="sourceCode" id="cb17">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb17-1" title="1"><span class="fu">runs-on:</span><span class="at"> </span><span class="kw">[</span>self-hosted<span class="kw">,</span> linux<span class="kw">]</span></a></code></pre>
    </div>
    <p>
      For more information, see “<a
        href="/github/automating-your-workflow-with-github-actions/about-self-hosted-runners"
        >About self-hosted runners</a
      >” and “<a
        href="/github/automating-your-workflow-with-github-actions/using-self-hosted-runners-in-a-workflow"
        >Using self-hosted runners in a workflow</a
      >.”
    </p>
    <p>
      {% ifversion fpt or ghes &gt; 3.1 or ghae-next %} ##
      <code>jobs.&lt;job_id&gt;.permissions</code>
    </p>
    <p>
      You can modify the default permissions granted to the
      <code>GITHUB_TOKEN</code>, adding or removing access as required, so that
      you only allow the minimum required access. For more information, see “<a
        href="/actions/reference/authentication-in-a-workflow#permissions-for-the-github_token"
        >Authentication in a workflow</a
      >.”
    </p>
    <p>
      By specifying the permission within a job definition, you can configure a
      different set of permissions for the <code>GITHUB_TOKEN</code> for each
      job, if required. Alternatively, you can specify the permissions for all
      jobs in the workflow. For information on defining permissions at the
      workflow level, see <a href="#permissions"><code>permissions</code></a
      >.
    </p>
    <p>
      {% data reusables.github-actions.github-token-available-permissions %} {%
      data reusables.github-actions.forked-write-permission %}
    </p>
    <h3 id="example-7">Example</h3>
    <p>
      This example shows permissions being set for the
      <code>GITHUB_TOKEN</code> that will only apply to the job named
      <code>stale</code>. Write access is granted for the
      <code>issues</code> and <code>pull-requests</code> scopes. All other
      scopes will have no access.
    </p>
    <div class="sourceCode" id="cb18">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb18-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="fu">stale:</span></a>
<a class="sourceLine" id="cb18-3" title="3">    <span class="fu">runs-on:</span><span class="at"> ubuntu-latest</span></a>
<a class="sourceLine" id="cb18-4" title="4"></a>
<a class="sourceLine" id="cb18-5" title="5">    <span class="fu">permissions:</span></a>
<a class="sourceLine" id="cb18-6" title="6">      <span class="fu">issues:</span><span class="at"> write</span></a>
<a class="sourceLine" id="cb18-7" title="7">      <span class="fu">pull-requests:</span><span class="at"> write</span></a>
<a class="sourceLine" id="cb18-8" title="8"></a>
<a class="sourceLine" id="cb18-9" title="9">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb18-10" title="10">      <span class="kw">-</span> <span class="fu">uses:</span><span class="at"> actions/stale@v3</span></a></code></pre>
    </div>
    <p>{% endif %}</p>
    <p>
      {% ifversion fpt or ghes &gt; 3.0 or ghae %} ##
      <code>jobs.&lt;job_id&gt;.environment</code>
    </p>
    <p>
      The environment that the job references. All environment protection rules
      must pass before a job referencing the environment is sent to a runner.
      For more information, see “<a href="/actions/reference/environments"
        >Environments</a
      >.”
    </p>
    <p>
      You can provide the environment as only the environment <code>name</code>,
      or as an environment object with the <code>name</code> and
      <code>url</code>. The URL maps to <code>environment_url</code> in the
      deployments API. For more information about the deployments API, see “<a
        href="/rest/reference/repos#deployments"
        >Deployments</a
      >.”
    </p>
    <h4 id="example-using-a-single-environment-name">
      Example using a single environment name
    </h4>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb19">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb19-1" title="1"><span class="fu">environment:</span><span class="at"> staging_environment</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <h4 id="example-using-environment-name-and-url">
      Example using environment name and URL
    </h4>
    <div class="sourceCode" id="cb20">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb20-1" title="1"><span class="fu">environment:</span></a>
<a class="sourceLine" id="cb20-2" title="2">  <span class="fu">name:</span><span class="at"> production_environment</span></a>
<a class="sourceLine" id="cb20-3" title="3">  <span class="fu">url:</span><span class="at"> https://github.com</span></a></code></pre>
    </div>
    <p>
      The URL can be an expression and can use any context except for the
      <code>secrets</code> context. For more information about expressions, see
      “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <h3 id="example-8">Example</h3>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb21">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb21-1" title="1"><span class="fu">environment:</span></a>
<a class="sourceLine" id="cb21-2" title="2">  <span class="fu">name:</span><span class="at"> production_environment</span></a>
<a class="sourceLine" id="cb21-3" title="3">  <span class="fu">url:</span><span class="at"> ${{ steps.step_id.outputs.url_output }}</span></a></code></pre>
    </div>
    <p>{% endraw %} {% endif %}</p>
    <p>
      {% ifversion fpt or ghae-next or ghes &gt; 3.1 %} ##
      <code>jobs.&lt;job_id&gt;.concurrency</code>
    </p>
    <p>{% data reusables.actions.concurrency-beta %}</p>
    <p>{% note %}</p>
    <p>
      <strong>Note:</strong> When concurrency is specified at the job level,
      order is not guaranteed for jobs or runs that queue within 5 minutes of
      each other.
    </p>
    <p>{% endnote %}</p>
    <p>
      Concurrency ensures that only a single job or workflow using the same
      concurrency group will run at a time. A concurrency group can be any
      string or expression. The expression can use any context except for the
      <code>secrets</code> context. For more information about expressions, see
      “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <p>
      You can also specify <code>concurrency</code> at the workflow level. For
      more information, see
      <a
        href="/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#concurrency"
        ><code>concurrency</code></a
      >.
    </p>
    <p>{% data reusables.actions.actions-group-concurrency %}</p>
    <p>{% endif %} ## <code>jobs.&lt;job_id&gt;.outputs</code></p>
    <p>
      A <code>map</code> of outputs for a job. Job outputs are available to all
      downstream jobs that depend on this job. For more information on defining
      job dependencies, see
      <a href="#jobsjob_idneeds"><code>jobs.&lt;job_id&gt;.needs</code></a
      >.
    </p>
    <p>
      Job outputs are strings, and job outputs containing expressions are
      evaluated on the runner at the end of each job. Outputs containing secrets
      are redacted on the runner and not sent to {% data
      variables.product.prodname_actions %}.
    </p>
    <p>
      To use job outputs in a dependent job, you can use the
      <code>needs</code> context. For more information, see “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions#needs-context"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <h3 id="example-9">Example</h3>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb22">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb22-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="fu">job1:</span></a>
<a class="sourceLine" id="cb22-3" title="3">    <span class="fu">runs-on:</span><span class="at"> ubuntu-latest</span></a>
<a class="sourceLine" id="cb22-4" title="4">    <span class="co"># Map a step output to a job output</span></a>
<a class="sourceLine" id="cb22-5" title="5">    <span class="fu">outputs:</span></a>
<a class="sourceLine" id="cb22-6" title="6">      <span class="fu">output1:</span><span class="at"> ${{ steps.step1.outputs.test }}</span></a>
<a class="sourceLine" id="cb22-7" title="7">      <span class="fu">output2:</span><span class="at"> ${{ steps.step2.outputs.test }}</span></a>
<a class="sourceLine" id="cb22-8" title="8">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb22-9" title="9">      <span class="kw">-</span> <span class="fu">id:</span><span class="at"> step1</span></a>
<a class="sourceLine" id="cb22-10" title="10">        <span class="fu">run:</span><span class="at"> echo &quot;::set-output name=test::hello&quot;</span></a>
<a class="sourceLine" id="cb22-11" title="11">      <span class="kw">-</span> <span class="fu">id:</span><span class="at"> step2</span></a>
<a class="sourceLine" id="cb22-12" title="12">        <span class="fu">run:</span><span class="at"> echo &quot;::set-output name=test::world&quot;</span></a>
<a class="sourceLine" id="cb22-13" title="13">  <span class="fu">job2:</span></a>
<a class="sourceLine" id="cb22-14" title="14">    <span class="fu">runs-on:</span><span class="at"> ubuntu-latest</span></a>
<a class="sourceLine" id="cb22-15" title="15">    <span class="fu">needs:</span><span class="at"> job1</span></a>
<a class="sourceLine" id="cb22-16" title="16">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb22-17" title="17">      <span class="kw">-</span> <span class="fu">run:</span><span class="at"> echo ${{needs.job1.outputs.output1}} ${{needs.job1.outputs.output2}}</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <h2 id="jobs.job_id.env"><code>jobs.&lt;job_id&gt;.env</code></h2>
    <p>
      A <code>map</code> of environment variables that are available to all
      steps in the job. You can also set environment variables for the entire
      workflow or an individual step. For more information, see
      <a href="#env"><code>env</code></a> and
      <a href="#jobsjob_idstepsenv"
        ><code>jobs.&lt;job_id&gt;.steps[*].env</code></a
      >.
    </p>
    <p>{% data reusables.repositories.actions-env-var-note %}</p>
    <h3 id="example-10">Example</h3>
    <div class="sourceCode" id="cb23">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb23-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb23-2" title="2">  <span class="fu">job1:</span></a>
<a class="sourceLine" id="cb23-3" title="3">    <span class="fu">env:</span></a>
<a class="sourceLine" id="cb23-4" title="4">      <span class="fu">FIRST_NAME:</span><span class="at"> Mona</span></a></code></pre>
    </div>
    <h2 id="jobs.job_id.defaults"><code>jobs.&lt;job_id&gt;.defaults</code></h2>
    <p>
      A <code>map</code> of default settings that will apply to all steps in the
      job. You can also set default settings for the entire workflow. For more
      information, see <a href="#defaults"><code>defaults</code></a
      >.
    </p>
    <p>{% data reusables.github-actions.defaults-override %}</p>
    <h2 id="jobs.job_id.defaults.run">
      <code>jobs.&lt;job_id&gt;.defaults.run</code>
    </h2>
    <p>
      Provide default <code>shell</code> and <code>working-directory</code> to
      all <code>run</code> steps in the job. Context and expression are not
      allowed in this section.
    </p>
    <p>
      You can provide default <code>shell</code> and
      <code>working-directory</code> options for all
      <a href="#jobsjob_idstepsrun"><code>run</code></a> steps in a job. You can
      also set default settings for <code>run</code> for the entire workflow.
      For more information, see
      <a href="#defaultsrun"><code>jobs.defaults.run</code></a
      >. You cannot use contexts or expressions in this keyword.
    </p>
    <p>{% data reusables.github-actions.defaults-override %}</p>
    <h3 id="example-11">Example</h3>
    <div class="sourceCode" id="cb24">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb24-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb24-2" title="2">  <span class="fu">job1:</span></a>
<a class="sourceLine" id="cb24-3" title="3">    <span class="fu">runs-on:</span><span class="at"> ubuntu-latest</span></a>
<a class="sourceLine" id="cb24-4" title="4">    <span class="fu">defaults:</span></a>
<a class="sourceLine" id="cb24-5" title="5">      <span class="fu">run:</span></a>
<a class="sourceLine" id="cb24-6" title="6">        <span class="fu">shell:</span><span class="at"> bash</span></a>
<a class="sourceLine" id="cb24-7" title="7">        <span class="fu">working-directory:</span><span class="at"> scripts</span></a></code></pre>
    </div>
    <h2 id="jobs.job_id.if"><code>jobs.&lt;job_id&gt;.if</code></h2>
    <p>
      You can use the <code>if</code> conditional to prevent a job from running
      unless a condition is met. You can use any supported context and
      expression to create a conditional.
    </p>
    <p>
      {% data reusables.github-actions.expression-syntax-if %} For more
      information, see “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <h2 id="jobs.job_id.steps"><code>jobs.&lt;job_id&gt;.steps</code></h2>
    <p>
      A job contains a sequence of tasks called <code>steps</code>. Steps can
      run commands, run setup tasks, or run an action in your repository, a
      public repository, or an action published in a Docker registry. Not all
      steps run actions, but all actions run as a step. Each step runs in its
      own process in the runner environment and has access to the workspace and
      filesystem. Because steps run in their own process, changes to environment
      variables are not preserved between steps. {% data
      variables.product.prodname_dotcom %} provides built-in steps to set up and
      complete a job.
    </p>
    <p>
      You can run an unlimited number of steps as long as you are within the
      workflow usage limits. For more information, see “<a
        href="/actions/reference/usage-limits-billing-and-administration"
        >Usage limits and billing</a
      >” for {% data variables.product.prodname_dotcom %}-hosted runners and “<a
        href="/actions/hosting-your-own-runners/about-self-hosted-runners/#usage-limits"
        >About self-hosted runners</a
      >” for self-hosted runner usage limits.
    </p>
    <h3 id="example-12">Example</h3>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb25">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb25-1" title="1"><span class="fu">name:</span><span class="at"> Greeting from Mona</span></a>
<a class="sourceLine" id="cb25-2" title="2"></a>
<a class="sourceLine" id="cb25-3" title="3"><span class="fu">on:</span><span class="at"> push</span></a>
<a class="sourceLine" id="cb25-4" title="4"></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb25-6" title="6">  <span class="fu">my-job:</span></a>
<a class="sourceLine" id="cb25-7" title="7">    <span class="fu">name:</span><span class="at"> My Job</span></a>
<a class="sourceLine" id="cb25-8" title="8">    <span class="fu">runs-on:</span><span class="at"> ubuntu-latest</span></a>
<a class="sourceLine" id="cb25-9" title="9">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb25-10" title="10">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Print a greeting</span></a>
<a class="sourceLine" id="cb25-11" title="11">        <span class="fu">env:</span></a>
<a class="sourceLine" id="cb25-12" title="12">          <span class="fu">MY_VAR:</span><span class="at"> Hi there! My name is</span></a>
<a class="sourceLine" id="cb25-13" title="13">          <span class="fu">FIRST_NAME:</span><span class="at"> Mona</span></a>
<a class="sourceLine" id="cb25-14" title="14">          <span class="fu">MIDDLE_NAME:</span><span class="at"> The</span></a>
<a class="sourceLine" id="cb25-15" title="15">          <span class="fu">LAST_NAME:</span><span class="at"> Octocat</span></a>
<a class="sourceLine" id="cb25-16" title="16"><span class="fu">        run:</span> <span class="st">|</span></a>
<a class="sourceLine" id="cb25-17" title="17">          echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME.</a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <h2 id="jobs.job_id.steps.id">
      <code>jobs.&lt;job_id&gt;.steps[*].id</code>
    </h2>
    <p>
      A unique identifier for the step. You can use the <code>id</code> to
      reference the step in contexts. For more information, see “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <h2 id="jobs.job_id.steps.if">
      <code>jobs.&lt;job_id&gt;.steps[*].if</code>
    </h2>
    <p>
      You can use the <code>if</code> conditional to prevent a step from running
      unless a condition is met. You can use any supported context and
      expression to create a conditional.
    </p>
    <p>
      {% data reusables.github-actions.expression-syntax-if %} For more
      information, see “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <h3 id="example-using-contexts">Example: Using contexts</h3>
    <p>
      This step only runs when the event type is a <code>pull_request</code> and
      the event action is <code>unassigned</code>.
    </p>
    <div class="sourceCode" id="cb26">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb26-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb26-2" title="2"> <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first step</span></a>
<a class="sourceLine" id="cb26-3" title="3">   <span class="fu">if:</span><span class="at"> </span><span class="kw">{</span>% raw %<span class="kw">}</span><span class="at">${{ github.event_name == &#39;pull_request&#39; &amp;&amp; github.event.action == &#39;unassigned&#39; }}{% endraw %}</span></a>
<a class="sourceLine" id="cb26-4" title="4">   <span class="fu">run:</span><span class="at"> echo This event is a pull request that had an assignee removed.</span></a></code></pre>
    </div>
    <h3 id="example-using-status-check-functions">
      Example: Using status check functions
    </h3>
    <p>
      The <code>my backup step</code> only runs when the previous step of a job
      fails. For more information, see “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions#job-status-check-functions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <div class="sourceCode" id="cb27">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb27-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb27-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first step</span></a>
<a class="sourceLine" id="cb27-3" title="3">    <span class="fu">uses:</span><span class="at"> octo-org/action-name@main</span></a>
<a class="sourceLine" id="cb27-4" title="4">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My backup step</span></a>
<a class="sourceLine" id="cb27-5" title="5">    <span class="fu">if:</span><span class="at"> </span><span class="kw">{</span>% raw %<span class="kw">}</span><span class="at">${{ failure() }}{% endraw %}</span></a>
<a class="sourceLine" id="cb27-6" title="6">    <span class="fu">uses:</span><span class="at"> actions/heroku@1.0.0</span></a></code></pre>
    </div>
    <h2 id="jobs.job_id.steps.name">
      <code>jobs.&lt;job_id&gt;.steps[*].name</code>
    </h2>
    <p>
      A name for your step to display on {% data
      variables.product.prodname_dotcom %}.
    </p>
    <h2 id="jobs.job_id.steps.uses">
      <code>jobs.&lt;job_id&gt;.steps[*].uses</code>
    </h2>
    <p>
      Selects an action to run as part of a step in your job. An action is a
      reusable unit of code. You can use an action defined in the same
      repository as the workflow, a public repository, or in a
      <a href="https://hub.docker.com/">published Docker container image</a>.
    </p>
    <p>
      We strongly recommend that you include the version of the action you are
      using by specifying a Git ref, SHA, or Docker tag number. If you don’t
      specify a version, it could break your workflows or cause unexpected
      behavior when the action owner publishes an update. - Using the commit SHA
      of a released action version is the safest for stability and security. -
      Using the specific major action version allows you to receive critical
      fixes and security patches while still maintaining compatibility. It also
      assures that your workflow should still work. - Using the default branch
      of an action may be convenient, but if someone releases a new major
      version with a breaking change, your workflow could break.
    </p>
    <p>
      Some actions require inputs that you must set using the
      <a href="#jobsjob_idstepswith"><code>with</code></a> keyword. Review the
      action’s README file to determine the inputs required.
    </p>
    <p>
      Actions are either JavaScript files or Docker containers. If the action
      you’re using is a Docker container you must run the job in a Linux
      environment. For more details, see
      <a href="#jobsjob_idruns-on"><code>runs-on</code></a
      >.
    </p>
    <h3 id="example-using-versioned-actions">
      Example: Using versioned actions
    </h3>
    <div class="sourceCode" id="cb28">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb28-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb28-2" title="2">  <span class="co"># Reference a specific commit</span></a>
<a class="sourceLine" id="cb28-3" title="3">  <span class="kw">-</span> <span class="fu">uses:</span><span class="at"> actions/checkout@a81bbbf8298c0fa03ea29cdc473d45769f953675</span></a>
<a class="sourceLine" id="cb28-4" title="4">  <span class="co"># Reference the major version of a release</span></a>
<a class="sourceLine" id="cb28-5" title="5">  <span class="kw">-</span> <span class="fu">uses:</span><span class="at"> actions/checkout@v2</span></a>
<a class="sourceLine" id="cb28-6" title="6">  <span class="co"># Reference a specific version</span></a>
<a class="sourceLine" id="cb28-7" title="7">  <span class="kw">-</span> <span class="fu">uses:</span><span class="at"> actions/checkout@v2.2.0</span></a>
<a class="sourceLine" id="cb28-8" title="8">  <span class="co"># Reference a branch</span></a>
<a class="sourceLine" id="cb28-9" title="9">  <span class="kw">-</span> <span class="fu">uses:</span><span class="at"> actions/checkout@main</span></a></code></pre>
    </div>
    <h3 id="example-using-a-public-action">Example: Using a public action</h3>
    <p><code>{owner}/{repo}@{ref}</code></p>
    <p>
      You can specific branch, ref, or SHA in a public {% data
      variables.product.prodname_dotcom %} repository.
    </p>
    <div class="sourceCode" id="cb29">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb29-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb29-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb29-3" title="3">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb29-4" title="4">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first step</span></a>
<a class="sourceLine" id="cb29-5" title="5">        <span class="co"># Uses the default branch of a public repository</span></a>
<a class="sourceLine" id="cb29-6" title="6">        <span class="fu">uses:</span><span class="at"> actions/heroku@main</span></a>
<a class="sourceLine" id="cb29-7" title="7">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My second step</span></a>
<a class="sourceLine" id="cb29-8" title="8">        <span class="co"># Uses a specific version tag of a public repository</span></a>
<a class="sourceLine" id="cb29-9" title="9">        <span class="fu">uses:</span><span class="at"> actions/aws@v2.0.1</span></a></code></pre>
    </div>
    <h3 id="example-using-a-public-action-in-a-subdirectory">
      Example: Using a public action in a subdirectory
    </h3>
    <p><code>{owner}/{repo}/{path}@{ref}</code></p>
    <p>
      A subdirectory in a public {% data variables.product.prodname_dotcom %}
      repository at a specific branch, ref, or SHA.
    </p>
    <div class="sourceCode" id="cb30">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb30-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb30-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb30-3" title="3">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb30-4" title="4">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first step</span></a>
<a class="sourceLine" id="cb30-5" title="5">        <span class="fu">uses:</span><span class="at"> actions/aws/ec2@main</span></a></code></pre>
    </div>
    <h3 id="example-using-an-action-in-the-same-repository-as-the-workflow">
      Example: Using an action in the same repository as the workflow
    </h3>
    <p><code>./path/to/dir</code></p>
    <p>
      The path to the directory that contains the action in your workflow’s
      repository. You must check out your repository before using the action.
    </p>
    <div class="sourceCode" id="cb31">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb31-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb31-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb31-3" title="3">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb31-4" title="4">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Check out repository</span></a>
<a class="sourceLine" id="cb31-5" title="5">        <span class="fu">uses:</span><span class="at"> actions/checkout@v2</span></a>
<a class="sourceLine" id="cb31-6" title="6">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Use local my-action</span></a>
<a class="sourceLine" id="cb31-7" title="7">        <span class="fu">uses:</span><span class="at"> ./.github/actions/my-action</span></a></code></pre>
    </div>
    <h3 id="example-using-a-docker-hub-action">
      Example: Using a Docker Hub action
    </h3>
    <p><code>docker://{image}:{tag}</code></p>
    <p>
      A Docker image published on
      <a href="https://hub.docker.com/">Docker Hub</a>.
    </p>
    <div class="sourceCode" id="cb32">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb32-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb32-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb32-3" title="3">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb32-4" title="4">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first step</span></a>
<a class="sourceLine" id="cb32-5" title="5">        <span class="fu">uses:</span><span class="at"> docker://alpine:3.8</span></a></code></pre>
    </div>
    <p>
      {% ifversion fpt %} #### Example: Using the {% data
      variables.product.prodname_registry %} {% data
      variables.product.prodname_container_registry %}
    </p>
    <p><code>docker://{host}/{image}:{tag}</code></p>
    <p>
      A Docker image in the {% data variables.product.prodname_registry %} {%
      data variables.product.prodname_container_registry %}.
    </p>
    <div class="sourceCode" id="cb33">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb33-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb33-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb33-3" title="3">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb33-4" title="4">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first step</span></a>
<a class="sourceLine" id="cb33-5" title="5">        <span class="fu">uses:</span><span class="at"> docker://ghcr.io/OWNER/IMAGE_NAME</span></a></code></pre>
    </div>
    <p>{% endif %} #### Example: Using a Docker public registry action</p>
    <p><code>docker://{host}/{image}:{tag}</code></p>
    <p>
      A Docker image in a public registry. This example uses the Google
      Container Registry at <code>gcr.io</code>.
    </p>
    <div class="sourceCode" id="cb34">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb34-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb34-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb34-3" title="3">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb34-4" title="4">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first step</span></a>
<a class="sourceLine" id="cb34-5" title="5">        <span class="fu">uses:</span><span class="at"> docker://gcr.io/cloud-builders/gradle</span></a></code></pre>
    </div>
    <h3
      id="example-using-an-action-inside-a-different-private-repository-than-the-workflow"
    >
      Example: Using an action inside a different private repository than the
      workflow
    </h3>
    <p>
      Your workflow must checkout the private repository and reference the
      action locally. Generate a personal access token and add the token as an
      encrypted secret. For more information, see “<a
        href="/github/authenticating-to-github/creating-a-personal-access-token"
        >Creating a personal access token</a
      >” and “<a href="/actions/reference/encrypted-secrets"
        >Encrypted secrets</a
      >.”
    </p>
    <p>
      Replace <code>PERSONAL_ACCESS_TOKEN</code> in the example with the name of
      your secret.
    </p>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb35">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb35-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb35-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb35-3" title="3">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb35-4" title="4">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Check out repository</span></a>
<a class="sourceLine" id="cb35-5" title="5">        <span class="fu">uses:</span><span class="at"> actions/checkout@v2</span></a>
<a class="sourceLine" id="cb35-6" title="6">        <span class="fu">with:</span></a>
<a class="sourceLine" id="cb35-7" title="7">          <span class="fu">repository:</span><span class="at"> octocat/my-private-repo</span></a>
<a class="sourceLine" id="cb35-8" title="8">          <span class="fu">ref:</span><span class="at"> v1.0</span></a>
<a class="sourceLine" id="cb35-9" title="9">          <span class="fu">token:</span><span class="at"> ${{ secrets.PERSONAL_ACCESS_TOKEN }}</span></a>
<a class="sourceLine" id="cb35-10" title="10">          <span class="fu">path:</span><span class="at"> ./.github/actions/my-private-repo</span></a>
<a class="sourceLine" id="cb35-11" title="11">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Run my action</span></a>
<a class="sourceLine" id="cb35-12" title="12">        <span class="fu">uses:</span><span class="at"> ./.github/actions/my-private-repo/my-action</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <h2 id="jobs.job_id.steps.run">
      <code>jobs.&lt;job_id&gt;.steps[*].run</code>
    </h2>
    <p>
      Runs command-line programs using the operating system’s shell. If you do
      not provide a <code>name</code>, the step name will default to the text
      specified in the <code>run</code> command.
    </p>
    <p>
      Commands run using non-login shells by default. You can choose a different
      shell and customize the shell used to run commands. For more information,
      see “<a href="#using-a-specific-shell">Using a specific shell</a>.”
    </p>
    <p>
      Each <code>run</code> keyword represents a new process and shell in the
      runner environment. When you provide multi-line commands, each line runs
      in the same shell. For example:
    </p>
    <ul>
      <li>
        <p>A single-line command:</p>
        <div class="sourceCode" id="cb36">
          <pre
            class="sourceCode yaml"
          ><code class="sourceCode yaml"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">-</span> <span class="fu">name:</span><span class="at"> Install Dependencies</span></a>
<a class="sourceLine" id="cb36-2" title="2">  <span class="fu">run:</span><span class="at"> npm install</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>A multi-line command:</p>
        <div class="sourceCode" id="cb37">
          <pre
            class="sourceCode yaml"
          ><code class="sourceCode yaml"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">-</span> <span class="fu">name:</span><span class="at"> Clean install dependencies and build</span></a>
<a class="sourceLine" id="cb37-2" title="2"><span class="fu">  run:</span> <span class="st">|</span></a>
<a class="sourceLine" id="cb37-3" title="3">    npm ci</a>
<a class="sourceLine" id="cb37-4" title="4">    npm run build</a></code></pre>
        </div>
      </li>
    </ul>
    <p>
      Using the <code>working-directory</code> keyword, you can specify the
      working directory of where to run the command.
    </p>
    <div class="sourceCode" id="cb38">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">-</span> <span class="fu">name:</span><span class="at"> Clean temp directory</span></a>
<a class="sourceLine" id="cb38-2" title="2">  <span class="fu">run:</span><span class="at"> rm -rf *</span></a>
<a class="sourceLine" id="cb38-3" title="3">  <span class="fu">working-directory:</span><span class="at"> ./temp</span></a></code></pre>
    </div>
    <h3 id="using-a-specific-shell">Using a specific shell</h3>
    <p>
      You can override the default shell settings in the runner’s operating
      system using the <code>shell</code> keyword. You can use built-in
      <code>shell</code> keywords, or you can define a custom set of shell
      options. The shell command that is run internally executes a temporary
      file that contains the commands specifed in the <code>run</code> keyword.
    </p>
    <table style="width: 100%">
      <colgroup>
        <col style="width: 26%" />
        <col style="width: 25%" />
        <col style="width: 17%" />
        <col style="width: 31%" />
      </colgroup>
      <thead>
        <tr class="header">
          <th>Supported platform</th>
          <th><code>shell</code> parameter</th>
          <th>Description</th>
          <th>Command run internally</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td>All</td>
          <td><code>bash</code></td>
          <td>
            The default shell on non-Windows platforms with a fallback to
            <code>sh</code>. When specifying a bash shell on Windows, the bash
            shell included with Git for Windows is used.
          </td>
          <td><code>bash --noprofile --norc -eo pipefail {0}</code></td>
        </tr>
        <tr class="even">
          <td>All</td>
          <td><code>pwsh</code></td>
          <td>
            The PowerShell Core. {% data variables.product.prodname_dotcom %}
            appends the extension <code>.ps1</code> to your script name.
          </td>
          <td><code>pwsh -command ". '{0}'"</code></td>
        </tr>
        <tr class="odd">
          <td>All</td>
          <td><code>python</code></td>
          <td>Executes the python command.</td>
          <td><code>python {0}</code></td>
        </tr>
        <tr class="even">
          <td>Linux / macOS</td>
          <td><code>sh</code></td>
          <td>
            The fallback behavior for non-Windows platforms if no shell is
            provided and <code>bash</code> is not found in the path.
          </td>
          <td><code>sh -e {0}</code></td>
        </tr>
        <tr class="odd">
          <td>Windows</td>
          <td><code>cmd</code></td>
          <td>
            {% data variables.product.prodname_dotcom %} appends the extension
            <code>.cmd</code> to your script name and substitutes for
            <code>{0}</code>.
          </td>
          <td><code>%ComSpec% /D /E:ON /V:OFF /S /C "CALL "{0}""</code>.</td>
        </tr>
        <tr class="even">
          <td>Windows</td>
          <td><code>pwsh</code></td>
          <td>
            This is the default shell used on Windows. The PowerShell Core. {%
            data variables.product.prodname_dotcom %} appends the extension
            <code>.ps1</code> to your script name. If your self-hosted Windows
            runner does not have <em>PowerShell Core</em> installed, then
            <em>PowerShell Desktop</em> is used instead.
          </td>
          <td><code>pwsh -command ". '{0}'"</code>.</td>
        </tr>
        <tr class="odd">
          <td>Windows</td>
          <td><code>powershell</code></td>
          <td>
            The PowerShell Desktop. {% data variables.product.prodname_dotcom %}
            appends the extension <code>.ps1</code> to your script name.
          </td>
          <td><code>powershell -command ". '{0}'"</code>.</td>
        </tr>
      </tbody>
    </table>
    <h3 id="example-running-a-script-using-bash">
      Example: Running a script using bash
    </h3>
    <div class="sourceCode" id="cb39">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb39-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb39-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Display the path</span></a>
<a class="sourceLine" id="cb39-3" title="3">    <span class="fu">run:</span><span class="at"> echo $PATH</span></a>
<a class="sourceLine" id="cb39-4" title="4">    <span class="fu">shell:</span><span class="at"> bash</span></a></code></pre>
    </div>
    <h3 id="example-running-a-script-using-windows-cmd">
      Example: Running a script using Windows <code>cmd</code>
    </h3>
    <div class="sourceCode" id="cb40">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb40-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb40-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Display the path</span></a>
<a class="sourceLine" id="cb40-3" title="3">    <span class="fu">run:</span><span class="at"> echo %PATH%</span></a>
<a class="sourceLine" id="cb40-4" title="4">    <span class="fu">shell:</span><span class="at"> cmd</span></a></code></pre>
    </div>
    <h3 id="example-running-a-script-using-powershell-core">
      Example: Running a script using PowerShell Core
    </h3>
    <div class="sourceCode" id="cb41">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb41-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb41-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Display the path</span></a>
<a class="sourceLine" id="cb41-3" title="3">    <span class="fu">run:</span><span class="at"> echo ${env:PATH}</span></a>
<a class="sourceLine" id="cb41-4" title="4">    <span class="fu">shell:</span><span class="at"> pwsh</span></a></code></pre>
    </div>
    <h3 id="example-using-powershell-desktop-to-run-a-script">
      Example: Using PowerShell Desktop to run a script
    </h3>
    <div class="sourceCode" id="cb42">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb42-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb42-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Display the path</span></a>
<a class="sourceLine" id="cb42-3" title="3">    <span class="fu">run:</span><span class="at"> echo ${env:PATH}</span></a>
<a class="sourceLine" id="cb42-4" title="4">    <span class="fu">shell:</span><span class="at"> powershell</span></a></code></pre>
    </div>
    <h3 id="example-running-a-python-script">
      Example: Running a python script
    </h3>
    <div class="sourceCode" id="cb43">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb43-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb43-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Display the path</span></a>
<a class="sourceLine" id="cb43-3" title="3"><span class="fu">    run:</span> <span class="st">|</span></a>
<a class="sourceLine" id="cb43-4" title="4">      import os</a>
<a class="sourceLine" id="cb43-5" title="5">      print(os.environ[&#39;PATH&#39;])</a>
<a class="sourceLine" id="cb43-6" title="6">    <span class="fu">shell:</span><span class="at"> python</span></a></code></pre>
    </div>
    <h3 id="custom-shell">Custom shell</h3>
    <p>
      You can set the <code>shell</code> value to a template string using
      <code>command […options] {0} [..more_options]</code>. {% data
      variables.product.prodname_dotcom %} interprets the first
      whitespace-delimited word of the string as the command, and inserts the
      file name for the temporary script at <code>{0}</code>.
    </p>
    <p>For example:</p>
    <div class="sourceCode" id="cb44">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb44-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb44-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Display the environment variables and their values</span></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="fu">    run:</span> <span class="st">|</span></a>
<a class="sourceLine" id="cb44-4" title="4">      print %ENV</a>
<a class="sourceLine" id="cb44-5" title="5">    <span class="fu">shell:</span><span class="at"> perl {0}</span></a></code></pre>
    </div>
    <p>
      The command used, <code>perl</code> in this example, must be installed on
      the runner.
    </p>
    <p>
      {% ifversion ghae %}For instructions on how to make sure your {% data
      variables.actions.hosted_runner %} has the required software installed,
      see “<a href="/actions/using-github-hosted-runners/creating-custom-images"
        >Creating custom images</a
      >.” {% else %} For information about the software included on
      GitHub-hosted runners, see “<a
        href="/actions/reference/specifications-for-github-hosted-runners#supported-software"
        >Specifications for GitHub-hosted runners</a
      >.” {% endif %}
    </p>
    <h3 id="exit-codes-and-error-action-preference">
      Exit codes and error action preference
    </h3>
    <p>
      For built-in shell keywords, we provide the following defaults that are
      executed by {% data variables.product.prodname_dotcom %}-hosted runners.
      You should use these guidelines when running shell scripts.
    </p>
    <ul>
      <li>
        <code>bash</code>/<code>sh</code>:
        <ul>
          <li>
            Fail-fast behavior using <code>set -eo pipefail</code>: Default for
            <code>bash</code> and built-in <code>shell</code>. It is also the
            default when you don’t provide an option on non-Windows platforms.
          </li>
          <li>
            You can opt out of fail-fast and take full control by providing a
            template string to the shell options. For example,
            <code>bash {0}</code>.
          </li>
          <li>
            sh-like shells exit with the exit code of the last command executed
            in a script, which is also the default behavior for actions. The
            runner will report the status of the step as fail/succeed based on
            this exit code.
          </li>
        </ul>
      </li>
      <li>
        <code>powershell</code>/<code>pwsh</code>
        <ul>
          <li>
            Fail-fast behavior when possible. For <code>pwsh</code> and
            <code>powershell</code> built-in shell, we will prepend
            <code>$ErrorActionPreference = 'stop'</code> to script contents.
          </li>
          <li>
            We append
            <code
              >if ((Test-Path -LiteralPath variable:\LASTEXITCODE)) { exit
              $LASTEXITCODE }</code
            >
            to powershell scripts so action statuses reflect the script’s last
            exit code.
          </li>
          <li>
            Users can always opt out by not using the built-in shell, and
            providing a custom shell option like: <code>pwsh -File {0}</code>,
            or <code>powershell -Command "&amp; '{0}'"</code>, depending on
            need.
          </li>
        </ul>
      </li>
      <li>
        <code>cmd</code>
        <ul>
          <li>
            There doesn’t seem to be a way to fully opt into fail-fast behavior
            other than writing your script to check each error code and respond
            accordingly. Because we can’t actually provide that behavior by
            default, you need to write this behavior into your script.
          </li>
          <li>
            <code>cmd.exe</code> will exit with the error level of the last
            program it executed, and it will return the error code to the
            runner. This behavior is internally consistent with the previous
            <code>sh</code> and <code>pwsh</code> default behavior and is the
            <code>cmd.exe</code> default, so this behavior remains intact.
          </li>
        </ul>
      </li>
    </ul>
    <h2 id="jobs.job_id.steps.with">
      <code>jobs.&lt;job_id&gt;.steps[*].with</code>
    </h2>
    <p>
      A <code>map</code> of the input parameters defined by the action. Each
      input parameter is a key/value pair. Input parameters are set as
      environment variables. The variable is prefixed with
      <code>INPUT_</code> and converted to upper case.
    </p>
    <h3 id="example-13">Example</h3>
    <p>
      Defines the three input parameters (<code>first_name</code>,
      <code>middle_name</code>, and <code>last_name</code>) defined by the
      <code>hello_world</code> action. These input variables will be accessible
      to the <code>hello-world</code> action as <code>INPUT_FIRST_NAME</code>,
      <code>INPUT_MIDDLE_NAME</code>, and
      <code>INPUT_LAST_NAME</code> environment variables.
    </p>
    <div class="sourceCode" id="cb45">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb45-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb45-2" title="2">  <span class="fu">my_first_job:</span></a>
<a class="sourceLine" id="cb45-3" title="3">    <span class="fu">steps:</span></a>
<a class="sourceLine" id="cb45-4" title="4">      <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first step</span></a>
<a class="sourceLine" id="cb45-5" title="5">        <span class="fu">uses:</span><span class="at"> actions/hello_world@main</span></a>
<a class="sourceLine" id="cb45-6" title="6">        <span class="fu">with:</span></a>
<a class="sourceLine" id="cb45-7" title="7">          <span class="fu">first_name:</span><span class="at"> Mona</span></a>
<a class="sourceLine" id="cb45-8" title="8">          <span class="fu">middle_name:</span><span class="at"> The</span></a>
<a class="sourceLine" id="cb45-9" title="9">          <span class="fu">last_name:</span><span class="at"> Octocat      </span></a></code></pre>
    </div>
    <h2 id="jobs.job_id.steps.with.args">
      <code>jobs.&lt;job_id&gt;.steps[*].with.args</code>
    </h2>
    <p>
      A <code>string</code> that defines the inputs for a Docker container. {%
      data variables.product.prodname_dotcom %} passes the <code>args</code> to
      the container’s <code>ENTRYPOINT</code> when the container starts up. An
      <code>array of strings</code> is not supported by this parameter.
    </p>
    <h3 id="example-14">Example</h3>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb46">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb46-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb46-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Explain why this job ran</span></a>
<a class="sourceLine" id="cb46-3" title="3">    <span class="fu">uses:</span><span class="at"> octo-org/action-name@main</span></a>
<a class="sourceLine" id="cb46-4" title="4">    <span class="fu">with:</span></a>
<a class="sourceLine" id="cb46-5" title="5">      <span class="fu">entrypoint:</span><span class="at"> /bin/echo</span></a>
<a class="sourceLine" id="cb46-6" title="6">      <span class="fu">args:</span><span class="at"> The ${{ github.event_name }} event triggered this step.</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <p>
      The <code>args</code> are used in place of the
      <code>CMD</code> instruction in a <code>Dockerfile</code>. If you use
      <code>CMD</code> in your <code>Dockerfile</code>, use the guidelines
      ordered by preference:
    </p>
    <ol type="1">
      <li>
        Document required arguments in the action’s README and omit them from
        the <code>CMD</code> instruction.
      </li>
      <li>
        Use defaults that allow using the action without specifying any
        <code>args</code>.
      </li>
      <li>
        If the action exposes a <code>--help</code> flag, or something similar,
        use that as the default to make your action self-documenting.
      </li>
    </ol>
    <h2 id="jobs.job_id.steps.with.entrypoint">
      <code>jobs.&lt;job_id&gt;.steps[*].with.entrypoint</code>
    </h2>
    <p>
      Overrides the Docker <code>ENTRYPOINT</code> in the
      <code>Dockerfile</code>, or sets it if one wasn’t already specified.
      Unlike the Docker <code>ENTRYPOINT</code> instruction which has a shell
      and exec form, <code>entrypoint</code> keyword accepts only a single
      string defining the executable to be run.
    </p>
    <h3 id="example-15">Example</h3>
    <div class="sourceCode" id="cb47">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb47-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb47-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> Run a custom command</span></a>
<a class="sourceLine" id="cb47-3" title="3">    <span class="fu">uses:</span><span class="at"> octo-org/action-name@main</span></a>
<a class="sourceLine" id="cb47-4" title="4">    <span class="fu">with:</span></a>
<a class="sourceLine" id="cb47-5" title="5">      <span class="fu">entrypoint:</span><span class="at"> /a/different/executable</span></a></code></pre>
    </div>
    <p>
      The <code>entrypoint</code> keyword is meant to be used with Docker
      container actions, but you can also use it with JavaScript actions that
      don’t define any inputs.
    </p>
    <h2 id="jobs.job_id.steps.env">
      <code>jobs.&lt;job_id&gt;.steps[*].env</code>
    </h2>
    <p>
      Sets environment variables for steps to use in the runner environment. You
      can also set environment variables for the entire workflow or a job. For
      more information, see <a href="#env"><code>env</code></a> and
      <a href="#jobsjob_idenv"><code>jobs.&lt;job_id&gt;.env</code></a
      >.
    </p>
    <p>{% data reusables.repositories.actions-env-var-note %}</p>
    <p>
      Public actions may specify expected environment variables in the README
      file. If you are setting a secret in an environment variable, you must set
      secrets using the <code>secrets</code> context. For more information, see
      “<a
        href="/actions/automating-your-workflow-with-github-actions/using-environment-variables"
        >Using environment variables</a
      >” and “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <h3 id="example-16">Example</h3>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb48">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb48-1" title="1"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb48-2" title="2">  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> My first action</span></a>
<a class="sourceLine" id="cb48-3" title="3">    <span class="fu">env:</span></a>
<a class="sourceLine" id="cb48-4" title="4">      <span class="fu">GITHUB_TOKEN:</span><span class="at"> ${{ secrets.GITHUB_TOKEN }}</span></a>
<a class="sourceLine" id="cb48-5" title="5">      <span class="fu">FIRST_NAME:</span><span class="at"> Mona</span></a>
<a class="sourceLine" id="cb48-6" title="6">      <span class="fu">LAST_NAME:</span><span class="at"> Octocat</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <h2 id="jobs.job_id.steps.continue-on-error">
      <code>jobs.&lt;job_id&gt;.steps[*].continue-on-error</code>
    </h2>
    <p>
      Prevents a job from failing when a step fails. Set to <code>true</code> to
      allow a job to pass when this step fails.
    </p>
    <h2 id="jobs.job_id.steps.timeout-minutes">
      <code>jobs.&lt;job_id&gt;.steps[*].timeout-minutes</code>
    </h2>
    <p>
      The maximum number of minutes to run the step before killing the process.
    </p>
    <h2 id="jobs.job_id.timeout-minutes">
      <code>jobs.&lt;job_id&gt;.timeout-minutes</code>
    </h2>
    <p>
      The maximum number of minutes to let a job run before {% data
      variables.product.prodname_dotcom %} automatically cancels it. Default:
      360
    </p>
    <p>
      If the timeout exceeds the job execution time limit for the runner, the
      job will be canceled when the execution time limit is met instead. For
      more information about job execution time limits, see “<a
        href="/actions/reference/usage-limits-billing-and-administration#usage-limits"
        >Usage limits, billing, and administration</a
      >.”
    </p>
    <h2 id="jobs.job_id.strategy"><code>jobs.&lt;job_id&gt;.strategy</code></h2>
    <p>
      A strategy creates a build matrix for your jobs. You can define different
      variations to run each job in.
    </p>
    <h2 id="jobs.job_id.strategy.matrix">
      <code>jobs.&lt;job_id&gt;.strategy.matrix</code>
    </h2>
    <p>
      You can define a matrix of different job configurations. A matrix allows
      you to create multiple jobs by performing variable substitution in a
      single job definition. For example, you can use a matrix to create jobs
      for more than one supported version of a programming language, operating
      system, or tool. A matrix reuses the job’s configuration and creates a job
      for each matrix you configure.
    </p>
    <p>{% data reusables.github-actions.usage-matrix-limits %}</p>
    <p>
      Each option you define in the <code>matrix</code> has a key and value. The
      keys you define become properties in the <code>matrix</code> context and
      you can reference the property in other areas of your workflow file. For
      example, if you define the key <code>os</code> that contains an array of
      operating systems, you can use the <code>matrix.os</code> property as the
      value of the <code>runs-on</code> keyword to create a job for each
      operating system. For more information, see “<a
        href="/actions/reference/context-and-expression-syntax-for-github-actions"
        >Context and expression syntax for {% data
        variables.product.prodname_actions %}</a
      >.”
    </p>
    <p>
      The order that you define a <code>matrix</code> matters. The first option
      you define will be the first job that runs in your workflow.
    </p>
    <h3 id="example-running-multiple-versions-of-node.js">
      Example: Running multiple versions of Node.js
    </h3>
    <p>
      You can specify a matrix by supplying an array for the configuration
      options. For example, if the runner supports Node.js versions 10, 12, and
      14, you could specify an array of those versions in the
      <code>matrix</code>.
    </p>
    <p>
      This example creates a matrix of three jobs by setting the
      <code>node</code> key to an array of three Node.js versions. To use the
      matrix, the example sets the <code>matrix.node</code> context property as
      the value of the <code>setup-node</code> action’s input parameter
      <code>node-version</code>. As a result, three jobs will run, each using a
      different Node.js version.
    </p>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb49">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb49-1" title="1"><span class="fu">strategy:</span></a>
<a class="sourceLine" id="cb49-2" title="2">  <span class="fu">matrix:</span></a>
<a class="sourceLine" id="cb49-3" title="3">    <span class="fu">node:</span><span class="at"> </span><span class="kw">[</span><span class="dv">10</span><span class="kw">,</span> <span class="dv">12</span><span class="kw">,</span> <span class="dv">14</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb49-4" title="4"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb49-5" title="5">  <span class="co"># Configures the node version used on GitHub-hosted runners</span></a>
<a class="sourceLine" id="cb49-6" title="6">  <span class="kw">-</span> <span class="fu">uses:</span><span class="at"> actions/setup-node@v2</span></a>
<a class="sourceLine" id="cb49-7" title="7">    <span class="fu">with:</span></a>
<a class="sourceLine" id="cb49-8" title="8">      <span class="co"># The Node.js version to configure</span></a>
<a class="sourceLine" id="cb49-9" title="9">      <span class="fu">node-version:</span><span class="at"> ${{ matrix.node }}</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <p>
      The <code>setup-node</code> action is the recommended way to configure a
      Node.js version when using {% data variables.product.prodname_dotcom
      %}-hosted runners. For more information, see the
      <a href="https://github.com/actions/setup-node"
        ><code>setup-node</code></a
      >
      action.
    </p>
    <h3 id="example-running-with-multiple-operating-systems">
      Example: Running with multiple operating systems
    </h3>
    <p>
      You can create a matrix to run workflows on more than one runner operating
      system. You can also specify more than one matrix configuration. This
      example creates a matrix of 6 jobs:
    </p>
    <ul>
      <li>2 operating systems specified in the <code>os</code> array</li>
      <li>3 Node.js versions specified in the <code>node</code> array</li>
    </ul>
    <p>{% data reusables.repositories.actions-matrix-builds-os %}</p>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb50">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb50-1" title="1"><span class="fu">runs-on:</span><span class="at"> ${{ matrix.os }}</span></a>
<a class="sourceLine" id="cb50-2" title="2"><span class="fu">strategy:</span></a>
<a class="sourceLine" id="cb50-3" title="3">  <span class="fu">matrix:</span></a>
<a class="sourceLine" id="cb50-4" title="4">    <span class="fu">os:</span><span class="at"> </span><span class="kw">[</span>ubuntu<span class="fl">-18.04</span><span class="kw">,</span> ubuntu<span class="fl">-20.04</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb50-5" title="5">    <span class="fu">node:</span><span class="at"> </span><span class="kw">[</span><span class="dv">10</span><span class="kw">,</span> <span class="dv">12</span><span class="kw">,</span> <span class="dv">14</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb50-6" title="6"><span class="fu">steps:</span></a>
<a class="sourceLine" id="cb50-7" title="7">  <span class="kw">-</span> <span class="fu">uses:</span><span class="at"> actions/setup-node@v2</span></a>
<a class="sourceLine" id="cb50-8" title="8">    <span class="fu">with:</span></a>
<a class="sourceLine" id="cb50-9" title="9">      <span class="fu">node-version:</span><span class="at"> ${{ matrix.node }}</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <p>
      {% ifversion ghae %}To find supported configuration options for {% data
      variables.actions.hosted_runner %}s, see “<a
        href="/actions/using-github-hosted-runners/about-ae-hosted-runners#software-specifications"
        >Software specifications</a
      >.” {% else %}To find supported configuration options for {% data
      variables.product.prodname_dotcom %}-hosted runners, see “<a
        href="/actions/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners"
        >Virtual environments for {% data variables.product.prodname_dotcom
        %}-hosted runners</a
      >.” {% endif %}
    </p>
    <h3 id="example-including-additional-values-into-combinations">
      Example: Including additional values into combinations
    </h3>
    <p>
      You can add additional configuration options to a build matrix job that
      already exists. For example, if you want to use a specific version of
      <code>npm</code> when the job that uses <code>windows-latest</code> and
      version 8 of <code>node</code> runs, you can use <code>include</code> to
      specify that additional option.
    </p>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb51">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb51-1" title="1"><span class="fu">runs-on:</span><span class="at"> ${{ matrix.os }}</span></a>
<a class="sourceLine" id="cb51-2" title="2"><span class="fu">strategy:</span></a>
<a class="sourceLine" id="cb51-3" title="3">  <span class="fu">matrix:</span></a>
<a class="sourceLine" id="cb51-4" title="4">    <span class="fu">os:</span><span class="at"> </span><span class="kw">[</span>macos-latest<span class="kw">,</span> windows-latest<span class="kw">,</span> ubuntu<span class="fl">-18.04</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb51-5" title="5">    <span class="fu">node:</span><span class="at"> </span><span class="kw">[</span><span class="dv">8</span><span class="kw">,</span> <span class="dv">10</span><span class="kw">,</span> <span class="dv">12</span><span class="kw">,</span> <span class="dv">14</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb51-6" title="6">    <span class="fu">include:</span></a>
<a class="sourceLine" id="cb51-7" title="7">      <span class="co"># includes a new variable of npm with a value of 6</span></a>
<a class="sourceLine" id="cb51-8" title="8">      <span class="co"># for the matrix leg matching the os and version</span></a>
<a class="sourceLine" id="cb51-9" title="9">      <span class="kw">-</span> <span class="fu">os:</span><span class="at"> windows-latest</span></a>
<a class="sourceLine" id="cb51-10" title="10">        <span class="fu">node:</span><span class="at"> </span><span class="dv">8</span></a>
<a class="sourceLine" id="cb51-11" title="11">        <span class="fu">npm:</span><span class="at"> </span><span class="dv">6</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <h3 id="example-including-new-combinations">
      Example: Including new combinations
    </h3>
    <p>
      You can use <code>include</code> to add new jobs to a build matrix. Any
      unmatched include configurations are added to the matrix. For example, if
      you want to use <code>node</code> version 14 to build on multiple
      operating systems, but wanted one extra experimental job using node
      version 15 on Ubuntu, you can use <code>include</code> to specify that
      additional job.
    </p>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb52">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb52-1" title="1"><span class="fu">runs-on:</span><span class="at"> ${{ matrix.os }}</span></a>
<a class="sourceLine" id="cb52-2" title="2"><span class="fu">strategy:</span></a>
<a class="sourceLine" id="cb52-3" title="3">  <span class="fu">matrix:</span></a>
<a class="sourceLine" id="cb52-4" title="4">    <span class="fu">node:</span><span class="at"> </span><span class="kw">[</span><span class="dv">14</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb52-5" title="5">    <span class="fu">os:</span><span class="at"> </span><span class="kw">[</span>macos-latest<span class="kw">,</span> windows-latest<span class="kw">,</span> ubuntu<span class="fl">-18.04</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb52-6" title="6">    <span class="fu">include:</span></a>
<a class="sourceLine" id="cb52-7" title="7">      <span class="kw">-</span> <span class="fu">node:</span><span class="at"> </span><span class="dv">15</span></a>
<a class="sourceLine" id="cb52-8" title="8">        <span class="fu">os:</span><span class="at"> ubuntu-18.04</span></a>
<a class="sourceLine" id="cb52-9" title="9">        <span class="fu">experimental:</span><span class="at"> </span><span class="ch">true</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <h3 id="example-excluding-configurations-from-a-matrix">
      Example: Excluding configurations from a matrix
    </h3>
    <p>
      You can remove a specific configurations defined in the build matrix using
      the <code>exclude</code> option. Using <code>exclude</code> removes a job
      defined by the build matrix. The number of jobs is the cross product of
      the number of operating systems (<code>os</code>) included in the arrays
      you provide, minus any subtractions (<code>exclude</code>).
    </p>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb53">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb53-1" title="1"><span class="fu">runs-on:</span><span class="at"> ${{ matrix.os }}</span></a>
<a class="sourceLine" id="cb53-2" title="2"><span class="fu">strategy:</span></a>
<a class="sourceLine" id="cb53-3" title="3">  <span class="fu">matrix:</span></a>
<a class="sourceLine" id="cb53-4" title="4">    <span class="fu">os:</span><span class="at"> </span><span class="kw">[</span>macos-latest<span class="kw">,</span> windows-latest<span class="kw">,</span> ubuntu<span class="fl">-18.04</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb53-5" title="5">    <span class="fu">node:</span><span class="at"> </span><span class="kw">[</span><span class="dv">8</span><span class="kw">,</span> <span class="dv">10</span><span class="kw">,</span> <span class="dv">12</span><span class="kw">,</span> <span class="dv">14</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb53-6" title="6">    <span class="fu">exclude:</span></a>
<a class="sourceLine" id="cb53-7" title="7">      <span class="co"># excludes node 8 on macOS</span></a>
<a class="sourceLine" id="cb53-8" title="8">      <span class="kw">-</span> <span class="fu">os:</span><span class="at"> macos-latest</span></a>
<a class="sourceLine" id="cb53-9" title="9">        <span class="fu">node:</span><span class="at"> </span><span class="dv">8</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <p>{% note %}</p>
    <p>
      <strong>Note:</strong> All <code>include</code> combinations are processed
      after <code>exclude</code>. This allows you to use <code>include</code> to
      add back combinations that were previously excluded.
    </p>
    <p>{% endnote %}</p>
    <h4 id="using-environment-variables-in-a-matrix">
      Using environment variables in a matrix
    </h4>
    <p>
      You can add custom environment variables for each test combination by
      using the <code>include</code> key. You can then refer to the custom
      environment variables in a later step.
    </p>
    <p>{% data reusables.github-actions.matrix-variable-example %}</p>
    <h2 id="jobs.job_id.strategy.fail-fast">
      <code>jobs.&lt;job_id&gt;.strategy.fail-fast</code>
    </h2>
    <p>
      When set to <code>true</code>, {% data variables.product.prodname_dotcom
      %} cancels all in-progress jobs if any <code>matrix</code> job fails.
      Default: <code>true</code>
    </p>
    <h2 id="jobs.job_id.strategy.max-parallel">
      <code>jobs.&lt;job_id&gt;.strategy.max-parallel</code>
    </h2>
    <p>
      The maximum number of jobs that can run simultaneously when using a
      <code>matrix</code> job strategy. By default, {% data
      variables.product.prodname_dotcom %} will maximize the number of jobs run
      in parallel depending on the available runners on {% data
      variables.product.prodname_dotcom %}-hosted virtual machines.
    </p>
    <div class="sourceCode" id="cb54">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb54-1" title="1"><span class="fu">strategy:</span></a>
<a class="sourceLine" id="cb54-2" title="2">  <span class="fu">max-parallel:</span><span class="at"> </span><span class="dv">2</span></a></code></pre>
    </div>
    <h2 id="jobs.job_id.continue-on-error">
      <code>jobs.&lt;job_id&gt;.continue-on-error</code>
    </h2>
    <p>
      Prevents a workflow run from failing when a job fails. Set to
      <code>true</code> to allow a workflow run to pass when this job fails.
    </p>
    <h3
      id="example-preventing-a-specific-failing-matrix-job-from-failing-a-workflow-run"
    >
      Example: Preventing a specific failing matrix job from failing a workflow
      run
    </h3>
    <p>
      You can allow specific jobs in a job matrix to fail without failing the
      workflow run. For example, if you wanted to only allow an experimental job
      with <code>node</code> set to <code>15</code> to fail without failing the
      workflow run.
    </p>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb55">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb55-1" title="1"><span class="fu">runs-on:</span><span class="at"> ${{ matrix.os }}</span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="fu">continue-on-error:</span><span class="at"> ${{ matrix.experimental }}</span></a>
<a class="sourceLine" id="cb55-3" title="3"><span class="fu">strategy:</span></a>
<a class="sourceLine" id="cb55-4" title="4">  <span class="fu">fail-fast:</span><span class="at"> </span><span class="ch">false</span></a>
<a class="sourceLine" id="cb55-5" title="5">  <span class="fu">matrix:</span></a>
<a class="sourceLine" id="cb55-6" title="6">    <span class="fu">node:</span><span class="at"> </span><span class="kw">[</span><span class="dv">13</span><span class="kw">,</span> <span class="dv">14</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb55-7" title="7">    <span class="fu">os:</span><span class="at"> </span><span class="kw">[</span>macos-latest<span class="kw">,</span> ubuntu<span class="fl">-18.04</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb55-8" title="8">    <span class="fu">experimental:</span><span class="at"> </span><span class="kw">[</span><span class="ch">false</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb55-9" title="9">    <span class="fu">include:</span></a>
<a class="sourceLine" id="cb55-10" title="10">      <span class="kw">-</span> <span class="fu">node:</span><span class="at"> </span><span class="dv">15</span></a>
<a class="sourceLine" id="cb55-11" title="11">        <span class="fu">os:</span><span class="at"> ubuntu-18.04</span></a>
<a class="sourceLine" id="cb55-12" title="12">        <span class="fu">experimental:</span><span class="at"> </span><span class="ch">true</span></a></code></pre>
    </div>
    <p>{% endraw %}</p>
    <h2 id="jobs.job_id.container">
      <code>jobs.&lt;job_id&gt;.container</code>
    </h2>
    <p>
      A container to run any steps in a job that don’t already specify a
      container. If you have steps that use both script and container actions,
      the container actions will run as sibling containers on the same network
      with the same volume mounts.
    </p>
    <p>
      If you do not set a <code>container</code>, all steps will run directly on
      the host specified by <code>runs-on</code> unless a step refers to an
      action configured to run in a container.
    </p>
    <h3 id="example-17">Example</h3>
    <div class="sourceCode" id="cb56">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb56-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb56-2" title="2">  <span class="fu">my_job:</span></a>
<a class="sourceLine" id="cb56-3" title="3">    <span class="fu">container:</span></a>
<a class="sourceLine" id="cb56-4" title="4">      <span class="fu">image:</span><span class="at"> node:14.16</span></a>
<a class="sourceLine" id="cb56-5" title="5">      <span class="fu">env:</span></a>
<a class="sourceLine" id="cb56-6" title="6">        <span class="fu">NODE_ENV:</span><span class="at"> development</span></a>
<a class="sourceLine" id="cb56-7" title="7">      <span class="fu">ports:</span></a>
<a class="sourceLine" id="cb56-8" title="8">        <span class="kw">-</span> <span class="dv">80</span></a>
<a class="sourceLine" id="cb56-9" title="9">      <span class="fu">volumes:</span></a>
<a class="sourceLine" id="cb56-10" title="10">        <span class="kw">-</span> my_docker_volume:/volume_mount</a>
<a class="sourceLine" id="cb56-11" title="11">      <span class="fu">options:</span><span class="at"> --cpus 1</span></a></code></pre>
    </div>
    <p>
      When you only specify a container image, you can omit the
      <code>image</code> keyword.
    </p>
    <div class="sourceCode" id="cb57">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb57-1" title="1"><span class="fu">jobs:</span></a>
<a class="sourceLine" id="cb57-2" title="2">  <span class="fu">my_job:</span></a>
<a class="sourceLine" id="cb57-3" title="3">    <span class="fu">container:</span><span class="at"> node:14.16</span></a></code></pre>
    </div>
    <h2 id="jobs.job_id.container.image">
      <code>jobs.&lt;job_id&gt;.container.image</code>
    </h2>
    <p>
      The Docker image to use as the container to run the action. The value can
      be the Docker Hub image name or a {% ifversion ghes &lt; 3.0 %}public{%
      endif %} registry name.
    </p>
    <p>{% ifversion fpt or ghes &gt; 2.22 or ghae %}</p>
    <h2 id="jobs.job_id.container.credentials">
      <code>jobs.&lt;job_id&gt;.container.credentials</code>
    </h2>
    <p>{% data reusables.actions.registry-credentials %}</p>
    <h3 id="example-18">Example</h3>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb58">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb58-1" title="1"><span class="fu">container:</span></a>
<a class="sourceLine" id="cb58-2" title="2">  <span class="fu">image:</span><span class="at"> ghcr.io/owner/image</span></a>
<a class="sourceLine" id="cb58-3" title="3">  <span class="fu">credentials:</span></a>
<a class="sourceLine" id="cb58-4" title="4">     <span class="fu">username:</span><span class="at"> ${{ github.actor }}</span></a>
<a class="sourceLine" id="cb58-5" title="5">     <span class="fu">password:</span><span class="at"> ${{ secrets.ghcr_token }}</span></a></code></pre>
    </div>
    <p>{% endraw %} {% endif %}</p>
    <h2 id="jobs.job_id.container.env">
      <code>jobs.&lt;job_id&gt;.container.env</code>
    </h2>
    <p>Sets a <code>map</code> of environment variables in the container.</p>
    <h2 id="jobs.job_id.container.ports">
      <code>jobs.&lt;job_id&gt;.container.ports</code>
    </h2>
    <p>Sets an <code>array</code> of ports to expose on the container.</p>
    <h2 id="jobs.job_id.container.volumes">
      <code>jobs.&lt;job_id&gt;.container.volumes</code>
    </h2>
    <p>
      Sets an <code>array</code> of volumes for the container to use. You can
      use volumes to share data between services or other steps in a job. You
      can specify named Docker volumes, anonymous Docker volumes, or bind mounts
      on the host.
    </p>
    <p>To specify a volume, you specify the source and destination path:</p>
    <p><code>&lt;source&gt;:&lt;destinationPath&gt;</code>.</p>
    <p>
      The <code>&lt;source&gt;</code> is a volume name or an absolute path on
      the host machine, and <code>&lt;destinationPath&gt;</code> is an absolute
      path in the container.
    </p>
    <h3 id="example-19">Example</h3>
    <div class="sourceCode" id="cb59">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb59-1" title="1"><span class="fu">volumes:</span></a>
<a class="sourceLine" id="cb59-2" title="2">  <span class="kw">-</span> my_docker_volume:/volume_mount</a>
<a class="sourceLine" id="cb59-3" title="3">  <span class="kw">-</span> /data/my_data</a>
<a class="sourceLine" id="cb59-4" title="4">  <span class="kw">-</span> /source/directory:/destination/directory</a></code></pre>
    </div>
    <h2 id="jobs.job_id.container.options">
      <code>jobs.&lt;job_id&gt;.container.options</code>
    </h2>
    <p>
      Additional Docker container resource options. For a list of options, see
      “<a
        href="https://docs.docker.com/engine/reference/commandline/create/#options"
        ><code>docker create</code> options</a
      >.”
    </p>
    <h2 id="jobs.job_id.services"><code>jobs.&lt;job_id&gt;.services</code></h2>
    <p>{% data reusables.github-actions.docker-container-os-support %}</p>
    <p>
      Used to host service containers for a job in a workflow. Service
      containers are useful for creating databases or cache services like Redis.
      The runner automatically creates a Docker network and manages the life
      cycle of the service containers.
    </p>
    <p>
      If you configure your job to run in a container, or your step uses
      container actions, you don’t need to map ports to access the service or
      action. Docker automatically exposes all ports between containers on the
      same Docker user-defined bridge network. You can directly reference the
      service container by its hostname. The hostname is automatically mapped to
      the label name you configure for the service in the workflow.
    </p>
    <p>
      If you configure the job to run directly on the runner machine and your
      step doesn’t use a container action, you must map any required Docker
      service container ports to the Docker host (the runner machine). You can
      access the service container using localhost and the mapped port.
    </p>
    <p>
      For more information about the differences between networking service
      containers, see “<a
        href="/actions/automating-your-workflow-with-github-actions/about-service-containers"
        >About service containers</a
      >.”
    </p>
    <h3 id="example-using-localhost">Example: Using localhost</h3>
    <p>
      This example creates two services: nginx and redis. When you specify the
      Docker host port but not the container port, the container port is
      randomly assigned to a free port. {% data
      variables.product.prodname_dotcom %} sets the assigned container port in
      the {% raw %}<code>${{job.services.&lt;service_name&gt;.ports}}</code>{%
      endraw %} context. In this example, you can access the service container
      ports using the {% raw %}<code
        >${{ job.services.nginx.ports['8080'] }}</code
      >{% endraw %} and {% raw %}<code
        >${{ job.services.redis.ports['6379'] }}</code
      >{% endraw %} contexts.
    </p>
    <div class="sourceCode" id="cb60">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb60-1" title="1"><span class="fu">services:</span></a>
<a class="sourceLine" id="cb60-2" title="2">  <span class="fu">nginx:</span></a>
<a class="sourceLine" id="cb60-3" title="3">    <span class="fu">image:</span><span class="at"> nginx</span></a>
<a class="sourceLine" id="cb60-4" title="4">    <span class="co"># Map port 8080 on the Docker host to port 80 on the nginx container</span></a>
<a class="sourceLine" id="cb60-5" title="5">    <span class="fu">ports:</span></a>
<a class="sourceLine" id="cb60-6" title="6">      <span class="kw">-</span> 8080:80</a>
<a class="sourceLine" id="cb60-7" title="7">  <span class="fu">redis:</span></a>
<a class="sourceLine" id="cb60-8" title="8">    <span class="fu">image:</span><span class="at"> redis</span></a>
<a class="sourceLine" id="cb60-9" title="9">    <span class="co"># Map TCP port 6379 on Docker host to a random free port on the Redis container</span></a>
<a class="sourceLine" id="cb60-10" title="10">    <span class="fu">ports:</span></a>
<a class="sourceLine" id="cb60-11" title="11">      <span class="kw">-</span> 6379/tcp</a></code></pre>
    </div>
    <h2 id="jobs.job_id.services.service_id.image">
      <code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.image</code>
    </h2>
    <p>
      The Docker image to use as the service container to run the action. The
      value can be the Docker Hub image name or a {% ifversion ghes &lt; 3.0
      %}public{% endif %} registry name.
    </p>
    <p>{% ifversion fpt or ghes &gt; 2.22 or ghae %}</p>
    <h2 id="jobs.job_id.services.service_id.credentials">
      <code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.credentials</code>
    </h2>
    <p>{% data reusables.actions.registry-credentials %}</p>
    <h3 id="example-20">Example</h3>
    <p>{% raw %}</p>
    <div class="sourceCode" id="cb61">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb61-1" title="1"><span class="fu">services:</span></a>
<a class="sourceLine" id="cb61-2" title="2">  <span class="fu">myservice1:</span></a>
<a class="sourceLine" id="cb61-3" title="3">    <span class="fu">image:</span><span class="at"> ghcr.io/owner/myservice1</span></a>
<a class="sourceLine" id="cb61-4" title="4">    <span class="fu">credentials:</span></a>
<a class="sourceLine" id="cb61-5" title="5">      <span class="fu">username:</span><span class="at"> ${{ github.actor }}</span></a>
<a class="sourceLine" id="cb61-6" title="6">      <span class="fu">password:</span><span class="at"> ${{ secrets.ghcr_token }}</span></a>
<a class="sourceLine" id="cb61-7" title="7">  <span class="fu">myservice2:</span></a>
<a class="sourceLine" id="cb61-8" title="8">    <span class="fu">image:</span><span class="at"> dockerhub_org/myservice2</span></a>
<a class="sourceLine" id="cb61-9" title="9">    <span class="fu">credentials:</span></a>
<a class="sourceLine" id="cb61-10" title="10">      <span class="fu">username:</span><span class="at"> ${{ secrets.DOCKER_USER }}</span></a>
<a class="sourceLine" id="cb61-11" title="11">      <span class="fu">password:</span><span class="at"> ${{ secrets.DOCKER_PASSWORD }}</span></a></code></pre>
    </div>
    <p>{% endraw %} {% endif %}</p>
    <h2 id="jobs.job_id.services.service_id.env">
      <code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.env</code>
    </h2>
    <p>
      Sets a <code>map</code> of environment variables in the service container.
    </p>
    <h2 id="jobs.job_id.services.service_id.ports">
      <code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.ports</code>
    </h2>
    <p>
      Sets an <code>array</code> of ports to expose on the service container.
    </p>
    <h2 id="jobs.job_id.services.service_id.volumes">
      <code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.volumes</code>
    </h2>
    <p>
      Sets an <code>array</code> of volumes for the service container to use.
      You can use volumes to share data between services or other steps in a
      job. You can specify named Docker volumes, anonymous Docker volumes, or
      bind mounts on the host.
    </p>
    <p>To specify a volume, you specify the source and destination path:</p>
    <p><code>&lt;source&gt;:&lt;destinationPath&gt;</code>.</p>
    <p>
      The <code>&lt;source&gt;</code> is a volume name or an absolute path on
      the host machine, and <code>&lt;destinationPath&gt;</code> is an absolute
      path in the container.
    </p>
    <h3 id="example-21">Example</h3>
    <div class="sourceCode" id="cb62">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb62-1" title="1"><span class="fu">volumes:</span></a>
<a class="sourceLine" id="cb62-2" title="2">  <span class="kw">-</span> my_docker_volume:/volume_mount</a>
<a class="sourceLine" id="cb62-3" title="3">  <span class="kw">-</span> /data/my_data</a>
<a class="sourceLine" id="cb62-4" title="4">  <span class="kw">-</span> /source/directory:/destination/directory</a></code></pre>
    </div>
    <h2 id="jobs.job_id.services.service_id.options">
      <code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.options</code>
    </h2>
    <p>
      Additional Docker container resource options. For a list of options, see
      “<a
        href="https://docs.docker.com/engine/reference/commandline/create/#options"
        ><code>docker create</code> options</a
      >.”
    </p>
    <h2 id="filter-pattern-cheat-sheet">Filter pattern cheat sheet</h2>
    <p>You can use special characters in path, branch, and tag filters.</p>
    <ul>
      <li>
        <code>*</code>: Matches zero or more characters, but does not match the
        <code>/</code> character. For example, <code>Octo*</code> matches
        <code>Octocat</code>.
      </li>
      <li><code>**</code>: Matches zero or more of any character.</li>
      <li><code>?</code>: Matches zero or one of the preceding character.</li>
      <li><code>+</code>: Matches one or more of the preceding character.</li>
      <li>
        <code>[]</code> Matches one character listed in the brackets or included
        in ranges. Ranges can only include <code>a-z</code>, <code>A-Z</code>,
        and <code>0-9</code>. For example, the range<code>[0-9a-z]</code>
        matches any digit or lowercase letter. For example,
        <code>[CB]at</code> matches <code>Cat</code> or <code>Bat</code> and
        <code>[1-2]00</code> matches <code>100</code> and <code>200</code>.
      </li>
      <li>
        <code>!</code>: At the start of a pattern makes it negate previous
        positive patterns. It has no special meaning if not the first character.
      </li>
    </ul>
    <p>
      The characters <code>*</code>, <code>[</code>, and <code>!</code> are
      special characters in YAML. If you start a pattern with <code>*</code>,
      <code>[</code>, or <code>!</code>, you must enclose the pattern in quotes.
    </p>
    <div class="sourceCode" id="cb63">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb63-1" title="1"><span class="co"># Valid</span></a>
<a class="sourceLine" id="cb63-2" title="2"><span class="kw">-</span> <span class="st">&#39;**/README.md&#39;</span></a>
<a class="sourceLine" id="cb63-3" title="3"></a>
<a class="sourceLine" id="cb63-4" title="4"><span class="co"># Invalid - creates a parse error that</span></a>
<a class="sourceLine" id="cb63-5" title="5"><span class="co"># prevents your workflow from running.</span></a>
<a class="sourceLine" id="cb63-6" title="6"><span class="kw">-</span> <span class="dt">**/README.md</span></a></code></pre>
    </div>
    <p>
      For more information about branch, tag, and path filter syntax, see “<a
        href="#onpushpull_requestbranchestags"
        ><code>on.&lt;push|pull_request&gt;.&lt;branches|tags&gt;</code></a
      >” and “<a href="#onpushpull_requestpaths"
        ><code>on.&lt;push|pull_request&gt;.paths</code></a
      >.”
    </p>
    <h3 id="patterns-to-match-branches-and-tags">
      Patterns to match branches and tags
    </h3>
    <table>
      <colgroup>
        <col style="width: 21%" />
        <col style="width: 57%" />
        <col style="width: 21%" />
      </colgroup>
      <thead>
        <tr class="header">
          <th>Pattern</th>
          <th>Description</th>
          <th>Example matches</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td><code>feature/*</code></td>
          <td>
            The <code>*</code> wildcard matches any character, but does not
            match slash (<code>/</code>).
          </td>
          <td>
            <code>feature/my-branch</code><br /><br /><code
              >feature/your-branch</code
            >
          </td>
        </tr>
        <tr class="even">
          <td><code>feature/**</code></td>
          <td>
            The <code>**</code> wildcard matches any character including slash
            (<code>/</code>) in branch and tag names.
          </td>
          <td>
            <code>feature/beta-a/my-branch</code><br /><br /><code
              >feature/your-branch</code
            ><br /><br /><code>feature/mona/the/octocat</code>
          </td>
        </tr>
        <tr class="odd">
          <td>
            <code>main</code><br /><br /><code>releases/mona-the-octcat</code>
          </td>
          <td>Matches the exact name of a branch or tag name.</td>
          <td>
            <code>main</code><br /><br /><code>releases/mona-the-octocat</code>
          </td>
        </tr>
        <tr class="even">
          <td><code>'*'</code></td>
          <td>
            Matches all branch and tag names that don’t contain a slash
            (<code>/</code>). The <code>*</code> character is a special
            character in YAML. When you start a pattern with <code>*</code>, you
            must use quotes.
          </td>
          <td><code>main</code><br /><br /><code>releases</code></td>
        </tr>
        <tr class="odd">
          <td><code>'**'</code></td>
          <td>
            Matches all branch and tag names. This is the default behavior when
            you don’t use a <code>branches</code> or <code>tags</code> filter.
          </td>
          <td>
            <code>all/the/branches</code><br /><br /><code>every/tag</code>
          </td>
        </tr>
        <tr class="even">
          <td><code>'*feature'</code></td>
          <td>
            The <code>*</code> character is a special character in YAML. When
            you start a pattern with <code>*</code>, you must use quotes.
          </td>
          <td>
            <code>mona-feature</code><br /><br /><code>feature</code
            ><br /><br /><code>ver-10-feature</code>
          </td>
        </tr>
        <tr class="odd">
          <td><code>v2*</code></td>
          <td>Matches branch and tag names that start with <code>v2</code>.</td>
          <td>
            <code>v2</code><br /><br /><code>v2.0</code><br /><br /><code
              >v2.9</code
            >
          </td>
        </tr>
        <tr class="even">
          <td><code>v[12].[0-9]+.[0-9]+</code></td>
          <td>
            Matches all semantic versioning branches and tags with major version
            1 or 2
          </td>
          <td><code>v1.10.1</code><br /><br /><code>v2.0.0</code></td>
        </tr>
      </tbody>
    </table>
    <h3 id="patterns-to-match-file-paths">Patterns to match file paths</h3>
    <p>
      Path patterns must match the whole path, and start from the repository’s
      root.
    </p>
    <table>
      <colgroup>
        <col style="width: 18%" />
        <col style="width: 48%" />
        <col style="width: 34%" />
      </colgroup>
      <thead>
        <tr class="header">
          <th>Pattern</th>
          <th>Description of matches</th>
          <th>Example matches</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td><code>'*'</code></td>
          <td>
            The <code>*</code> wildcard matches any character, but does not
            match slash (<code>/</code>). The <code>*</code> character is a
            special character in YAML. When you start a pattern with
            <code>*</code>, you must use quotes.
          </td>
          <td><code>README.md</code><br /><br /><code>server.rb</code></td>
        </tr>
        <tr class="even">
          <td><code>'*.jsx?'</code></td>
          <td>
            The <code>?</code> character matches zero or one of the preceding
            character.
          </td>
          <td><code>page.js</code><br /><br /><code>page.jsx</code></td>
        </tr>
        <tr class="odd">
          <td><code>'**'</code></td>
          <td>
            The <code>**</code> wildcard matches any character including slash
            (<code>/</code>). This is the default behavior when you don’t use a
            <code>path</code> filter.
          </td>
          <td><code>all/the/files.md</code></td>
        </tr>
        <tr class="even">
          <td><code>'*.js'</code></td>
          <td>
            The <code>*</code> wildcard matches any character, but does not
            match slash (<code>/</code>). Matches all <code>.js</code> files at
            the root of the repository.
          </td>
          <td><code>app.js</code><br /><br /><code>index.js</code></td>
        </tr>
        <tr class="odd">
          <td><code>'**.js'</code></td>
          <td>Matches all <code>.js</code> files in the repository.</td>
          <td>
            <code>index.js</code><br /><br /><code>js/index.js</code
            ><br /><br /><code>src/js/app.js</code>
          </td>
        </tr>
        <tr class="even">
          <td><code>docs/*</code></td>
          <td>
            All files within the root of the <code>docs</code> directory, at the
            root of the repository.
          </td>
          <td>
            <code>docs/README.md</code><br /><br /><code>docs/file.txt</code>
          </td>
        </tr>
        <tr class="odd">
          <td><code>docs/**</code></td>
          <td>
            Any files in the <code>/docs</code> directory at the root of the
            repository.
          </td>
          <td>
            <code>docs/README.md</code><br /><br /><code
              >docs/mona/octocat.txt</code
            >
          </td>
        </tr>
        <tr class="even">
          <td><code>docs/**/*.md</code></td>
          <td>
            A file with a <code>.md</code> suffix anywhere in the
            <code>docs</code> directory.
          </td>
          <td>
            <code>docs/README.md</code><br /><br /><code
              >docs/mona/hello-world.md</code
            ><br /><br /><code>docs/a/markdown/file.md</code>
          </td>
        </tr>
        <tr class="odd">
          <td><code>'**/docs/**'</code></td>
          <td>
            Any files in a <code>docs</code> directory anywhere in the
            repository.
          </td>
          <td>
            <code>docs/hello.md</code><br /><br /><code
              >dir/docs/my-file.txt</code
            ><br /><br /><code>space/docs/plan/space.doc</code>
          </td>
        </tr>
        <tr class="even">
          <td><code>'**/README.md'</code></td>
          <td>A README.md file anywhere in the repository.</td>
          <td><code>README.md</code><br /><br /><code>js/README.md</code></td>
        </tr>
        <tr class="odd">
          <td><code>'**/*src/**'</code></td>
          <td>
            Any file in a folder with a <code>src</code> suffix anywhere in the
            repository.
          </td>
          <td>
            <code>a/src/app.js</code><br /><br /><code
              >my-src/code/js/app.js</code
            >
          </td>
        </tr>
        <tr class="even">
          <td><code>'**/*-post.md'</code></td>
          <td>
            A file with the suffix <code>-post.md</code> anywhere in the
            repository.
          </td>
          <td>
            <code>my-post.md</code><br /><br /><code>path/their-post.md</code>
          </td>
        </tr>
        <tr class="odd">
          <td><code>'**/migrate-*.sql'</code></td>
          <td>
            A file with the prefix <code>migrate-</code> and suffix
            <code>.sql</code> anywhere in the repository.
          </td>
          <td>
            <code>migrate-10909.sql</code><br /><br /><code
              >db/migrate-v1.0.sql</code
            ><br /><br /><code>db/sept/migrate-v1.sql</code>
          </td>
        </tr>
        <tr class="even">
          <td><code>*.md</code><br /><br /><code>!README.md</code></td>
          <td>
            Using an exclamation mark (<code>!</code>) in front of a pattern
            negates it. When a file matches a pattern and also matches a
            negative pattern defined later in the file, the file will not be
            included.
          </td>
          <td>
            <code>hello.md</code><br /><br /><em>Does not match</em
            ><br /><br /><code>README.md</code><br /><br /><code
              >docs/hello.md</code
            >
          </td>
        </tr>
        <tr class="odd">
          <td>
            <code>*.md</code><br /><br /><code>!README.md</code
            ><br /><br /><code>README*</code>
          </td>
          <td>
            Patterns are checked sequentially. A pattern that negates a previous
            pattern will re-include file paths.
          </td>
          <td>
            <code>hello.md</code><br /><br /><code>README.md</code
            ><br /><br /><code>README.doc</code>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
