<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>Enabling GitHub Packages with AWS</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Enabling GitHub Packages with AWS</h1>
    </header>
    <p>{% warning %}</p>
    <p>
      <strong>Warnings:</strong> - It is critical that you configure any
      restrictive access policies you need for your storage bucket, because {%
      data variables.product.company_short %} does not apply specific object
      permissions or additional access control lists (ACLs) to your storage
      bucket configuration. For example, if you make your bucket public, data in
      the bucket will be accessible to the public internet. For more
      information, see “<a
        href="https://docs.aws.amazon.com/AmazonS3/latest/user-guide/set-permissions.html"
        >Setting bucket and object access permissions</a
      >” in the AWS Documentation. - We recommend using a dedicated bucket for
      {% data variables.product.prodname_registry %}, separate from the bucket
      you use for {% data variables.product.prodname_actions %} storage. - Make
      sure to configure the bucket you’ll want to use in the future. We do not
      recommend changing your storage after you start using {% data
      variables.product.prodname_registry %}.
    </p>
    <p>{% endwarning %}</p>
    <h2 id="prerequisites">Prerequisites</h2>
    <p>
      Before you can enable and configure {% data
      variables.product.prodname_registry %} on {% data
      variables.product.product_location_enterprise %}, you need to prepare your
      AWS storage bucket. To prepare your AWS storage bucket, we recommend
      consulting the official AWS docs at
      <a href="https://docs.aws.amazon.com/index.html">AWS Documentation</a>.
    </p>
    <p>
      Ensure your AWS access key ID and secret have the following permissions: -
      <code>s3:PutObject</code> - <code>s3:GetObject</code> -
      <code>s3:ListBucketMultipartUploads</code> -
      <code>s3:ListMultipartUploadParts</code> -
      <code>s3:AbortMultipartUpload</code> - <code>s3:DeleteObject</code> -
      <code>s3:ListBucket</code>
    </p>
    <h2
      id="enabling-data-variables.product.prodname_registry-with-aws-external-storage"
    >
      Enabling {% data variables.product.prodname_registry %} with AWS external
      storage
    </h2>
    <p>
      {% data reusables.enterprise_site_admin_settings.access-settings %} {%
      data reusables.enterprise_site_admin_settings.management-console %} {%
      data reusables.enterprise_site_admin_settings.packages-tab %} {% data
      reusables.package_registry.enable-enterprise-github-packages %} {%
      ifversion ghes = 2.22 %} 1. Under “AWS Service URL”, type the S3 endpoint
      URL for your bucket’s region.
      <img
        src="/assets/images/enterprise/site-admin-settings/storage-service-url.png"
        alt="AWS Service URL field"
      />
      1. Under “AWS S3 Bucket”, type the name of the S3 bucket you want to use
      to store package artifacts.
      <img
        src="/assets/images/enterprise/site-admin-settings/aws-s3-bucket.png"
        alt="AWS S3 Bucket field"
      />
      1. Under “AWS S3 Access Key”, type your access key for S3.
      <img
        src="/assets/images/enterprise/site-admin-settings/aws-s3-access-key.png"
        alt="AWS S3 Access Key field"
      />
      1. Under “AWS S3 Secret Key”, type your secret key for S3.
      <img
        src="/assets/images/enterprise/site-admin-settings/aws-s3-secret-key.png"
        alt="AWS S3 Secret Key field"
      />
      1. Under “AWS S3 Region”, type your region for S3.
      <img
        src="/assets/images/enterprise/site-admin-settings/aws-s3-region.png"
        alt="AWS S3 Region field"
      />
      {% endif %} {% ifversion ghes &gt; 2.22 %} 1. Under “Packages Storage”,
      select <strong>Amazon S3</strong> and enter your storage bucket’s details:
      - <strong>AWS Service URL:</strong> The service URL for your bucket. For
      example, if your S3 bucket was created in the
      <code>us-west-2 region</code>, this value should be
      <code>https://s3.us-west-2.amazonaws.com</code>.
    </p>
    <pre><code>  For more information, see &quot;[AWS service endpoints](https://docs.aws.amazon.com/general/latest/gr/rande.html)&quot; in the AWS documentation.

- **AWS S3 Bucket:** The name of your S3 bucket dedicated to {% data variables.product.prodname_registry %}.
- **AWS S3 Access Key** and **AWS S3 Secret Key**: The AWS access key ID and secret key to access your bucket.

  For more information on managing AWS access keys, see the &quot;[AWS Identity and Access Management Documentation](https://docs.aws.amazon.com/iam/index.html).&quot;

![Entry boxes for your S3 AWS bucket&#39;s details](/assets/images/help/package-registry/s3-aws-storage-bucket-details.png)</code></pre>
    <p>
      {% endif %} {% data reusables.enterprise_management_console.save-settings
      %}
    </p>
    <h2 id="next-steps">Next steps</h2>
    <p>
      {% data
      reusables.package_registry.next-steps-for-packages-enterprise-setup %}
    </p>
  </body>
</html>
