<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>tree-view</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="tree-view-api">Tree View API</h1>
    <p>
      The Tree View API allows extensions to show content in the sidebar in Visual Studio
      Code. This content is structured as a tree and conforms to the style of the
      <a href="/docs/getstarted/userinterface#_views">built-in views</a> of VS Code.
    </p>
    <p>
      For example, the built-in References Search View extension shows reference search
      results as a separate view.
    </p>
    <figure>
      <img
        src="images/tree-view/references-search-tree-view.png"
        alt="References Search View"
      />
      <figcaption>References Search View</figcaption>
    </figure>
    <p>
      The <strong>Find All References</strong> results are displayed in a
      <strong>References: Results</strong> Tree View, which is in the
      <strong>References</strong> View Container.
    </p>
    <p>
      This guide teaches you how to write an extension that contributes Tree Views and View
      Containers to Visual Studio Code.
    </p>
    <h2 id="tree-view-api-basics">Tree View API Basics</h2>
    <p>
      To explain the Tree View API, we are going to build a sample extension called
      <strong>Node Dependencies</strong>. This extension will use a treeview to display all
      Node.js dependencies in the current folder. The steps for adding a treeview are to
      contribute the treeview in your <code>package.json</code>, create a
      <code>TreeDataProvider</code>, and register the <code>TreeDataProvider</code>. You can
      find the complete source code of this sample extension in the
      <code>tree-view-sample</code> in the
      <a
        href="https://github.com/microsoft/vscode-extension-samples/tree/main/tree-view-sample/README.md"
        >vscode-extension-samples</a
      >
      GitHub repository.
    </p>
    <h3 id="package.json-contribution">package.json Contribution</h3>
    <p>
      First you have to let VS Code know that you are contributing a view, using the
      <a href="/api/references/contribution-points#contributes.views">contributes.views</a>
      Contribution Point in <code>package.json</code>.
    </p>
    <p>Here’s the <code>package.json</code> for the first version of our extension:</p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;custom-view-samples&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="dt">&quot;displayName&quot;</span><span class="fu">:</span> <span class="st">&quot;Custom view Samples&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Samples for VS Code&#39;s view API&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;0.0.1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="dt">&quot;publisher&quot;</span><span class="fu">:</span> <span class="st">&quot;alexr00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="dt">&quot;engines&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-8" title="8">        <span class="dt">&quot;vscode&quot;</span><span class="fu">:</span> <span class="st">&quot;^1.42.0&quot;</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="dt">&quot;activationEvents&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;onView:nodeDependencies&quot;</span> <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="dt">&quot;main&quot;</span><span class="fu">:</span> <span class="st">&quot;./out/extension.js&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-12" title="12">    <span class="dt">&quot;contributes&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-13" title="13">        <span class="dt">&quot;views&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-14" title="14">            <span class="dt">&quot;explorer&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb1-15" title="15">                <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-16" title="16">                    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-17" title="17">                    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Node Dependencies&quot;</span></a>
<a class="sourceLine" id="cb1-18" title="18">                <span class="fu">}</span></a>
<a class="sourceLine" id="cb1-19" title="19">            <span class="ot">]</span></a>
<a class="sourceLine" id="cb1-20" title="20">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb1-21" title="21">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb1-22" title="22">    <span class="dt">&quot;scripts&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-23" title="23">        <span class="dt">&quot;vscode:prepublish&quot;</span><span class="fu">:</span> <span class="st">&quot;npm run compile&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-24" title="24">        <span class="dt">&quot;compile&quot;</span><span class="fu">:</span> <span class="st">&quot;tsc -p ./&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-25" title="25">        <span class="dt">&quot;watch&quot;</span><span class="fu">:</span> <span class="st">&quot;tsc -watch -p ./&quot;</span></a>
<a class="sourceLine" id="cb1-26" title="26">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb1-27" title="27">    <span class="dt">&quot;devDependencies&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-28" title="28">        <span class="dt">&quot;@types/node&quot;</span><span class="fu">:</span> <span class="st">&quot;^10.12.21&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-29" title="29">        <span class="dt">&quot;@types/vscode&quot;</span><span class="fu">:</span> <span class="st">&quot;^1.42.0&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-30" title="30">        <span class="dt">&quot;typescript&quot;</span><span class="fu">:</span> <span class="st">&quot;^3.5.1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-31" title="31">        <span class="dt">&quot;tslint&quot;</span><span class="fu">:</span> <span class="st">&quot;^5.12.1&quot;</span></a>
<a class="sourceLine" id="cb1-32" title="32">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="fu">}</span></a></code></pre>
    </div>
    <p>
      You must specify an identifier and name for the view, and you can contribute to
      following locations:
    </p>
    <ul>
      <li><code>explorer</code>: Explorer view in the Side Bar</li>
      <li><code>debug</code>: Run and Debug view in the Side Bar</li>
      <li><code>scm</code>: Source Control view in the Side Bar</li>
      <li><code>test</code>: Test explorer view in the Side Bar</li>
      <li><a href="#view-container">Custom View Containers</a></li>
    </ul>
    <h3 id="tree-data-provider">Tree Data Provider</h3>
    <p>
      The second step is to provide data to the view you registered so that VS Code can
      display the data in the view. To do so, you should first implement the
      <a href="/api/references/vscode-api#TreeDataProvider">TreeDataProvider</a>. Our
      <code>TreeDataProvider</code> will provide node dependencies data, but you can have a
      data provider that provides other types of data.
    </p>
    <p>There are two necessary methods in this API that you need to implement:</p>
    <ul>
      <li>
        <code>getChildren(element?: T): ProviderResult&lt;T[]&gt;</code> - Implement this to
        return the children for the given <code>element</code> or root (if no element is
        passed).
      </li>
      <li>
        <code>getTreeItem(element: T): TreeItem | Thenable&lt;TreeItem&gt;</code> -
        Implement this to return the UI representation (<a
          href="/api/references/vscode-api#TreeItem"
          >TreeItem</a
        >) of the element that gets displayed in the view.
      </li>
    </ul>
    <p>
      When the user opens the Tree View, the <code>getChildren</code> method will be called
      without an <code>element</code>. From there, your <code>TreeDataProvider</code> should
      return your top-level tree items. In our example, the <code>collapsibleState</code> of
      the top-level tree items is <code>TreeItemCollapsibleState.Collapsed</code>, meaning
      that the top-level tree items will show as collapsed. Setting the
      <code>collapsibleState</code> to <code>TreeItemCollapsibleState.Expanded</code> will
      cause tree items to show as expanded. Leaving the <code>collapsibleState</code> as its
      default of <code>TreeItemCollapsibleState.None</code> indicates that the tree item has
      no children. <code>getChildren</code> will not be called for tree items with a
      <code>collapsibleState</code> of <code>TreeItemCollapsibleState.None</code>.
    </p>
    <p>
      Here is an example of a <code>TreeDataProvider</code> implementation that provides
      node dependencies data:
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode ts"
      ><code class="sourceCode typescript"><a class="sourceLine" id="cb2-1" title="1"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> vscode <span class="im">from</span> <span class="st">&#39;vscode&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> fs <span class="im">from</span> <span class="st">&#39;fs&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> path <span class="im">from</span> <span class="st">&#39;path&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="im">export</span> <span class="kw">class</span> NodeDependenciesProvider <span class="kw">implements</span> <span class="va">vscode</span><span class="op">.</span><span class="at">TreeDataProvider</span><span class="op">&lt;</span>Dependency<span class="op">&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="kw">constructor</span>(<span class="kw">private</span> workspaceRoot<span class="op">:</span> <span class="dt">string</span>) <span class="op">{}</span></a>
<a class="sourceLine" id="cb2-8" title="8"></a>
<a class="sourceLine" id="cb2-9" title="9">    <span class="fu">getTreeItem</span>(element<span class="op">:</span> Dependency)<span class="op">:</span> <span class="va">vscode</span><span class="op">.</span><span class="at">TreeItem</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-10" title="10">        <span class="cf">return</span> element<span class="op">;</span></a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13">    <span class="fu">getChildren</span>(element<span class="op">?:</span> Dependency)<span class="op">:</span> Thenable<span class="op">&lt;</span>Dependency<span class="op">[]&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-14" title="14">        <span class="fu">if</span> (<span class="op">!</span><span class="va">this</span><span class="op">.</span><span class="at">workspaceRoot</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-15" title="15">            <span class="va">vscode</span><span class="op">.</span><span class="va">window</span><span class="op">.</span><span class="fu">showInformationMessage</span>(<span class="st">&#39;No dependency in empty workspace&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-16" title="16">            <span class="cf">return</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">resolve</span>(<span class="op">[]</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-17" title="17">        <span class="op">}</span></a>
<a class="sourceLine" id="cb2-18" title="18"></a>
<a class="sourceLine" id="cb2-19" title="19">        <span class="fu">if</span> (element) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-20" title="20">            <span class="cf">return</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">resolve</span>(<span class="va">this</span><span class="op">.</span><span class="fu">getDepsInPackageJson</span>(<span class="va">path</span><span class="op">.</span><span class="fu">join</span>(<span class="va">this</span><span class="op">.</span><span class="at">workspaceRoot</span><span class="op">,</span> <span class="st">&#39;node_modules&#39;</span><span class="op">,</span> <span class="va">element</span><span class="op">.</span><span class="at">label</span><span class="op">,</span> <span class="st">&#39;package.json&#39;</span>)))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-21" title="21">        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-22" title="22">            <span class="kw">const</span> packageJsonPath <span class="op">=</span> <span class="va">path</span><span class="op">.</span><span class="fu">join</span>(<span class="va">this</span><span class="op">.</span><span class="at">workspaceRoot</span><span class="op">,</span> <span class="st">&#39;package.json&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-23" title="23">            <span class="fu">if</span> (<span class="va">this</span><span class="op">.</span><span class="fu">pathExists</span>(packageJsonPath)) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-24" title="24">                <span class="cf">return</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">resolve</span>(<span class="va">this</span><span class="op">.</span><span class="fu">getDepsInPackageJson</span>(packageJsonPath))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-25" title="25">            <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-26" title="26">                <span class="va">vscode</span><span class="op">.</span><span class="va">window</span><span class="op">.</span><span class="fu">showInformationMessage</span>(<span class="st">&#39;Workspace has no package.json&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-27" title="27">                <span class="cf">return</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">resolve</span>(<span class="op">[]</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-28" title="28">            <span class="op">}</span></a>
<a class="sourceLine" id="cb2-29" title="29">        <span class="op">}</span></a>
<a class="sourceLine" id="cb2-30" title="30"></a>
<a class="sourceLine" id="cb2-31" title="31">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-32" title="32"></a>
<a class="sourceLine" id="cb2-33" title="33">    <span class="co">/**</span></a>
<a class="sourceLine" id="cb2-34" title="34"><span class="co">     * Given the path to package.json, read all its dependencies and devDependencies.</span></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="co">     */</span></a>
<a class="sourceLine" id="cb2-36" title="36">    <span class="kw">private</span> <span class="fu">getDepsInPackageJson</span>(packageJsonPath<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> Dependency<span class="op">[]</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-37" title="37">        <span class="fu">if</span> (<span class="va">this</span><span class="op">.</span><span class="fu">pathExists</span>(packageJsonPath)) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-38" title="38">            <span class="kw">const</span> packageJson <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(<span class="va">fs</span><span class="op">.</span><span class="fu">readFileSync</span>(packageJsonPath<span class="op">,</span> <span class="st">&#39;utf-8&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-39" title="39"></a>
<a class="sourceLine" id="cb2-40" title="40">            <span class="kw">const</span> toDep <span class="op">=</span> (moduleName<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> version<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> Dependency <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-41" title="41">                <span class="fu">if</span> (<span class="va">this</span><span class="op">.</span><span class="fu">pathExists</span>(<span class="va">path</span><span class="op">.</span><span class="fu">join</span>(<span class="va">this</span><span class="op">.</span><span class="at">workspaceRoot</span><span class="op">,</span> <span class="st">&#39;node_modules&#39;</span><span class="op">,</span> moduleName))) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-42" title="42">                    <span class="cf">return</span> <span class="kw">new</span> <span class="fu">Dependency</span>(moduleName<span class="op">,</span> version<span class="op">,</span> <span class="va">vscode</span><span class="op">.</span><span class="va">TreeItemCollapsibleState</span><span class="op">.</span><span class="at">Collapsed</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-43" title="43">                <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-44" title="44">                    <span class="cf">return</span> <span class="kw">new</span> <span class="fu">Dependency</span>(moduleName<span class="op">,</span> version<span class="op">,</span> <span class="va">vscode</span><span class="op">.</span><span class="va">TreeItemCollapsibleState</span><span class="op">.</span><span class="at">None</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-45" title="45">                <span class="op">}</span></a>
<a class="sourceLine" id="cb2-46" title="46">            <span class="op">};</span></a>
<a class="sourceLine" id="cb2-47" title="47"></a>
<a class="sourceLine" id="cb2-48" title="48">            <span class="kw">const</span> deps <span class="op">=</span> <span class="va">packageJson</span><span class="op">.</span><span class="at">dependencies</span></a>
<a class="sourceLine" id="cb2-49" title="49">                <span class="op">?</span> <span class="bu">Object</span>.<span class="fu">keys</span>(<span class="va">packageJson</span><span class="op">.</span><span class="at">dependencies</span>).<span class="fu">map</span>(dep <span class="kw">=&gt;</span> <span class="fu">toDep</span>(dep<span class="op">,</span> <span class="va">packageJson</span><span class="op">.</span><span class="at">dependencies</span><span class="op">[</span>dep<span class="op">]</span>))</a>
<a class="sourceLine" id="cb2-50" title="50">                <span class="op">:</span> <span class="op">[];</span></a>
<a class="sourceLine" id="cb2-51" title="51">            <span class="kw">const</span> devDeps <span class="op">=</span> <span class="va">packageJson</span><span class="op">.</span><span class="at">devDependencies</span></a>
<a class="sourceLine" id="cb2-52" title="52">                <span class="op">?</span> <span class="bu">Object</span>.<span class="fu">keys</span>(<span class="va">packageJson</span><span class="op">.</span><span class="at">devDependencies</span>).<span class="fu">map</span>(dep <span class="kw">=&gt;</span> <span class="fu">toDep</span>(dep<span class="op">,</span> <span class="va">packageJson</span><span class="op">.</span><span class="at">devDependencies</span><span class="op">[</span>dep<span class="op">]</span>))</a>
<a class="sourceLine" id="cb2-53" title="53">                <span class="op">:</span> <span class="op">[];</span></a>
<a class="sourceLine" id="cb2-54" title="54">            <span class="cf">return</span> <span class="va">deps</span><span class="op">.</span><span class="fu">concat</span>(devDeps)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-55" title="55">        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-56" title="56">            <span class="cf">return</span> <span class="op">[];</span></a>
<a class="sourceLine" id="cb2-57" title="57">        <span class="op">}</span></a>
<a class="sourceLine" id="cb2-58" title="58">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-59" title="59"></a>
<a class="sourceLine" id="cb2-60" title="60">    <span class="kw">private</span> <span class="fu">pathExists</span>(p<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="dt">boolean</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-61" title="61">        <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-62" title="62">            <span class="va">fs</span><span class="op">.</span><span class="fu">accessSync</span>(p)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-63" title="63">        <span class="op">}</span> <span class="fu">catch</span> (err) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-64" title="64">            <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-65" title="65">        <span class="op">}</span></a>
<a class="sourceLine" id="cb2-66" title="66">        <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-67" title="67">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-68" title="68"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-69" title="69"></a>
<a class="sourceLine" id="cb2-70" title="70"><span class="kw">class</span> Dependency <span class="kw">extends</span> <span class="va">vscode</span><span class="op">.</span><span class="at">TreeItem</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-71" title="71"></a>
<a class="sourceLine" id="cb2-72" title="72">    <span class="kw">constructor</span>(</a>
<a class="sourceLine" id="cb2-73" title="73">        <span class="kw">public</span> <span class="kw">readonly</span> label<span class="op">:</span> <span class="dt">string</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-74" title="74">        <span class="kw">private</span> version<span class="op">:</span> <span class="dt">string</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-75" title="75">        <span class="kw">public</span> <span class="kw">readonly</span> collapsibleState<span class="op">:</span> <span class="va">vscode</span><span class="op">.</span><span class="at">TreeItemCollapsibleState</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-76" title="76">    ) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-77" title="77">        <span class="fu">super</span>(label<span class="op">,</span> collapsibleState)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-78" title="78">        <span class="va">this</span><span class="op">.</span><span class="at">tooltip</span> <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span><span class="va">this</span><span class="op">.</span><span class="at">label</span><span class="sc">}</span><span class="vs">-</span><span class="sc">${</span><span class="va">this</span><span class="op">.</span><span class="at">version</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-79" title="79">        <span class="va">this</span><span class="op">.</span><span class="at">description</span> <span class="op">=</span> <span class="va">this</span><span class="op">.</span><span class="at">version</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-80" title="80">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-81" title="81"></a>
<a class="sourceLine" id="cb2-82" title="82">    iconPath <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-83" title="83">        light<span class="op">:</span> <span class="va">path</span><span class="op">.</span><span class="fu">join</span>(__filename<span class="op">,</span> <span class="st">&#39;..&#39;</span><span class="op">,</span> <span class="st">&#39;..&#39;</span><span class="op">,</span> <span class="st">&#39;resources&#39;</span><span class="op">,</span> <span class="st">&#39;light&#39;</span><span class="op">,</span> <span class="st">&#39;dependency.svg&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb2-84" title="84">        dark<span class="op">:</span> <span class="va">path</span><span class="op">.</span><span class="fu">join</span>(__filename<span class="op">,</span> <span class="st">&#39;..&#39;</span><span class="op">,</span> <span class="st">&#39;..&#39;</span><span class="op">,</span> <span class="st">&#39;resources&#39;</span><span class="op">,</span> <span class="st">&#39;dark&#39;</span><span class="op">,</span> <span class="st">&#39;dependency.svg&#39;</span>)</a>
<a class="sourceLine" id="cb2-85" title="85">    <span class="op">};</span></a>
<a class="sourceLine" id="cb2-86" title="86"></a>
<a class="sourceLine" id="cb2-87" title="87"><span class="op">}</span></a></code></pre>
    </div>
    <h3 id="registering-the-treedataprovider">Registering the TreeDataProvider</h3>
    <p>The third step is to register the above data provider to your view.</p>
    <p>This can be done in the following two ways:</p>
    <ul>
      <li>
        <p>
          <code>vscode.window.registerTreeDataProvider</code> - Register the tree data
          provider by providing the registered view id and above data provider.
        </p>
        <div class="sourceCode" id="cb3">
          <pre
            class="sourceCode typescript"
          ><code class="sourceCode typescript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">vscode</span><span class="op">.</span><span class="va">window</span><span class="op">.</span><span class="fu">registerTreeDataProvider</span>(<span class="st">&#39;nodeDependencies&#39;</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">NodeDependenciesProvider</span>(<span class="va">vscode</span><span class="op">.</span><span class="va">workspace</span><span class="op">.</span><span class="at">rootPath</span>))<span class="op">;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          <code>vscode.window.createTreeView</code> - Create the Tree View by providing the
          registered view id and above data provider. This will give access to the
          <a href="/api/references/vscode-api#TreeView">TreeView</a>, which you can use for
          performing other view operations. Use <code>createTreeView</code>, if you need the
          <code>TreeView</code> API.
        </p>
        <div class="sourceCode" id="cb4">
          <pre
            class="sourceCode typescript"
          ><code class="sourceCode typescript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">vscode</span><span class="op">.</span><span class="va">window</span><span class="op">.</span><span class="fu">createTreeView</span>(<span class="st">&#39;nodeDependencies&#39;</span><span class="op">,</span> <span class="op">{</span> treeDataProvider<span class="op">:</span> <span class="kw">new</span> <span class="fu">NodeDependenciesProvider</span>(<span class="va">vscode</span><span class="op">.</span><span class="va">workspace</span><span class="op">.</span><span class="at">rootPath</span>)<span class="op">}</span>)<span class="op">;</span></a></code></pre>
        </div>
      </li>
    </ul>
    <p>Here’s the extension in action:</p>
    <figure>
      <img src="images/tree-view/view.png" alt="View" />
      <figcaption>View</figcaption>
    </figure>
    <h3 id="updating-tree-view-content">Updating Tree View content</h3>
    <p>
      Our node dependencies view is simple, and once the data is shown, it isn’t updated.
      However, it would be useful to have a refresh button in the view and update the node
      dependencies view with the current contents of the <code>package.json</code>. To do
      this, we can use the <code>onDidChangeTreeData</code> event.
    </p>
    <ul>
      <li>
        <code>onDidChangeTreeData?: Event&lt;T | undefined | null | void&gt;</code> -
        Implement this if your tree data can change and you want to update the treeview.
      </li>
    </ul>
    <p>Add the following to your <code>NodeDependenciesProvider</code>.</p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode ts"
      ><code class="sourceCode typescript"><a class="sourceLine" id="cb5-1" title="1">  <span class="kw">private</span> _onDidChangeTreeData<span class="op">:</span> <span class="va">vscode</span><span class="op">.</span><span class="at">EventEmitter</span><span class="op">&lt;</span>Dependency <span class="op">|</span> <span class="dt">undefined</span> <span class="op">|</span> <span class="dt">null</span> <span class="op">|</span> <span class="dt">void</span><span class="op">&gt;</span> <span class="op">=</span> <span class="kw">new</span> <span class="va">vscode</span><span class="op">.</span><span class="fu">EventEmitter</span><span class="op">&lt;</span>Dependency <span class="op">|</span> <span class="dt">undefined</span> <span class="op">|</span> <span class="dt">null</span> <span class="op">|</span> <span class="dt">void</span><span class="op">&gt;</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">readonly</span> onDidChangeTreeData<span class="op">:</span> <span class="va">vscode</span><span class="op">.</span><span class="at">Event</span><span class="op">&lt;</span>Dependency <span class="op">|</span> <span class="dt">undefined</span> <span class="op">|</span> <span class="dt">null</span> <span class="op">|</span> <span class="dt">void</span><span class="op">&gt;</span> <span class="op">=</span> <span class="va">this</span><span class="op">.</span><span class="va">_onDidChangeTreeData</span><span class="op">.</span><span class="at">event</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="fu">refresh</span>()<span class="op">:</span> <span class="dt">void</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="va">this</span><span class="op">.</span><span class="va">_onDidChangeTreeData</span><span class="op">.</span><span class="fu">fire</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="op">}</span></a></code></pre>
    </div>
    <p>
      Now we have a refresh method, but no one is calling it. We can add a command to call
      refresh.
    </p>
    <p>In the <code>contributes</code> section of your <code>package.json</code>, add:</p>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb6-1" title="1">    <span class="er">&quot;commands&quot;:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb6-2" title="2">            <span class="fu">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">                <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.refreshEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb6-4" title="4">                <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Refresh&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb6-5" title="5">                <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb6-6" title="6">                    <span class="dt">&quot;light&quot;</span><span class="fu">:</span> <span class="st">&quot;resources/light/refresh.svg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb6-7" title="7">                    <span class="dt">&quot;dark&quot;</span><span class="fu">:</span> <span class="st">&quot;resources/dark/refresh.svg&quot;</span></a>
<a class="sourceLine" id="cb6-8" title="8">                <span class="fu">}</span></a>
<a class="sourceLine" id="cb6-9" title="9">            <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb6-10" title="10">    <span class="ot">]</span></a></code></pre>
    </div>
    <p>And register the command in your extension activation:</p>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode ts"
      ><code class="sourceCode typescript"><a class="sourceLine" id="cb7-1" title="1"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> vscode <span class="im">from</span> <span class="st">&#39;vscode&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="im">import</span> <span class="op">{</span> NodeDependenciesProvider <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./nodeDependencies&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="im">export</span> <span class="kw">function</span> <span class="fu">activate</span>(context<span class="op">:</span> <span class="va">vscode</span><span class="op">.</span><span class="at">ExtensionContext</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="kw">const</span> nodeDependenciesProvider <span class="op">=</span> <span class="kw">new</span> <span class="fu">NodeDependenciesProvider</span>(<span class="va">vscode</span><span class="op">.</span><span class="va">workspace</span><span class="op">.</span><span class="at">rootPath</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6">    <span class="va">vscode</span><span class="op">.</span><span class="va">window</span><span class="op">.</span><span class="fu">registerTreeDataProvider</span>(<span class="st">&#39;nodeDependencies&#39;</span><span class="op">,</span> nodeDependenciesProvider)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="va">vscode</span><span class="op">.</span><span class="va">commands</span><span class="op">.</span><span class="fu">registerCommand</span>(<span class="st">&#39;nodeDependencies.refreshEntry&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="va">nodeDependenciesProvider</span><span class="op">.</span><span class="fu">refresh</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="op">}</span></a></code></pre>
    </div>
    <p>
      Now we have a command that will refresh the node dependencies view, but a button on
      the view would be even better. We already added an <code>icon</code> to the command,
      so it will show up with that icon when we add it to the view.
    </p>
    <p>In the <code>contributes</code> section of your <code>package.json</code>, add:</p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb8-1" title="1"><span class="er">&quot;menus&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">    <span class="dt">&quot;view/title&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb8-3" title="3">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb8-4" title="4">            <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.refreshEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb8-5" title="5">            <span class="dt">&quot;when&quot;</span><span class="fu">:</span> <span class="st">&quot;view == nodeDependencies&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb8-6" title="6">            <span class="dt">&quot;group&quot;</span><span class="fu">:</span> <span class="st">&quot;navigation&quot;</span></a>
<a class="sourceLine" id="cb8-7" title="7">        <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb8-8" title="8">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="fu">}</span></a></code></pre>
    </div>
    <h2 id="activation">Activation</h2>
    <p>
      It is important that your extension is activated only when user needs the
      functionality that your extension provides. In this case, you should consider
      activating your extension when the user starts using the view. VS Code emits an
      activationEvent
      <a href="/api/references/activation-events#onView">onView:${viewId}</a> (<code
        >onView:nodeDependencies</code
      >
      for the example above) when the user opens the view.
    </p>
    <p>
      You can register to this activation event in <code>package.json</code> and VS Code
      will activate your extension on this event:
    </p>
    <div class="sourceCode" id="cb9">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb9-1" title="1"><span class="er">&quot;activationEvents&quot;:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb9-2" title="2">        <span class="st">&quot;onView:nodeDependencies&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="ot">]</span><span class="er">,</span></a></code></pre>
    </div>
    <h2 id="view-container">View Container</h2>
    <p>
      A View Container contains a list of views that are displayed in the Activity Bar or
      Panel along with the built-in View Containers. Examples of built-in View Containers
      are Source Control and Explorer.
    </p>
    <figure>
      <img src="images/tree-view/view-container.png" alt="View Container" />
      <figcaption>View Container</figcaption>
    </figure>
    <p>
      To contribute a View Container, you should first register it using
      <a href="/api/references/contribution-points#contributes.viewsContainers"
        >contributes.viewsContainers</a
      >
      Contribution Point in <code>package.json</code>.
    </p>
    <p>You have to specify the following required fields:</p>
    <ul>
      <li><code>id</code> - The name of the new view container you’re creating.</li>
      <li>
        <code>title</code> - The name that will show up at the top of the view container.
      </li>
      <li>
        <code>icon</code> - An image that will be displayed for the view container when in
        the Activity Bar.
      </li>
    </ul>
    <div class="sourceCode" id="cb10">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb10-1" title="1"><span class="er">&quot;contributes&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="dt">&quot;viewsContainers&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="dt">&quot;activitybar&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb10-4" title="4">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-5" title="5">        <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;package-explorer&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-6" title="6">        <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Package Explorer&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-7" title="7">        <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="st">&quot;media/dep.svg&quot;</span></a>
<a class="sourceLine" id="cb10-8" title="8">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb10-9" title="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb10-10" title="10">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="fu">}</span></a></code></pre>
    </div>
    <p>
      Alternatively, you could contribute this view to the panel by placing it under the
      <code>panel</code> node.
    </p>
    <div class="sourceCode" id="cb11">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb11-1" title="1"><span class="er">&quot;contributes&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="dt">&quot;viewsContainers&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="dt">&quot;panel&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb11-4" title="4">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb11-5" title="5">        <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;package-explorer&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-6" title="6">        <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Package Explorer&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-7" title="7">        <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="st">&quot;media/dep.svg&quot;</span></a>
<a class="sourceLine" id="cb11-8" title="8">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb11-9" title="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb11-10" title="10">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="fu">}</span></a></code></pre>
    </div>
    <h2 id="contributing-views-to-view-containers">
      Contributing views to View Containers
    </h2>
    <p>
      Once you’ve created a View Container, you can use the
      <a href="/api/references/contribution-points#contributes.views">contributes.views</a>
      Contribution Point in <code>package.json</code>.
    </p>
    <div class="sourceCode" id="cb12">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb12-1" title="1"><span class="er">&quot;contributes&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">&quot;views&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb12-3" title="3">    <span class="dt">&quot;package-explorer&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb12-4" title="4">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb12-5" title="5">        <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-6" title="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Node Dependencies&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-7" title="7">        <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="st">&quot;media/dep.svg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-8" title="8">        <span class="dt">&quot;contextualTitle&quot;</span><span class="fu">:</span> <span class="st">&quot;Package Explorer&quot;</span></a>
<a class="sourceLine" id="cb12-9" title="9">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb12-10" title="10">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb12-11" title="11">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="fu">}</span></a></code></pre>
    </div>
    <p>
      A view can also have an optional <code>visibility</code> property which can be set to
      <code>visible</code>, <code>collapsed</code>, or <code>hidden</code>. This property is
      only respected by VS Code the first time a workspace is opened with this view. After
      that, the visibility is set to whatever the user has chosen. If you have a view
      container with many views, or if your view will not be useful to every user of your
      extension, consider setting the view the <code>collapsed</code> or
      <code>hidden</code>. A <code>hidden</code> view will appear in the view containers
      “Views” menu:
    </p>
    <figure>
      <img src="images/tree-view/views-menu.png" alt="Views Menu" />
      <figcaption>Views Menu</figcaption>
    </figure>
    <h2 id="view-actions">View Actions</h2>
    <p>
      Actions are available as inline icons on your individual tree items, in tree item
      context menus, and at the top of your view in the view title. Actions are commands
      that you set to show up in these locations by adding contributions to your
      <code>package.json</code>.
    </p>
    <p>
      To contribute to these three places, you can use the following menu contribution
      points in your package.json:
    </p>
    <ul>
      <li>
        <code>view/title</code> - Location to show actions in the view title. Primary or
        inline actions use <code>"group": "navigation"</code> and rest are secondary
        actions, which are in <code>...</code> menu.
      </li>
      <li>
        <code>view/item/context</code> - Location to show actions for the tree item. Inline
        actions use <code>"group": "inline"</code> and rest are secondary actions, which are
        in <code>...</code> menu.
      </li>
    </ul>
    <p>
      You can control the visibility of these actions using a
      <a href="/api/references/when-clause-contexts">when clause</a>.
    </p>
    <figure>
      <img src="images/tree-view/view-actions.png" alt="View Actions" />
      <figcaption>View Actions</figcaption>
    </figure>
    <p>Examples:</p>
    <div class="sourceCode" id="cb13">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb13-1" title="1"><span class="er">&quot;contributes&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="dt">&quot;commands&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-4" title="4">      <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.refreshEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-5" title="5">      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Refresh&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-6" title="6">      <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-7" title="7">        <span class="dt">&quot;light&quot;</span><span class="fu">:</span> <span class="st">&quot;resources/light/refresh.svg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-8" title="8">        <span class="dt">&quot;dark&quot;</span><span class="fu">:</span> <span class="st">&quot;resources/dark/refresh.svg&quot;</span></a>
<a class="sourceLine" id="cb13-9" title="9">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-10" title="10">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb13-11" title="11">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-12" title="12">      <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.addEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-13" title="13">      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Add&quot;</span></a>
<a class="sourceLine" id="cb13-14" title="14">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb13-15" title="15">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-16" title="16">      <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.editEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-17" title="17">      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Edit&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-18" title="18">      <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-19" title="19">        <span class="dt">&quot;light&quot;</span><span class="fu">:</span> <span class="st">&quot;resources/light/edit.svg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-20" title="20">        <span class="dt">&quot;dark&quot;</span><span class="fu">:</span> <span class="st">&quot;resources/dark/edit.svg&quot;</span></a>
<a class="sourceLine" id="cb13-21" title="21">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-22" title="22">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb13-23" title="23">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-24" title="24">      <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.deleteEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-25" title="25">      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Delete&quot;</span></a>
<a class="sourceLine" id="cb13-26" title="26">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-27" title="27">  <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-28" title="28">  <span class="dt">&quot;menus&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-29" title="29">    <span class="dt">&quot;view/title&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb13-30" title="30">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-31" title="31">        <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.refreshEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-32" title="32">        <span class="dt">&quot;when&quot;</span><span class="fu">:</span> <span class="st">&quot;view == nodeDependencies&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-33" title="33">        <span class="dt">&quot;group&quot;</span><span class="fu">:</span> <span class="st">&quot;navigation&quot;</span></a>
<a class="sourceLine" id="cb13-34" title="34">      <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb13-35" title="35">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-36" title="36">        <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.addEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-37" title="37">        <span class="dt">&quot;when&quot;</span><span class="fu">:</span> <span class="st">&quot;view == nodeDependencies&quot;</span></a>
<a class="sourceLine" id="cb13-38" title="38">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-39" title="39">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-40" title="40">    <span class="dt">&quot;view/item/context&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb13-41" title="41">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-42" title="42">        <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.editEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-43" title="43">        <span class="dt">&quot;when&quot;</span><span class="fu">:</span> <span class="st">&quot;view == nodeDependencies &amp;&amp; viewItem == dependency&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-44" title="44">        <span class="dt">&quot;group&quot;</span><span class="fu">:</span> <span class="st">&quot;inline&quot;</span></a>
<a class="sourceLine" id="cb13-45" title="45">      <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb13-46" title="46">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-47" title="47">        <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.deleteEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-48" title="48">        <span class="dt">&quot;when&quot;</span><span class="fu">:</span> <span class="st">&quot;view == nodeDependencies &amp;&amp; viewItem == dependency&quot;</span></a>
<a class="sourceLine" id="cb13-49" title="49">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-50" title="50">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb13-51" title="51">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-52" title="52"><span class="fu">}</span></a></code></pre>
    </div>
    <p>
      <strong>Note:</strong> If you want to show an action for specific tree items, you can
      do so by defining the context of a tree item using
      <code>TreeItem.contextValue</code> and you can specify the context value for key
      <code>viewItem</code> in <code>when</code> expression.
    </p>
    <p>Examples:</p>
    <div class="sourceCode" id="cb14">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb14-1" title="1"><span class="er">&quot;contributes&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="dt">&quot;menus&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="dt">&quot;view/item/context&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb14-4" title="4">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb14-5" title="5">        <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies.deleteEntry&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb14-6" title="6">        <span class="dt">&quot;when&quot;</span><span class="fu">:</span> <span class="st">&quot;view == nodeDependencies &amp;&amp; viewItem == dependency&quot;</span></a>
<a class="sourceLine" id="cb14-7" title="7">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb14-8" title="8">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb14-9" title="9">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="fu">}</span></a></code></pre>
    </div>
    <h2 id="welcome-content">Welcome content</h2>
    <p>
      If your view can be empty, or if you want to add Welcome content to another
      extension’s empty view, you can contribute <code>viewsWelcome</code> content. An empty
      view is a view that has no <code>message</code> and an empty tree.
    </p>
    <div class="sourceCode" id="cb15">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb15-1" title="1"><span class="er">&quot;contributes&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="dt">&quot;viewsWelcome&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb15-3" title="3">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb15-4" title="4">      <span class="dt">&quot;view&quot;</span><span class="fu">:</span> <span class="st">&quot;nodeDependencies&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb15-5" title="5">      <span class="dt">&quot;contents&quot;</span><span class="fu">:</span> <span class="st">&quot;No node dependencies found [learn more](https://www.npmjs.com/).</span><span class="ch">\n</span><span class="st">[Add Dependency](command:nodeDependencies.addEntry)&quot;</span></a>
<a class="sourceLine" id="cb15-6" title="6">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb15-7" title="7">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="fu">}</span></a></code></pre>
    </div>
    <figure>
      <img src="images/tree-view/welcome-content.png" alt="Welcome Content" />
      <figcaption>Welcome Content</figcaption>
    </figure>
    <p>
      Links are supported in Welcome content. By convention, a link on a line by itself is a
      button. Each Welcome content can also contain a <code>when</code> clause. For more
      examples, see the
      <a href="https://github.com/microsoft/vscode/tree/main/extensions/git"
        >built-in Git extension</a
      >.
    </p>
    <h2 id="treedataprovider">TreeDataProvider</h2>
    <p>
      Extension writers should register a
      <a href="/api/references/vscode-api#TreeDataProvider">TreeDataProvider</a>
      programmatically to populate data in the view.
    </p>
    <div class="sourceCode" id="cb16">
      <pre
        class="sourceCode typescript"
      ><code class="sourceCode typescript"><a class="sourceLine" id="cb16-1" title="1"><span class="va">vscode</span><span class="op">.</span><span class="va">window</span><span class="op">.</span><span class="fu">registerTreeDataProvider</span>(<span class="st">&#39;nodeDependencies&#39;</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">DepNodeProvider</span>())<span class="op">;</span></a></code></pre>
    </div>
    <p>
      See
      <a
        href="https://github.com/microsoft/vscode-extension-samples/tree/main/tree-view-sample/src/nodeDependencies.ts"
        >nodeDependencies.ts</a
      >
      in the <code>tree-view-sample</code> for the implementation.
    </p>
    <h2 id="treeview">TreeView</h2>
    <p>
      If you would like to perform some UI operations on the view programmatically, you can
      use <code>window.createTreeView</code> instead of
      <code>window.registerTreeDataProvider</code>. This will give access to the view, which
      you can use for performing view operations.
    </p>
    <div class="sourceCode" id="cb17">
      <pre
        class="sourceCode typescript"
      ><code class="sourceCode typescript"><a class="sourceLine" id="cb17-1" title="1"><span class="va">vscode</span><span class="op">.</span><span class="va">window</span><span class="op">.</span><span class="fu">createTreeView</span>(<span class="st">&#39;ftpExplorer&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-2" title="2">  treeDataProvider<span class="op">:</span> <span class="kw">new</span> <span class="fu">FtpTreeDataProvider</span>()</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
    <p>
      See
      <a
        href="https://github.com/microsoft/vscode-extension-samples/tree/main/tree-view-sample/src/ftpExplorer.ts"
        >ftpExplorer.ts</a
      >
      in the <code>tree-view-sample</code> for the implementation.
    </p>
  </body>
</html>
