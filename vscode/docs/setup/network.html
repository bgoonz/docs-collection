<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>network</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="network-connections-in-visual-studio-code">Network Connections in Visual Studio Code</h1>
<p>Visual Studio Code is built on top of <a href="https://electron.atom.io/">Electron</a> and benefits from all the networking stack capabilities of <a href="https://www.chromium.org/">Chromium</a>. This also means that VS Code users get much of the networking support available in <a href="https://www.google.com/chrome/index.html">Google Chrome</a>.</p>
<h2 id="common-hostnames">Common hostnames</h2>
<p>A handful of features within VS Code require network communication to work, such as the auto-update mechanism, querying and installing extensions, and telemetry. For these features to work properly in a proxy environment, you must have the product correctly configured.</p>
<p>If you are behind a firewall that needs to allow specific domains used by VS Code, here’s the list of hostnames you should allow communication to go through:</p>
<ul>
<li><code>update.code.visualstudio.com</code> - Visual Studio Code download and update server</li>
<li><code>code.visualstudio.com</code> - Visual Studio Code documentation</li>
<li><code>go.microsoft.com</code> - Microsoft link forwarding service</li>
<li><code>vscode.blob.core.windows.net</code> - Visual Studio Code blob storage, used for remote server</li>
<li><code>marketplace.visualstudio.com</code> - Visual Studio Marketplace</li>
<li><code>*.gallery.vsassets.io</code> - Visual Studio Marketplace</li>
<li><code>*.gallerycdn.vsassets.io</code> - Visual Studio Marketplace</li>
<li><code>rink.hockeyapp.net</code> - Crash reporting service</li>
<li><code>bingsettingssearch.trafficmanager.net</code> - In-product settings search</li>
<li><code>vscode.search.windows.net</code> - In-product settings search</li>
<li><code>raw.githubusercontent.com</code> - GitHub repository raw file access</li>
<li><code>vsmarketplacebadge.apphb.com</code> - Visual Studio Marketplace badge service</li>
<li><code>az764295.vo.msecnd.net</code> - Visual Studio Code download CDN</li>
<li><code>download.visualstudio.microsoft.com</code> - Visual Studio download server, provides dependencies for some VS Code extensions (C++, C#)</li>
<li><code>vscode-sync.trafficmanager.net</code> - Visual Studio Code Settings Sync service</li>
<li><code>vscode-sync-insiders.trafficmanager.net</code> - Visual Studio Code Settings Sync service (Insiders)</li>
</ul>
<h2 id="proxy-server-support">Proxy server support</h2>
<p>VS Code has exactly the same proxy server support as Google Chromium. Here’s a snippet from <a href="https://www.chromium.org/developers/design-documents/network-settings">Chromium’s documentation</a>:</p>
<pre><code>&quot;The Chromium network stack uses the system network settings so that users and administrators can control the network settings of all applications easily. The network settings include:

 - proxy settings
 - SSL/TLS settings
 - certificate revocation check settings
 - certificate and private key stores&quot;</code></pre>
<p>This means that your proxy settings should be picked up automatically.</p>
<p>Otherwise, you can use the following command-line arguments to control your proxy settings:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># Disable proxy</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="ex">--no-proxy-server</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co"># Manual proxy address</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="ex">--proxy-server</span>=<span class="op">&lt;</span>scheme<span class="op">&gt;</span>=<span class="op">&lt;</span>uri<span class="op">&gt;</span>[:<span class="op">&lt;</span>port<span class="op">&gt;</span>][<span class="kw">;</span><span class="ex">...</span>] <span class="kw">|</span> <span class="op">&lt;</span><span class="ex">uri</span><span class="op">&gt;</span>[:<span class="op">&lt;</span>port<span class="op">&gt;</span>] <span class="kw">|</span> <span class="st">&quot;direct://&quot;</span></a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co"># Manual PAC address</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="ex">--proxy-pac-url</span>=<span class="op">&lt;</span>pac-file-url<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb2-9" title="9"></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co"># Disable proxy per host</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="ex">--proxy-bypass-list</span>=(<span class="op">&lt;</span>trailing_domain<span class="op">&gt;</span><span class="kw">|</span><span class="op">&lt;</span><span class="ex">ip-address</span><span class="op">&gt;</span>)[:<span class="op">&lt;</span><span class="ex">port</span><span class="op">&gt;</span>][<span class="kw">;</span><span class="ex">...</span>]</a></code></pre></div>
<p>To learn more about these command-line arguments, see <a href="https://www.chromium.org/developers/design-documents/network-settings">Chromium Network Settings</a>.</p>
<h3 id="authenticated-proxies">Authenticated proxies</h3>
<p>Authenticated proxies should work seamlessly within VS Code with the addition of <a href="https://github.com/microsoft/vscode/pull/22369">PR #22369</a>.</p>
<p>The authentication methods supported are:</p>
<ul>
<li>Basic</li>
<li>Digest</li>
<li>NTLM</li>
<li>Negotiate</li>
</ul>
<p>When using VS Code behind an authenticated HTTP proxy, the following authentication popup should appear:</p>
<figure>
<img src="images/network/proxy.png" alt="proxy" /><figcaption>proxy</figcaption>
</figure>
<p>Note that SOCKS5 proxy authentication support isn’t implemented yet; you can follow the <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=256785">issue in Chromium’s issue tracker</a>.</p>
<p>See <a href="https://www.chromium.org/developers/design-documents/http-authentication">Chromium HTTP authentication</a> to read more about HTTP proxy authentication within VS Code.</p>
<h3 id="ssl-certificates">SSL certificates</h3>
<p>Often HTTPS proxies rewrite SSL certificates of the incoming requests. Chromium was designed to reject responses which are signed by certificates which it doesn’t trust. If you hit any SSL trust issues, there are a few options available for you:</p>
<ul>
<li>Since Chromium uses the OS’s certificate trust infrastructure, the preferred option is to add your proxy’s certificate to your OS’s trust chain. See the <a href="https://www.chromium.org/Home/chromium-security/root-ca-policy">Chromium Root Certificate Policy</a> documentation to learn more.</li>
<li>If your proxy runs in <code>localhost</code>, you can always try the <a href="https://peter.sh/experiments/chromium-command-line-switches/#allow-insecure-localhost">–allow-insecure-localhost</a> command-line flag.</li>
<li>If all else fails, you can tell VS Code to ignore all certificate errors using the <a href="https://peter.sh/experiments/chromium-command-line-switches/#ignore-certificate-errors">–ignore-certificate-errors</a> command-line flag. <strong>Warning:</strong> This is <strong>dangerous</strong> and <strong>not recommended</strong>, since it opens the door to security issues.</li>
</ul>
<h2 id="legacy-proxy-server-support">Legacy proxy server support</h2>
<p>Extensions don’t benefit yet from the same proxy support that VS Code supports. You can follow this issue’s development in <a href="https://github.com/microsoft/vscode/issues/12588">GitHub</a>.</p>
<p>Similarly to extensions, a few other VS Code features don’t yet fully support proxy networking, namely the CLI interface. The CLI interface is what you get when running <code>code --install-extension vscodevim.vim</code> from a command prompt or terminal. You can follow this issue’s development in <a href="https://github.com/microsoft/vscode/issues/29910">GitHub</a>.</p>
<p>Due to both of these constraints, the <code>http.proxy</code>, <code>http.proxyStrictSSL</code> and <code>http.proxyAuthorization</code> variables are still part of VS Code’s settings, yet they are only respected in these two scenarios.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>Here are some helpful links that might help you troubleshoot networking issues in VS Code:</p>
<ul>
<li><a href="https://www.chromium.org/developers/design-documents/network-settings">Network Settings</a></li>
<li><a href="https://www.chromium.org/developers/design-documents/network-stack/debugging-net-proxy">Debugging problems with the network proxy</a></li>
<li><a href="https://www.chromium.org/developers/design-documents/network-stack/socks-proxy">Configuring a SOCKS proxy server in Chrome</a></li>
<li><a href="https://www.chromium.org/developers/design-documents/network-stack/proxy-settings-fallback">Proxy settings and fallback (Windows)</a></li>
</ul>
</body>
</html>
