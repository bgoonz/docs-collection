<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>tutorial-django</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="django-tutorial-in-visual-studio-code">
      Django Tutorial in Visual Studio Code
    </h1>
    <p>
      Django is a high-level Python framework designed for rapid, secure, and
      scalable web development. Django includes rich support for URL routing,
      page templates, and working with data.
    </p>
    <p>
      In this Django tutorial, you create a simple Django app with three pages
      that use a common base template. You create this app in the context of
      Visual Studio Code in order to understand how to work with Django in the
      VS Code terminal, editor, and debugger. This tutorial does not explore
      various details about Django itself, such as working with data models and
      creating an administrative interface. For guidance on those aspects, refer
      to the Django documentation links at the end of this tutorial.
    </p>
    <p>
      The completed code project from this Django tutorial can be found on
      GitHub:
      <a
        href="https://github.com/microsoft/python-sample-vscode-django-tutorial"
        >python-sample-vscode-django-tutorial</a
      >.
    </p>
    <p>
      If you have any problems, feel free to file an issue for this tutorial in
      the
      <a href="https://github.com/microsoft/vscode-docs/issues"
        >VS Code documentation repository</a
      >.
    </p>
    <h2 id="prerequisites">Prerequisites</h2>
    <p>
      To successfully complete this Django tutorial, you must do the following
      (which are the same steps as in the
      <a href="/docs/python/python-tutorial.md">general Python tutorial</a>):
    </p>
    <ol type="1">
      <li>
        <p>
          Install the
          <a
            href="https://marketplace.visualstudio.com/items?itemName=ms-python.python"
            >Python extension</a
          >.
        </p>
      </li>
      <li>
        Install a version of Python 3 (for which this tutorial is written).
        Options include:
        <ul>
          <li>
            (All operating systems) A download from
            <a href="https://www.python.org/downloads/">python.org</a>;
            typically use the <strong>Download Python 3.9.1</strong> button that
            appears first on the page (or whatever is the latest version).
          </li>
          <li>
            (Linux) The built-in Python 3 installation works well, but to
            install other Python packages you must run
            <code>sudo apt install python3-pip</code> in the terminal.
          </li>
          <li>
            (macOS) An installation through
            <a href="https://brew.sh/">Homebrew</a> on macOS using
            <code>brew install python3</code> (the system install of Python on
            macOS is not supported).
          </li>
          <li>
            (All operating systems) A download from
            <a href="https://www.anaconda.com/download/">Anaconda</a> (for data
            science purposes).
          </li>
        </ul>
      </li>
      <li>
        <p>
          On Windows, make sure the location of your Python interpreter is
          included in your PATH environment variable. You can check the location
          by running <code>path</code> at the command prompt. If the Python
          interpreter’s folder isn’t included, open Windows Settings, search for
          “environment”, select
          <strong>Edit environment variables for your account</strong>, then
          edit the <strong>Path</strong> variable to include that folder.
        </p>
      </li>
    </ol>
    <h2 id="create-a-project-environment-for-the-django-tutorial">
      Create a project environment for the Django tutorial
    </h2>
    <p>
      In this section, you create a virtual environment in which Django is
      installed. Using a virtual environment avoids installing Django into a
      global Python environment and gives you exact control over the libraries
      used in an application. A virtual environment also makes it easy to
      <a href="#create-a-requirementstxt-file-for-the-environment"
        >Create a requirements.txt file for the environment</a
      >.
    </p>
    <ol type="1">
      <li>
        <p>
          On your file system, create a project folder for this tutorial, such
          as <code>hello_django</code>.
        </p>
      </li>
      <li>
        <p>
          In that folder, use the following command (as appropriate to your
          computer) to create a virtual environment named <code>env</code> based
          on your current interpreter:
        </p>
        <div class="sourceCode" id="cb1">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Linux</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">sudo</span> apt-get install python3-venv    <span class="co"># If needed</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="ex">python3</span> -m venv env</a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># macOS</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="ex">python3</span> -m venv env</a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co"># Windows</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="ex">python</span> -m venv env</a></code></pre>
        </div>
        <blockquote>
          <p>
            <strong>Note</strong>: Use a stock Python installation when running
            the above commands. If you use <code>python.exe</code> from an
            Anaconda installation, you see an error because the ensurepip module
            isn’t available, and the environment is left in an unfinished state.
          </p>
        </blockquote>
      </li>
      <li>
        <p>
          Open the project folder in VS Code by running <code>code .</code>, or
          by running VS Code and using the <strong>File</strong> &gt;
          <strong>Open Folder</strong> command.
        </p>
      </li>
      <li>
        <p>
          In VS Code, open the Command Palette (<strong>View</strong> &gt;
          <strong>Command Palette</strong> or
          (<code>kb(workbench.action.showCommands)</code>)). Then select the
          <strong>Python: Select Interpreter</strong> command:
        </p>
        <figure>
          <img
            src="images/shared/command-palette.png"
            alt="Django tutorial: opening the Command Palette in VS Code"
          />
          <figcaption>
            Django tutorial: opening the Command Palette in VS Code
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          The command presents a list of available interpreters that VS Code can
          locate automatically (your list will vary; if you don’t see the
          desired interpreter, see
          <a href="/docs/python/environments.md"
            >Configuring Python environments</a
          >). From the list, select the virtual environment in your project
          folder that starts with <code>./env</code> or <code>.\env</code>:
        </p>
        <figure>
          <img
            src="images/shared/select-virtual-environment.png"
            alt="Django tutorial: Selecting the virtual environment for Python"
          />
          <figcaption>
            Django tutorial: Selecting the virtual environment for Python
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Run
          <a href="/docs/editor/integrated-terminal.md"
            ><strong>Terminal: Create New Integrated Terminal</strong></a
          >
          (<code>kb(workbench.action.terminal.new)</code>) from the Command
          Palette, which creates a terminal and automatically activates the
          virtual environment by running its activation script.
        </p>
        <blockquote>
          <p>
            <strong>Note</strong>: On Windows, if your default terminal type is
            PowerShell, you may see an error that it cannot run activate.ps1
            because running scripts is disabled on the system. The error
            provides a link for information on how to allow scripts. Otherwise,
            use <strong>Terminal: Select Default Shell</strong> to set “Command
            Prompt” or “Git Bash” as your default instead.
          </p>
        </blockquote>
      </li>
      <li>
        <p>
          The selected environment appears on the left side of the VS Code
          status bar, and notice the “(venv)” indicator that tells you that
          you’re using a virtual environment:
        </p>
        <figure>
          <img
            src="images/shared/environment-in-status-bar.png"
            alt="Django tutorial: selected environment showing in the VS Code status bar"
          />
          <figcaption>
            Django tutorial: selected environment showing in the VS Code status
            bar
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Update pip in the virtual environment by running the following command
          in the VS Code Terminal:
        </p>
        <div class="sourceCode" id="cb2">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">python</span> -m pip install --upgrade pip</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Install Django in the virtual environment by running the following
          command in the VS Code Terminal:
        </p>
        <div class="sourceCode" id="cb3">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">python</span> -m pip install django</a></code></pre>
        </div>
      </li>
    </ol>
    <p>
      You now have a self-contained environment ready for writing Django code.
      VS Code activates the environment automatically when you use
      <a href="/docs/editor/integrated-terminal.md"
        ><strong>Terminal: Create New Integrated Terminal</strong></a
      >
      (<code>kb(workbench.action.terminal.new)</code>). If you open a separate
      command prompt or terminal, activate the environment by running
      <code>source env/bin/activate</code> (Linux/macOS) or
      <code>env\Scripts\Activate.ps1</code> (Windows). You know the environment
      is activated when the command prompt shows <strong>(env)</strong> at the
      beginning.
    </p>
    <h2 id="create-and-run-a-minimal-django-app">
      Create and run a minimal Django app
    </h2>
    <p>
      In Django terminology, a “Django project” is composed of several
      site-level configuration files along with one or more “apps” that you
      deploy to a web host to create a full web application. A Django project
      can contain multiple apps, each of which typically has an independent
      function in the project, and the same app can be in multiple Django
      projects. An app, for its part, is just a Python package that follows
      certain conventions that Django expects.
    </p>
    <p>
      To create a minimal Django app, then, it’s necessary to first create the
      Django project to serve as the container for the app, then create the app
      itself. For both purposes, you use the Django administrative utility,
      <code>django-admin</code>, which is installed when you install the Django
      package.
    </p>
    <h3 id="create-the-django-project">Create the Django project</h3>
    <ol type="1">
      <li>
        <p>
          In the VS Code Terminal where your virtual environment is activated,
          run the following command:
        </p>
        <div class="sourceCode" id="cb4">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="ex">django-admin</span> startproject web_project .</a></code></pre>
        </div>
        <p>
          This <code>startproject</code> command assumes (by use of
          <code>.</code> at the end) that the current folder is your project
          folder, and creates the following within it:
        </p>
        <ul>
          <li>
            <p>
              <code>manage.py</code>: The Django command-line administrative
              utility for the project. You run administrative commands for the
              project using
              <code>python manage.py &lt;command&gt; [options]</code>.
            </p>
          </li>
          <li>
            A subfolder named <code>web_project</code>, which contains the
            following files:
            <ul>
              <li>
                <code>__init__.py</code>: an empty file that tells Python that
                this folder is a Python package.
              </li>
              <li>
                <code>asgi.py</code>: an entry point for
                <a href="https://asgi.readthedocs.io/en/latest/"
                  >ASGI-compatible</a
                >
                web servers to serve your project. You typically leave this file
                as-is as it provides the hooks for production web servers.
              </li>
              <li>
                <code>settings.py</code>: contains settings for Django project,
                which you modify in the course of developing a web app.
              </li>
              <li>
                <code>urls.py</code>: contains a table of contents for the
                Django project, which you also modify in the course of
                development.
              </li>
              <li>
                <code>wsgi.py</code>: an entry point for WSGI-compatible web
                servers to serve your project. You typically leave this file
                as-is as it provides the hooks for production web servers.
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p>
          Create an empty development database by running the following command:
        </p>
        <div class="sourceCode" id="cb5">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="ex">python</span> manage.py migrate</a></code></pre>
        </div>
        <p>
          When you run the server the first time, it creates a default SQLite
          database in the file <code>db.sqlite3</code> that is intended for
          development purposes, but can be used in production for low-volume web
          apps. For additional information about databases, see the
          <a href="#types-of-databases">Types of databases</a> section.
        </p>
      </li>
      <li>
        <p>
          To verify the Django project, make sure your virtual environment is
          activated, then start Django’s development server using the command
          <code>python manage.py runserver</code>. The server runs on the
          default port 8000, and you see output like the following output in the
          terminal window:
        </p>
        <pre><code>Performing system checks...

System check identified no issues (0 silenced).

January 15, 2021 - 14:33:31
Django version 3.1.5, using settings &#39;web_project.settings&#39;
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.</code></pre>
        <p>
          Django’s built-in web server is intended <em>only</em> for local
          development purposes. When you deploy to a web host, however, Django
          uses the host’s web server instead. The <code>wsgi.py</code> and
          <code>asgi.py</code> modules in the Django project take care of
          hooking into the production servers.
        </p>
        <p>
          If you want to use a different port than the default 8000, specify the
          port number on the command line, such as
          <code>python manage.py runserver 5000</code>.
        </p>
      </li>
      <li>
        <p>
          <code>kbstyle(Ctrl+click)</code> the
          <code>http://127.0.0.1:8000/</code> URL in the terminal output window
          to open your default browser to that address. If Django is installed
          correctly and the project is valid, you see the default page shown
          below. The VS Code terminal output window also shows the server log.
        </p>
        <figure>
          <img
            src="images/django-tutorial/django-empty-project-success.png"
            alt="Django tutorial: default view of empty Django project"
          />
          <figcaption>
            Django tutorial: default view of empty Django project
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          When you’re done, close the browser window and stop the server in VS
          Code using <code>kbstyle(Ctrl+C)</code> as indicated in the terminal
          output window.
        </p>
      </li>
    </ol>
    <h3 id="create-a-django-app">Create a Django app</h3>
    <ol type="1">
      <li>
        <p>
          In the VS Code Terminal with your virtual environment activated, run
          the administrative utility’s <code>startapp</code> command in your
          project folder (where <code>manage.py</code> resides):
        </p>
        <div class="sourceCode" id="cb7">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="ex">python</span> manage.py startapp hello</a></code></pre>
        </div>
        <p>
          The command creates a folder called <code>hello</code> that contains a
          number of code files and one subfolder. Of these, you frequently work
          with <code>views.py</code> (that contains the functions that define
          pages in your web app) and <code>models.py</code> (that contains
          classes defining your data objects). The
          <code>migrations</code> folder is used by Django’s administrative
          utility to manage database versions as discussed later in this
          tutorial. There are also the files <code>apps.py</code> (app
          configuration), <code>admin.py</code> (for creating an
          <a href="https://docs.djangoproject.com/en/3.1/ref/contrib/admin/"
            >administrative interface</a
          >), and <code>tests.py</code> (for
          <a href="https://docs.djangoproject.com/en/3.1/topics/testing/"
            >creating tests</a
          >), which are not covered here.
        </p>
      </li>
      <li>
        <p>
          Modify <code>hello/views.py</code> to match the following code, which
          creates a single view for the app’s home page:
        </p>
        <div class="sourceCode" id="cb8">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1"><span class="im">from</span> django.http <span class="im">import</span> HttpResponse</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">def</span> home(request):</a>
<a class="sourceLine" id="cb8-4" title="4">    <span class="cf">return</span> HttpResponse(<span class="st">&quot;Hello, Django!&quot;</span>)</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Create a file, <code>hello/urls.py</code>, with the contents below.
          The <code>urls.py</code> file is where you specify patterns to route
          different URLs to their appropriate views. The code below contains one
          route to map root URL of the app (<code>""</code>) to the
          <code>views.home</code> function that you just added to
          <code>hello/views.py</code>:
        </p>
        <div class="sourceCode" id="cb9">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb9-1" title="1"><span class="im">from</span> django.urls <span class="im">import</span> path</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="im">from</span> hello <span class="im">import</span> views</a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4">urlpatterns <span class="op">=</span> [</a>
<a class="sourceLine" id="cb9-5" title="5">    path(<span class="st">&quot;&quot;</span>, views.home, name<span class="op">=</span><span class="st">&quot;home&quot;</span>),</a>
<a class="sourceLine" id="cb9-6" title="6">]</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          The <code>web_project</code> folder also contains a
          <code>urls.py</code> file, which is where URL routing is actually
          handled. Open <code>web_project/urls.py</code> and modify it to match
          the following code (you can retain the instructive comments if you
          like). This code pulls in the app’s <code>hello/urls.py</code> using
          <code>django.urls.include</code>, which keeps the app’s routes
          contained within the app. This separation is helpful when a project
          contains multiple apps.
        </p>
        <div class="sourceCode" id="cb10">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb10-1" title="1"><span class="im">from</span> django.contrib <span class="im">import</span> admin</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="im">from</span> django.urls <span class="im">import</span> include, path</a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4">urlpatterns <span class="op">=</span> [</a>
<a class="sourceLine" id="cb10-5" title="5">    path(<span class="st">&quot;&quot;</span>, include(<span class="st">&quot;hello.urls&quot;</span>)),</a>
<a class="sourceLine" id="cb10-6" title="6">    path(<span class="st">&#39;admin/&#39;</span>, admin.site.urls)</a>
<a class="sourceLine" id="cb10-7" title="7">]</a></code></pre>
        </div>
      </li>
      <li><p>Save all modified files.</p></li>
      <li>
        <p>
          In the VS Code Terminal, again with the virtual environment activated,
          run the development server with
          <code>python manage.py runserver</code> and open a browser to
          <code>http://127.0.0.1:8000/</code> to see a page that renders “Hello,
          Django”.
        </p>
        <figure>
          <img
            src="images/django-tutorial/app-in-browser-01.png"
            alt="Django tutorial: the basic Django app running in a browser"
          />
          <figcaption>
            Django tutorial: the basic Django app running in a browser
          </figcaption>
        </figure>
      </li>
    </ol>
    <h2 id="create-a-debugger-launch-profile">
      Create a debugger launch profile
    </h2>
    <p>
      You’re probably already wondering if there’s an easier way to run the
      server and test the app without typing
      <code>python manage.py runserver</code> each time. Fortunately, there is!
      You can create a customized launch profile in VS Code, which is also used
      for the inevitable exercise of debugging.
    </p>
    <ol type="1">
      <li>
        <p>
          Switch to <strong>Run</strong> view in VS Code (using the left-side
          activity bar or <code>kb(workbench.action.debug.start)</code>). You
          may see the message “To customize Run and Debug create a launch.json
          file”. This means that you don’t yet have a
          <code>launch.json</code> file containing debug configurations. VS Code
          can create that for you if you click on the
          <strong>create a launch.json file</strong> link:
        </p>
        <figure>
          <img
            src="images/shared/debug-panel-initial-view.png"
            alt="Django tutorial: initial view of the debug panel"
          />
          <figcaption>
            Django tutorial: initial view of the debug panel
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Select the link and VS Code will prompt for a debug configuration.
          Select <strong>Django</strong> from the dropdown and VS Code will
          populate a new <code>launch.json</code> file with a Django run
          configuration. The <code>launch.json</code> file contains a number of
          debugging configurations, each of which is a separate JSON object
          within the <code>configuration</code> array.
        </p>
      </li>
      <li>
        <p>
          Scroll down to and examine the configuration with the name “Python:
          Django”:
        </p>
        <div class="sourceCode" id="cb11">
          <pre
            class="sourceCode json"
          ><code class="sourceCode json"><a class="sourceLine" id="cb11-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Python: Django&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;python&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-4" title="4">    <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="st">&quot;launch&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-5" title="5">    <span class="dt">&quot;program&quot;</span><span class="fu">:</span> <span class="st">&quot;${workspaceFolder}/manage.py&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-6" title="6">    <span class="dt">&quot;args&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb11-7" title="7">        <span class="st">&quot;runserver&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb11-8" title="8">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-9" title="9">    <span class="dt">&quot;django&quot;</span><span class="fu">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="fu">}</span><span class="er">,</span></a></code></pre>
        </div>
        <p>
          This configuration tells VS Code to run
          <code>"${workspaceFolder}/manage.py"</code> using the selected Python
          interpreter and the arguments in the <code>args</code> list. Launching
          the VS Code debugger with this configuration, then, is the same as
          running <code>python manage.py runserver</code> in the VS Code
          Terminal with your activated virtual environment. (You can add a port
          number like <code>"5000"</code> to <code>args</code> if desired.) The
          <code>"django": true</code> entry also tells VS Code to enable
          debugging of Django page templates, which you see later in this
          tutorial.
        </p>
      </li>
      <li>
        <p>
          Test the configuration by selecting the <strong>Run</strong> &gt;
          <strong>Start Debugging</strong> menu command, or selecting the green
          <strong>Start Debugging</strong> arrow next to the list
          (<code>kb(workbench.action.debug.continue)</code>):
        </p>
        <figure>
          <img
            src="images/django-tutorial/debug-continue-arrow.png"
            alt="Django tutorial: start debugging/continue arrow on the debug toolbar"
          />
          <figcaption>
            Django tutorial: start debugging/continue arrow on the debug toolbar
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          <code>kbstyle(Ctrl+click)</code> the
          <code>http://127.0.0.1:8000/</code> URL in the terminal output window
          to open the browser and see that the app is running properly.
        </p>
      </li>
      <li>
        <p>
          Close the browser and stop the debugger when you’re finished. To stop
          the debugger, use the Stop toolbar button (the red square) or the
          <strong>Run</strong> &gt; <strong>Stop Debugging</strong> command
          (<code>kb(workbench.action.debug.stop)</code>).
        </p>
      </li>
      <li>
        <p>
          You can now use the <strong>Run</strong> &gt;
          <strong>Start Debugging</strong> at any time to test the app, which
          also has the benefit of automatically saving all modified files.
        </p>
      </li>
    </ol>
    <h2 id="explore-the-debugger">Explore the debugger</h2>
    <p>
      Debugging gives you the opportunity to pause a running program on a
      particular line of code. When a program is paused, you can examine
      variables, run code in the Debug Console panel, and otherwise take
      advantage of the features described on
      <a href="/docs/python/debugging.md">Debugging</a>. Running the debugger
      also automatically saves any modified files before the debugging session
      begins.
    </p>
    <p>
      <strong>Before you begin</strong>: Make sure you’ve stopped the running
      app at the end of the last section by using
      <code>kbstyle(Ctrl+C)</code> in the terminal. If you leave the app running
      in one terminal, it continues to own the port. As a result, when you run
      the app in the debugger using the same port, the original running app
      handles all the requests and you won’t see any activity in the app being
      debugged and the program won’t stop at breakpoints. In other words, if the
      debugger doesn’t seem to be working, make sure that no other instance of
      the app is still running.
    </p>
    <ol type="1">
      <li>
        <p>
          In <code>hello/urls.py</code>, add a route to the
          <code>urlpatterns</code> list:
        </p>
        <div class="sourceCode" id="cb12">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb12-1" title="1">path(<span class="st">&quot;hello/&lt;name&gt;&quot;</span>, views.hello_there, name<span class="op">=</span><span class="st">&quot;hello_there&quot;</span>),</a></code></pre>
        </div>
        <p>
          The first argument to <code>path</code> defines a route “hello/” that
          accepts a variable string called <em>name</em>. The string is passed
          to the <code>views.hello_there</code> function specified in the second
          argument to <code>path</code>.
        </p>
        <p>
          URL routes are case-sensitive. For example, the route
          <code>/hello/&lt;name&gt;</code> is distinct from
          <code>/Hello/&lt;name&gt;</code>. If you want the same view function
          to handle both, define paths for each variant.
        </p>
      </li>
      <li>
        <p>
          Replace the contents of <code>views.py</code> with the following code
          to define the <code>hello_there</code> function that you can step
          through in the debugger:
        </p>
        <div class="sourceCode" id="cb13">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb13-1" title="1"><span class="im">import</span> re</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="im">from</span> django.utils.timezone <span class="im">import</span> datetime</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="im">from</span> django.http <span class="im">import</span> HttpResponse</a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="kw">def</span> home(request):</a>
<a class="sourceLine" id="cb13-6" title="6">    <span class="cf">return</span> HttpResponse(<span class="st">&quot;Hello, Django!&quot;</span>)</a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="kw">def</span> hello_there(request, name):</a>
<a class="sourceLine" id="cb13-9" title="9">    now <span class="op">=</span> datetime.now()</a>
<a class="sourceLine" id="cb13-10" title="10">    formatted_now <span class="op">=</span> now.strftime(<span class="st">&quot;%A, </span><span class="sc">%d</span><span class="st"> %B, %Y at </span><span class="sc">%X</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb13-11" title="11"></a>
<a class="sourceLine" id="cb13-12" title="12">    <span class="co"># Filter the name argument to letters only using regular expressions. URL arguments</span></a>
<a class="sourceLine" id="cb13-13" title="13">    <span class="co"># can contain arbitrary text, so we restrict to safe characters only.</span></a>
<a class="sourceLine" id="cb13-14" title="14">    match_object <span class="op">=</span> re.match(<span class="st">&quot;[a-zA-Z]+&quot;</span>, name)</a>
<a class="sourceLine" id="cb13-15" title="15"></a>
<a class="sourceLine" id="cb13-16" title="16">    <span class="cf">if</span> match_object:</a>
<a class="sourceLine" id="cb13-17" title="17">        clean_name <span class="op">=</span> match_object.group(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb13-18" title="18">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb13-19" title="19">        clean_name <span class="op">=</span> <span class="st">&quot;Friend&quot;</span></a>
<a class="sourceLine" id="cb13-20" title="20"></a>
<a class="sourceLine" id="cb13-21" title="21">    content <span class="op">=</span> <span class="st">&quot;Hello there, &quot;</span> <span class="op">+</span> clean_name <span class="op">+</span> <span class="st">&quot;! It&#39;s &quot;</span> <span class="op">+</span> formatted_now</a>
<a class="sourceLine" id="cb13-22" title="22">    <span class="cf">return</span> HttpResponse(content)</a></code></pre>
        </div>
        <p>
          The <code>name</code> variable defined in the URL route is given as an
          argument to the <code>hello_there</code> function. As described in the
          code comments, always filter arbitrary user-provided information to
          avoid various attacks on your app. In this case, the code filters the
          name argument to contain only letters, which avoids injection of
          control characters, HTML, and so forth. (When you use templates in the
          next section, Django does automatic filtering and you don’t need this
          code.)
        </p>
      </li>
      <li>
        Set a breakpoint at the first line of code in the
        <code>hello_there</code> function (<code>now = datetime.now()</code>) by
        doing any one of the following:
        <ul>
          <li>
            With the cursor on that line, press
            <code>kb(editor.debug.action.toggleBreakpoint)</code>, or,
          </li>
          <li>
            With the cursor on that line, select the <strong>Run</strong> &gt;
            <strong>Toggle Breakpoint</strong> menu command, or,
          </li>
          <li>
            Click directly in the margin to the left of the line number (a faded
            red dot appears when hovering there).
          </li>
        </ul>
        <p>The breakpoint appears as a red dot in the left margin:</p>
        <figure>
          <img
            src="images/django-tutorial/debug-breakpoint-set.png"
            alt="Django tutorial: a breakpoint set on the first line of the hello_there function"
          />
          <figcaption>
            Django tutorial: a breakpoint set on the first line of the
            hello_there function
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Start the debugger by selecting the <strong>Run</strong> &gt;
          <strong>Start Debugging</strong> menu command, or selecting the green
          <strong>Start Debugging</strong> arrow next to the list
          (<code>kb(workbench.action.debug.continue)</code>):
        </p>
        <figure>
          <img
            src="images/django-tutorial/debug-continue-arrow.png"
            alt="Django tutorial: start debugging/continue arrow on the debug toolbar"
          />
          <figcaption>
            Django tutorial: start debugging/continue arrow on the debug toolbar
          </figcaption>
        </figure>
        <p>Observe that the status bar changes color to indicate debugging:</p>
        <figure>
          <img
            src="images/django-tutorial/debug-status-bar.png"
            alt="Django tutorial: appearance of the debugging status bar"
          />
          <figcaption>
            Django tutorial: appearance of the debugging status bar
          </figcaption>
        </figure>
        <p>
          A debugging toolbar (shown below) also appears in VS Code containing
          commands in the following order: Pause (or Continue,
          <code>kb(workbench.action.debug.continue)</code>), Step Over
          (<code>kb(workbench.action.debug.stepOver)</code>), Step Into
          (<code>kb(workbench.action.debug.stepInto)</code>), Step Out
          (<code>kb(workbench.action.debug.stepOut)</code>), Restart
          (<code>kb(workbench.action.debug.restart)</code>), and Stop
          (<code>kb(workbench.action.debug.stop)</code>). See
          <a href="/docs/editor/debugging.md">VS Code debugging</a> for a
          description of each command.
        </p>
        <figure>
          <img
            src="images/shared/debug-toolbar.png"
            alt="Django tutorial: the VS Code debug toolbar"
          />
          <figcaption>Django tutorial: the VS Code debug toolbar</figcaption>
        </figure>
      </li>
      <li>
        <p>
          Output appears in a “Python Debug Console” terminal. Open a browser
          and navigate to <code>http://127.0.0.1:8000/hello/VSCode</code>.
          Before the page renders, VS Code pauses the program at the breakpoint
          you set. The small yellow arrow on the breakpoint indicates that it’s
          the next line of code to run.
        </p>
        <figure>
          <img
            src="images/django-tutorial/debug-program-paused.png"
            alt="Django tutorial: VS Code paused at a breakpoint"
          />
          <figcaption>
            Django tutorial: VS Code paused at a breakpoint
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Use Step Over to run the <code>now = datetime.now()</code> statement.
        </p>
      </li>
      <li>
        <p>
          On the left side of the VS Code window, you see a
          <strong>Variables</strong> pane that shows local variables, such as
          <code>now</code>, as well as arguments, such as <code>name</code>.
          Below that are panes for <strong>Watch</strong>,
          <strong>Call Stack</strong>, and <strong>Breakpoints</strong> (see
          <a href="/docs/editor/debugging.md">VS Code debugging</a> for
          details). In the <strong>Locals</strong> section, try expanding
          different values. You can also double-click values (or use
          <code>kb(debug.setVariable)</code>) to modify them. Changing variables
          such as <code>now</code>, however, can break the program. Developers
          typically make changes only to correct values when the code didn’t
          produce the right value to begin with.
        </p>
        <figure>
          <img
            src="images/django-tutorial/debug-local-variables.png"
            alt="Django tutorial: local variables and arguments in VS Code during debugging"
          />
          <figcaption>
            Django tutorial: local variables and arguments in VS Code during
            debugging
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          When a program is paused, the <strong>Debug Console</strong> panel
          (which is different from the “Python Debug Console” in the Terminal
          panel) lets you experiment with expressions and try out bits of code
          using the current state of the program. For example, once you’ve
          stepped over the line <code>now = datetime.now()</code>, you might
          experiment with different date/time formats. In the editor, select the
          code that reads <code>now.strftime("%A, %d %B, %Y at %X")</code>, then
          right-click and select <strong>Debug: Evaluate</strong> to send that
          code to the debug console, where it runs:
        </p>
        <div class="sourceCode" id="cb14">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="ex">now.strftime</span>(<span class="st">&quot;%A, %d %B, %Y at %X&quot;</span>)</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">&#39;Friday, 07 September, 2018 at 07:46:32&#39;</span></a></code></pre>
        </div>
        <blockquote>
          <p>
            <strong>Tip</strong>: The <strong>Debug Console</strong> also shows
            exceptions from within the app that may not appear in the terminal.
            For example, if you see a “Paused on exception” message in the
            <strong>Call Stack</strong> area of Run view, switch to the
            <strong>Debug Console</strong> to see the exception message.
          </p>
        </blockquote>
      </li>
      <li>
        <p>
          Copy that line into the &gt; prompt at the bottom of the debug
          console, and try changing the formatting:
        </p>
        <div class="sourceCode" id="cb15">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" title="1"><span class="ex">now.strftime</span>(<span class="st">&quot;%a, %d %B, %Y at %X&quot;</span>)</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">&#39;Fri, 07 September, 2018 at 07:46:32&#39;</span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="ex">now.strftime</span>(<span class="st">&quot;%a, %d %b, %Y at %X&quot;</span>)</a>
<a class="sourceLine" id="cb15-4" title="4"><span class="st">&#39;Fri, 07 Sep, 2018 at 07:46:32&#39;</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="ex">now.strftime</span>(<span class="st">&quot;%a, %d %b, %y at %X&quot;</span>)</a>
<a class="sourceLine" id="cb15-6" title="6"><span class="st">&#39;Fri, 07 Sep, 18 at 07:46:32&#39;</span></a></code></pre>
        </div>
        <blockquote>
          <p>
            <strong>Note</strong>: If you see a change you like, you can copy
            and paste it into the editor during a debugging session. However,
            those changes aren’t applied until you restart the debugger.
          </p>
        </blockquote>
      </li>
      <li>
        <p>
          Step through a few more lines of code, if you’d like, then select
          Continue (<code>kb(workbench.action.debug.continue)</code>) to let the
          program run. The browser window shows the result:
        </p>
        <figure>
          <img
            src="images/django-tutorial/debug-run-result.png"
            alt="Django tutorial: result of the modified program"
          />
          <figcaption>
            Django tutorial: result of the modified program
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Close the browser and stop the debugger when you’re finished. To stop
          the debugger, use the Stop toolbar button (the red square) or the
          <strong>Run</strong> &gt; <strong>Stop Debugging</strong> command
          (<code>kb(workbench.action.debug.stop)</code>).
        </p>
      </li>
    </ol>
    <blockquote>
      <p>
        <strong>Tip</strong>: To make it easier to repeatedly navigate to a
        specific URL like <code>http://127.0.0.1:8000/hello/VSCode</code>,
        output that URL using a <code>print</code> statement somewhere in a file
        like <code>views.py</code>. The URL appears in the VS Code Terminal
        where you can use <code>kbstyle(Ctrl+click)</code> to open it in a
        browser.
      </p>
    </blockquote>
    <h2 id="go-to-definition-and-peek-definition-commands">
      Go to Definition and Peek Definition commands
    </h2>
    <p>
      During your work with Django or any other library, you may want to examine
      the code in those libraries themselves. VS Code provides two convenient
      commands that navigate directly to the definitions of classes and other
      objects in any code:
    </p>
    <ul>
      <li>
        <p>
          <strong>Go to Definition</strong> jumps from your code into the code
          that defines an object. For example, in <code>views.py</code>,
          right-click on <code>HttpResponse</code> in the
          <code>home</code> function and select
          <strong>Go to Definition</strong> (or use
          <code>kb(editor.action.revealDefinition)</code>), which navigates to
          the class definition in the Django library.
        </p>
      </li>
      <li>
        <p>
          <strong>Peek Definition</strong>
          (<code>kb(editor.action.peekDefinition)</code>, also on the
          right-click context menu), is similar, but displays the class
          definition directly in the editor (making space in the editor window
          to avoid obscuring any code). Press <code>kbstyle(Escape)</code> to
          close the Peek window or use the <strong>x</strong> in the upper right
          corner.
        </p>
        <figure>
          <img
            src="images/django-tutorial/peek-definition.png"
            alt="Django tutorial: Peek Definition showing the Flask class inline"
          />
          <figcaption>
            Django tutorial: Peek Definition showing the Flask class inline
          </figcaption>
        </figure>
      </li>
    </ul>
    <h2 id="use-a-template-to-render-a-page">
      Use a template to render a page
    </h2>
    <p>
      The app you’ve created so far in this tutorial generates only plain text
      web pages from Python code. Although it’s possible to generate HTML
      directly in code, developers avoid such a practice because it opens the
      app to
      <a href="https://en.wikipedia.org/wiki/Cross-site_scripting"
        >cross-site scripting (XSS) attacks</a
      >. In the <code>hello_there</code> function of this tutorial, for example,
      one might think to format the output in code with something like
      <code
        >content = "&lt;h1&gt;Hello there, " + clean_name + "!&lt;/h1&gt;</code
      >, where the result in <code>content</code> is given directly to a
      browser. This opening allows an attacker to place malicious HTML,
      including JavaScript code, in the URL that ends up in
      <code>clean_name</code> and thus ends up being run in the browser.
    </p>
    <p>
      A much better practice is to keep HTML out of your code entirely by using
      <strong>templates</strong>, so that your code is concerned only with data
      values and not with rendering.
    </p>
    <p>
      In Django, a template is an HTML file that contains placeholders for
      values that the code provides at run time. The Django templating engine
      then takes care of making the substitutions when rendering the page, and
      provides automatic escaping to prevent XSS attacks (that is, if you tried
      using HTML in a data value, you would see the HTML rendered only as plain
      text). The code, therefore, concerns itself only with data values and the
      template concerns itself only with markup. Django templates provide
      flexible options such as template inheritance, which allows you to define
      a base page with common markup and then build upon that base with
      page-specific additions.
    </p>
    <p>
      In this section, you start by creating a single page using a template. In
      subsequent sections, you configure the app to serve static files and then
      create multiple pages to the app that each contains a nav bar from a base
      template. Django templates also support control flow and iteration, as you
      see later in this tutorial in the context of template debugging.
    </p>
    <ol type="1">
      <li>
        <p>
          In the <code>web_project/settings.py</code> file, locate the
          <code>INSTALLED_APPS</code> list and add the following entry, which
          makes sure the project knows about the app so it can handle
          templating:
        </p>
        <div class="sourceCode" id="cb16">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb16-1" title="1"><span class="co">&#39;hello&#39;</span>,</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Inside the <code>hello</code> folder, create a folder named
          <code>templates</code>, and then another subfolder named
          <code>hello</code> to match the app name (this two-tiered folder
          structure is typical Django convention).
        </p>
      </li>
      <li>
        <p>
          In the <code>templates/hello</code> folder, create a file named
          <code>hello_there.html</code> with the contents below. This template
          contains two placeholders for data values named “name”, and “date”,
          which are delineated by pairs of curly braces, <code>\{{</code> and
          <code>}}</code>. All other invariant text is part of the template,
          along with formatting markup (such as <code>&lt;strong&gt;</code>). As
          you can see, template placeholders can also include formatting, the
          expressions after the pipe <code>|</code> symbols, in this case using
          Django’s built-in
          <a
            href="https://docs.djangoproject.com/en/3.1/ref/templates/builtins/#date"
            >date filter</a
          >
          and
          <a
            href="https://docs.djangoproject.com/en/3.1/ref/templates/builtins/#time"
            >time filter</a
          >. The code, then needs only to pass the datetime
          <em>value</em> rather than a pre-formatted string:
        </p>
        <div class="sourceCode" id="cb17">
          <pre
            class="sourceCode html"
          ><code class="sourceCode html"><a class="sourceLine" id="cb17-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">&lt;html&gt;</span></a>
<a class="sourceLine" id="cb17-3" title="3">    <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb17-4" title="4">        <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb17-5" title="5">        <span class="kw">&lt;title&gt;</span>Hello, Django<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb17-6" title="6">    <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb17-7" title="7">    <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb17-8" title="8">        <span class="kw">&lt;strong&gt;</span>Hello there, \{{ name }}!<span class="kw">&lt;/strong&gt;</span> It&#39;s \{{ date | date:&quot;l, d F, Y&quot; }} at \{{ date | time:&quot;H:i:s&quot; }}</a>
<a class="sourceLine" id="cb17-9" title="9">    <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="kw">&lt;/html&gt;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          At the top of <code>views.py</code>, add the following import
          statement:
        </p>
        <div class="sourceCode" id="cb18">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb18-1" title="1"><span class="im">from</span> django.shortcuts <span class="im">import</span> render</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Also in <code>views.py</code>, modify the
          <code>hello_there</code> function to use
          <code>django.shortcuts.render</code> method to load a template and to
          provide the <em>template context</em>. The context is the set of
          variables for use within the template. The
          <code>render</code> function takes the request object, followed by the
          path to to the template
          <em>relative to the <code>templates</code> folder</em>, then the
          context object. (Developers typically name the templates the same as
          the functions that use them, but matching names are not required
          because you always refer to the exact filename in your code.)
        </p>
        <div class="sourceCode" id="cb19">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">def</span> hello_there(request, name):</a>
<a class="sourceLine" id="cb19-2" title="2">    <span class="cf">return</span> render(</a>
<a class="sourceLine" id="cb19-3" title="3">        request,</a>
<a class="sourceLine" id="cb19-4" title="4">        <span class="st">&#39;hello/hello_there.html&#39;</span>,</a>
<a class="sourceLine" id="cb19-5" title="5">        {</a>
<a class="sourceLine" id="cb19-6" title="6">            <span class="st">&#39;name&#39;</span>: name,</a>
<a class="sourceLine" id="cb19-7" title="7">            <span class="st">&#39;date&#39;</span>: datetime.now()</a>
<a class="sourceLine" id="cb19-8" title="8">        }</a>
<a class="sourceLine" id="cb19-9" title="9">    )</a></code></pre>
        </div>
        <p>
          You can see that the code is now much simpler, and concerned only with
          data values, because the markup and formatting is all contained in the
          template.
        </p>
      </li>
      <li>
        <p>
          Start the program (inside or outside of the debugger, using
          <code>kb(workbench.action.debug.run)</code>), navigate to a
          /hello/name URL, and observe the results.
        </p>
      </li>
      <li>
        <p>
          Also try navigating to a /hello/name URL using a name like
          <code>&lt;a%20value%20that%20could%20be%20HTML&gt;</code> to see
          Django’s automatic escaping at work. The “name” value shows up as
          plain text in the browser rather than as rendering an actual element.
        </p>
      </li>
    </ol>
    <h2 id="serve-static-files">Serve static files</h2>
    <p>
      Static files are pieces of content that your web app returns as-is for
      certain requests, such as CSS files. Serving static files requires that
      the <code>INSTALLED_APPS</code> list in <code>settings.py</code> contains
      <code>django.contrib.staticfiles</code>, which is included by default.
    </p>
    <p>
      Serving static files in Django is something of an art, especially when
      deploying to production. What’s shown here is a simple approach that works
      with the Django development server and also a production server like
      Gunicorn. A full treatment of static files, however, is beyond the scope
      of this tutorial, so for more information, see
      <a href="https://docs.djangoproject.com/en/3.1/howto/static-files/"
        >Managing static files</a
      >
      in the Django documentation.
    </p>
    <p>
      In production, you also need to set <code>DEBUG=False</code> in
      <code>settings.py</code>, which necessitates some additional work when
      using containers. For details, see
      <a
        href="https://github.com/microsoft/python-sample-vscode-django-tutorial/issues/13"
        >Issue 13</a
      >.
    </p>
    <h3 id="ready-the-app-for-static-files">Ready the app for static files</h3>
    <ol type="1">
      <li>
        <p>
          In the project’s <code>web_project/urls.py</code>, add the following
          <code>import</code> statement:
        </p>
        <div class="sourceCode" id="cb20">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb20-1" title="1"><span class="im">from</span> django.contrib.staticfiles.urls <span class="im">import</span> staticfiles_urlpatterns</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In that same file, add the following line at the end, which includes
          standard static file URLs to the list that the project recognizes:
        </p>
        <div class="sourceCode" id="cb21">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb21-1" title="1">urlpatterns <span class="op">+=</span> staticfiles_urlpatterns()</a></code></pre>
        </div>
      </li>
    </ol>
    <h3 id="refer-to-static-files-in-a-template">
      Refer to static files in a template
    </h3>
    <ol type="1">
      <li>
        <p>
          In the <code>hello</code> folder, create a folder named
          <code>static</code>.
        </p>
      </li>
      <li>
        <p>
          Within the <code>static</code> folder, create a subfolder named
          <code>hello</code>, matching the app name.
        </p>
        <p>
          The reason for this extra subfolder is that when you deploy the Django
          project to a production server, you collect all the static files into
          a single folder that’s then served by a dedicated static file server.
          The <code>static/hello</code> subfolder ensures that when the app’s
          static files are collected, they’re in an app-specific subfolder and
          won’t collide with file from other apps in the same project.
        </p>
      </li>
      <li>
        <p>
          In the <code>static/hello</code> folder, create a file named
          <code>site.css</code> with the following contents. After entering this
          code, also observe the syntax highlighting that VS Code provides for
          CSS files, including a color preview.
        </p>
        <div class="sourceCode" id="cb22">
          <pre
            class="sourceCode css"
          ><code class="sourceCode css"><a class="sourceLine" id="cb22-1" title="1"><span class="fu">.message</span> {</a>
<a class="sourceLine" id="cb22-2" title="2">    <span class="kw">font-weight</span>: <span class="dv">600</span><span class="op">;</span></a>
<a class="sourceLine" id="cb22-3" title="3">    <span class="kw">color</span>: <span class="cn">blue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb22-4" title="4">}</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In <code>templates/hello/hello_there.html</code>, add the following
          lines after the <code>&lt;title&gt;</code> element. The
          <code>{% load static %}</code> tag is a custom Django template tag
          set, which allows you to use <code>{% static %}</code> to refer to a
          file like the stylesheet.
        </p>
        <div class="sourceCode" id="cb23">
          <pre
            class="sourceCode html"
          ><code class="sourceCode html"><a class="sourceLine" id="cb23-1" title="1">{% load static %}</a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> type=</span><span class="st">&quot;text/css&quot;</span><span class="ot"> href=</span><span class="st">&quot;{% static &#39;hello/site.css&#39; %}&quot;</span> <span class="kw">/&gt;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Also in <code>templates/hello/hello_there.html</code>, replace the
          contents <code>&lt;body&gt;</code> element with the following markup
          that uses the <code>message</code> style instead of a
          <code>&lt;strong&gt;</code> tag:
        </p>
        <div class="sourceCode" id="cb24">
          <pre
            class="sourceCode html"
          ><code class="sourceCode html"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">&lt;span</span><span class="ot"> class=</span><span class="st">&quot;message&quot;</span><span class="kw">&gt;</span>Hello, there \{{ name }}!<span class="kw">&lt;/span&gt;</span> It&#39;s \{{ date | date:&#39;l, d F, Y&#39; }} at \{{ date | time:&#39;H:i:s&#39; }}.</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Run the app, navigate to a /hello/name URL, and observe that the
          message renders in blue. Stop the app when you’re done.
        </p>
      </li>
    </ol>
    <h3 id="use-the-collectstatic-command">Use the collectstatic command</h3>
    <p>
      For production deployments, you typically collect all the static files
      from your apps into a single folder using the
      <code>python manage.py collectstatic</code> command. You can then use a
      dedicated static file server to serve those files, which typically results
      in better overall performance. The following steps show how this
      collection is made, although you don’t use the collection when running
      with the Django development server.
    </p>
    <ol type="1">
      <li>
        <p>
          In <code>web_project/settings.py</code>, add the following line that
          defines a location where static files are collected when you use the
          <code>collectstatic</code> command:
        </p>
        <div class="sourceCode" id="cb25">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb25-1" title="1">STATIC_ROOT <span class="op">=</span> BASE_DIR <span class="op">/</span> <span class="st">&#39;static_collected&#39;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In the Terminal, run the command
          <code>python manage.py collectstatic</code> and observe that
          <code>hello/site.css</code> is copied into the top level
          <code>static_collected</code> folder alongside <code>manage.py</code>.
        </p>
      </li>
      <li>
        <p>
          In practice, run <code>collectstatic</code> any time you change static
          files and before deploying into production.
        </p>
      </li>
    </ol>
    <h2 id="create-multiple-templates-that-extend-a-base-template">
      Create multiple templates that extend a base template
    </h2>
    <p>
      Because most web apps have more than one page, and because those pages
      typically share many common elements, developers separate those common
      elements into a base page template that other page templates then extend.
      (This is also called template inheritance, meaning the extended pages
      inherit elements from the base page.)
    </p>
    <p>
      Also, because you’ll likely create many pages that extend the same
      template, it’s helpful to create a code snippet in VS Code with which you
      can quickly initialize new page templates. A snippet helps you avoid
      tedious and error-prone copy-paste operations.
    </p>
    <p>The following sections walk through different parts of this process.</p>
    <h3 id="create-a-base-page-template-and-styles">
      Create a base page template and styles
    </h3>
    <p>
      A base page template in Django contains all the shared parts of a set of
      pages, including references to CSS files, script files, and so forth. Base
      templates also define one or more <strong>block</strong> tags with content
      that extended templates are expected to override. A block tag is
      delineated by <code>{% block &lt;name&gt; %}</code> and
      <code>{% endblock %}</code> in both the base template and extended
      templates.
    </p>
    <p>The following steps demonstrate creating a base template.</p>
    <ol type="1">
      <li>
        <p>
          In the <code>templates/hello</code> folder, create a file named
          <code>layout.html</code> with the contents below, which contains
          blocks named “title” and “content”. As you can see, the markup defines
          a simple nav bar structure with links to Home, About, and Contact
          pages, which you create in a later section. Notice the use of Django’s
          <code>{% url %}</code> tag to refer to other pages through the names
          of the corresponding URL patterns rather than by relative path.
        </p>
        <div class="sourceCode" id="cb26">
          <pre
            class="sourceCode html"
          ><code class="sourceCode html"><a class="sourceLine" id="cb26-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">&lt;html&gt;</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb26-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb26-5" title="5">    <span class="kw">&lt;title&gt;</span>{% block title %}{% endblock %}<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb26-6" title="6">    {% load static %}</a>
<a class="sourceLine" id="cb26-7" title="7">    <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> type=</span><span class="st">&quot;text/css&quot;</span><span class="ot"> href=</span><span class="st">&quot;{% static &#39;hello/site.css&#39; %}&quot;</span><span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb26-8" title="8"><span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb26-9" title="9"></a>
<a class="sourceLine" id="cb26-10" title="10"><span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb26-11" title="11"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;navbar&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb26-12" title="12">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;{% url &#39;home&#39; %}&quot;</span><span class="ot"> class=</span><span class="st">&quot;navbar-brand&quot;</span><span class="kw">&gt;</span>Home<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb26-13" title="13">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;{% url &#39;about&#39; %}&quot;</span><span class="ot"> class=</span><span class="st">&quot;navbar-item&quot;</span><span class="kw">&gt;</span>About<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb26-14" title="14">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;{% url &#39;contact&#39; %}&quot;</span><span class="ot"> class=</span><span class="st">&quot;navbar-item&quot;</span><span class="kw">&gt;</span>Contact<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb26-15" title="15"><span class="kw">&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb26-16" title="16"></a>
<a class="sourceLine" id="cb26-17" title="17"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;body-content&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb26-18" title="18">    {% block content %}</a>
<a class="sourceLine" id="cb26-19" title="19">    {% endblock %}</a>
<a class="sourceLine" id="cb26-20" title="20">    <span class="kw">&lt;hr/&gt;</span></a>
<a class="sourceLine" id="cb26-21" title="21">    <span class="kw">&lt;footer&gt;</span></a>
<a class="sourceLine" id="cb26-22" title="22">        <span class="kw">&lt;p&gt;</span><span class="dv">&amp;copy;</span> 2018<span class="kw">&lt;/p&gt;</span></a>
<a class="sourceLine" id="cb26-23" title="23">    <span class="kw">&lt;/footer&gt;</span></a>
<a class="sourceLine" id="cb26-24" title="24"><span class="kw">&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb26-25" title="25"><span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb26-26" title="26"><span class="kw">&lt;/html&gt;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Add the following styles to <code>static/hello/site.css</code> below
          the existing “message” style, and save the file. (This walkthrough
          doesn’t attempt to demonstrate responsive design; these styles simply
          generate a reasonably interesting result.)
        </p>
        <div class="sourceCode" id="cb27">
          <pre
            class="sourceCode css"
          ><code class="sourceCode css"><a class="sourceLine" id="cb27-1" title="1"><span class="fu">.navbar</span> {</a>
<a class="sourceLine" id="cb27-2" title="2">    <span class="kw">background-color</span>: <span class="cn">lightslategray</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-3" title="3">    <span class="kw">font-size</span>: <span class="dv">1</span><span class="dt">em</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-4" title="4">    <span class="kw">font-family</span>: <span class="st">&#39;Trebuchet MS&#39;</span><span class="op">,</span> <span class="st">&#39;Lucida Sans Unicode&#39;</span><span class="op">,</span> <span class="st">&#39;Lucida Grande&#39;</span><span class="op">,</span> <span class="st">&#39;Lucida Sans&#39;</span><span class="op">,</span> Arial<span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-5" title="5">    <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-6" title="6">    <span class="kw">padding</span>: <span class="dv">8</span><span class="dt">px</span> <span class="dv">5</span><span class="dt">px</span> <span class="dv">8</span><span class="dt">px</span> <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-7" title="7">}</a>
<a class="sourceLine" id="cb27-8" title="8"></a>
<a class="sourceLine" id="cb27-9" title="9"><span class="fu">.navbar</span> a {</a>
<a class="sourceLine" id="cb27-10" title="10">    <span class="kw">text-decoration</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-11" title="11">    <span class="kw">color</span>: <span class="bu">inherit</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-12" title="12">}</a>
<a class="sourceLine" id="cb27-13" title="13"></a>
<a class="sourceLine" id="cb27-14" title="14"><span class="fu">.navbar-brand</span> {</a>
<a class="sourceLine" id="cb27-15" title="15">    <span class="kw">font-size</span>: <span class="dv">1.2</span><span class="dt">em</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-16" title="16">    <span class="kw">font-weight</span>: <span class="dv">600</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-17" title="17">}</a>
<a class="sourceLine" id="cb27-18" title="18"></a>
<a class="sourceLine" id="cb27-19" title="19"><span class="fu">.navbar-item</span> {</a>
<a class="sourceLine" id="cb27-20" title="20">    <span class="kw">font-variant</span>: <span class="dv">small-caps</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-21" title="21">    <span class="kw">margin-left</span>: <span class="dv">30</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-22" title="22">}</a>
<a class="sourceLine" id="cb27-23" title="23"></a>
<a class="sourceLine" id="cb27-24" title="24"><span class="fu">.body-content</span> {</a>
<a class="sourceLine" id="cb27-25" title="25">    <span class="kw">padding</span>: <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-26" title="26">    <span class="kw">font-family</span>:<span class="st">&#39;Segoe UI&#39;</span><span class="op">,</span> Tahoma<span class="op">,</span> Geneva<span class="op">,</span> Verdana<span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-27" title="27">}</a></code></pre>
        </div>
      </li>
    </ol>
    <p>
      You can run the app at this point, but because you haven’t made use of the
      base template anywhere and haven’t changed any code files, the result is
      the same as the previous step. Complete the remaining sections to see the
      final effect.
    </p>
    <h3 id="create-a-code-snippet">Create a code snippet</h3>
    <p>
      Because the three pages you create in the next section extend
      <code>layout.html</code>, it saves time to create a
      <strong>code snippet</strong> to initialize a new template file with the
      appropriate reference to the base template. A code snippet provides a
      consistent piece of code from a single source, which avoids errors that
      can creep in when using copy-paste from existing code.
    </p>
    <ol type="1">
      <li>
        <p>
          In VS Code, select the <strong>File</strong> (Windows/Linux) or
          <strong>Code</strong> (macOS), menu, then select
          <strong>Preferences</strong> &gt; <strong>User snippets</strong>.
        </p>
      </li>
      <li>
        <p>
          In the list that appears, select <strong>html</strong>. (The option
          may appear as “html.json” in the
          <strong>Existing Snippets</strong> section of the list if you’ve
          created snippets previously.)
        </p>
      </li>
      <li>
        <p>
          After VS code opens <code>html.json</code>, add the code below within
          the existing curly braces. (The explanatory comments, not shown here,
          describe details such as how the <code>$0</code> line indicates where
          VS Code places the cursor after inserting a snippet):
        </p>
        <div class="sourceCode" id="cb28">
          <pre
            class="sourceCode json"
          ><code class="sourceCode json"><a class="sourceLine" id="cb28-1" title="1"><span class="er">&quot;Django</span> <span class="er">Tutorial:</span> <span class="er">template</span> <span class="er">extending</span> <span class="er">layout.html&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb28-2" title="2">    <span class="dt">&quot;prefix&quot;</span><span class="fu">:</span> <span class="st">&quot;djextlayout&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb28-3" title="3">    <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb28-4" title="4">        <span class="st">&quot;{% extends </span><span class="ch">\&quot;</span><span class="st">hello/layout.html</span><span class="ch">\&quot;</span><span class="st"> %}&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb28-5" title="5">        <span class="st">&quot;{% block title %}&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb28-6" title="6">        <span class="st">&quot;$0&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb28-7" title="7">        <span class="st">&quot;{% endblock %}&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb28-8" title="8">        <span class="st">&quot;{% block content %}&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb28-9" title="9">        <span class="st">&quot;{% endblock %}&quot;</span></a>
<a class="sourceLine" id="cb28-10" title="10">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb28-11" title="11"></a>
<a class="sourceLine" id="cb28-12" title="12">    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Boilerplate template that extends layout.html&quot;</span></a>
<a class="sourceLine" id="cb28-13" title="13"><span class="fu">}</span><span class="er">,</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Save the <code>html.json</code> file
          (<code>kb(workbench.action.files.save)</code>).
        </p>
      </li>
      <li>
        <p>
          Now, whenever you start typing the snippet’s prefix, such as
          <code>djext</code>, VS Code provides the snippet as an autocomplete
          option, as shown in the next section. You can also use the
          <strong>Insert Snippet</strong> command to choose a snippet from a
          menu.
        </p>
      </li>
    </ol>
    <p>
      For more information on code snippets in general, refer to
      <a href="/docs/editor/userdefinedsnippets.md">Creating snippets</a>.
    </p>
    <h3 id="use-the-code-snippet-to-add-pages">
      Use the code snippet to add pages
    </h3>
    <p>
      With the code snippet in place, you can quickly create templates for the
      Home, About, and Contact pages.
    </p>
    <ol type="1">
      <li>
        <p>
          In the <code>templates/hello</code> folder, create a new file named
          <code>home.html</code>, Then start typing <code>djext</code> to see
          the snippet appear as a completion:
        </p>
        <figure>
          <img
            src="images/django-tutorial/autocomplete-for-code-snippet.png"
            alt="Django tutorial: autocompletion for the djextlayout code snippet"
          />
          <figcaption>
            Django tutorial: autocompletion for the djextlayout code snippet
          </figcaption>
        </figure>
        <p>
          When you select the completion, the snippet’s code appears with the
          cursor on the snippet’s insertion point:
        </p>
        <figure>
          <img
            src="images/django-tutorial/code-snippet-inserted.png"
            alt="Django tutorial: insertion of the djextlayout code snippet"
          />
          <figcaption>
            Django tutorial: insertion of the djextlayout code snippet
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          At the insertion point in the “title” block, write <code>Home</code>,
          and in the “content” block, write
          <code
            >&lt;p&gt;Home page for the Visual Studio Code Django
            tutorial.&lt;/p&gt;</code
          >, then save the file. These lines are the only unique parts of the
          extended page template:
        </p>
      </li>
      <li>
        <p>
          In the <code>templates/hello</code> folder, create
          <code>about.html</code>, use the snippet to insert the boilerplate
          markup, insert <code>About us</code> and
          <code
            >&lt;p&gt;About page for the Visual Studio Code Django
            tutorial.&lt;/p&gt;</code
          >
          in the “title” and “content” blocks, respectively, then save the file.
        </p>
      </li>
      <li>
        <p>
          Repeat the previous step to create
          <code>templates/hello/contact.html</code> using
          <code>Contact us</code> and
          <code
            >&lt;p&gt;Contact page for the Visual Studio Code Django
            tutorial.&lt;/p&gt;</code
          >.
        </p>
      </li>
      <li>
        <p>
          In the app’s <code>urls.py</code>, add routes for the /about and
          /contact pages. Be mindful that the <code>name</code> argument to the
          <code>path</code> function defines the name with which you refer to
          the page in the <code>{% url %}</code> tags in the templates.
        </p>
        <div class="sourceCode" id="cb29">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb29-1" title="1">path(<span class="st">&quot;about/&quot;</span>, views.about, name<span class="op">=</span><span class="st">&quot;about&quot;</span>),</a>
<a class="sourceLine" id="cb29-2" title="2">path(<span class="st">&quot;contact/&quot;</span>, views.contact, name<span class="op">=</span><span class="st">&quot;contact&quot;</span>),</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In <code>views.py</code>, add functions for the /about and /contact
          routes that refer to their respective page templates. Also modify the
          <code>home</code> function to use the <code>home.html</code> template.
        </p>
        <div class="sourceCode" id="cb30">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb30-1" title="1"><span class="co"># Replace the existing home function with the one below</span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw">def</span> home(request):</a>
<a class="sourceLine" id="cb30-3" title="3">    <span class="cf">return</span> render(request, <span class="st">&quot;hello/home.html&quot;</span>)</a>
<a class="sourceLine" id="cb30-4" title="4"></a>
<a class="sourceLine" id="cb30-5" title="5"><span class="kw">def</span> about(request):</a>
<a class="sourceLine" id="cb30-6" title="6">    <span class="cf">return</span> render(request, <span class="st">&quot;hello/about.html&quot;</span>)</a>
<a class="sourceLine" id="cb30-7" title="7"></a>
<a class="sourceLine" id="cb30-8" title="8"><span class="kw">def</span> contact(request):</a>
<a class="sourceLine" id="cb30-9" title="9">    <span class="cf">return</span> render(request, <span class="st">&quot;hello/contact.html&quot;</span>)</a></code></pre>
        </div>
      </li>
    </ol>
    <h3 id="run-the-app">Run the app</h3>
    <p>
      With all the page templates in place, save <code>views.py</code>, run the
      app, and open a browser to the home page to see the results. Navigate
      between the pages to verify that the page templates are properly extending
      the base template.
    </p>
    <figure>
      <img
        src="images/django-tutorial/full-app.png"
        alt="Django tutorial: app rendering a common nav bar from the base template"
      />
      <figcaption>
        Django tutorial: app rendering a common nav bar from the base template
      </figcaption>
    </figure>
    <h2 id="work-with-data-data-models-and-migrations">
      Work with data, data models, and migrations
    </h2>
    <p>
      Many web apps work with information stored in a database, and Django makes
      it easy to represent the objects in that database using <em>models</em>.
      In Django, a model is a Python class, derived from
      <code>django.db.models.Model</code>, that represents a specific database
      object, typically a table. You place these classes in an app’s
      <code>models.py</code> file.
    </p>
    <p>
      With Django, your work with your database almost exclusively through the
      models you define in code. Django’s “migrations” then handle all the
      details of the underlying database automatically as you evolve the models
      over time. The general workflow is as follows:
    </p>
    <ol type="1">
      <li>Make changes to the models in your <code>models.py</code> file.</li>
      <li>
        Run <code>python manage.py makemigrations</code> to generate scripts in
        the <code>migrations</code> folder that migrate the database from its
        current state to the new state.
      </li>
      <li>
        Run <code>python manage.py migrate</code> to apply the scripts to the
        actual database.
      </li>
    </ol>
    <p>
      The migration scripts effectively record all the incremental changes you
      make to your data models over time. By applying the migrations, Django
      updates the database to match your models. Because each incremental change
      has its own script, Django can automatically migrate <em>any</em> previous
      version of a database (including a new database) to the current version.
      As a result, you need concern yourself only with your models in
      <code>models.py</code>, never with the underlying database schema or the
      migration scripts. You let Django do that part!
    </p>
    <p>
      In code, too, you work exclusively with your model classes to store and
      retrieve data; Django handles the underlying details. The one exception is
      that you can write data into your database using the Django administrative
      utility
      <a href="https://docs.djangoproject.com/en/3.1/ref/django-admin/#loaddata"
        >loaddata command</a
      >. This utility is often used to initialize a data set after the
      <code>migrate</code> command has initialized the schema.
    </p>
    <p>
      When using the <code>db.sqlite3</code> file, you can also work directly
      with the database using a tool like the
      <a href="https://sqlitebrowser.org/">SQLite browser</a>. It’s fine to add
      or delete records in tables using such a tool, but avoid making changes to
      the database schema because the database will then be out of sync with
      your app’s models. Instead, change the models, run
      <code>makemigrations</code>, then run <code>migrate</code>.
    </p>
    <h3 id="types-of-databases">Types of databases</h3>
    <p>
      By default, Django includes a <code>db.sqlite3</code> file for an app’s
      database that’s suitable for development work. As described on
      <a href="https://www.sqlite.org/whentouse.html">When to use SQLite</a>
      (sqlite.org), SQLite works fine for low to medium traffic sites with fewer
      than 100 K hits/day, but is not recommended for higher volumes. It’s also
      limited to a single computer, so it cannot be used in any multi-server
      scenario such as load-balancing and geo-replication.
    </p>
    <p>
      For these reasons, consider using a production-level data store such as
      <a href="https://www.postgresql.org/">PostgreSQL</a>,
      <a href="https://www.mysql.com/">MySQL</a>, and
      <a href="https://www.microsoft.com/en-ca/sql-server/">SQL Server</a>. For
      information on Django’s support for other databases, see
      <a
        href="https://docs.djangoproject.com/en/3.1/intro/tutorial02/#database-setup"
        >Database setup</a
      >. You can also use the
      <a
        href="https://docs.microsoft.com/azure/python/python-sdk-azure-get-started"
        >Azure SDK for Python</a
      >
      to work with Azure storage services like tables and blobs.
    </p>
    <h3 id="define-models">Define models</h3>
    <p>
      A Django model is again a Python class derived from
      <code>django.db.model.Models</code>, which you place in the app’s
      <code>models.py</code> file. In the database, each model is automatically
      given a unique ID field named <code>id</code>. All other fields are
      defined as properties of the class using types from
      <code>django.db.models</code> such as <code>CharField</code> (limited
      text), <code>TextField</code> (unlimited text), <code>EmailField</code>,
      <code>URLField</code>, <code>IntegerField</code>,
      <code>DecimalField</code>, <code>BooleanField</code>.
      <code>DateTimeField</code>, <code>ForeignKey</code>, and
      <code>ManyToMany</code>, among others. (See the
      <a href="https://docs.djangoproject.com/en/3.1/ref/models/fields/"
        >Model field reference</a
      >
      in the Django documentation for details.)
    </p>
    <p>
      Each field takes some attributes, like <code>max_length</code>. The
      <code>blank=True</code> attribute means the field is optional;
      <code>null=true</code> means that a value is optional. There is also a
      <code>choices</code> attribute that limits values to values in an array of
      data value/display value tuples.
    </p>
    <p>
      For example, add the following class in <code>models.py</code> to define a
      data model that represents dated entries in a simple message log:
    </p>
    <div class="sourceCode" id="cb31">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb31-1" title="1"><span class="im">from</span> django.db <span class="im">import</span> models</a>
<a class="sourceLine" id="cb31-2" title="2"><span class="im">from</span> django.utils <span class="im">import</span> timezone</a>
<a class="sourceLine" id="cb31-3" title="3"></a>
<a class="sourceLine" id="cb31-4" title="4"><span class="kw">class</span> LogMessage(models.Model):</a>
<a class="sourceLine" id="cb31-5" title="5">    message <span class="op">=</span> models.CharField(max_length<span class="op">=</span><span class="dv">300</span>)</a>
<a class="sourceLine" id="cb31-6" title="6">    log_date <span class="op">=</span> models.DateTimeField(<span class="st">&quot;date logged&quot;</span>)</a>
<a class="sourceLine" id="cb31-7" title="7"></a>
<a class="sourceLine" id="cb31-8" title="8">    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb31-9" title="9">        <span class="co">&quot;&quot;&quot;Returns a string representation of a message.&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb31-10" title="10">        date <span class="op">=</span> timezone.localtime(<span class="va">self</span>.log_date)</a>
<a class="sourceLine" id="cb31-11" title="11">        <span class="cf">return</span> <span class="ss">f&quot;&#39;</span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>message<span class="sc">}</span><span class="ss">&#39; logged on </span><span class="sc">{</span>date<span class="sc">.</span>strftime(<span class="st">&#39;%A, </span><span class="sc">%d</span><span class="st"> %B, %Y at </span><span class="sc">%X</span><span class="st">&#39;</span>)<span class="sc">}</span><span class="ss">&quot;</span></a></code></pre>
    </div>
    <p>
      A model class can include methods that return values computed from other
      class properties. Models typically include a <code>__str__</code> method
      that returns a string representation of the instance.
    </p>
    <h3 id="migrate-the-database">Migrate the database</h3>
    <p>
      Because you changed your data models by editing <code>models.py</code>,
      you need to update the database itself. In VS Code, open a Terminal with
      your virtual environment activated (use the
      <strong>Terminal: Create New Integrated Terminal</strong> command,
      <code>kb(workbench.action.terminal.new)</code>)), navigate to the project
      folder, and run the following commands:
    </p>
    <div class="sourceCode" id="cb32">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb32-1" title="1"><span class="ex">python</span> manage.py makemigrations</a>
<a class="sourceLine" id="cb32-2" title="2"><span class="ex">python</span> manage.py migrate</a></code></pre>
    </div>
    <p>
      Take a look in the <code>migrations</code> folder to see the scripts that
      <code>makemigrations</code> generates. You can also look at the database
      itself to see that the schema is updated.
    </p>
    <p>
      If you see errors when running the commands, make sure you’re not using a
      debugging terminal that’s left over from previous steps, as they may not
      have the virtual environment activated.
    </p>
    <h3 id="use-the-database-through-the-models">
      Use the database through the models
    </h3>
    <p>
      With your models in place and the database migrated, you can store and
      retrieve data using only your models. In this section, you add a form page
      to the app through which you can log a message. You then modify the home
      page to display those messages. Because you modify many code files here,
      be mindful of the details.
    </p>
    <ol type="1">
      <li>
        <p>
          In the <code>hello</code> folder (where you have
          <code>views.py</code>), create a new file named
          <code>forms.py</code> with the following code, which defines a Django
          form that contains a field drawn from the data model,
          <code>LogMessage</code>:
        </p>
        <div class="sourceCode" id="cb33">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb33-1" title="1"><span class="im">from</span> django <span class="im">import</span> forms</a>
<a class="sourceLine" id="cb33-2" title="2"><span class="im">from</span> hello.models <span class="im">import</span> LogMessage</a>
<a class="sourceLine" id="cb33-3" title="3"></a>
<a class="sourceLine" id="cb33-4" title="4"><span class="kw">class</span> LogMessageForm(forms.ModelForm):</a>
<a class="sourceLine" id="cb33-5" title="5">    <span class="kw">class</span> Meta:</a>
<a class="sourceLine" id="cb33-6" title="6">        model <span class="op">=</span> LogMessage</a>
<a class="sourceLine" id="cb33-7" title="7">        fields <span class="op">=</span> (<span class="st">&quot;message&quot;</span>,)   <span class="co"># </span><span class="al">NOTE</span><span class="co">: the trailing comma is required</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In the <code>templates/hello</code> folder, create a new template
          named <code>log_message.html</code> with the following contents, which
          assumes that the template is given a variable named
          <code>form</code> to define the body of the form. It then adds a
          submit button with the label “Log”.
        </p>
        <div class="sourceCode" id="cb34">
          <pre
            class="sourceCode html"
          ><code class="sourceCode html"><a class="sourceLine" id="cb34-1" title="1">{% extends &quot;hello/layout.html&quot; %}</a>
<a class="sourceLine" id="cb34-2" title="2">{% block title %}</a>
<a class="sourceLine" id="cb34-3" title="3">    Log a message</a>
<a class="sourceLine" id="cb34-4" title="4">{% endblock %}</a>
<a class="sourceLine" id="cb34-5" title="5">{% block content %}</a>
<a class="sourceLine" id="cb34-6" title="6">    <span class="kw">&lt;form</span><span class="ot"> method=</span><span class="st">&quot;POST&quot;</span><span class="ot"> class=</span><span class="st">&quot;log-form&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb34-7" title="7">        {% csrf_token %}</a>
<a class="sourceLine" id="cb34-8" title="8">        \{{ form.as_p }}</a>
<a class="sourceLine" id="cb34-9" title="9">        <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span><span class="ot"> class=</span><span class="st">&quot;save btn btn-default&quot;</span><span class="kw">&gt;</span>Log<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb34-10" title="10">    <span class="kw">&lt;/form&gt;</span></a>
<a class="sourceLine" id="cb34-11" title="11">{% endblock %}</a></code></pre>
        </div>
        <blockquote>
          <p>
            <strong>Note</strong>: Django’s <code>{% csrf_token %}</code> tag
            provides protection from cross-site request forgeries. See
            <a href="https://docs.djangoproject.com/en/3.1/ref/csrf/"
              >Cross Site Request Forgery protection</a
            >
            in the Django documentation for details.
          </p>
        </blockquote>
      </li>
      <li>
        <p>
          In the app’s <code>static/hello/site.css</code> file, add a rule to
          make the input form wider:
        </p>
        <div class="sourceCode" id="cb35">
          <pre
            class="sourceCode css"
          ><code class="sourceCode css"><a class="sourceLine" id="cb35-1" title="1">input<span class="ex">[name</span><span class="op">=</span><span class="st">message</span><span class="ex">]</span> {</a>
<a class="sourceLine" id="cb35-2" title="2">    <span class="kw">width</span>: <span class="dv">80</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb35-3" title="3">}</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In the app’s <code>urls.py</code> file, add a route for the new page:
        </p>
        <div class="sourceCode" id="cb36">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb36-1" title="1">path(<span class="st">&quot;log/&quot;</span>, views.log_message, name<span class="op">=</span><span class="st">&quot;log&quot;</span>),</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In <code>views.py</code>, define the view named
          <code>log_message</code> (as referred to by the URL route). This view
          handles both HTTP GET and POST cases. In the GET case (the
          <code>else:</code> section), it just displays the form that you
          defined in the previous steps. In the POST case, it retrieves the data
          from the form into a data object (<code>message</code>), sets the
          timestamp, then saves that object at which point it’s written to the
          database:
        </p>
        <div class="sourceCode" id="cb37">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb37-1" title="1"><span class="co"># Add these to existing imports at the top of the file:</span></a>
<a class="sourceLine" id="cb37-2" title="2"><span class="im">from</span> django.shortcuts <span class="im">import</span> redirect</a>
<a class="sourceLine" id="cb37-3" title="3"><span class="im">from</span> hello.forms <span class="im">import</span> LogMessageForm</a>
<a class="sourceLine" id="cb37-4" title="4"><span class="im">from</span> hello.models <span class="im">import</span> LogMessage</a>
<a class="sourceLine" id="cb37-5" title="5"></a>
<a class="sourceLine" id="cb37-6" title="6"><span class="co"># Add this code elsewhere in the file:</span></a>
<a class="sourceLine" id="cb37-7" title="7"><span class="kw">def</span> log_message(request):</a>
<a class="sourceLine" id="cb37-8" title="8">    form <span class="op">=</span> LogMessageForm(request.POST <span class="kw">or</span> <span class="va">None</span>)</a>
<a class="sourceLine" id="cb37-9" title="9"></a>
<a class="sourceLine" id="cb37-10" title="10">    <span class="cf">if</span> request.method <span class="op">==</span> <span class="st">&quot;POST&quot;</span>:</a>
<a class="sourceLine" id="cb37-11" title="11">        <span class="cf">if</span> form.is_valid():</a>
<a class="sourceLine" id="cb37-12" title="12">            message <span class="op">=</span> form.save(commit<span class="op">=</span><span class="va">False</span>)</a>
<a class="sourceLine" id="cb37-13" title="13">            message.log_date <span class="op">=</span> datetime.now()</a>
<a class="sourceLine" id="cb37-14" title="14">            message.save()</a>
<a class="sourceLine" id="cb37-15" title="15">            <span class="cf">return</span> redirect(<span class="st">&quot;home&quot;</span>)</a>
<a class="sourceLine" id="cb37-16" title="16">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb37-17" title="17">        <span class="cf">return</span> render(request, <span class="st">&quot;hello/log_message.html&quot;</span>, {<span class="st">&quot;form&quot;</span>: form})</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          One more step before you’re ready to try everything out! In
          <code>templates/hello/layout.html</code>, add a link in the “navbar”
          div for the message logging page:
        </p>
        <div class="sourceCode" id="cb38">
          <pre
            class="sourceCode html"
          ><code class="sourceCode html"><a class="sourceLine" id="cb38-1" title="1"><span class="co">&lt;!-- Insert below the link to Home --&gt;</span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;{% url &#39;log&#39; %}&quot;</span><span class="ot"> class=</span><span class="st">&quot;navbar-item&quot;</span><span class="kw">&gt;</span>Log Message<span class="kw">&lt;/a&gt;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Run the app and open a browser to the home page. Select the
          <strong>Log Message</strong> link on the nav bar, which should display
          the message logging page:
        </p>
        <figure>
          <img
            src="images/django-tutorial/message-logging-page.png"
            alt="Django tutorial: the message logging page added to the app"
          />
          <figcaption>
            Django tutorial: the message logging page added to the app
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Enter a message, select <strong>Log</strong>, and you should be taken
          back to the home page. The home page doesn’t yet show any of the
          logged messages yet (which you remedy in a moment). Feel free to log a
          few more messages as well. If you want, peek in the database using a
          tool like SQLite Browser to see that records have been created. Open
          the database as read-only, or otherwise remember to close the database
          before using the app, otherwise the app will fail because the database
          is locked.
        </p>
      </li>
      <li><p>Stop the app when you’re done.</p></li>
      <li>
        <p>
          Now modify the home page to display the logged messages. Start by
          replacing the contents of app’s
          <code>templates/hello/home.html</code> file with the markup below.
          This template expects a context variable named
          <code>message_list</code>. If it receives one (checked with the
          <code>{% if message_list %}</code> tag), it then iterates over that
          list (the <code>{% for message in message_list %}</code> tag) to
          generate table rows for each message. Otherwise the page indicates
          that no messages have yet been logged.
        </p>
        <div class="sourceCode" id="cb39">
          <pre
            class="sourceCode html"
          ><code class="sourceCode html"><a class="sourceLine" id="cb39-1" title="1">{% extends &quot;hello/layout.html&quot; %}</a>
<a class="sourceLine" id="cb39-2" title="2">{% block title %}</a>
<a class="sourceLine" id="cb39-3" title="3">    Home</a>
<a class="sourceLine" id="cb39-4" title="4">{% endblock %}</a>
<a class="sourceLine" id="cb39-5" title="5">{% block content %}</a>
<a class="sourceLine" id="cb39-6" title="6">    <span class="kw">&lt;h2&gt;</span>Logged messages<span class="kw">&lt;/h2&gt;</span></a>
<a class="sourceLine" id="cb39-7" title="7"></a>
<a class="sourceLine" id="cb39-8" title="8">    {% if message_list %}</a>
<a class="sourceLine" id="cb39-9" title="9">        <span class="kw">&lt;table</span><span class="ot"> class=</span><span class="st">&quot;message_list&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb39-10" title="10">            <span class="kw">&lt;thead&gt;</span></a>
<a class="sourceLine" id="cb39-11" title="11">            <span class="kw">&lt;tr&gt;</span></a>
<a class="sourceLine" id="cb39-12" title="12">                <span class="kw">&lt;th&gt;</span>Date<span class="kw">&lt;/th&gt;</span></a>
<a class="sourceLine" id="cb39-13" title="13">                <span class="kw">&lt;th&gt;</span>Time<span class="kw">&lt;/th&gt;</span></a>
<a class="sourceLine" id="cb39-14" title="14">                <span class="kw">&lt;th&gt;</span>Message<span class="kw">&lt;/th&gt;</span></a>
<a class="sourceLine" id="cb39-15" title="15">            <span class="kw">&lt;/tr&gt;</span></a>
<a class="sourceLine" id="cb39-16" title="16">            <span class="kw">&lt;/thead&gt;</span></a>
<a class="sourceLine" id="cb39-17" title="17">            <span class="kw">&lt;tbody&gt;</span></a>
<a class="sourceLine" id="cb39-18" title="18">            {% for message in message_list %}</a>
<a class="sourceLine" id="cb39-19" title="19">                <span class="kw">&lt;tr&gt;</span></a>
<a class="sourceLine" id="cb39-20" title="20">                    <span class="kw">&lt;td&gt;</span>\{{ message.log_date | date:&#39;d M Y&#39; }}<span class="kw">&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb39-21" title="21">                    <span class="kw">&lt;td&gt;</span>\{{ message.log_date | time:&#39;H:i:s&#39; }}<span class="kw">&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb39-22" title="22">                    <span class="kw">&lt;td&gt;</span></a>
<a class="sourceLine" id="cb39-23" title="23">                        \{{ message.message }}</a>
<a class="sourceLine" id="cb39-24" title="24">                    <span class="kw">&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb39-25" title="25">                <span class="kw">&lt;/tr&gt;</span></a>
<a class="sourceLine" id="cb39-26" title="26">            {% endfor %}</a>
<a class="sourceLine" id="cb39-27" title="27">            <span class="kw">&lt;/tbody&gt;</span></a>
<a class="sourceLine" id="cb39-28" title="28">        <span class="kw">&lt;/table&gt;</span></a>
<a class="sourceLine" id="cb39-29" title="29">    {% else %}</a>
<a class="sourceLine" id="cb39-30" title="30">        <span class="kw">&lt;p&gt;</span>No messages have been logged. Use the <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;{% url &#39;log&#39; %}&quot;</span><span class="kw">&gt;</span>Log Message form<span class="kw">&lt;/a&gt;</span>.<span class="kw">&lt;/p&gt;</span></a>
<a class="sourceLine" id="cb39-31" title="31">    {% endif %}</a>
<a class="sourceLine" id="cb39-32" title="32">{% endblock %}</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In <code>static/hello/site.css</code>, add a rule to format the table
          a little:
        </p>
        <div class="sourceCode" id="cb40">
          <pre
            class="sourceCode css"
          ><code class="sourceCode css"><a class="sourceLine" id="cb40-1" title="1"><span class="fu">.message_list</span> th<span class="op">,</span>td {</a>
<a class="sourceLine" id="cb40-2" title="2">    <span class="kw">text-align</span>: <span class="dv">left</span><span class="op">;</span></a>
<a class="sourceLine" id="cb40-3" title="3">    <span class="kw">padding-right</span>: <span class="dv">15</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb40-4" title="4">}</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In <code>views.py</code>, import Django’s generic
          <code>ListView</code> class, which we’ll use to implement the home
          page:
        </p>
        <div class="sourceCode" id="cb41">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb41-1" title="1"><span class="im">from</span> django.views.generic <span class="im">import</span> ListView</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Also in <code>views.py</code>, replace the <code>home</code> function
          with a <em>class</em> named <code>HomeListView</code>, derived from
          <code>ListView</code>, which ties itself to the
          <code>LogMessage</code> model and implements a function
          <code>get_context_data</code> to generate the context for the
          template.
        </p>
        <div class="sourceCode" id="cb42">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb42-1" title="1"><span class="co"># Remove the old home function if you want; it&#39;s no longer used</span></a>
<a class="sourceLine" id="cb42-2" title="2"></a>
<a class="sourceLine" id="cb42-3" title="3"><span class="kw">class</span> HomeListView(ListView):</a>
<a class="sourceLine" id="cb42-4" title="4">    <span class="co">&quot;&quot;&quot;Renders the home page, with a list of all messages.&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb42-5" title="5">    model <span class="op">=</span> LogMessage</a>
<a class="sourceLine" id="cb42-6" title="6"></a>
<a class="sourceLine" id="cb42-7" title="7">    <span class="kw">def</span> get_context_data(<span class="va">self</span>, <span class="op">**</span>kwargs):</a>
<a class="sourceLine" id="cb42-8" title="8">        context <span class="op">=</span> <span class="bu">super</span>(HomeListView, <span class="va">self</span>).get_context_data(<span class="op">**</span>kwargs)</a>
<a class="sourceLine" id="cb42-9" title="9">        <span class="cf">return</span> context</a></code></pre>
        </div>
      </li>
      <li>
        <p>In the app’s <code>urls.py</code>, import the data model:</p>
        <div class="sourceCode" id="cb43">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb43-1" title="1"><span class="im">from</span> hello.models <span class="im">import</span> LogMessage</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Also in <code>urls.py</code>, make a variable for the new view, which
          retrieves the five most recent <code>LogMessage</code> objects in
          descending order (meaning that it queries the database), and then
          provides a name for the data in the template context
          (<code>message_list</code>), and identifies the template to use:
        </p>
        <div class="sourceCode" id="cb44">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb44-1" title="1">home_list_view <span class="op">=</span> views.HomeListView.as_view(</a>
<a class="sourceLine" id="cb44-2" title="2">    queryset<span class="op">=</span>LogMessage.objects.order_by(<span class="st">&quot;-log_date&quot;</span>)[:<span class="dv">5</span>],  <span class="co"># :5 limits the results to the five most recent</span></a>
<a class="sourceLine" id="cb44-3" title="3">    context_object_name<span class="op">=</span><span class="st">&quot;message_list&quot;</span>,</a>
<a class="sourceLine" id="cb44-4" title="4">    template_name<span class="op">=</span><span class="st">&quot;hello/home.html&quot;</span>,</a>
<a class="sourceLine" id="cb44-5" title="5">)</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          In <code>urls.py</code>, modify the path to the home page to use the
          <code>home_list_view</code> variable:
        </p>
        <div class="sourceCode" id="cb45">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb45-1" title="1">    <span class="co"># Replace the existing path for &quot;&quot;</span></a>
<a class="sourceLine" id="cb45-2" title="2">    path(<span class="st">&quot;&quot;</span>, home_list_view, name<span class="op">=</span><span class="st">&quot;home&quot;</span>),</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Start the app and open a browser to the home page, which should now
          display messages:
        </p>
        <figure>
          <img
            src="images/django-tutorial/app-with-message-list.png"
            alt="Django tutorial: app home page displaying message from the database"
          />
          <figcaption>
            Django tutorial: app home page displaying message from the database
          </figcaption>
        </figure>
      </li>
      <li><p>Stop the app when you’re done.</p></li>
    </ol>
    <h2 id="use-the-debugger-with-page-templates">
      Use the debugger with page templates
    </h2>
    <p>
      As shown in the previous section, page templates can contain procedural
      directives like <code>{% for message in message_list %}</code> and
      <code>{% if message_list %}</code>, rather than only passive, declarative
      elements like <code>{% url %}</code> and <code>{% block %}</code>. As a
      result, you can have programming errors inside templates as with any other
      procedural code.
    </p>
    <p>
      Fortunately, the Python Extension for VS Code provides template debugging
      when you have <code>"django": true</code> in the debugging configuration
      (as you do already). The following steps demonstrate this capability:
    </p>
    <ol type="1">
      <li>
        <p>
          In <code>templates/hello/home.html</code>, set breakpoints on both the
          <code>{% if message_list %}</code> and
          <code>{% for message in message_list %}</code> lines, as indicated by
          the yellow arrows in the image below:
        </p>
        <figure>
          <img
            src="images/django-tutorial/template-breakpoints.png"
            alt="Django tutorial: breakpoints set in a Django page template"
          />
          <figcaption>
            Django tutorial: breakpoints set in a Django page template
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Run the app in the debugger and open a browser to the home page. (If
          you’re already running the debugger, you don’t have to restart the app
          after setting breakpoints; just refresh the page.) Observe that VS
          Code breaks into the debugger in the template on the
          <code>{% if %}</code> statement and shows all the context variables in
          the <strong>Variables</strong> pane:
        </p>
        <figure>
          <img
            src="images/django-tutorial/template-debugger.png"
            alt="Django tutorial: debugger stopped at breakpoints in the page template"
          />
          <figcaption>
            Django tutorial: debugger stopped at breakpoints in the page
            template
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          Use the Step Over (<code>kb(workbench.action.debug.stepOver)</code>)
          command to step through the template code. Observe that the debugger
          steps over all declarative statements and pauses at any procedural
          code. For example, stepping through the
          <code>{% for message in message_list %}</code> loops lets you examine
          each value in <code>message</code> and lets you step to lines like
          <code
            >&lt;td&gt;\{{ message.log_date | date:'d M Y' }}&lt;/td&gt;</code
          >.
        </p>
      </li>
      <li>
        <p>
          You can also work with variables in the
          <strong>Debug Console</strong> panel. (Django filters like
          <code>date</code>, however, are not presently available in the
          console.)
        </p>
      </li>
      <li>
        <p>
          When you’re ready, select Continue
          (<code>kb(workbench.action.debug.continue)</code>) to finish running
          the app and view the rendered page in the browser. Stop the debugger
          when you’re done.
        </p>
      </li>
    </ol>
    <h2 id="optional-activities">Optional activities</h2>
    <p>
      The following sections describe additional steps that you might find
      helpful in your work with Python and Visual Studio Code.
    </p>
    <h3 id="create-a-requirements.txt-file-for-the-environment">
      Create a requirements.txt file for the environment
    </h3>
    <p>
      When you share your app code through source control or some other means,
      it doesn’t make sense to copy all the files in a virtual environment
      because recipients can always recreate that environment themselves.
    </p>
    <p>
      Accordingly, developers typically omit the virtual environment folder from
      source control and instead describe the app’s dependencies using a
      <code>requirements.txt</code> file.
    </p>
    <p>
      Although you can create the file by hand, you can also use the
      <code>pip freeze</code> command to generate the file based on the exact
      libraries installed in the activated environment:
    </p>
    <ol type="1">
      <li>
        <p>
          With your chosen environment selected using the
          <strong>Python: Select Interpreter</strong> command, run the
          <strong>Terminal: Create New Integrated Terminal</strong> command
          (<code>kb(workbench.action.terminal.new)</code>)) to open a terminal
          with that environment activated.
        </p>
      </li>
      <li>
        <p>
          In the terminal, run <code>pip freeze &gt; requirements.txt</code> to
          create the <code>requirements.txt</code> file in your project folder.
        </p>
      </li>
    </ol>
    <p>
      Anyone (or any build server) that receives a copy of the project needs
      only to run the <code>pip install -r requirements.txt</code> command to
      reinstall the packages on which the app depends within the active
      environment.
    </p>
    <blockquote>
      <p>
        <strong>Note</strong>: <code>pip freeze</code> lists all the Python
        packages you have installed in the current environment, including
        packages you aren’t currently using. The command also lists packages
        with exact version numbers, which you might want to convert to ranges
        for more flexibility in the future. For more information, see
        <a href="https://pip.pypa.io/en/stable/user_guide/#requirements-files"
          >Requirements Files</a
        >
        in the pip command documentation.
      </p>
    </blockquote>
    <h3 id="create-a-superuser-and-enable-the-administrative-interface">
      Create a superuser and enable the administrative interface
    </h3>
    <p>
      By default, Django provides an administrative interface for a web app
      that’s protected by authentication. The interface is implemented through
      the built-in <code>django.contrib.admin</code> app, which is included by
      default in the project’s <code>INSTALLED_APPS</code> list
      (<code>settings.py</code>), and authentication is handled with the
      built-in <code>django.contrib.auth</code> app, which is also in
      <code>INSTALLED_APPS</code> by default.
    </p>
    <p>Perform the following steps to enable the administrative interface:</p>
    <ol type="1">
      <li>
        <p>
          Create a superuser account in the app by opening a Terminal in VS Code
          for your virtual environment, then running the command
          <code
            >python manage.py createsuperuser --username=&lt;username&gt;
            --email=&lt;email&gt;</code
          >, replacing <code>&lt;username&gt;</code> and
          <code>&lt;email&gt;</code>, of course, with your personal information.
          When you run the command, Django prompts you to enter and confirm your
          password.
        </p>
        <p>
          Be sure to remember your username and password combination. These are
          the credentials you use to authenticate with the app.
        </p>
      </li>
      <li>
        <p>
          Add the following URL route in the project-level
          <code>urls.py</code> (<code>web_project/urls.py</code> in this
          tutorial) to point to the built-in administrative interface:
        </p>
        <div class="sourceCode" id="cb46">
          <pre
            class="sourceCode python"
          ><code class="sourceCode python"><a class="sourceLine" id="cb46-1" title="1"><span class="co"># This path is included by default when creating the app</span></a>
<a class="sourceLine" id="cb46-2" title="2"> path(<span class="st">&quot;admin/&quot;</span>, admin.site.urls),</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Run the server, then open a browser to the app’s /admin page (such as
          <code>http://127.0.0.1:8000/admin</code> when using the development
          server).
        </p>
      </li>
      <li>
        <p>
          A login page appears, courtesy of <code>django.contrib.auth</code>.
          Enter your superuser credentials.
        </p>
        <figure>
          <img
            src="images/django-tutorial/login-prompt.png"
            alt="Django tutorial: default Django login prompt"
          />
          <figcaption>Django tutorial: default Django login prompt</figcaption>
        </figure>
      </li>
      <li>
        <p>
          Once you’re authenticated, you see the default administration page,
          through which you can manage users and groups:
        </p>
        <figure>
          <img
            src="images/django-tutorial/default-admin-interface.png"
            alt="Django tutorial: the default Django administrative interface"
          />
          <figcaption>
            Django tutorial: the default Django administrative interface
          </figcaption>
        </figure>
      </li>
    </ol>
    <p>
      You can customize the administrative interface as much as you like. For
      example, you could provide capabilities to edit and remove entries in the
      database. For more information on making customizations, refer to the
      <a href="https://docs.djangoproject.com/en/3.1/ref/contrib/admin/"
        >Django admin site documentation</a
      >.
    </p>
    <h3 id="create-a-container-for-a-django-app-using-the-docker-extension">
      Create a container for a Django app using the Docker extension
    </h3>
    <p>
      The
      <a
        href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker"
        >Docker extension</a
      >
      makes it easy to build, manage, and deploy containerized applications from
      Visual Studio Code. If you’re interested in learning how to create a
      Python container for the Django app developed in this tutorial, check out
      the
      <a href="/docs/containers/quickstart-python.md">Python in a container</a>
      tutorial, which will walk you through how to:
    </p>
    <ul>
      <li>
        Create a <code>Dockerfile</code> file describing a simple Python
        container.
      </li>
      <li>
        Build, run, and verify the functionality of a
        <a href="https://www.djangoproject.com/">Django</a> app.
      </li>
      <li>Debug the app running in a container.</li>
    </ul>
    <h2 id="next-steps">Next steps</h2>
    <p>
      Congratulations on completing this walkthrough of working with Django in
      Visual Studio Code!
    </p>
    <p>
      The completed code project from this tutorial can be found on GitHub:
      <a
        href="https://github.com/microsoft/python-sample-vscode-django-tutorial"
        >python-sample-vscode-django-tutorial</a
      >.
    </p>
    <p>
      In this tutorial, we’ve only scratched the surface of everything Django
      can do. Be sure to visit the
      <a href="https://docs.djangoproject.com/en/3.1/">Django documentation</a>
      and the
      <a href="https://docs.djangoproject.com/en/3.1/intro/tutorial01/"
        >official Django tutorial</a
      >
      for many more details on views, templates, data models, URL routing, the
      administrative interface, using other kinds of databases, deployment to
      production, and more.
    </p>
    <p>
      To try your app on a production website, check out the tutorial
      <a
        href="https://docs.microsoft.com/azure/python/tutorial-deploy-containers-01"
        >Deploy Python apps to Azure App Service using Docker Containers</a
      >. Azure also offers a standard container,
      <a
        href="https://docs.microsoft.com/azure/python/tutorial-deploy-app-service-on-linux-01"
        >App Service on Linux</a
      >, to which you deploy web apps from within VS Code.
    </p>
    <p>
      You may also want to review the following articles in the VS Code docs
      that are relevant to Python:
    </p>
    <ul>
      <li><a href="/docs/python/editing.md">Editing Python code</a></li>
      <li><a href="/docs/python/linting.md">Linting</a></li>
      <li>
        <a href="/docs/python/environments.md">Managing Python environments</a>
      </li>
      <li><a href="/docs/python/debugging.md">Debugging Python</a></li>
      <li><a href="/docs/python/testing.md">Testing</a></li>
    </ul>
    <p>
      If you encountered any problems in the course of this tutorial, feel free
      to file an issue in the
      <a href="https://github.com/microsoft/vscode-docs/issues"
        >VS Code documentation repository</a
      >.
    </p>
  </body>
</html>
