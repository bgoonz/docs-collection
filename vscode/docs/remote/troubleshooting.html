<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>troubleshooting</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="remote-development-tips-and-tricks">
      Remote Development Tips and Tricks
    </h1>
    <p>
      This article covers troubleshooting tips and tricks for each of the Visual
      Studio Code
      <a href="https://aka.ms/vscode-remote/download/extension"
        >Remote Development</a
      >
      extensions. See the <a href="/docs/remote/ssh.md">SSH</a>,
      <a href="/docs/remote/containers.md">Containers</a>, and
      <a href="/docs/remote/wsl.md">WSL</a> articles for details on setting up
      and working with each specific extension. Or try the introductory
      <a href="/docs/remote/ssh-tutorial.md">Tutorials</a> to help get you
      running quickly in a remote environment.
    </p>
    <p>
      For tips and questions about
      <a href="https://github.com/features/codespaces">GitHub Codespaces</a>,
      see the
      <a href="https://docs.github.com/github/developing-online-with-codespaces"
        >GitHub Codespaces documentation</a
      >.
    </p>
    <h2 id="ssh-tips">SSH tips</h2>
    <p>
      SSH is powerful and flexible, but this also adds some setup complexity.
      This section includes some tips and tricks for getting the Remote - SSH
      extension up and running in different environments.
    </p>
    <h3 id="configuring-key-based-authentication">
      Configuring key based authentication
    </h3>
    <p>
      <a href="https://www.ssh.com/ssh/public-key-authentication"
        >SSH public key authentication</a
      >
      is a convenient, high security authentication method that combines a local
      “private” key with a “public” key that you associate with your user
      account on an SSH host. This section will walk you through how to generate
      these keys and add them to a host.
    </p>
    <blockquote>
      <p>
        <strong>Tip:</strong> PuTTY for Windows is not a
        <a href="#installing-a-supported-ssh-client">supported client</a>, but
        you can
        <a href="#reusing-a-key-generated-in-puttygen"
          >convert your PuTTYGen keys</a
        >.
      </p>
    </blockquote>
    <h3 id="quick-start-using-ssh-keys">Quick start: Using SSH keys</h3>
    <p>
      To set up SSH key based authentication for your remote host. First we’ll
      create a key pair and then copy the public key to the host.
    </p>
    <p><strong>Create your local SSH key pair</strong></p>
    <p>
      Check to see if you already have an SSH key on your
      <strong>local</strong> machine. This is typically located at
      <code>~/.ssh/id_rsa.pub</code> on macOS / Linux, and the
      <code>.ssh</code> directory in your user profile folder on Windows (for
      example <code>C:\Users\your-user\.ssh\id_rsa.pub</code>).
    </p>
    <p>
      If you do not have a key, run the following command in a
      <strong>local</strong> terminal / PowerShell to generate an SSH key pair:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">ssh-keygen</span> -t rsa -b 4096</a></code></pre>
    </div>
    <blockquote>
      <p>
        <strong>Tip:</strong> Don’t have <code>ssh-keygen</code>? Install
        <a href="#installing-a-supported-ssh-client">a supported SSH client</a>.
      </p>
    </blockquote>
    <p><strong>Authorize your macOS or Linux machine to connect</strong></p>
    <p>
      Run one of the following commands, in a
      <strong>local terminal window</strong> replacing user and host name as
      appropriate to copy your local public key to the SSH host.
    </p>
    <ul>
      <li>
        <p>Connecting to a <strong>macOS or Linux</strong> SSH host:</p>
        <div class="sourceCode" id="cb2">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="bu">export</span> <span class="va">USER_AT_HOST=</span><span class="st">&quot;your-user-name-on-host@hostname&quot;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="bu">export</span> <span class="va">PUBKEYPATH=</span><span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/.ssh/id_rsa.pub&quot;</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="ex">ssh-copy-id</span> -i <span class="st">&quot;</span><span class="va">$PUBKEYPATH</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$USER_AT_HOST</span><span class="st">&quot;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>Connecting to a <strong>Windows</strong> SSH host:</p>
        <div class="sourceCode" id="cb3">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="bu">export</span> <span class="va">USER_AT_HOST=</span><span class="st">&quot;your-user-name-on-host@hostname&quot;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="bu">export</span> <span class="va">PUBKEYPATH=</span><span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/.ssh/id_rsa.pub&quot;</span></a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="fu">ssh</span> <span class="va">$USER_AT_HOST</span> <span class="st">&quot;powershell New-Item -Force -ItemType Directory -Path </span><span class="dt">\&quot;\$</span><span class="st">HOME</span><span class="dt">\\</span><span class="st">.ssh</span><span class="dt">\&quot;</span><span class="st">; Add-Content -Force -Path </span><span class="dt">\&quot;\$</span><span class="st">HOME</span><span class="dt">\\</span><span class="st">.ssh</span><span class="dt">\\</span><span class="st">authorized_keys</span><span class="dt">\&quot;</span><span class="st"> -Value &#39;</span><span class="va">$(</span><span class="fu">tr</span> -d <span class="st">&#39;\n\r&#39;</span> <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$PUBKEYPATH</span><span class="st">&quot;</span><span class="va">)</span><span class="st">&#39;&quot;</span></a></code></pre>
        </div>
        <p>
          You may want to validate that the <code>authorized_key</code> file in
          the <code>.ssh</code> folder for your
          <strong>remote user on the SSH host</strong> is owned by you and no
          other user has permission to access it. See the
          <a
            href="https://github.com/PowerShell/Win32-OpenSSH/wiki/Security-protection-of-various-files-in-Win32-OpenSSH#authorized_keys"
            >OpenSSH wiki</a
          >
          for details.
        </p>
      </li>
    </ul>
    <p><strong>Authorize your Windows machine to connect</strong></p>
    <p>
      Run one of the following commands, in a
      <strong>local PowerShell</strong> window replacing user and host name as
      appropriate to copy your local public key to the SSH host.
    </p>
    <ul>
      <li>
        <p>Connecting to a <strong>macOS or Linux</strong> SSH host:</p>
        <div class="sourceCode" id="cb4">
          <pre
            class="sourceCode powershell"
          ><code class="sourceCode powershell"><a class="sourceLine" id="cb4-1" title="1"><span class="va">$USER_AT_HOST</span>=<span class="st">&quot;your-user-name-on-host@hostname&quot;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="va">$PUBKEYPATH</span>=<span class="st">&quot;$HOME\.ssh\id_rsa.pub&quot;</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="va">$pubKey</span>=(<span class="fu">Get-Content</span> <span class="st">&quot;$PUBKEYPATH&quot;</span> | <span class="fu">Out-String</span>); ssh <span class="st">&quot;$USER_AT_HOST&quot;</span> <span class="st">&quot;mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh &amp;&amp; echo &#39;${pubKey}&#39; &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys&quot;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>Connecting to a <strong>Windows</strong> SSH host:</p>
        <div class="sourceCode" id="cb5">
          <pre
            class="sourceCode powershell"
          ><code class="sourceCode powershell"><a class="sourceLine" id="cb5-1" title="1"><span class="va">$USER_AT_HOST</span>=<span class="st">&quot;your-user-name-on-host@hostname&quot;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="va">$PUBKEYPATH</span>=<span class="st">&quot;$HOME\.ssh\id_rsa.pub&quot;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="fu">Get-Content</span> <span class="st">&quot;$PUBKEYPATH&quot;</span> | <span class="fu">Out-String</span> | ssh <span class="va">$USER_AT_HOST</span> <span class="st">&quot;powershell `&quot;</span>New-Item -Force -ItemType Directory -Path `<span class="st">&quot;`$HOME\.ssh`&quot;</span>; <span class="fu">Add-Content</span> -Force -Path `<span class="st">&quot;`$HOME\.ssh\authorized_keys`&quot;</span> `<span class="st">&quot;&quot;</span></a></code></pre>
        </div>
        <p>
          Validate that the <code>authorized_key</code> file in the
          <code>.ssh</code> folder for your
          <strong>remote user on the SSH host</strong> is owned by you and no
          other user has permission to access it. See the
          <a
            href="https://github.com/PowerShell/Win32-OpenSSH/wiki/Security-protection-of-various-files-in-Win32-OpenSSH#authorized_keys"
            >OpenSSH wiki</a
          >
          for details.
        </p>
      </li>
    </ul>
    <h3 id="improving-your-security-with-a-dedicated-key">
      Improving your security with a dedicated key
    </h3>
    <p>
      While using a single SSH key across all your SSH hosts can be convenient,
      if anyone gains access to your private key, they will have access to all
      of your hosts as well. You can prevent this by creating a separate SSH key
      for your development hosts. Just follow these steps:
    </p>
    <ol type="1">
      <li>
        <p>Generate a separate SSH key in a different file.</p>
        <p>
          <strong>macOS / Linux</strong>: Run the following command in a
          <strong>local terminal</strong>:
        </p>
        <div class="sourceCode" id="cb6">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="fu">ssh-keygen</span> -t rsa -b 4096 -f ~/.ssh/id_rsa-remote-ssh</a></code></pre>
        </div>
        <p>
          <strong>Windows</strong>: Run the following command in a
          <strong>local PowerShell</strong>:
        </p>
        <div class="sourceCode" id="cb7">
          <pre
            class="sourceCode powershell"
          ><code class="sourceCode powershell"><a class="sourceLine" id="cb7-1" title="1">ssh-keygen -t rsa -b 4096 -f <span class="st">&quot;$HOME\.ssh\id_rsa-remote-ssh&quot;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Follow the same steps in the
          <a href="#quick-start-using-ssh-keys">quick start</a> to authorize the
          key on the SSH host, but set the <code>PUBKEYPATH</code> to the
          <code>id_rsa-remote-ssh.pub</code> file instead.
        </p>
      </li>
      <li>
        <p>
          In VS Code, run
          <strong>Remote-SSH: Open Configuration File…</strong> in the Command
          Palette (<code>kbstyle(F1)</code>), select an SSH config file, and add
          (or modify) a host entry as follows:
        </p>
        <div class="sourceCode" id="cb8">
          <pre
            class="sourceCode yaml"
          ><code class="sourceCode yaml"><a class="sourceLine" id="cb8-1" title="1">Host name-of-ssh-host-here</a>
<a class="sourceLine" id="cb8-2" title="2">    User your-user-name-on-host</a>
<a class="sourceLine" id="cb8-3" title="3">    HostName host-fqdn-or-ip-goes-here</a>
<a class="sourceLine" id="cb8-4" title="4">    IdentityFile ~/.ssh/id_rsa-remote-ssh</a></code></pre>
        </div>
        <blockquote>
          <p>
            <strong>Tip:</strong> You can use <code>/</code> for Windows paths
            as well. If you use <code>\</code> you will need to use two slashes.
            For example, <code>C:\\path\\to\\my\\id_rsa</code>.
          </p>
        </blockquote>
      </li>
    </ol>
    <h3 id="reusing-a-key-generated-in-puttygen">
      Reusing a key generated in PuTTYGen
    </h3>
    <p>
      If you used PuTTYGen to set up SSH public key authentication for the host
      you are connecting to, you need to convert your private key so that other
      SSH clients can use it. To do this:
    </p>
    <ol type="1">
      <li>
        Open PuTTYGen <strong>locally</strong> and load the private key you want
        to convert.
      </li>
      <li>
        Select <strong>Conversions &gt; Export OpenSSH key</strong> from the
        application menu. Save the converted key to a
        <strong>local</strong> location under the<code>.ssh</code> directory in
        your user profile folder (for example
        <code>C:\Users\youruser\.ssh</code>).
      </li>
      <li>
        Validate that this new <strong>local</strong> file is owned by you and
        no other user has permissions to access it.
      </li>
      <li>
        <p>
          In VS Code, run
          <strong>Remote-SSH: Open Configuration File…</strong> in the Command
          Palette (<code>kbstyle(F1)</code>), select the SSH config file you
          want to change, and add (or modify) a host entry in the config file as
          follows to point to the file:
        </p>
        <div class="sourceCode" id="cb9">
          <pre
            class="sourceCode yaml"
          ><code class="sourceCode yaml"><a class="sourceLine" id="cb9-1" title="1">Host name-of-ssh-host-here</a>
<a class="sourceLine" id="cb9-2" title="2">    User your-user-name-on-host</a>
<a class="sourceLine" id="cb9-3" title="3">    HostName host-fqdn-or-ip-goes-here</a>
<a class="sourceLine" id="cb9-4" title="4">    IdentityFile ~/.ssh/exported-keyfile-from-putty</a></code></pre>
        </div>
      </li>
    </ol>
    <h3 id="improving-security-on-multi-user-servers">
      Improving security on multi-user servers
    </h3>
    <p>
      By default, the “VS Code Server” is installed and maintained by the Remote
      - Containers extension when it connects to <code>localhost</code> on a
      random TCP port that is then forwarded to your local machine. This means
      only those users on the machine can access the port. However, if the host
      is being used by many users at once, you may want to further lock down
      access to reduce the chances of one user discovering the port number and
      attempting to access another user’s VS Code Server instance.
    </p>
    <p>
      If you are connecting to a <strong>Linux or macOS</strong> host, you can
      switch to using Unix sockets that are locked down to a particular user.
      This socket is then forwarded instead of the port.
    </p>
    <blockquote>
      <p>
        <strong>Note:</strong> This setting
        <strong>disables connection multiplexing</strong> so configuring
        <a href="#configuring-key-based-authentication"
          >public key authentication</a
        >
        is strongly recommended.
      </p>
    </blockquote>
    <p>To configure it:</p>
    <ol type="1">
      <li>
        <p>
          Ensure you have a <strong>local OpenSSH 6.7+ SSH client</strong> on
          Windows, macOS, or Linux and an
          <strong>OpenSSH 6.7+ Linux or macOS Host</strong> (Windows does not
          support this mode).
        </p>
      </li>
      <li>
        <p>
          Switch Remote - SSH into socket mode by enabling
          <strong>Remote.SSH: Remote Server Listen On Socket</strong> in your
          <strong>local</strong> VS Code
          <a href="/docs/getstarted/settings.md">User settings</a>.
        </p>
        <figure>
          <img
            src="images/ssh/ssh-listen-on-socket.png"
            alt="Listen on socket VS Code setting"
          />
          <figcaption>Listen on socket VS Code setting</figcaption>
        </figure>
      </li>
      <li>
        <p>
          If you’ve already connected to the SSH Host, select
          <strong>Remote-SSH: Kill VS Code Server on Host…</strong> from the
          Command Palette (<code>kbstyle(F1)</code>) so the setting takes
          effect.
        </p>
      </li>
    </ol>
    <p>
      If you encounter an error when connecting, you may need to enable socket
      forwarding on your SSH Host’s
      <a href="https://www.ssh.com/ssh/sshd_config/">sshd config</a>. To do so:
    </p>
    <ol type="1">
      <li>
        Open <code>/etc/ssh/sshd_config</code> in a text editor (like vi, nano,
        or pico) on the <strong>SSH host</strong> (not locally).
      </li>
      <li>Add the setting <code>AllowStreamLocalForwarding yes</code>.</li>
      <li>
        Restart the SSH server. (On Ubuntu, run
        <code>sudo systemctl restart sshd</code>.).
      </li>
      <li>Retry.</li>
    </ol>
    <h3 id="troubleshooting-hanging-or-failing-connections">
      Troubleshooting hanging or failing connections
    </h3>
    <p>
      If you are running into problems with VS Code hanging while trying to
      connect (and potentially timing out), there are a few things you can do to
      try to resolve the issue.
    </p>
    <p><strong>General troubleshooting: Remove the server</strong></p>
    <p>
      One command helpful to troubleshoot a variety of Remote-SSH issues is
      <strong>Remote-SSH: Kill VS Code Server on Host</strong>. This will remove
      the server, which can fix a wide range of issues and error messages you
      may see, such as “Could not establish connection to
      <code>server_name</code>: The VS Code Server failed to start.”
    </p>
    <p><strong>See if VS Code is waiting on a prompt</strong></p>
    <p>
      Enable the <code>remote.SSH.showLoginTerminal</code>
      <a href="/docs/getstarted/settings.md">setting</a> in VS Code and retry.
      If you are prompted to input a password or token, see
      <a href="#enabling-alternate-ssh-authentication-methods"
        >Enabling alternate SSH authentication methods</a
      >
      for details on reducing the frequency of prompts.
    </p>
    <p>
      If you are still having trouble, set the following properties in
      <code>settings.json</code> and retry:
    </p>
    <div class="sourceCode" id="cb10">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb10-1" title="1"><span class="er">&quot;remote.SSH.showLoginTerminal&quot;:</span> <span class="er">true,</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="er">&quot;remote.SSH.useLocalServer&quot;:</span> <span class="er">false</span></a></code></pre>
    </div>
    <p>
      <strong
        >Work around a bug with some versions of Windows OpenSSH server</strong
      >
    </p>
    <p>
      Due to a bug in certain versions of OpenSSH server for Windows, the
      default check to determine if the host is running Windows may not work
      properly. This does not occur with OpenSSH server that ships with Windows
      1909 and below.
    </p>
    <p>
      Fortunately, you can work around this problem by specifically telling VS
      Code if your SSH host is running Windows by adding the following to
      <code>settings.json</code>:
    </p>
    <div class="sourceCode" id="cb11">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb11-1" title="1"><span class="er">&quot;remote.SSH.useLocalServer&quot;:</span> <span class="er">false</span></a></code></pre>
    </div>
    <p>
      You can also force VS Code to identify a particular host as Windows using
      the following property:
    </p>
    <div class="sourceCode" id="cb12">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb12-1" title="1"><span class="er">&quot;remote.SSH.remotePlatform&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">    <span class="dt">&quot;host-in-ssh-config-or-fqdn&quot;</span><span class="fu">:</span> <span class="st">&quot;windows&quot;</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="fu">}</span></a></code></pre>
    </div>
    <p>
      A fix has been merged so this problem should be resolved in a version of
      the server greater than 8.1.0.0.
    </p>
    <p><strong>Enable TCP Forwarding on the remote host</strong></p>
    <p>
      Remote - SSH extension makes use of an SSH tunnel to facilitate
      communication with the host. In some cases, this may be disabled on your
      SSH server. To see if this is the problem, open the
      <strong>Remote - SSH</strong> category in the output window and check for
      the following message:
    </p>
    <pre
      class="text"
    ><code>open failed: administratively prohibited: open failed</code></pre>
    <p>
      If you do see that message, follow these steps to update your SSH server’s
      <a href="https://www.ssh.com/ssh/sshd_config/">sshd config</a>:
    </p>
    <ol type="1">
      <li>
        Open <code>/etc/ssh/sshd_config</code> or
        <code>C:\ProgramData\ssh\sshd_config</code> in a text editor (like Vim,
        nano, Pico, or Notepad) on the <strong>SSH host</strong> (not locally).
      </li>
      <li>Add the setting <code>AllowTcpForwarding yes</code>.</li>
      <li>
        Restart the SSH server. (On Ubuntu, run
        <code>sudo systemctl restart sshd</code>. On Windows, in an admin
        PowerShell run, <code>Restart-Service sshd</code>).
      </li>
      <li>Retry.</li>
    </ol>
    <p>
      <strong>Set the ProxyCommand parameter in your SSH config file</strong>
    </p>
    <p>
      If you are behind a proxy and are unable to connect to your SSH host, you
      may need to use the <code>ProxyCommand</code> parameter for your host in a
      <strong>local</strong>
      <a href="https://linux.die.net/man/5/ssh_config">SSH config file</a>. You
      can read this
      <a
        href="https://www.cyberciti.biz/faq/linux-unix-ssh-proxycommand-passing-through-one-host-gateway-server/"
        >SSH ProxyCommand article</a
      >
      for an example of its use.
    </p>
    <p><strong>Ensure the remote machine has internet access</strong></p>
    <p>
      The remote machine must have internet access to be able to download the VS
      Code Server and extensions from the Marketplace. See the
      <a
        href="/docs/remote/faq.md#what-are-the-connectivity-requirements-for-vs-code-server"
        >FAQ for details</a
      >
      on connectivity requirements.
    </p>
    <p><strong>Set HTTP_PROXY / HTTPS_PROXY on the remote host</strong></p>
    <p>
      If your remote host is behind a proxy, you may need to set the HTTP_PROXY
      or HTTPS_PROXY environment variable on the <strong>SSH host</strong>. Open
      your <code>~/.bashrc</code> file add the following (replacing
      <code>proxy.fqdn.or.ip:3128</code> with the appropriate hostname / IP and
      port):
    </p>
    <div class="sourceCode" id="cb14">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="bu">export</span> <span class="va">HTTP_PROXY=</span>http://proxy.fqdn.or.ip:3128</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="bu">export</span> <span class="va">HTTPS_PROXY=$HTTP_PROXY</span></a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co"># Or if an authenticated proxy</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="bu">export</span> <span class="va">HTTP_PROXY=</span>http://username:password@<span class="va">proxy</span>.<span class="va">fqdn</span>.<span class="va">or</span>.<span class="va">ip</span>:3128</a>
<a class="sourceLine" id="cb14-6" title="6"><span class="bu">export</span> <span class="va">HTTPS_PROXY=$HTTP_PROXY</span></a></code></pre>
    </div>
    <p>
      <strong
        >Work around <code>/tmp</code> mounted with <code>noexec</code></strong
      >
    </p>
    <p>
      Some remote servers are set up to disallow executing scripts from
      <code>/tmp</code>. VS Code writes its install script to the system temp
      directory and tries to execute it from there. You can work with your
      system administrator to determine whether this can be worked around.
    </p>
    <p>
      <strong
        >Check whether a different shell is launched during install</strong
      >
    </p>
    <p>
      Some users launch a different shell from their
      <code>.bash_profile</code> or other startup script on their
      <strong>SSH host</strong> because they want to use a different shell than
      the default. This can break VS Code’s remote server install script and
      isn’t recommended. Instead, use <code>chsh</code> to change your default
      shell on the remote machine.
    </p>
    <p>
      <strong
        >Connecting to systems that dynamically assign machines per
        connection</strong
      >
    </p>
    <p>
      Some systems will dynamically route an SSH connection to one node from a
      cluster each time an SSH connection is made. This is an issue for VS Code
      because it makes two connections to open a remote window: the first to
      install or start the VS Code Server (or find an already running instance)
      and the second to create the SSH port tunnel that VS Code uses to talk to
      the server. If VS Code is routed to a different machine when it creates
      the second connection, it won’t be able to talk to the VS Code server.
    </p>
    <p>
      One workaround for this is to use the <code>ControlMaster</code> option in
      OpenSSH (macOS/Linux clients only), described in
      <a href="#enabling-alternate-ssh-authentication-methods"
        >Enabling alternate SSH authentication methods</a
      >, so that VS Code’s two connections will be multiplexed through a single
      SSH connection to the same node.
    </p>
    <p>
      <strong>Contact your system administrator for configuration help</strong>
    </p>
    <p>
      SSH is a very flexible protocol and supports many configurations. If you
      see other errors, in either the login terminal or the
      <strong>Remote-SSH</strong> output window, they could be due to a missing
      setting.
    </p>
    <p>
      Contact your system administrator for information about the required
      settings for your SSH host and client. Specific command-line arguments for
      connecting to your SSH host can be added to an
      <a href="https://linux.die.net/man/5/ssh_config">SSH config file</a>.
    </p>
    <p>
      To access your config file, run
      <strong>Remote-SSH: Open Configuration File…</strong> in the Command
      Palette (<code>kbstyle(F1)</code>). You can then work with your admin to
      add the necessary settings.
    </p>
    <h3 id="enabling-alternate-ssh-authentication-methods">
      Enabling alternate SSH authentication methods
    </h3>
    <p>If you are connecting to an SSH remote host and are either:</p>
    <ul>
      <li>Connecting with two-factor authentication</li>
      <li>Using password authentication</li>
      <li>
        Using an SSH key with a passphrase when the
        <a href="#setting-up-the-ssh-agent">SSH Agent</a> is not running or
        accessible
      </li>
    </ul>
    <p>
      then VS Code should automatically prompt you to enter needed information.
      If you do not see the prompt, enable the
      <code>remote.SSH.showLoginTerminal</code>
      <a href="/docs/getstarted/settings.md">setting</a> in VS Code. This
      setting displays the terminal whenever VS Code runs an SSH command. You
      can then enter your authentication code, password, or passphrase when the
      terminal appears.
    </p>
    <p>
      If you are still having trouble, you may need to the following properties
      in <code>settings.json</code> and retry:
    </p>
    <div class="sourceCode" id="cb15">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb15-1" title="1"><span class="er">&quot;remote.SSH.showLoginTerminal&quot;:</span> <span class="er">true,</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="er">&quot;remote.SSH.useLocalServer&quot;:</span> <span class="er">false</span></a></code></pre>
    </div>
    <p>
      If you are on macOS and Linux and want to reduce how often you have to
      enter a password or token, you can enable the
      <code>ControlMaster</code> feature on your
      <strong>local machine</strong> so that OpenSSH runs multiple SSH sessions
      over a single connection.
    </p>
    <p>To enable <code>ControlMaster</code>:</p>
    <ol type="1">
      <li>
        <p>Add an entry like this to your SSH config file:</p>
        <div class="sourceCode" id="cb16">
          <pre
            class="sourceCode yaml"
          ><code class="sourceCode yaml"><a class="sourceLine" id="cb16-1" title="1">Host *</a>
<a class="sourceLine" id="cb16-2" title="2">    ControlMaster auto</a>
<a class="sourceLine" id="cb16-3" title="3">    ControlPath  ~/.ssh/sockets/%r@%h-%p</a>
<a class="sourceLine" id="cb16-4" title="4">    ControlPersist  600</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Then run <code>mkdir -p ~/.ssh/sockets</code> to create the sockets
          folder.
        </p>
      </li>
    </ol>
    <h3 id="setting-up-the-ssh-agent">Setting up the SSH Agent</h3>
    <p>
      If you are connecting to an SSH host using a key with a passphrase, you
      should ensure that the
      <a href="https://www.ssh.com/ssh/agent">SSH Agent</a> is running
      <strong>locally</strong>. VS Code will automatically add your key to the
      agent so you don’t have to enter your passphrase every time you open a
      remote VS Code window.
    </p>
    <p>
      To verify that the agent is running and is reachable from VS Code’s
      environment, run <code>ssh-add -l</code> in the terminal of a local VS
      Code window. You should see a listing of the keys in the agent (or a
      message that it has no keys). If the agent is not running, follow these
      instructions to start it. After starting the agent, be sure to restart VS
      Code.
    </p>
    <p><strong>Windows:</strong></p>
    <p>
      To enable SSH Agent automatically on Windows, start a
      <strong>local Administrator PowerShell</strong> and run the following
      commands:
    </p>
    <div class="sourceCode" id="cb17">
      <pre
        class="sourceCode powershell"
      ><code class="sourceCode powershell"><a class="sourceLine" id="cb17-1" title="1"><span class="co"># Make sure you&#39;re running as an Administrator</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="fu">Set-Service</span> ssh-agent -StartupType Automatic</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="fu">Start-Service</span> ssh-agent</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="fu">Get-Service</span> ssh-agent</a></code></pre>
    </div>
    <p>Now the agent will be started automatically on login.</p>
    <p><strong>Linux:</strong></p>
    <p>To start the SSH Agent in the background, run:</p>
    <div class="sourceCode" id="cb18">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" title="1"><span class="bu">eval</span> <span class="st">&quot;</span><span class="va">$(</span><span class="fu">ssh-agent</span> -s<span class="va">)</span><span class="st">&quot;</span></a></code></pre>
    </div>
    <p>
      To start the SSH Agent automatically on login, add these lines to your
      <code>~/.bash_profile</code>:
    </p>
    <div class="sourceCode" id="cb19">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-z</span> <span class="st">&quot;</span><span class="va">$SSH_AUTH_SOCK</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb19-2" title="2">   <span class="co"># Check for a currently running instance of the agent</span></a>
<a class="sourceLine" id="cb19-3" title="3">   <span class="va">RUNNING_AGENT=</span><span class="st">&quot;</span><span class="kw">`</span><span class="fu">ps</span> -ax <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;ssh-agent -s&#39;</span> <span class="kw">|</span> <span class="fu">grep</span> -v grep <span class="kw">|</span> <span class="fu">wc</span> -l <span class="kw">|</span> <span class="fu">tr</span> -d <span class="st">&#39;[:space:]&#39;</span><span class="kw">`</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb19-4" title="4">   <span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$RUNNING_AGENT</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb19-5" title="5">        <span class="co"># Launch a new instance of the agent</span></a>
<a class="sourceLine" id="cb19-6" title="6">        <span class="fu">ssh-agent</span> -s <span class="op">&amp;&gt;</span> .ssh/ssh-agent</a>
<a class="sourceLine" id="cb19-7" title="7">   <span class="kw">fi</span></a>
<a class="sourceLine" id="cb19-8" title="8">   <span class="bu">eval</span> <span class="kw">`</span><span class="fu">cat</span> .ssh/ssh-agent<span class="kw">`</span></a>
<a class="sourceLine" id="cb19-9" title="9"><span class="kw">fi</span></a></code></pre>
    </div>
    <p><strong>macOS:</strong></p>
    <p>The agent should be running by default on macOS.</p>
    <h3 id="fixing-ssh-file-permission-errors">
      Fixing SSH file permission errors
    </h3>
    <p>
      SSH can be strict about file permissions and if they are set incorrectly,
      you may see errors such as “WARNING: UNPROTECTED PRIVATE KEY FILE!”. There
      are several ways to update file permissions in order to fix this, which
      are described in the sections below.
    </p>
    <h3 id="local-ssh-file-and-folder-permissions">
      Local SSH file and folder permissions
    </h3>
    <p><strong>macOS / Linux:</strong></p>
    <p>On your local machine, make sure the following permissions are set:</p>
    <table>
      <thead>
        <tr class="header">
          <th>Folder / File</th>
          <th>Permissions</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td><code>.ssh</code> in your user folder</td>
          <td><code>chmod 700 ~/.ssh</code></td>
        </tr>
        <tr class="even">
          <td><code>.ssh/config</code> in your user folder</td>
          <td><code>chmod 600 ~/.ssh/config</code></td>
        </tr>
        <tr class="odd">
          <td><code>.ssh/id_rsa.pub</code> in your user folder</td>
          <td><code>chmod 600 ~/.ssh/id_rsa.pub</code></td>
        </tr>
        <tr class="even">
          <td>Any other key file</td>
          <td><code>chmod 600 /path/to/key/file</code></td>
        </tr>
      </tbody>
    </table>
    <p><strong>Windows:</strong></p>
    <p>
      The specific expected permissions can vary depending on the exact SSH
      implementation you are using. We strongly recommend using the out of box
      <a
        href="https://docs.microsoft.com/windows-server/administration/openssh/openssh_overview"
        >Windows 10 OpenSSH Client</a
      >.
    </p>
    <p>
      In this case, make sure that all of the files in the
      <code>.ssh</code> folder for your remote user on the SSH host is owned by
      you and no other user has permissions to access it. See the
      <a
        href="https://github.com/PowerShell/Win32-OpenSSH/wiki/Security-protection-of-various-files-in-Win32-OpenSSH"
        >Windows OpenSSH wiki</a
      >
      for details.
    </p>
    <p>
      For all other clients, consult your client’s documentation for what the
      implementation expects.
    </p>
    <h3 id="server-ssh-file-and-folder-permissions">
      Server SSH file and folder permissions
    </h3>
    <p><strong>macOS / Linux:</strong></p>
    <p>
      On the remote machine you are connecting to, make sure the following
      permissions are set:
    </p>
    <table>
      <colgroup>
        <col style="width: 35%" />
        <col style="width: 64%" />
      </colgroup>
      <thead>
        <tr class="header">
          <th>Folder / File</th>
          <th>Linux / macOS Permissions</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td><code>.ssh</code> in your user folder on the server</td>
          <td><code>chmod 700 ~/.ssh</code></td>
        </tr>
        <tr class="even">
          <td>
            <code>.ssh/authorized_keys</code> in your user folder on the server
          </td>
          <td><code>chmod 600 ~/.ssh/authorized_keys</code></td>
        </tr>
      </tbody>
    </table>
    <p>
      Note that only Linux hosts are currently supported, which is why
      permissions for macOS and Windows 10 have been omitted.
    </p>
    <p><strong>Windows:</strong></p>
    <p>
      See the
      <a
        href="https://github.com/PowerShell/Win32-OpenSSH/wiki/Security-protection-of-various-files-in-Win32-OpenSSH"
        >Windows OpenSSH wiki</a
      >
      for details on setting the appropriate file permissions for the Windows
      OpenSSH server.
    </p>
    <h3 id="installing-a-supported-ssh-client">
      Installing a supported SSH client
    </h3>
    <table>
      <colgroup>
        <col style="width: 22%" />
        <col style="width: 77%" />
      </colgroup>
      <thead>
        <tr class="header">
          <th>OS</th>
          <th>Instructions</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td>Windows 10 1803+ / Server 2016/2019 1803+</td>
          <td>
            Install the
            <a
              href="https://docs.microsoft.com/windows-server/administration/openssh/openssh_install_firstuse"
              >Windows OpenSSH Client</a
            >.
          </td>
        </tr>
        <tr class="even">
          <td>Earlier Windows</td>
          <td>
            Install
            <a href="https://git-scm.com/download/win">Git for Windows</a>.
          </td>
        </tr>
        <tr class="odd">
          <td>macOS</td>
          <td>Comes pre-installed.</td>
        </tr>
        <tr class="even">
          <td>Debian/Ubuntu</td>
          <td>Run <code>sudo apt-get install openssh-client</code></td>
        </tr>
        <tr class="odd">
          <td>RHEL / Fedora / CentOS</td>
          <td>Run <code>sudo yum install openssh-clients</code></td>
        </tr>
      </tbody>
    </table>
    <p>
      VS Code will look for the <code>ssh</code> command in the PATH. Failing
      that, on Windows it will attempt to find <code>ssh.exe</code> in the
      default Git for Windows install path. You can also specifically tell VS
      Code where to find the SSH client by adding the
      <code>remote.SSH.path</code> property to <code>settings.json</code>.
    </p>
    <h3 id="installing-a-supported-ssh-server">
      Installing a supported SSH server
    </h3>
    <table>
      <colgroup>
        <col style="width: 19%" />
        <col style="width: 66%" />
        <col style="width: 14%" />
      </colgroup>
      <thead>
        <tr class="header">
          <th>OS</th>
          <th>Instructions</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td>Debian 8+ / Ubuntu 16.04+</td>
          <td>Run <code>sudo apt-get install openssh-server</code></td>
          <td>
            See the
            <a href="https://help.ubuntu.com/community/SSH?action=show"
              >Ubuntu SSH</a
            >
            documentation for details.
          </td>
        </tr>
        <tr class="even">
          <td>RHEL / CentOS 7+</td>
          <td>
            Run
            <code
              >sudo yum install openssh-server &amp;&amp; sudo systemctl start
              sshd.service &amp;&amp; sudo systemctl enable sshd.service</code
            >
          </td>
          <td>
            See the
            <a
              href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/ch-openssh"
              >RedHat SSH</a
            >
            documentation for details.
          </td>
        </tr>
        <tr class="odd">
          <td>SuSE 12+ / openSUSE 42.3+</td>
          <td>
            In Yast, go to Services Manager, select “sshd” in the list, and
            click <strong>Enable</strong>. Next go to Firewall, select the
            <strong>Permanent</strong> configuration, and under services check
            <strong>sshd</strong>.
          </td>
          <td>
            See the
            <a href="https://en.opensuse.org/OpenSSH">SuSE SSH</a> documentation
            for details.
          </td>
        </tr>
        <tr class="even">
          <td>Windows 10 1803+ / Server 2016/2019 1803+</td>
          <td>
            Install the
            <a
              href="https://docs.microsoft.com/windows-server/administration/openssh/openssh_install_firstuse"
              >Windows OpenSSH Server</a
            >.
          </td>
          <td></td>
        </tr>
        <tr class="odd">
          <td>macOS 10.14+ (Mojave)</td>
          <td>
            Enable
            <a
              href="https://support.apple.com/guide/mac-help/allow-a-remote-computer-to-access-your-mac-mchlp1066/mac"
              >Remote Login</a
            >.
          </td>
          <td></td>
        </tr>
      </tbody>
    </table>
    <h3 id="resolving-hangs-when-doing-a-git-push-or-sync-on-an-ssh-host">
      Resolving hangs when doing a Git push or sync on an SSH host
    </h3>
    <p>
      If you clone a Git repository using SSH and your SSH key has a passphrase,
      VS Code’s pull and sync features may hang when running remotely.
    </p>
    <p>
      Either use an SSH key without a passphrase, clone using HTTPS, or run
      <code>git push</code> from the command line to work around the issue.
    </p>
    <h3 id="using-sshfs-to-access-files-on-your-remote-host">
      Using SSHFS to access files on your remote host
    </h3>
    <p>
      <a href="https://en.wikipedia.org/wiki/SSHFS">SSHFS</a> is a secure remote
      filesystem access protocol that builds up from SFTP. It provides
      advantages over something like a CIFS / Samba share in that all that is
      required is SSH access to the machine.
    </p>
    <blockquote>
      <p>
        <strong>Note:</strong> For performance reasons, SSHFS is best used for
        single file edits and uploading/downloading content. If you need to use
        an application that bulk reads/write to many files at once (like a local
        source control tool),
        <a href="#using-rsync-to-maintain-a-local-copy-of-your-source-code"
          >rsync</a
        >
        is a better choice.
      </p>
    </blockquote>
    <p><strong>macOS / Linux</strong>:</p>
    <p>
      On Linux, you can use your distribution’s package manager to install
      SSHFS. For Debian/Ubuntu: <code>sudo apt-get install sshfs</code>
    </p>
    <blockquote>
      <p>
        <strong>Note:</strong> WSL 1 does not support FUSE or SSHFS, so the
        instructions differ for Windows currently.
        <strong>WSL 2 does include FUSE and SSHFS support</strong>, so this will
        change soon.
      </p>
    </blockquote>
    <p>
      On macOS, you can install SSHFS using
      <a href="https://brew.sh/">Homebrew</a>:
      <code>brew install sshfs</code> In addition, if you would prefer not to
      use the command line to mount the remote filesystem, you can also install
      <a href="https://github.com/dstuecken/sshfs-gui">SSHFS GUI</a>.
    </p>
    <p>
      To use the command line, run the following commands from a local terminal
      (replacing <code>user@hostname</code> with the remote user and hostname /
      IP):
    </p>
    <div class="sourceCode" id="cb20">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb20-1" title="1"><span class="bu">export</span> <span class="va">USER_AT_HOST=</span>user@<span class="va">hostname</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co"># Make the directory where the remote filesystem will be mounted</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="fu">mkdir</span> -p <span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/sshfs/</span><span class="va">$USER_AT_HOST</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co"># Mount the remote filesystem</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="ex">sshfs</span> <span class="st">&quot;</span><span class="va">$USER_AT_HOST</span><span class="st">:&quot;</span> <span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/sshfs/</span><span class="va">$USER_AT_HOST</span><span class="st">&quot;</span> -ovolname=<span class="st">&quot;</span><span class="va">$USER_AT_HOST</span><span class="st">&quot;</span> -p 22  \</a>
<a class="sourceLine" id="cb20-6" title="6">    -o workaround=nonodelay -o transform_symlinks -o idmap=user  -C</a></code></pre>
    </div>
    <p>
      This will make your home folder on the remote machine available under the
      <code>~/sshfs</code>. When you are done, you can unmount it using your
      OS’s Finder / file explorer or by using the command line:
    </p>
    <div class="sourceCode" id="cb21">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb21-1" title="1"><span class="fu">umount</span> <span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/sshfs/</span><span class="va">$USER_AT_HOST</span><span class="st">&quot;</span></a></code></pre>
    </div>
    <p><strong>Windows:</strong></p>
    <p>Follow these steps:</p>
    <ol type="1">
      <li>
        <p>
          On Linux, add <code>.gitattributes</code> file to your project to
          <strong>force consistent line endings</strong> between Linux and
          Windows to avoid unexpected issues due to CRLF/LF differences between
          the two operating systems. See
          <a
            href="#resolving-git-line-ending-issues-in-wsl-resulting-in-many-modified-files"
            >Resolving Git line ending issues</a
          >
          for details.
        </p>
      </li>
      <li>
        <p>
          Next, install
          <a href="https://github.com/billziss-gh/sshfs-win">SSHFS-Win</a> using
          <a href="https://chocolatey.org/">Chocolatey</a>:
          <code>choco install sshfs</code>
        </p>
      </li>
      <li>
        <p>
          Once you’ve installed SSHFS for Windows, you can use the File
          Explorer’s <strong>Map Network Drive…</strong> option with the path
          <code>\\sshfs\user@hostname</code>, where
          <code>user@hostname</code> is your remote user and hostname / IP. You
          can script this using the command prompt as follows:
          <code>net use /PERSISTENT:NO X: \\sshfs\user@hostname</code>
        </p>
      </li>
      <li>
        <p>
          Once done, disconnect by right-clicking on the drive in the File
          Explorer and selecting <strong>Disconnect</strong>.
        </p>
      </li>
    </ol>
    <h3 id="connect-to-a-remote-host-from-the-terminal">
      Connect to a remote host from the terminal
    </h3>
    <p>
      Once a host has been configured, you can connect to it directly from the
      terminal by passing a remote URI.
    </p>
    <p>
      For example, to connect to <code>remote_server</code> and open the
      <code>/code/my_project</code> folder, run:
    </p>
    <div class="sourceCode" id="cb22">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb22-1" title="1"><span class="ex">code</span> --remote ssh-remote+remote_server /code/my_project</a></code></pre>
    </div>
    <p>
      We need to do some guessing on whether the input path is a file or a
      folder. If it has a file extension, it is considered a file.
    </p>
    <p>To force that a folder is opened, add slash to the path or use:</p>
    <p>
      <code
        >code --folder-uri
        vscode-remote://ssh-remote+remote_server/code/folder.with.dot</code
      >
    </p>
    <p>To force that a file is opened, add <code>--goto</code> or use:</p>
    <p>
      <code
        >code --file-uri
        vscode-remote://ssh-remote+remote_server/code/fileWithoutExtension</code
      >
    </p>
    <h3 id="using-rsync-to-maintain-a-local-copy-of-your-source-code">
      Using rsync to maintain a local copy of your source code
    </h3>
    <p>
      An alternative to
      <a href="#using-sshfs-to-access-files-on-your-remote-host"
        >using SSHFS to access remote files</a
      >
      is to <a href="https://rsync.samba.org/">use <code>rsync</code></a> to
      copy the entire contents of a folder on remote host to your local machine.
      The <code>rsync</code> command will determine which files need to be
      updated each time it is run, which is far more efficient and convenient
      than using something like <code>scp</code> or <code>sftp</code>. This is
      primarily something to consider if you really need to use multi-file or
      performance intensive local tools.
    </p>
    <p>
      The <code>rsync</code> command is available out of box on macOS and can be
      installed using Linux package managers (for example
      <code>sudo apt-get install rsync</code> on Debian/Ubuntu). For Windows,
      you’ll need to either use
      <a href="https://docs.microsoft.com/windows/wsl/install-win10">WSL</a> or
      <a href="https://www.cygwin.com/">Cygwin</a> to access the command.
    </p>
    <p>
      To use the command, navigate to the folder you want to store the synched
      contents and run the following replacing <code>user@hostname</code> with
      the remote user and hostname / IP and
      <code>/remote/source/code/path</code> with the remote source code
      location.
    </p>
    <p>On <strong>macOS, Linux, or inside WSL</strong>:</p>
    <div class="sourceCode" id="cb23">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb23-1" title="1"><span class="fu">rsync</span> -rlptzv --progress --delete --exclude=.git <span class="st">&quot;user@hostname:/remote/source/code/path&quot;</span> .</a></code></pre>
    </div>
    <p>Or using <strong>WSL from PowerShell on Windows</strong>:</p>
    <div class="sourceCode" id="cb24">
      <pre
        class="sourceCode powershell"
      ><code class="sourceCode powershell"><a class="sourceLine" id="cb24-1" title="1">wsl rsync -rlptzv --progress --delete --exclude=.<span class="fu">git</span> <span class="st">&quot;user@hostname:/remote/source/code/path&quot;</span> <span class="st">&quot;`$(wslpath -a &#39;$PWD&#39;)&quot;</span></a></code></pre>
    </div>
    <p>
      You can rerun this command each time you want to get the latest copy of
      your files and only updates will be transferred. The
      <code>.git</code> folder is intentionally excluded both for performance
      reasons and so you can use local Git tools without worrying about the
      state on the remote host.
    </p>
    <p>
      To push content, reverse the source and target parameters in the command.
      However, <strong>on Windows</strong> you should add a
      <code>.gitattributes</code> file to your project to
      <strong>force consistent line endings</strong> before doing so. See
      <a
        href="#resolving-git-line-ending-issues-in-wsl-resulting-in-many-modified-files"
        >Resolving Git line ending issues</a
      >
      for details.
    </p>
    <div class="sourceCode" id="cb25">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb25-1" title="1"><span class="fu">rsync</span> -rlptzv --progress --delete --exclude=.git . <span class="st">&quot;user@hostname:/remote/source/code/path&quot;</span></a></code></pre>
    </div>
    <h3 id="cleaning-up-the-vs-code-server-on-the-remote">
      Cleaning up the VS Code Server on the remote
    </h3>
    <p>
      The SSH extension provides a command for cleaning up the VS Code Server
      from the remote machine,
      <strong>Remote-SSH: Uninstall VS Code Server from Host…</strong>. The
      command does two things: it kills any running VS Code Server processes and
      it deletes the folder where the server was installed.
    </p>
    <p>
      If you want to run these steps manually, or if the command isn’t working
      for you, you can run a script like this:
    </p>
    <div class="sourceCode" id="cb26">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb26-1" title="1"><span class="bu">kill</span> -9 <span class="kw">`</span><span class="fu">ps</span> ax <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;remoteExtensionHostAgent.js&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> -v grep <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span><span class="kw">`</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="bu">kill</span> -9 <span class="kw">`</span><span class="fu">ps</span> ax <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;watcherService&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> -v grep <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span><span class="kw">`</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="fu">rm</span> -rf ~/.vscode-server <span class="co"># Or ~/.vscode-server-insiders</span></a></code></pre>
    </div>
    <p>
      The VS Code Server was previously installed under
      <code>~/.vscode-remote</code> so you can check that location too.
    </p>
    <h3 id="ssh-into-a-remote-wsl-2-host">SSH into a remote WSL 2 host</h3>
    <p>
      You may want to use SSH to connect to a WSL distro running on your remote
      machine. Check out
      <a
        href="https://www.hanselman.com/blog/the-easy-way-how-to-ssh-into-bash-and-wsl2-on-windows-10-from-an-external-machine"
        >this guide</a
      >
      to learn how to SSH into Bash and WSL 2 on Windows 10 from an external
      machine.
    </p>
    <h2 id="container-tips">Container tips</h2>
    <p>
      This section includes some tips and tricks for getting the Remote -
      Containers extension up and running in different environments.
    </p>
    <p>
      If you are running into Docker issues or would prefer not to run Docker
      locally, you may want to try the preview of
      <a href="https://github.com/features/codespaces"
        >GitHub Codespaces managed cloud-based environments</a
      >. Over time this service will support an increasing number of
      <code>devcontainer.json</code> properties and you can also use its
      browser-based editor in addition to VS Code.
    </p>
    <h3 id="docker-desktop-for-windows-tips">
      Docker Desktop for Windows tips
    </h3>
    <p>
      <a href="https://www.docker.com/products/docker-desktop"
        >Docker Desktop</a
      >
      for Windows works well in most setups, but there are a few “gotchas” that
      can cause problems. Here are some tips on avoiding them:
    </p>
    <ol type="1">
      <li>
        <p>
          <strong
            >Consider using the new Docker WSL 2 back-end on Windows 10
            (2004+).</strong
          >
          If you are using
          <a href="https://aka.ms/vscode-remote/containers/docker-wsl"
            >Docker Desktop’s WSL 2 back-end</a
          >, you can you to open folders inside WSL as well as locally.
          Containers are also shared between Windows and inside WSL and this new
          engine is less susceptible to file sharing issues. See the
          <a
            href="/docs/remote/containers.md#open-a-wsl-2-folder-in-a-container-on-windows"
            >quick start</a
          >
          for details.
        </p>
      </li>
      <li>
        <p>
          <strong
            >Switch out of “Linux Containers on Windows (LCOW)” mode.</strong
          >
          While disabled by default, recent versions of Docker support
          <a
            href="https://docs.microsoft.com/virtualization/windowscontainers/deploy-containers/linux-containers"
            >Linux Containers on Windows (LCOW)</a
          >
          that can allow you to use both Windows and Linux containers at the
          same time. However, this is a new feature, so you may encounter issues
          and the Remote - Containers extension only supports Linux containers
          currently. You can switch out of LCOW mode at any time by
          right-clicking on the Docker task bar item and selecting
          <strong>Switch to Linux Containers…</strong> from the context menu.
        </p>
      </li>
      <li>
        <p>
          <strong
            >Make sure your firewall allows Docker to set up a shared
            drive.</strong
          >
          Docker only needs to connect between two machine local IPs, but some
          firewall software may still block any drive sharing or the needed
          ports. See
          <a
            href="https://success.docker.com/article/error-a-firewall-is-blocking-file-sharing-between-windows-and-the-containers"
            >this Docker KB article</a
          >
          for next steps on resolving this problem.
        </p>
      </li>
    </ol>
    <p>
      Here are some tips that applied to older versions of Docker for Windows
      but should now be resolved. If you run into strage behaviors due to a
      possible regression, these tips have solved problems in the past.
    </p>
    <ol type="1">
      <li>
        <p>
          <strong
            >Use an AD domain account or local administrator account when
            sharing drives. Do not use an AAD (email-based) account.</strong
          >
          AAD (email-based) accounts have well-known issues, as documented in
          Docker
          <a href="https://github.com/docker/for-win/issues/132">issue #132</a>
          and
          <a href="https://github.com/docker/for-win/issues/1352">issue #1352</a
          >. If you must use an AAD account, create a separate local
          administrator account on your machine that you use purely for the
          purpose of sharing drives. Follow the
          <a
            href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/"
            >steps in this blog post</a
          >
          to get everything set up.
        </p>
      </li>
      <li>
        <p>
          <strong
            >Stick with alphanumeric passwords to avoid drive sharing
            problems.</strong
          >
          When asked to share your drives on Windows, you will be prompted for
          the username and password of an account with admin privileges on the
          machine. If you are warned about an incorrect username or password,
          this may be due to special characters in the password. For example,
          <code>!</code>, <code>[</code> and <code>]</code> are known to cause
          issues. Change your password to alphanumeric characters to resolve.
          See this issue about
          <a
            href="https://github.com/moby/moby/issues/23992#issuecomment-234979036"
            >Docker volume mounting problems</a
          >
          for details.
        </p>
      </li>
      <li>
        <p>
          <strong
            >Use your Docker ID to sign in to Docker (not your email).</strong
          >
          The Docker CLI only supports using your Docker ID, so using your email
          can cause problems. See Docker
          <a
            href="https://github.com/docker/hub-feedback/issues/935#issuecomment-300361781"
            >issue #935</a
          >
          for details.
        </p>
      </li>
    </ol>
    <p>
      If you are still having trouble, see the
      <a href="https://docs.docker.com/docker-for-windows/troubleshoot/#volumes"
        >Docker Desktop for Windows troubleshooting guide</a
      >.
    </p>
    <h3 id="enabling-file-sharing-in-docker-desktop">
      Enabling file sharing in Docker Desktop
    </h3>
    <p>
      The VS Code
      <a href="https://aka.ms/vscode-remote/download/containers"
        >Remote - Containers</a
      >
      extension can only automatically mount your source code into a container
      if your code is in a folder or drive shared with Docker. If you open a dev
      container from a non-shared location, the container will successfully
      start but the workspace will be empty.
    </p>
    <p>
      Note that this step is <strong>not required</strong> with
      <a href="https://aka.ms/vscode-remote/containers/docker-wsl"
        >Docker Desktop’s WSL 2 engine</a
      >.
    </p>
    <p>To change Docker’s drive and folder sharing settings:</p>
    <p><strong>Windows:</strong></p>
    <ol type="1">
      <li>
        Right-click on the Docker task bar item and select
        <strong>Settings</strong>.
      </li>
      <li>
        Go to <strong>Resources &gt; File Sharing</strong> and check the
        drive(s) where your source code is located.
      </li>
      <li>
        If you see a message about your local firewall blocking the sharing
        action, see
        <a
          href="https://success.docker.com/article/error-a-firewall-is-blocking-file-sharing-between-windows-and-the-containers"
          >this Docker KB article</a
        >
        for next steps.
      </li>
    </ol>
    <p><strong>macOS:</strong></p>
    <ol type="1">
      <li>
        Click on the Docker menu bar item and select
        <strong>Preferences</strong>.
      </li>
      <li>
        Go to <strong>Resources &gt; File Sharing</strong>. Confirm that the
        folder containing your source code is under one of the shared folders
        listed.
      </li>
    </ol>
    <h3
      id="resolving-git-line-ending-issues-in-containers-resulting-in-many-modified-files"
    >
      Resolving Git line ending issues in containers (resulting in many modified
      files)
    </h3>
    <p>
      Since Windows and Linux use different default line endings, Git may report
      a large number of modified files that have no differences aside from their
      line endings. To prevent this from happening, you can disable line ending
      conversion using a <code>.gitattributes</code> file or globally on the
      Windows side.
    </p>
    <p>
      Typically adding or modifying a <code>.gitattributes</code> file in your
      repository is the most reliable way to solve this problem. Committing this
      file to source control will help others and allows you to vary behaviors
      by repository as appropriate. For example, adding the following to
      <code>.gitattributes</code> file to the root of your repository will force
      everything to be LF, except for Windows batch files that require CRLF:
    </p>
    <div class="sourceCode" id="cb27">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb27-1" title="1">* text=auto eol=lf</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="dt">*.{cmd,[cC][mM][dD]}</span> text eol=crlf</a>
<a class="sourceLine" id="cb27-3" title="3"><span class="dt">*.{bat,[bB][aA][tT]}</span> text eol=crlf</a></code></pre>
    </div>
    <p>
      Note that this works in <strong>Git v2.10+</strong>, so if you are running
      into problems, be sure you’ve got a recent Git client installed. You can
      add other file types in your repository that require CRLF to this same
      file.
    </p>
    <p>
      If you would prefer to still always upload Unix-style line endings (LF),
      you can use the <code>input</code> option.
    </p>
    <div class="sourceCode" id="cb28">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb28-1" title="1"><span class="fu">git</span> config --global core.autocrlf input</a></code></pre>
    </div>
    <p>
      If you’d prefer to disable line-ending conversion entirely, run the
      following instead:
    </p>
    <div class="sourceCode" id="cb29">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb29-1" title="1"><span class="fu">git</span> config --global core.autocrlf false</a></code></pre>
    </div>
    <p>
      Finally, you may need to clone the repository again for these settings to
      take effect.
    </p>
    <h3 id="avoid-setting-up-git-in-a-container-when-using-docker-compose">
      Avoid setting up Git in a container when using Docker Compose
    </h3>
    <p>
      See
      <a
        href="/docs/remote/containers.md#sharing-git-credentials-with-your-container"
        >Sharing Git credentials with your container</a
      >
      in the main containers article for information on resolving this issue.
    </p>
    <h3 id="resolving-hangs-when-doing-a-git-push-or-sync-from-a-container">
      Resolving hangs when doing a Git push or sync from a Container
    </h3>
    <p>
      If you clone a Git repository using SSH and your SSH key has a passphrase,
      VS Code’s pull and sync features may hang when running remotely.
    </p>
    <p>
      Either use an SSH key without a passphrase, clone using HTTPS, or run
      <code>git push</code> from the command line to work around the issue.
    </p>
    <h3 id="resolving-errors-about-missing-linux-dependencies">
      Resolving errors about missing Linux dependencies
    </h3>
    <p>
      Some extensions rely on libraries not found in the certain Docker images.
      See the
      <a href="/docs/remote/create-dev-container.md#install-additional-software"
        >Containers</a
      >
      article for a few options on resolving this issue.
    </p>
    <h3 id="speeding-up-containers-in-docker-desktop">
      Speeding up containers in Docker Desktop
    </h3>
    <p>
      By default, Docker Desktop only gives containers a fraction of your
      machine capacity. In most cases, this is enough, but if you are doing
      something that requires more capacity, you can increase memory, CPU, or
      disk use.
    </p>
    <p>
      First, try
      <a href="/docs/remote/containers.md#managing-containers"
        >stopping any running containers</a
      >
      you are no longer using.
    </p>
    <p>
      If this doesn’t solve your problem, you may want to see if CPU usage is
      actually the issue or if there is something else going on. An easy way to
      check this is to install the
      <a
        href="https://marketplace.visualstudio.com/items?itemName=mutantdino.resourcemonitor&amp;ssr=false#overview"
        >Resource Monitor extension</a
      >. When installed in a container, it provides information about capacity
      for your containers in the Status bar.
    </p>
    <figure>
      <img
        src="images/troubleshooting/resource-monitor.png"
        alt="Resource use Status bar"
      />
      <figcaption>Resource use Status bar</figcaption>
    </figure>
    <p>
      If you’d like this extension to always be installed, add this to your
      <code>settings.json</code>:
    </p>
    <div class="sourceCode" id="cb30">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb30-1" title="1"><span class="er">&quot;remote.containers.defaultExtensions&quot;:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb30-2" title="2">    <span class="st">&quot;mutantdino.resourcemonitor&quot;</span></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="ot">]</span></a></code></pre>
    </div>
    <p>
      If you determine that you need to give your container more of your
      machine’s capacity, follow these steps:
    </p>
    <ol type="1">
      <li>
        Right-click on the Docker task bar item and select
        <strong>Settings</strong> / <strong>Preferences</strong>.
      </li>
      <li>Go to <strong>Advanced</strong> to increase CPU, Memory, or Swap.</li>
      <li>
        On macOS, go to <strong>Disk</strong> to increase the amount of disk
        Docker is allowed to consume on your machine. On Windows, this is
        located under Advanced with the other settings.
      </li>
    </ol>
    <p>
      Finally, if your container is
      <strong>doing disk intensive</strong> operations or you are just looking
      for faster response times, see
      <a
        href="/docs/remote/containers-advanced.md#improving-container-disk-performance"
        >Improving container disk performance</a
      >
      for tips. VS Code’s defaults optimize for convenience and universal
      support, but can be optimized.
    </p>
    <h3 id="cleaning-out-unused-containers-and-images">
      Cleaning out unused containers and images
    </h3>
    <p>
      If you see an error from Docker reporting that you are out of disk space,
      you can typically resolve this by cleaning out unused containers and
      images. There are a few ways to do this:
    </p>
    <p><strong>Option 1: Use the Remote Explorer</strong></p>
    <p>
      You can delete containers by selecting the
      <strong>Remote Explorer</strong>, right-click on the container you want to
      remove, and select <strong>Remove Container</strong>.
    </p>
    <figure>
      <img
        src="images/containers/containers-explorer-remove.png"
        alt="Remote Explorer screenshot"
      />
      <figcaption>Remote Explorer screenshot</figcaption>
    </figure>
    <p>
      However, this does not clean up any images you may have downloaded, which
      can clutter up your system.
    </p>
    <p><strong>Option 2: Use the Docker extension</strong></p>
    <ol type="1">
      <li>
        <p>
          Open a <strong>local</strong> window in VS Code (<strong
            >File &gt; New Window</strong
          >).
        </p>
      </li>
      <li>
        <p>
          Install the
          <a
            href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker"
            >Docker extension</a
          >
          from the Extensions view if not already present.
        </p>
      </li>
      <li>
        <p>
          You can then go to the Docker view and expand the
          <strong>Containers</strong> or <strong>Images</strong> node,
          right-click, and select <strong>Remove Container / Image</strong>.
        </p>
        <figure>
          <img
            src="images/containers/docker-remove.png"
            alt="Docker Explorer screenshot"
          />
          <figcaption>Docker Explorer screenshot</figcaption>
        </figure>
      </li>
    </ol>
    <p>
      <strong>Option 3: Use the Docker CLI to pick containers to delete</strong>
    </p>
    <ol type="1">
      <li>
        Open a <strong>local</strong> terminal/command prompt (or use a local
        window in VS Code).
      </li>
      <li>Type <code>docker ps -a</code> to see a list of all containers.</li>
      <li>
        Type <code>docker rm &lt;Container ID&gt;</code> from this list to
        remove a container.
      </li>
      <li>Type <code>docker image prune</code> to remove any unused images.</li>
    </ol>
    <p>
      If <code>docker ps</code> does not provide enough information to identify
      the container you want to delete, the following command will list all
      development containers managed by VS Code and the folder used to generate
      them.
    </p>
    <div class="sourceCode" id="cb31">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb31-1" title="1"><span class="ex">docker</span> ps -a --filter=<span class="st">&quot;label=vsch.quality&quot;</span> --format <span class="st">&quot;table \{{.ID}}\t\{{.Status}}\t\{{.Image}}\tvscode-\{{.Label </span><span class="dt">\&quot;</span><span class="st">vsch.quality</span><span class="dt">\&quot;</span><span class="st">}}\t\{{.Label </span><span class="dt">\&quot;</span><span class="st">vsch.local.folder</span><span class="dt">\&quot;</span><span class="st">}}&quot;</span></a></code></pre>
    </div>
    <p><strong>Option 4: Use Docker Compose</strong></p>
    <ol type="1">
      <li>
        Open a <strong>local</strong> terminal/command prompt (or use a local
        window in VS Code).
      </li>
      <li>
        Go to the directory with your <code>docker-compose.yml</code> file.
      </li>
      <li>
        Type <code>docker-compose down</code> to stop and delete the containers.
        If you have more than one Docker Compose file, you can specify
        additional Docker Compose files with the <code>-f</code> argument.
      </li>
    </ol>
    <p>
      <strong
        >Option 4: Delete all containers and images that are not
        running:</strong
      >
    </p>
    <ol type="1">
      <li>
        Open a <strong>local</strong> terminal/command prompt (or use a local
        window in VS Code).
      </li>
      <li>Type <code>docker system prune --all</code>.</li>
    </ol>
    <h3 id="resolving-dockerfile-build-failures-for-images-using-debian-8">
      Resolving Dockerfile build failures for images using Debian 8
    </h3>
    <p>
      When building containers that use images based on Debian 8/Jessie — such
      as older versions of the <code>node:8</code> image — you may encounter the
      following error:
    </p>
    <pre class="text"><code>...
W: Failed to fetch http://deb.debian.org/debian/dists/jessie-updates/InRelease  Unable to find expected entry &#39;main/binary-amd64/Packages&#39; in Release file (Wrong sources.list entry or malformed file)
E: Some index files failed to download. They have been ignored, or old ones used instead.
...</code></pre>
    <p>
      This is a
      <a
        href="https://github.com/debuerreotype/docker-debian-artifacts/issues/66"
        >well known issue</a
      >
      caused by the Debian 8 being “archived”. More recent versions of images
      typically resolve this problem, often by upgrading to Debian 9/Stretch.
    </p>
    <p>There are two ways to resolve this error:</p>
    <ul>
      <li>
        <p>
          <strong>Option 1</strong>: Remove any containers that depend on the
          image, remove the image, and then try building again. This should
          download an updated image that is not affected by the problem. See
          <a href="#cleaning-out-unused-containers-and-images"
            >cleaning out unused containers and images</a
          >
          for details.
        </p>
      </li>
      <li>
        <p>
          <strong>Option 2</strong>: If you don’t want to delete your containers
          or images, add this line into your Dockerfile before any
          <code>apt</code> or <code>apt-get</code> command. It adds the needed
          source lists for Jessie:
        </p>
        <div class="sourceCode" id="cb33">
          <pre
            class="sourceCode dockerfile"
          ><code class="sourceCode dockerfile"><a class="sourceLine" id="cb33-1" title="1"><span class="co"># Add archived sources to source list if base image uses Debian 8 / Jessie</span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="kw">RUN</span> cat /etc/*-release | grep -q jessie &amp;&amp; printf <span class="st">&quot;deb http://archive.debian.org/debian/ jessie main\ndeb-src http://archive.debian.org/debian/ jessie main\ndeb http://security.debian.org jessie/updates main\ndeb-src http://security.debian.org jessie/updates main&quot;</span> &gt; /etc/apt/sources.list</a></code></pre>
        </div>
      </li>
    </ul>
    <h3 id="resolving-docker-hub-sign-in-errors-when-an-email-is-used">
      Resolving Docker Hub sign in errors when an email is used
    </h3>
    <p>
      The Docker CLI only supports using your Docker ID, so using your email to
      sign in can cause problems. See Docker
      <a
        href="https://github.com/docker/hub-feedback/issues/935#issuecomment-300361781"
        >issue #935</a
      >
      for details.
    </p>
    <p>
      As a workaround, use your Docker ID to sign in to Docker rather than your
      email.
    </p>
    <h3 id="high-cpu-utilization-of-hyperkit-on-macos">
      High CPU utilization of Hyperkit on macOS
    </h3>
    <p>
      There is
      <a href="https://github.com/docker/for-mac/issues/1759"
        >known issue with Docker for Mac</a
      >
      that can drive high CPU spikes. In particular, high CPU usage occurring
      when watching files and building. If you see high CPU usage for
      <code>com.docker.hyperkit</code> in Activity Monitor while very little is
      going on in your dev container, you are likely hitting this issue. Follow
      the
      <a href="https://github.com/docker/for-mac/issues/1759">Docker issue</a>
      for updates and fixes.
    </p>
    <h3 id="using-an-ssh-tunnel-to-connect-to-a-remote-docker-host">
      Using an SSH tunnel to connect to a remote Docker host
    </h3>
    <p>
      The
      <a
        href="/docs/remote/containers-advanced.md#developing-inside-a-container-on-a-remote-docker-host"
        >Developing inside a container on a remote Docker Machine or SSH host</a
      >
      article covers how to setup VS Code when working with a remote Docker
      host. This is often as simple as setting the
      <a
        href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker"
        >Docker extension</a
      >
      <code>docker.host</code> property in <code>settings.json</code> or the
      <code>DOCKER_HOST</code> environment variable to a <code>ssh://</code> or
      <code>tcp://</code> URI.
    </p>
    <p>
      However, you may run into situations where this does not work in your
      environment due to SSH configuration complexity or other limitations. In
      this case, an SSH tunnel can be used as a fallback.
    </p>
    <p><strong>Using an SSH tunnel as a fallback option</strong></p>
    <p>
      You can set up an SSH tunnel and forward the Docker socket from your
      remote host to your local machine.
    </p>
    <p>Follow these steps:</p>
    <ol type="1">
      <li>
        <p>
          Install an
          <a
            href="/docs/remote/troubleshooting.md#installing-a-supported-ssh-client"
            >OpenSSH compatible SSH client</a
          >.
        </p>
      </li>
      <li>
        <p>
          Update the
          <a
            href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker"
            >Docker extension</a
          >
          <code>docker.host</code> property in your user or workspace
          <code>settings.json</code> as follows:
        </p>
        <div class="sourceCode" id="cb34">
          <pre
            class="sourceCode json"
          ><code class="sourceCode json"><a class="sourceLine" id="cb34-1" title="1"><span class="er">&quot;docker.host&quot;:&quot;tcp://localhost:23750&quot;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Run the following command from a local terminal / PowerShell
          (replacing <code>user@hostname</code> with the remote user and
          hostname / IP for your server):
        </p>
        <div class="sourceCode" id="cb35">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb35-1" title="1"><span class="fu">ssh</span> -NL localhost:23750:/var/run/docker.sock user@hostname</a></code></pre>
        </div>
      </li>
    </ol>
    <p>
      VS Code will now be able to
      <a href="/docs/remote/attach-container.md"
        >attach to any running container</a
      >
      on the remote host. You can also
      <a
        href="/docs/remote/containers-advanced.md#converting-an-existing-or-predefined-devcontainerjson"
        >use specialized, local <code>devcontainer.json</code> files to create /
        connect to a remote dev container</a
      >.
    </p>
    <p>
      Once you are done, press <code>kbstyle(Ctrl+C)</code> in the terminal /
      PowerShell to close the tunnel.
    </p>
    <blockquote>
      <p>
        <strong>Note:</strong> If the <code>ssh</code> command fails, you may
        need to <code>AllowStreamLocalForwarding</code> on your SSH host.
      </p>
      <ol type="1">
        <li>
          Open <code>/etc/ssh/sshd_config</code> in an editor (like Vim, nano,
          or Pico) on the <strong>SSH host</strong> (not locally).
        </li>
        <li>Add the setting <code>AllowStreamLocalForwarding yes</code>.</li>
        <li>
          Restart the SSH server (on Ubuntu, run
          <code>sudo systemctl restart sshd</code>).
        </li>
        <li>Retry.</li>
      </ol>
    </blockquote>
    <h3 id="advanced-container-configuration-tips">
      Advanced container configuration tips
    </h3>
    <p>
      See the
      <a href="/docs/remote/containers-advanced.md"
        >Advanced Container Configuration</a
      >
      article for information on the following topics:
    </p>
    <ul>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#adding-environment-variables"
          >Adding environment variables</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#adding-another-volume-mount"
          >Adding another volume mount</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#changing-the-default-source-code-mount"
          >Changing or removing the default source code mount</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#adding-a-nonroot-user-to-your-dev-container"
          >Adding a non-root user to your dev container</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#improving-container-disk-performance"
          >Improving container disk performance</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#avoiding-extension-reinstalls-on-container-rebuild"
          >Avoiding extension reinstalls on container rebuild</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#setting-the-project-name-for-docker-compose"
          >Setting the project name for Docker Compose</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#using-docker-or-kubernetes-from-a-container"
          >Using Docker or Kubernetes from inside a container</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#connecting-to-multiple-containers-at-once"
          >Connecting to multiple containers at once</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#developing-inside-a-container-on-a-remote-docker-host"
          >Developing inside a container on a remote Docker Machine or SSH
          host</a
        >
      </li>
      <li>
        <a
          href="/docs/remote/containers-advanced.md#reducing-dockerfile-build-warnings"
          >Reducing Dockerfile build warnings</a
        >
      </li>
    </ul>
    <h2 id="wsl-tips">WSL tips</h2>
    <h3 id="first-time-start-vs-code-server-prerequisites">
      First time start: VS Code Server prerequisites
    </h3>
    <p>
      Some WSL Linux distributions are lacking libraries that are required by
      the VS Code server to start up. You can add additional libraries into your
      Linux distribution by using its package manager.
    </p>
    <h4 id="debian-and-ubuntu">Debian and Ubuntu</h4>
    <p>
      Open the Debian or Ubuntu WSL shell to add <code>wget</code> and
      <code>ca-certificates</code>:
    </p>
    <div class="sourceCode" id="cb36">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb36-1" title="1"><span class="fu">sudo</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt-get install wget ca-certificates</a></code></pre>
    </div>
    <h4 id="alpine">Alpine</h4>
    <p>
      Open the Alpine WSL shell as root (<code>wsl -d Alpine -u root</code>) to
      add <code>libstdc++</code>:
    </p>
    <div class="sourceCode" id="cb37">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb37-1" title="1"><span class="ex">apk</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apk</span> add libstdc++</a></code></pre>
    </div>
    <p>
      On Windows 10 April 2018 Update (build 1803) and older,
      <code>/bin/bash</code> is required:
    </p>
    <div class="sourceCode" id="cb38">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb38-1" title="1"><span class="ex">apk</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apk</span> add bash</a></code></pre>
    </div>
    <h3 id="selecting-the-distribution-used-by-remote---wsl">
      Selecting the distribution used by Remote - WSL
    </h3>
    <p>
      <strong>Remote-WSL: New Window</strong> will open the WSL distro
      registered as default.
    </p>
    <p>
      To open a non-default distro, run <code>code .</code> from the WSL shell
      of the distro to use or use
      <strong>Remote-WSL: New Window using Distro</strong>.
    </p>
    <p>
      With WSL versions older than Windows 10, May 2019 Update (version 1903),
      the WSL command can only use the <strong>default distro</strong>. For this
      reason, the Remote- WSL might prompt you if you agree to change the
      default distro.
    </p>
    <p>
      You can always use
      <a href="https://docs.microsoft.com/windows/wsl/wsl-config"
        >wslconfig.exe</a
      >
      to change your default.
    </p>
    <p>For example:</p>
    <pre class="bat"><code>wslconfig /setdefault Ubuntu</code></pre>
    <p>You can see which distributions you have installed by running:</p>
    <pre class="bat"><code>wslconfig /l</code></pre>
    <h3 id="configure-the-environment-for-the-server-startup">
      Configure the environment for the server startup
    </h3>
    <p>
      When the Remote WSL extension starts the VS Code server in WSL, it does
      not run any shell configuration scripts. This was done to avoid that
      custom configuration scripts can prevent the startup.
    </p>
    <p>
      If you need to configure the startup environment, you can use the
      environment setup script as described
      <a href="/docs/remote/wsl.md#advanced-environment-setup-script">here</a>.
    </p>
    <h3 id="configure-the-environment-for-the-remote-extension-host">
      Configure the environment for the remote extension host
    </h3>
    <p>
      The environment for the remote extension host and terminal are based on
      the default shell’s configuration scripts. To evaluate the environment
      variables for the remote extension host process, the server creates an
      instance of the default shell as an
      <strong>interactive login shell</strong>. It probes the environment
      variables from it and uses them as the initial environment for the remote
      extension host process. The values of environment variables therefore
      depend on what shell is configured as the default and the content of the
      configuration scripts for that shell.
    </p>
    <p>
      See
      <a href="https://github.com/rbenv/rbenv/wiki/unix-shell-initialization"
        >Unix shell initialization</a
      >
      for an overview of each shell’s configuration scripts. Most WSL
      distributions have <code>/bin/bash</code> configured as the default shell.
      <code>/bin/bash</code> will look for startup files under
      <code>/etc/profile</code> first and for any startup files under
      <code>~/.bash_profile</code>, <code>~/.bash_login</code>,
      <code>~/.profile</code>.
    </p>
    <p>
      To change the default shell of a WSL distro, follow the instructions of
      <a
        href="https://medium.com/@vinhp/set-and-use-zsh-as-default-shell-in-wsl-on-windows-10-the-right-way-4f30ed9592dc"
        >this blog post</a
      >.
    </p>
    <h3 id="fixing-problems-with-the-code-command-not-working">
      Fixing problems with the code command not working
    </h3>
    <p>
      If typing <code>code</code> from a WSL terminal on Window does not work
      because <code>code</code> cannot be found, you may be missing some key
      locations from your PATH in WSL.
    </p>
    <p>
      Check by opening a WSL terminal and typing <code>echo $PATH</code>. You
      should see VS Code install path listed. By default, this would be:
    </p>
    <div class="sourceCode" id="cb41">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb41-1" title="1"><span class="ex">/mnt/c/Users/Your</span> Username/AppData/Local/Programs/Microsoft VS Code/bin</a></code></pre>
    </div>
    <p>
      But, if you used the <strong>System Installer</strong>, the install path
      is:
    </p>
    <div class="sourceCode" id="cb42">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb42-1" title="1"><span class="ex">/mnt/c/Program</span> Files/Microsoft VS Code/bin</a></code></pre>
    </div>
    <p>…or…</p>
    <div class="sourceCode" id="cb43">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb43-1" title="1"><span class="ex">/mnt/c/Program</span> Files (x86)<span class="ex">/Microsoft</span> VS Code/bin</a></code></pre>
    </div>
    <p>
      It’s a feature of WSL that paths are inherited from the PATH variable in
      Windows. To change the Windows PATH variable, use the
      <strong>Edit environment variables for your account</strong> command from
      the start menu in Windows.
    </p>
    <p>
      If you have disabled the path sharing feature, edit your
      <code>.bashrc</code>, add the following, and start a new terminal:
    </p>
    <div class="sourceCode" id="cb44">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb44-1" title="1"><span class="va">WINDOWS_USERNAME=</span><span class="st">&quot;Your Windows Alias&quot;</span></a>
<a class="sourceLine" id="cb44-2" title="2"></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="bu">export</span> <span class="va">PATH=</span><span class="st">&quot;</span><span class="va">$PATH</span><span class="st">:/mnt/c/Windows/System32:/mnt/c/Users/</span><span class="va">${WINDOWS_USERNAME}</span><span class="st">/AppData/Local/Programs/Microsoft VS Code/bin&quot;</span></a>
<a class="sourceLine" id="cb44-4" title="4"><span class="co"># or...</span></a>
<a class="sourceLine" id="cb44-5" title="5"><span class="co"># export PATH=&quot;$PATH:/mnt/c/Program Files/Microsoft VS Code/bin&quot;</span></a>
<a class="sourceLine" id="cb44-6" title="6"><span class="co"># or...</span></a>
<a class="sourceLine" id="cb44-7" title="7"><span class="co"># export PATH=&quot;$PATH:/mnt/c/Program Files (x86)/Microsoft VS Code/bin&quot;</span></a></code></pre>
    </div>
    <blockquote>
      <p>
        <strong>Note:</strong> Be sure to quote or escape space characters in
        the directory names.
      </p>
    </blockquote>
    <h3 id="finding-problems-with-the-code-command">
      Finding problems with the ‘code’ command
    </h3>
    <p>
      If typing <code>code</code> from a Windows command prompt does not launch
      VS Code, you can help us diagnose the problem by running
      <code>VSCODE_WSL_DEBUG_INFO=true code .</code>.
    </p>
    <p>Please file an issue and attach the full output.</p>
    <h3 id="finding-problems-starting-or-connected-to-the-server">
      Finding problems starting or connected to the server
    </h3>
    <p>
      When the WSL window fails to connect to the remote server, you can get
      more information in the WSL log. When filing an issue, it is important to
      always send the full content of the WSL log.
    </p>
    <p>
      Open the WSL log by running the command
      <strong>Remote-WSL: Open Log</strong>. The log will show in the terminal
      view under the WSL tab.
    </p>
    <figure>
      <img src="images/troubleshooting/wsl-log.png" alt="WSL Log" />
      <figcaption>WSL Log</figcaption>
    </figure>
    <p>
      To get even more verbose logging, enable the setting
      <code>remote.WSL.debug</code> in the user settings.
    </p>
    <h3 id="the-server-fails-to-start-with-a-segmentation-fault">
      The server fails to start with a segmentation fault
    </h3>
    <p>
      You can help us investigate this problem by sending us the core dump file.
      To get the core dump file, follow these steps:
    </p>
    <p>In a Windows command prompt:</p>
    <ul>
      <li>
        Run <code>code --locate-extension ms-vscode-remote.remote-wsl</code> to
        determine the Remote-WSL extension folder.
      </li>
      <li><code>cd</code> to the path that is returned.</li>
      <li>
        Open the <code>wslServer.sh</code> script with VS Code,
        <code>code .\scripts\wslServer.sh</code>.
      </li>
      <li>
        On the 3rd last line (before
        <code>export VSCODE_AGENT_FOLDER="$HOME/$DATAFOLDER"</code>), add
        <code>ulimit -C unlimited</code>.
      </li>
      <li>
        Start the Remote-WSL window running the remote server and wait for the
        segmentation fault.
      </li>
    </ul>
    <p>The core file will be in the Remote-WSL extension folder from above.</p>
    <h3
      id="i-see-eaccess-permission-denied-error-trying-to-rename-a-folder-in-the-open-workspace"
    >
      I see EACCESS: permission denied error trying to rename a folder in the
      open workspace
    </h3>
    <p>
      This is a known problem with the WSL file system implementation (<a
        href="https://github.com/microsoft/WSL/issues/3395"
        >Microsoft/WSL#3395</a
      >,
      <a href="https://github.com/microsoft/WSL/issues/1956"
        >Microsoft/WSL#1956</a
      >) caused by the file watcher active by VS Code. The issue will only be
      fixed in WSL 2.
    </p>
    <p>
      To avoid the issue, set <code>remote.WSL.fileWatcher.polling</code> to
      true. However, polling based has a performance impact for large
      workspaces.
    </p>
    <p>
      For large workspace you may want to increase the polling interval,
      <code>remote.WSL.fileWatcher.pollingInterval</code>, and control the
      folders that are watched with <code>files.watcherExclude</code>.
    </p>
    <p>
      <a href="https://docs.microsoft.com/windows/wsl/wsl2-index">WSL 2</a> does
      not have that file watcher problem and is not affected by the new setting.
    </p>
    <h3
      id="resolving-git-line-ending-issues-in-wsl-resulting-in-many-modified-files"
    >
      Resolving Git line ending issues in WSL (resulting in many modified files)
    </h3>
    <p>
      Since Windows and Linux use different default line endings, Git may report
      a large number of modified files that have no differences aside from their
      line endings. To prevent this from happening, you can disable line-ending
      conversion using a <code>.gitattributes</code> file or globally on the
      Windows side.
    </p>
    <p>
      Typically adding or modifying a <code>.gitattributes</code> file in your
      repository is the most reliable way to solve this problem. Committing this
      file to source control will help others and allows you to vary behaviors
      by repository as appropriate. For example, adding the following to
      <code>.gitattributes</code> file to the root of your repository will force
      everything to be LF, except for Windows batch files that require CRLF:
    </p>
    <div class="sourceCode" id="cb45">
      <pre
        class="sourceCode yaml"
      ><code class="sourceCode yaml"><a class="sourceLine" id="cb45-1" title="1">* text=auto eol=lf</a>
<a class="sourceLine" id="cb45-2" title="2"><span class="dt">*.{cmd,[cC][mM][dD]}</span> text eol=crlf</a>
<a class="sourceLine" id="cb45-3" title="3"><span class="dt">*.{bat,[bB][aA][tT]}</span> text eol=crlf</a></code></pre>
    </div>
    <p>
      Note that this works in <strong>Git v2.10+</strong>, so if you are running
      into problems, be sure you’ve got a recent Git client installed. You can
      add other file types in your repository that require CRLF to this same
      file.
    </p>
    <p>
      If you would prefer to still always upload Unix-style line endings (LF),
      you can use the <code>input</code> option.
    </p>
    <div class="sourceCode" id="cb46">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb46-1" title="1"><span class="fu">git</span> config --global core.autocrlf input</a></code></pre>
    </div>
    <p>
      If you’d prefer to disable line-ending conversion entirely, run the
      following instead:
    </p>
    <div class="sourceCode" id="cb47">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb47-1" title="1"><span class="fu">git</span> config --global core.autocrlf false</a></code></pre>
    </div>
    <p>
      Finally, you may need to clone the repository again for these settings to
      take effect.
    </p>
    <h3 id="sharing-git-credentials-between-windows-and-wsl">
      Sharing Git credentials between Windows and WSL
    </h3>
    <p>
      If you use HTTPS to clone your repositories and
      <strong
        >have a
        <a
          href="https://help.github.com/articles/caching-your-github-password-in-git"
          >credential helper configured</a
        >
        in Windows</strong
      >, you can share this with WSL so that passwords you enter are persisted
      on both sides. (Note that this does not apply to using SSH keys.)
    </p>
    <p>Just follow these steps:</p>
    <ol type="1">
      <li>
        <p>
          Configure the credential manager on Windows by running the following
          in a <strong>Windows command prompt</strong> or
          <strong>PowerShell</strong>:
        </p>
        <pre
          class="bat"
        ><code> git config --global credential.helper wincred</code></pre>
      </li>
      <li>
        <p>
          Configure WSL to use the same credential helper, but running the
          following in a <strong>WSL terminal</strong>:
        </p>
        <div class="sourceCode" id="cb49">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb49-1" title="1"> <span class="fu">git</span> config --global credential.helper <span class="st">&quot;/mnt/c/Program\ Files/Git/mingw64/libexec/git-core/git-credential-wincred.exe&quot;</span></a></code></pre>
        </div>
      </li>
    </ol>
    <p>
      Any password you enter when working with Git on the Windows side will now
      be available to WSL and vice versa.
    </p>
    <h3 id="resolving-hangs-when-doing-a-git-push-or-sync-from-wsl">
      Resolving hangs when doing a Git push or sync from WSL
    </h3>
    <p>
      If you clone a Git repository using SSH and your SSH key has a passphrase,
      VS Code’s pull and sync features may hang when running remotely.
    </p>
    <p>
      Either use an SSH key without a passphrase, clone using HTTPS, or run
      <code>git push</code> from the command line to work around the issue.
    </p>
    <h2 id="github-codespaces-tips">GitHub Codespaces tips</h2>
    <p>
      For tips and questions about
      <a href="https://github.com/features/codespaces">GitHub Codespaces</a>,
      see the
      <a href="https://docs.github.com/github/developing-online-with-codespaces"
        >GitHub Codespaces documentation</a
      >. You can also check out the
      <a href="/docs/remote/codespaces.md#known-limitations-and-adaptations"
        >known web limitations and adaptations</a
      >
      that may impact your Codespaces.
    </p>
    <h2 id="extension-tips">Extension tips</h2>
    <p>
      While many extensions will work unmodified, there are a few issues that
      can prevent certain features from working as expected. In some cases, you
      can use another command to work around the issue, while in others, the
      extension may need to be modified. This section provides a quick reference
      for common issues and tips on resolving them. You can also refer to the
      main extension article on
      <a href="/api/advanced-topics/remote-extensions"
        >Supporting Remote Development</a
      >
      for an in-depth guide on modifying extensions to support remote extension
      hosts.
    </p>
    <h3 id="resolving-errors-about-missing-dependencies">
      Resolving errors about missing dependencies
    </h3>
    <p>
      Some extensions rely on libraries not found in the basic install of
      certain WSL Linux distributions. You can add additional libraries into
      your Linux distribution by using its package manager. For Ubuntu and
      Debian based distributions, run
      <code>sudo apt-get install &lt;package&gt;</code> to install the needed
      libraries. Check the documentation for your extension or the runtime that
      is mentioned in the error message for additional installation details.
    </p>
    <h3 id="local-absolute-path-settings-fail-when-applied-remotely">
      Local absolute path settings fail when applied remotely
    </h3>
    <p>
      VS Code’s local user settings are reused when you connect to a remote
      endpoint. While this keeps your user experience consistent, you may need
      to vary absolute path settings between your local machine and each host /
      container / WSL since the target locations are different.
    </p>
    <p>
      <strong>Resolution:</strong> You can set endpoint-specific settings after
      you connect to a remote endpoint by running the
      <strong>Preferences: Open Remote Settings</strong> command from the
      Command Palette (<code>kbstyle(F1)</code>) or by selecting the
      <strong>Remote</strong> tab in the Settings editor. These settings will
      override any local settings you have in place whenever you connect.
    </p>
    <h3 id="need-to-install-local-vsix-on-remote-endpoint">
      Need to install local VSIX on remote endpoint
    </h3>
    <p>
      Sometimes you want to install a local VSIX on a remote machine, either
      during development or when an extension author asks you to try out a fix.
    </p>
    <p>
      <strong>Resolution:</strong> Once you have connected to an SSH host,
      container, or WSL, you can install the VSIX the same way you would
      locally. Run the <strong>Extensions: Install from VSIX…</strong> command
      from the Command Palette (<code>kbstyle(F1)</code>). You may also want to
      add <code>"extensions.autoUpdate": false</code> to
      <code>settings.json</code> to prevent auto-updating to the latest
      Marketplace version. See
      <a href="/api/advanced-topics/remote-extensions"
        >Supporting Remote Development</a
      >
      for more information on developing and testing extensions in a remote
      environment.
    </p>
    <h3 id="browser-does-not-open-locally">Browser does not open locally</h3>
    <p>
      Some extensions use external node modules or custom code to launch a
      browser window. Unfortunately, this may cause the extension to launch the
      browser remotely instead of locally.
    </p>
    <p>
      <strong>Resolution:</strong> The extension can use the
      <code>vscode.env.openExternal</code> API to resolve this problem. See the
      <a
        href="/api/advanced-topics/remote-extensions#opening-something-in-a-local-browser-or-application"
        >extension author’s guide</a
      >
      for details.
    </p>
    <h3 id="clipboard-does-not-work">Clipboard does not work</h3>
    <p>
      Some extensions use node modules like <code>clipboardy</code> to integrate
      with the clipboard. Unfortunately, this may cause the extension to
      incorrectly integrate with the clipboard on the remote side.
    </p>
    <p>
      <strong>Resolution:</strong> The extension can switch to the VS Code
      clipboard API to resolve the problem. See the
      <a href="/api/advanced-topics/remote-extensions#using-the-clipboard"
        >extension author’s guide</a
      >
      for details.
    </p>
    <h3 id="cannot-access-local-web-server-from-browser-or-application">
      Cannot access local web server from browser or application
    </h3>
    <p>
      When working inside a container, SSH host, or through GitHub Codespaces,
      the port the browser is connecting to may be blocked.
    </p>
    <p>
      <strong>Resolution:</strong> Extensions can use the
      <code>vscode.env.openExternal</code> or
      <code>vscode.env.asExternalUri</code> APIs (which automatically forwards
      localhost ports) to resolve this problem. See the
      <a
        href="/api/advanced-topics/remote-extensions#opening-something-in-a-local-browser-or-application"
        >extension author’s guide</a
      >
      for details. As a workaround, use the
      <strong>Forward a Port</strong> command to do so manually.
    </p>
    <h3 id="webview-contents-do-not-appear">Webview contents do not appear</h3>
    <p>
      If the extension’s webview content uses an <code>iframe</code> to connect
      to a local web server, the port the webview is connecting to may be
      blocked. In addition, if the extension hard codes
      <code>vscode-resource://</code> URIs instead of using
      <code>asWebviewUri</code>, content may not appear in the Codespaces
      browser editor.
    </p>
    <p>
      <strong>Resolution:</strong> The extension can use the
      <code>webview.asWebviewUri</code> to resolve issues with
      <code>vscode-resource://</code> URIs.
    </p>
    <p>
      If ports are being blocked, the best approach is to instead use the
      <a href="/api/extension-guides/webview#scripts-and-message-passing"
        >webview message passing</a
      >
      API. As a workaround, <code>vscode.env.asExternalUri</code> can be used
      allow the webview to connect to spawned localhost web servers from VS
      Code. However, this is currently blocked for the Codespaces browser-based
      editor (only) by
      <a href="https://github.com/MicrosoftDocs/vscodespaces/issues/11"
        >MicrosoftDocs/vscodespaces#11</a
      >. See the
      <a
        href="/api/advanced-topics/remote-extensions#workarounds-for-using-localhost-from-a-webview"
        >extension author’s guide</a
      >
      for details on the workaround.
    </p>
    <h3 id="blocked-localhost-ports">Blocked localhost ports</h3>
    <p>
      If you are trying to connect to a localhost port from an external
      application, the port may be blocked.
    </p>
    <p>
      <strong>Resolution:</strong> VS Code 1.40 introduced a new
      <code>vscode.env.asExternalUri</code> API for extensions to
      programmatically forward arbitrary ports. See the
      <a href="/api/advanced-topics/remote-extensions#forwarding-localhost"
        >extension author’s guide</a
      >
      for details. As a workaround, you can use the
      <strong>Forward a Port</strong> command to do so manually.
    </p>
    <h3 id="errors-storing-extension-data">Errors storing extension data</h3>
    <p>
      Extensions may try to persist global data by looking for the
      <code>~/.config/Code</code> folder on Linux. This folder may not exist,
      which can cause the extension to throw errors like
      <code
        >ENOENT: no such file or directory, open
        '/root/.config/Code/User/filename-goes-here</code
      >.
    </p>
    <p>
      <strong>Resolution:</strong> Extensions can use the
      <code>context.globalStoragePath</code> or
      <code>context.storagePath</code> property to resolve this problem. See the
      <a
        href="/api/advanced-topics/remote-extensions#persisting-extension-data-or-state"
        >extension author’s guide</a
      >
      for details.
    </p>
    <h3
      id="cannot-sign-in-have-to-sign-in-each-time-i-connect-to-a-new-endpoint"
    >
      Cannot sign in / have to sign in each time I connect to a new endpoint
    </h3>
    <p>
      Extensions that require sign in may persist secrets using their own code.
      This code can fail due to missing dependencies. Even if it succeeds, the
      secrets will be stored remotely, which means you have to sign in for every
      new endpoint.
    </p>
    <p>
      <strong>Resolution:</strong> Extensions can use the
      <code>keytar</code> node module to solve this problem. See the
      <a href="/api/advanced-topics/remote-extensions#persisting-secrets"
        >extension author’s guide</a
      >
      for details.
    </p>
    <h3 id="an-incompatible-extension-prevents-vs-code-from-connecting">
      An incompatible extension prevents VS Code from connecting
    </h3>
    <p>
      If an incompatible extension has been installed on a remote host,
      container, or in WSL, we have seen instances where the VS Code Server
      hangs or crashes due to the incompatibility. If the extension activates
      right away, this can prevent you from connecting and being able to
      uninstall the extension.
    </p>
    <p>
      <strong>Resolution:</strong> Manually delete the remote extensions folder
      by following these steps:
    </p>
    <ol type="1">
      <li>
        <p>
          For containers, ensure your <code>devcontainer.json</code> no longer
          includes a reference to the faulty extension.
        </p>
      </li>
      <li>
        <p>
          Next, use a separate terminal / command prompt to connect to the
          remote host, container, or WSL.
        </p>
        <ul>
          <li>
            If SSH or WSL, connect to the environment accordingly (run
            <code>ssh</code> to connect to the server or open WSL terminal).
          </li>
          <li>
            If using a container, identify the container ID by calling
            <code>docker ps -a</code> and looking through the list for an image
            with the correct name. If the container is stopped, run
            <code>docker run -it &lt;id&gt; /bin/sh</code>. If it is running,
            run <code>docker exec -it &lt;id&gt; /bin/sh</code>.
          </li>
        </ul>
      </li>
      <li>
        <p>
          Once you are connected, run
          <code>rm -rf ~/.vscode-server/extensions</code> for VS Code stable
          and/or <code>rm -rf ~/.vscode-server-insiders/extensions</code> for VS
          Code Insiders to remove all extensions.
        </p>
      </li>
    </ol>
    <h3 id="extensions-that-ship-or-acquire-pre-built-native-modules-fail">
      Extensions that ship or acquire pre-built native modules fail
    </h3>
    <p>
      Native modules bundled with (or dynamically acquired for) a VS Code
      extension must be recompiled
      <a href="https://electronjs.org/docs/tutorial/using-native-node-modules"
        >using Electron’s <code>electron-rebuild</code></a
      >. However, VS Code Server runs a standard (non-Electron) version of
      Node.js, which can cause binaries to fail when used remotely.
    </p>
    <p>
      <strong>Resolution:</strong> Extensions need to be modified to solve this
      problem. They will need to include (or dynamically acquire) both sets of
      binaries (Electron and standard Node.js) for the “modules” version in
      Node.js that VS Code ships and then check to see if
      <code
        >context.executionContext ===
        vscode.ExtensionExecutionContext.Remote</code
      >
      in their activation function to set up the correct binaries. See the
      <a
        href="/api/advanced-topics/remote-extensions#using-native-node.js-modules"
        >extension author’s guide</a
      >
      for details.
    </p>
    <h3 id="extension-only-fails-on-non-x86_64-hosts-or-alpine-linux">
      Extension only fails on non-x86_64 hosts or Alpine Linux
    </h3>
    <p>
      If an extension works on Debian 9+, Ubuntu 16.04+, or RHEL / CentOS 7+
      remote SSH hosts, containers, or WSL, but fails on supported non-x86_64
      hosts (for example, ARMv7l) or Alpine Linux containers, the extension may
      only include native code or runtimes that do not support these platforms.
      For example, the extensions may only include x86_64 compiled versions of
      native modules or runtimes. For Alpine Linux, the included native code or
      runtimes may not work due to
      <a
        href="https://wiki.musl-libc.org/functional-differences-from-glibc.html"
        >fundamental differences</a
      >
      between how <code>libc</code> is implemented in Alpine Linux
      (<code>musl</code>) and other distributions (<code>glibc</code>).
    </p>
    <p>
      <strong>Resolution:</strong> Extensions will need to opt-in to supporting
      these platforms by compiling / including binaries for these additional
      targets. It is important to note that some third-party npm modules may
      also include native code that can cause this problem. So, in some cases
      you may need to work with the npm module author to add additional
      compilation targets. See the
      <a
        href="/api/advanced-topics/remote-extensions#supporting-nonx8664-hosts-or-alpine-linux-containers"
        >extension author’s guide</a
      >
      for details.
    </p>
    <h3 id="extensions-fail-due-to-missing-modules">
      Extensions fail due to missing modules
    </h3>
    <p>
      Extensions that rely on Electron or VS Code base modules (not exposed by
      the extension API) without providing a fallback can fail when running
      remotely. You may see errors in the Developer Tools console like
      <code>original-fs</code> not being found.
    </p>
    <p>
      <strong>Resolution:</strong> Remove the dependency on an Electron module
      or provide a fallback. See the
      <a
        href="/api/advanced-topics/remote-extensions#avoid-using-electron-modules"
        >extension author’s guide</a
      >
      for details.
    </p>
    <h3 id="cannot-access-transfer-remote-workspace-files-to-local-machines">
      Cannot access / transfer remote workspace files to local machines
    </h3>
    <p>
      Extensions that open workspace files in external applications may
      encounter errors because the external application cannot directly access
      the remote files.
    </p>
    <p>
      <strong>Resolution:</strong> If you create a “UI” extension designed to
      run locally, you can use the <code>vscode.workspace.fs</code> API to
      interact with the remote workspace filesystem. You can then make this a
      dependency of your “Workspace” extension and invoke it using a command as
      needed. See the
      <a href="/api/advanced-topics/remote-extensions"
        >extension author’s guide</a
      >
      for details on different types of extensions and how to use commands to
      communicate between them.
    </p>
    <h3 id="cannot-access-attached-device-from-extension">
      Cannot access attached device from extension
    </h3>
    <p>
      Extensions that access locally attached devices will be unable to connect
      to them when running remotely.
    </p>
    <p>
      <strong>Resolution:</strong> None currently. We are investigating the best
      approach to solve this problem.
    </p>
    <h2 id="questions-and-feedback">Questions and feedback</h2>
    <h3 id="reporting-issues">Reporting issues</h3>
    <p>
      If you run into an issue with one of the remote development extensions,
      it’s important to collect the correct logs so that we’ll be able to help
      <a href="https://aka.ms/vscode-remote/issues/new">diagnose your issue</a>.
    </p>
    <p>Each remote extension has a command to view its logs.</p>
    <p>
      You can get the Remote - SSH extension logs with
      <strong>Remote-SSH: Show Log</strong> from the Command Palette
      (<code>kbstyle(F1)</code>). When reporting Remote - SSH issues, please
      also verify if you’re able to SSH into your machine from an external
      terminal (not using Remote - SSH).
    </p>
    <p>
      Similarly, you can get the Remote - Containers extension logs with
      <strong>Remote-Containers: Show Log</strong>.
    </p>
    <p>
      Like the two above, you can get the Remote - WSL logs with
      <strong>Remote WSL: Show Log</strong>. Also check whether your issue is
      being tracked upstream in the
      <a href="https://github.com/microsoft/WSL/issues">WSL repo</a> (and is not
      due to the Remote - WSL extension).
    </p>
    <p>
      If you’re experiencing issues using other extensions remotely (for
      example, other extensions aren’t loading or installing properly in a
      remote context), it’s helpful to grab the log from the
      <strong>Remote Extension Host</strong> output channel (<strong
        >Output: Focus on Output View</strong
      >), and select <strong>Log (Remote Extension Host)</strong> from the
      dropdown.
    </p>
    <blockquote>
      <p>
        <strong>Note</strong>: If you only see
        <strong>Log (Extension Host)</strong>, this is the local extension host,
        and the remote extension host didn’t launch. This is because the log
        channel is created only after the log file is created, so if the remote
        extension host does not launch, the remote extension host log file was
        not created and is not shown in the Output view. This is still helpful
        information to include in your issue.
      </p>
    </blockquote>
    <h3 id="remote-question-and-feedback-resources">
      Remote question and feedback resources
    </h3>
    <p>We have a variety of other remote resources:</p>
    <ul>
      <li>See <a href="/docs/remote/faq.md">Remote Development FAQ</a>.</li>
      <li>
        Search on
        <a href="https://stackoverflow.com/questions/tagged/vscode-remote"
          >Stack Overflow</a
        >.
      </li>
      <li>
        Add a
        <a href="https://aka.ms/vscode-remote/feature-requests"
          >feature request</a
        >
        or
        <a href="https://aka.ms/vscode-remote/issues/new">report a problem</a>.
      </li>
    </ul>
  </body>
</html>
