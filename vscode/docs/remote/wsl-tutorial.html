<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>wsl-tutorial</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="remote-development-in-wsl">Remote development in WSL</h1>
<p>This tutorial walks you through enabling <a href="https://docs.microsoft.com/windows/wsl/install-win10">Windows Subsystem for Linux</a> (WSL) and running Visual Studio Code in WSL using the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl">Remote - WSL</a> extension.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>You need <a href="https://code.visualstudio.com/">Visual Studio Code</a> installed.</p>
<h3 id="install-the-extension">Install the extension</h3>
<p>The Remote - WSL extension enables you to run Visual Studio Code within the Windows Subsystem for Linux (WSL).</p>
<blockquote>
<p><a class="tutorial-install-extension-btn" href="vscode:extension/ms-vscode-remote.remote-wsl">Install the Remote - WSL extension</a></p>
</blockquote>
<figure>
<img src="images/wsl-tutorial/remote-wsl-extension.png" alt="Remote - WSL extension" /><figcaption>Remote - WSL extension</figcaption>
</figure>
<h3 id="prerequisite-check">Prerequisite check</h3>
<p>With the Remote - WSL extension installed, you will see a new Status bar item at the far left.</p>
<figure>
<img src="images/wsl-tutorial/remote-status-bar.png" alt="Remote Status bar item" /><figcaption>Remote Status bar item</figcaption>
</figure>
<p>The Remote Status bar item can quickly show you in which context VS Code is running (local or remote) and clicking on the item will bring up the Remote - WSL commands.</p>
<figure>
<img src="images/wsl-tutorial/remote-wsl-commands.png" alt="Remote - WSL commands" /><figcaption>Remote - WSL commands</figcaption>
</figure>
<h2 id="enable-wsl">Enable WSL</h2>
<p>Windows Subsystem for Linux (WSL) is an optional feature on Windows 10. You can enable it through the Windows Features dialog or PowerShell.</p>
<h3 id="windows-features-dialog">Windows Features dialog</h3>
<p>In the Windows search bar, type ‘features’ to bring up the <strong>Turn Windows Features on and off</strong> dialog. Scroll down and check <strong>Windows Subsystem for Linux</strong>.</p>
<figure>
<img src="images/wsl-tutorial/windows-features.png" alt="Turn Windows features on and off dialog" /><figcaption>Turn Windows features on and off dialog</figcaption>
</figure>
<p>Select <strong>OK</strong> and you will be prompted to restart Windows.</p>
<h3 id="powershell">PowerShell</h3>
<p>If you prefer, you can open PowerShell as an Administrator and type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb1-1" title="1">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</a></code></pre></div>
<p>After the command runs, you will be prompted to restart Windows.</p>
<figure>
<img src="images/wsl-tutorial/powershell-output.png" alt="PowerShell prompt to restart" /><figcaption>PowerShell prompt to restart</figcaption>
</figure>
<h3 id="check-wsl">Check WSL</h3>
<p>After restarting Windows, you can check that you have WSL enabled by opening a Command Prompt and typing ‘wsl’.</p>
<figure>
<img src="images/wsl-tutorial/wsl-check.png" alt="WSL check" /><figcaption>WSL check</figcaption>
</figure>
<p>WSL is enabled, but you haven’t installed a Linux distribution yet.</p>
<h2 id="install-a-linux-distro">Install a Linux distro</h2>
<p>You install Linux distributions for WSL from the Microsoft Store. You can use the store app, or search for a Linux distro in the Windows search bar. Choose the Linux distribution you want to install (for example Ubuntu) and follow the prompts.</p>
<figure>
<img src="images/wsl-tutorial/select-distro.png" alt="select Ubuntu distro" /><figcaption>select Ubuntu distro</figcaption>
</figure>
<p>Select <strong>Install</strong>.</p>
<figure>
<img src="images/wsl-tutorial/install-ubuntu.png" alt="install Ubuntu" /><figcaption>install Ubuntu</figcaption>
</figure>
<p>And when done, select <strong>Launch</strong> to get started. This will open a Linux terminal and complete the installation. You’ll need to create a user ID and password since you are setting up a full Linux instance. You are now running Linux on Windows.</p>
<figure>
<img src="images/wsl-tutorial/linux-terminal.png" alt="Linux terminal" /><figcaption>Linux terminal</figcaption>
</figure>
<h2 id="python-development">Python development</h2>
<p>If you don’t have Python already installed, run the following commands to install Python3 and pip, the package manager for Python, into your Linux installation.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">sudo</span> apt update</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="fu">sudo</span> apt install python3 python3-pip</a></code></pre></div>
<p>And to verify, run:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">python3</span> --version</a></code></pre></div>
<p>Start with the canonical “Hello World” app. Create a new folder called “helloWorld” and then add a Python file that will print a message when run:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="fu">mkdir</span> helloWorld <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> helloWorld</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="bu">echo</span> <span class="st">&#39;print(&quot;hello from python on ubuntu on windows!&quot;)&#39;</span> <span class="op">&gt;&gt;</span> hello.py</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="ex">python3</span> hello.py</a></code></pre></div>
<p>In a remote Linux environment (this WSL distro is technically another machine without UI, that just happens to be running locally on your computer), your development tools and experiences are pretty limited. You can run <a href="https://stackoverflow.blog/2017/05/23/stack-overflow-helping-one-million-developers-exit-vim/">Vim</a> in the terminal to edit your file, or you can edit the sources on the Windows side through the <code>\\wsl$</code> mount:</p>
<figure>
<img src="images/wsl-tutorial/wsl$-mount.png" alt="\wsl$ mount" /><figcaption>\wsl$ mount</figcaption>
</figure>
<p>The problem with this model is that the Python runtime, pip, or any conda packages for that matter, are not installed on Windows.</p>
<figure>
<img src="images/wsl-tutorial/no-python-on-windows.png" alt="no Python on Windows" /><figcaption>no Python on Windows</figcaption>
</figure>
<p>Remember, Python is installed in the Linux distro, which means if you’re editing Python files on the Windows side, you can’t run or debug them unless you install the same Python development stack on Windows. And that defeats the purpose of having an isolated Linux instance set up with all your Python tools and runtimes!</p>
<h2 id="run-in-wsl">Run in WSL</h2>
<p>In the WSL terminal, make sure you are in the helloWorld folder, and type in <code>'code .'</code> to launch Visual Studio Code. The <code>'.'</code> argument tells VS Code to open the current folder.</p>
<blockquote>
<p><strong>Note:</strong> If this command does not work, you may need to restart your terminal, or you may not have added VS Code to your path when it was installed.</p>
</blockquote>
<figure>
<img src="images/wsl-tutorial/launch-code.png" alt="launch VS Code" /><figcaption>launch VS Code</figcaption>
</figure>
<p>The first thing you’ll see is a message about “Installing VS Code Server” (the c7d83e57… number is the version of the VS Code Server that matches the client-side tools you just installed). VS Code is installing a small server on the Linux side that the desktop VS Code will then talk to. That server will then install and host extensions in WSL, so that they run in the context of the tools and frameworks installed in WSL. In other words, your language extensions will run against the tools and frameworks installed in WSL, not against what is installed on the Windows side, as it should for the proper development experience.</p>
<p>The next thing that happens is VS Code will start and open the <code>helloWorld</code> folder. You may see a quick notification telling you that VS Code is connecting to WSL, and you may be prompted to allow access to the Node.js-based server.</p>
<figure>
<img src="images/wsl-tutorial/installing-vscode-server.png" alt="installing vscode server" /><figcaption>installing vscode server</figcaption>
</figure>
<p>Now, when you hover over <code>hello.py</code>, you get the proper Linux path.</p>
<figure>
<img src="images/wsl-tutorial/show-linux-path.png" alt="show hello.py Linux path" /><figcaption>show hello.py Linux path</figcaption>
</figure>
<h3 id="integrated-terminal">Integrated Terminal</h3>
<p>Run <strong>Terminal</strong> &gt; <strong>New Terminal</strong> (<code>kb(workbench.action.terminal.toggleTerminal)</code>) to open a new terminal instance.</p>
<figure>
<img src="images/wsl-tutorial/new-terminal-in-wsl.png" alt="new terminal in WSL" /><figcaption>new terminal in WSL</figcaption>
</figure>
<p>You’ll start a new instance of the bash shell in WSL, again from VS Code running on Windows.</p>
<p><strong>Tip</strong>: In the lower left corner of the Status Bar, you can see that you’re connected to your <strong>WSL: Ubuntu</strong> instance.</p>
<figure>
<img src="images/wsl-tutorial/wsl-status-bar.png" alt="Remote - WSL Status bar" /><figcaption>Remote - WSL Status bar</figcaption>
</figure>
<h2 id="edit-and-debug">Edit and debug</h2>
<h3 id="installing-the-python-extension-and-additional-tools">Installing the Python extension (and additional tools)</h3>
<p>Click on <code>hello.py</code> to open it for editing. You will be prompted with an extension recommendation, in this case to install the <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Microsoft Python</a> extension, which will give you rich editing and debugging experiences. Go ahead and select <strong>Install</strong> and reload if prompted.</p>
<figure>
<img src="images/wsl-tutorial/python-extension-recommendation.png" alt="Python extension recommendation" /><figcaption>Python extension recommendation</figcaption>
</figure>
<p>To prove that the extension is installed in WSL, open the Extensions view again (<code>kb(workbench.view.extensions)</code>). You will see a section titled <strong>WSL: Ubuntu – Installed</strong>, and you can see any extensions that are installed on the WSL side.</p>
<figure>
<img src="images/wsl-tutorial/wsl-installed-extensions.png" alt="WSL installed extensions" /><figcaption>WSL installed extensions</figcaption>
</figure>
<p>Upon reload, you’ll also get prompted telling you that the pylint linter is not installed. Linters are used to show errors and warnings in source code. Go ahead and select <strong>Install</strong>.</p>
<figure>
<img src="images/wsl-tutorial/pylint-not-installed.png" alt="pylint not installed notification" /><figcaption>pylint not installed notification</figcaption>
</figure>
<p>Now, when you edit your code, you get rich colorization and completions.</p>
<figure>
<img src="images/wsl-tutorial/python-intellisense.png" alt="Python IntelliSense" /><figcaption>Python IntelliSense</figcaption>
</figure>
<p>And when you save your file (<code>kb(workbench.action.files.save)</code>), you’ll get linting errors and warnings on the file.</p>
<figure>
<img src="images/wsl-tutorial/pylint-error.png" alt="pylint error" /><figcaption>pylint error</figcaption>
</figure>
<h3 id="debugging">Debugging</h3>
<p>With your tools set up, let’s take this one step further. Set a breakpoint on line 1 of hello.py by clicking in the gutter to the left of the line number or by putting the cursor on the line and pressing <code>kb(editor.debug.action.toggleBreakpoint)</code>.</p>
<figure>
<img src="images/wsl-tutorial/set-breakpoint.png" alt="set breakpoint" /><figcaption>set breakpoint</figcaption>
</figure>
<p>Now, press <code>kb(workbench.action.debug.start)</code> to run your application. You will be asked how to run the application, and since this is a simple file, just choose <strong>Python File</strong>.</p>
<figure>
<img src="images/wsl-tutorial/select-debug-config.png" alt="select debug configuration" /><figcaption>select debug configuration</figcaption>
</figure>
<p>The app will start, and you’ll hit the breakpoint. You can inspect variables, create watches, and navigate the call stack.</p>
<p>Press <code>kb(workbench.action.debug.stepOver)</code> to step and you’ll see the output of the print statement in the debug console.</p>
<figure>
<img src="images/wsl-tutorial/debug-view.png" alt="VS Code debug view" /><figcaption>VS Code debug view</figcaption>
</figure>
<p>You get the full development experience of Visual Studio Code, using the Linux instance installed in WSL.</p>
<p>If you want to open another folder in WSL, open the <strong>File</strong> menu and choose <strong>Open Folder</strong>. You’ll get a minimal file and folder navigator for the Linux file system, not the Windows file system.</p>
<figure>
<img src="images/wsl-tutorial/open-folder.png" alt="open folder navigator" /><figcaption>open folder navigator</figcaption>
</figure>
<p>If you want to switch back to the Windows, select the <strong>Show Local</strong> option and you’ll get the standard Windows File Open dialog.</p>
<h3 id="ending-your-wsl-connection">Ending your WSL connection</h3>
<p>You can end your session in WSL and go back to running VS Code locally with <strong>File</strong> &gt; <strong>Close Remote Connection</strong>.</p>
<h3 id="congratulations">Congratulations!</h3>
<p>Congratulations, you’ve successfully completed this tutorial!</p>
<p>Next, check out the other Remote Development extensions.</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh">Remote - SSH</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers">Remote - Containers</a></li>
</ul>
<p>Or get them all by installing the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack">Remote Development</a> Extension Pack.</p>
</body>
</html>
