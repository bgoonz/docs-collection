<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>java-webapp</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="java-web-apps-with-visual-studio-code">
      Java Web Apps with Visual Studio Code
    </h1>
    <p>
      This tutorial shows you how to create a Java web application with Visual
      Studio Code. You’ll learn how to run, debug, and edit the Java web app
      locally and eventually on the cloud.
    </p>
    <h2 id="scenario">Scenario</h2>
    <p>A simple Spring Boot Getting Started web app</p>
    <figure>
      <img
        src="images/java-webapp/greeting-from-spring.png"
        alt="Greeting from Java"
      />
      <figcaption>Greeting from Java</figcaption>
    </figure>
    <h2 id="before-you-begin">Before you begin</h2>
    <p>
      Before running and deploying this sample, you must have the Java SE
      Development Kit (JDK) and Apache Maven build tools on your local
      development environment. If you don’t have, please install them.
    </p>
    <p>
      Download and install the
      <a
        href="https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack"
        >Java Extension Pack</a
      >, which has JDK 11 included.
    </p>
    <blockquote>
      <p>
        <strong>Note</strong>: The <code>JAVA_HOME</code> environment variable
        must be set to the install location of the JDK to complete this
        tutorial.
      </p>
    </blockquote>
    <p>Download Apache Maven version 3 or greater:</p>
    <p>
      <a
        class="tutorial-next-btn"
        href="https://maven.apache.org/download.cgi"
        target="_blank"
        style="background-color: #68217a"
        >Download Apache Maven</a
      >
    </p>
    <p>Install Apache Maven for your local development environment:</p>
    <p>
      <a
        class="tutorial-next-btn"
        href="https://maven.apache.org/install"
        target="_blank"
        style="background-color: #68217a"
        >Install Apache Maven</a
      >
    </p>
    <h2 id="download-and-test-the-spring-boot-app">
      Download and test the Spring Boot app
    </h2>
    <p>
      Clone the
      <a href="https://github.com/spring-guides/gs-spring-boot"
        >Spring Boot Getting Started</a
      >
      sample project to your local machine. You can clone a Git repository with
      the <strong>Git: Clone</strong> command in the
      <strong>Command Palette</strong>
      (<code>kb(workbench.action.showCommands)</code>). Paste
      <code>https://github.com/spring-guides/gs-spring-boot.git</code> as the
      URL of the remote repository and then decide the parent directory under
      which to put the local repository. After that, open the
      <code>complete</code> folder within the cloned repository in VS Code by
      navigating to the folder and typing <code>code .</code>.
    </p>
    <blockquote>
      <p>
        <strong>Note</strong>: You can install Visual Studio Code from
        <a href="https://code.visualstudio.com/"
          >https://code.visualstudio.com</a
        >
        and Git from <a href="https://git-scm.com/">https://git-scm.com</a>.
      </p>
    </blockquote>
    <figure>
      <img
        src="images/java-webapp/clone-repository.gif"
        alt="Clone Spring Repository"
      />
      <figcaption>Clone Spring Repository</figcaption>
    </figure>
    <p>
      From within VS Code, open any of the Java files within the
      <code>complete</code> folder (for example
      <code>src\main\java\hello\Application.java</code>). If you don’t have the
      Java language extensions installed for VS Code, you will be prompted to
      install the Microsoft
      <a
        href="https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack"
        >Java Extension Pack</a
      >. Follow the instructions and reload VS Code after the installation.
    </p>
    <figure>
      <img
        src="images/java-webapp/install-extensions.gif"
        alt="Install Java Extensions"
      />
      <figcaption>Install Java Extensions</figcaption>
    </figure>
    <p>
      Once you have the Java Extension Pack installed, it will automatically
      build the project for you (this may take several minutes). You can run the
      application within VS Code by pressing
      <code>kb(workbench.action.debug.start)</code> and selecting the
      <strong>Java</strong> environment. The Java Debug extension will generate
      a debugging configuration file <code>launch.json</code> for you under a
      <code>.vscode</code> folder in your project. You can see build progress in
      the VS Code Status Bar and when everything is finished, the final active
      debug configuration is displayed.
    </p>
    <figure>
      <img
        src="images/java-webapp/debugging-status-bar.png"
        alt="debug configuration in the Status Bar"
      />
      <figcaption>debug configuration in the Status Bar</figcaption>
    </figure>
    <p>
      You can learn more about how VS Code launches your application in
      Debugging
      <a href="/docs/editor/debugging.md#launch-configurations"
        >Launch Configurations</a
      >. Press <code>kb(workbench.action.debug.start)</code> again to launch the
      debugger.
    </p>
    <figure>
      <img src="images/java-webapp/run-spring-boot.gif" alt="Run Spring Boot" />
      <figcaption>Run Spring Boot</figcaption>
    </figure>
    <p>
      Test the web app by browsing to
      <a href="http://localhost:8080">http://localhost:8080</a> using a web
      browser. You should see the following message displayed: “Greetings from
      Spring Boot!”.
    </p>
    <figure>
      <img
        src="images/java-webapp/greeting-from-spring.png"
        alt="Greeting from Spring"
      />
      <figcaption>Greeting from Spring</figcaption>
    </figure>
    <h2 id="make-a-change">Make a change</h2>
    <p>
      Let’s now edit <code>HelloController.java</code> to change “Greetings from
      Spring Boot!” to something else like “Hello World”. VS Code provides a
      great editing experience for Java, check out
      <a href="/docs/languages/java.md#editing-and-navigating-code"
        >Editing and Navigating Code</a
      >
      to learn about VS Code’s editing and code navigation features.
    </p>
    <p>
      Click the <strong>Restart</strong> button on the top of the editor to
      relaunch the app and see result by reloading the browser.
    </p>
    <figure>
      <img
        src="images/java-webapp/restart-application.png"
        alt="Restart Application"
      />
      <figcaption>Restart Application</figcaption>
    </figure>
    <h2 id="debug-the-application">Debug the application</h2>
    <p>
      Set a breakpoint (<code>kb(editor.debug.action.toggleBreakpoint)</code>)
      in the application source code, and reload your browser to hit the
      breakpoint.
    </p>
    <figure>
      <img src="images/java-webapp/debugging.png" alt="Debug Application" />
      <figcaption>Debug Application</figcaption>
    </figure>
    <p>
      If you would like to learn more about debugging Java with VS Code, you can
      read <a href="/docs/java/java-debugging.md">Java Debugging</a>.
    </p>
    <p>
      Congratulations, you have your first Spring Boot web app running locally!
      Read on to learn how to host it in the cloud.
    </p>
    <h2 id="deploy-web-apps-to-the-cloud">Deploy Web Apps to the cloud</h2>
    <p>
      We just built a Java web application and ran it locally. Now you will
      learn how to deploy from Visual Studio Code and run it on
      <a href="https://azure.microsoft.com">Azure</a> in the cloud.
    </p>
    <p>
      If you don’t have an Azure subscription, you can sign up for a
      <a href="https://azure.microsoft.com/pricing/free-trial/"
        >free Azure account</a
      >.
      <a
        class="tutorial-next-btn"
        href="https://azure.microsoft.com/pricing/free-trial/"
        target="_blank"
        style="background-color: #68217a"
        >Create your free Azure account</a
      >
    </p>
    <h3 id="install-the-azure-app-service-extension">
      Install the Azure App Service extension
    </h3>
    <p>
      The
      <a
        href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azureappservice"
        >Azure App Service</a
      >
      extension is used to create, manage, and deploy to Azure App Service with
      key features including:
    </p>
    <ul>
      <li>Create new Azure Web App/Deployment Slot</li>
      <li>Deploy to Azure Web App/Deployment Slot</li>
      <li>Start, stop, and restart the Azure Web App/Deployment Slot</li>
      <li>View a Web App’s log files</li>
      <li>Swap Deployment Slots</li>
    </ul>
    <p>
      To install the Azure App Service extension, open the Extensions view
      (<code>kb(workbench.view.extensions)</code>) and search for
      <code>azure app service</code> to filter the results. Select the Microsoft
      <a
        href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azureappservice"
        >Azure App Service</a
      >
      extension. For a more command-line Maven-centric experience, you can also
      check out the
      <a
        href="https://docs.microsoft.com/azure/app-service/containers/quickstart-java"
        >Maven plugin for Azure App Service Linux tutorial</a
      >.
    </p>
    <h3 id="create-a-new-web-app-on-azure">Create a new Web App on Azure</h3>
    <p>
      Once the extension is installed, you can take the following steps to
      create a new Web App on Azure.
    </p>
    <ol type="1">
      <li>
        Click <strong>Create New Project</strong> button on the
        <strong>APP SERVICE</strong> Explorer view.
      </li>
      <li>Select a subscription.</li>
      <li>Enter a unique name for the new Web App.</li>
      <li>Select a location for the new Web App.</li>
      <li>Select the OS as <code>Linux</code>.</li>
      <li>
        Select the runtime of the Web App, for example
        <code>Tomcat 8.5 (JRE8)</code>.
      </li>
    </ol>
    <figure>
      <img src="images/java-webapp/create-webapp.png" alt="Create a Web App" />
      <figcaption>Create a Web App</figcaption>
    </figure>
    <h3 id="build-and-deploy-to-a-web-app">Build and deploy to a Web App</h3>
    <p>
      The deploy process leverages the
      <a
        href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.azure-account"
        >Azure Account</a
      >
      extension (installed along with the Azure App Service extension as a
      dependency) and you need to sign in with your Azure subscription. If you
      do not have an Azure subscription,
      <a href="https://azure.microsoft.com//free/?b=16.48">sign up today</a> for
      a free 30 day account and get $200 in Azure Credits to try out any
      combination of Azure services.
    </p>
    <p>
      To sign in to Azure, run <strong>Azure: Sign In</strong> from the
      <strong>Command Palette</strong>
      (<code>kb(workbench.action.showCommands)</code>). You can then sign in to
      your account using the <strong>Device Login</strong> flow. Select
      <strong>Copy &amp; Open</strong> to open your default browser.
    </p>
    <figure>
      <img src="images/java-webapp/devicelogin.png" alt="Azure sign in code" />
      <figcaption>Azure sign in code</figcaption>
    </figure>
    <p>Paste in the access code and continue the sign in process.</p>
    <figure>
      <img src="images/java-webapp/devicelogin2.png" alt="Azure Device Login" />
      <figcaption>Azure Device Login</figcaption>
    </figure>
    <p>
      Once you have signed in, you can open the command prompt or terminal
      window and build the project using Maven commands. This will generate a
      new <code>war</code> or <code>jar</code> artifact in the
      <code>target</code> directory.
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">mvn</span> clean package</a></code></pre>
    </div>
    <p>
      After building the project, open the <code>target</code> directory in VS
      Code Explorer. Right-click on the artifact and choose
      <strong>Deploy to Web App</strong>, and follow the prompts to choose the
      Web App for your deployment.
    </p>
    <figure>
      <img src="images/java-webapp/deploy-webapp.png" alt="Deploy to Web App" />
      <figcaption>Deploy to Web App</figcaption>
    </figure>
    <p>
      Open the <strong>Output</strong> window in VS Code to view the deployment
      logs. Once the deployment is completed, it will print out the URL for your
      Web App. Click the link to open it in a browser, you can see the web app
      running on Azure!
    </p>
    <figure>
      <img
        src="images/java-webapp/greeting.png"
        alt="Greeting from Spring Boot"
      />
      <figcaption>Greeting from Spring Boot</figcaption>
    </figure>
    <blockquote>
      <p>
        <strong>Note:</strong> For more advanced features of App Service, you
        can check out the
        <a
          href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azureappservice"
          >Azure App Service</a
        >
        extension.
      </p>
    </blockquote>
    <h2 id="connect-with-data-services">Connect with data services</h2>
    <p>
      <a href="https://docs.microsoft.com/azure/cosmos-db/introduction"
        >Azure Cosmos DB</a
      >
      is a globally distributed database service that allows developers to work
      with data using a variety of standard APIs, such as SQL, MongoDB,
      Cassandra, Graph, and Table.
    </p>
    <p>
      The
      <a
        href="https://docs.microsoft.com/java/azure/spring-framework/configure-spring-boot-starter-java-app-with-cosmos-db"
        >Spring Boot Starter</a
      >
      makes it easy to store data in and retrieve data from your Azure Cosmos DB
      with SQL API.
    </p>
    <h3 id="create-an-azure-cosmos-db-entity-on-azure">
      Create an Azure Cosmos DB entity on Azure
    </h3>
    <ol type="1">
      <li>
        Go to <a href="https://portal.azure.com/">Azure portal</a> and click the
        ‘+’ to <strong>Create a resource</strong>.
      </li>
      <li>
        Click <strong>Databases</strong>, and then click
        <strong>Azure Cosmos DB</strong> to create your database.
      </li>
      <li>
        Select <strong>SQL (Document DB) API</strong> and type in other
        information for your database.
      </li>
      <li>
        Navigate to the database you have created, click <strong>Keys</strong>,
        and copy your <strong>URI</strong> and <strong>PRIMARY KEY</strong> for
        your database.
      </li>
    </ol>
    <h3 id="config-your-project">Config your project</h3>
    <ol type="1">
      <li>
        <p>
          You can start from the
          <a
            href="https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-cosmos"
            >Spring Data Azure Cosmos DB Sample Project</a
          >.
        </p>
      </li>
      <li>
        <p>
          Navigate to <code>src/main/resources</code> and open
          <code>application.properties</code>. Replace below properties in
          <code>application.properties</code> with information of your database.
        </p>
        <div class="sourceCode" id="cb2">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">azure.documentdb.uri</span>=your-documentdb-uri</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="ex">azure.documentdb.key</span>=your-documentdb-key</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="ex">azure.documentdb.database</span>=your-documentdb-databasename</a></code></pre>
        </div>
      </li>
    </ol>
    <h3 id="run-and-debug-the-application">Run and debug the application</h3>
    <p>
      You can press <code>kb(workbench.action.debug.start)</code> to run your
      application. To check the result, open
      <a href="https://portal.azure.com/">Azure portal</a> and access your
      Cosmos DB. Click <strong>Data Explorer</strong>, and next choose
      <strong>Documents</strong>. You will see data being shown if it is
      successfully written into Cosmos DB. You can also browse your data entries
      in Cosmos DB with
      <a
        href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-cosmosdb"
        >Azure Databases</a
      >
      extension.
    </p>
    <p>
      After setting a breakpoint
      (<code>kb(editor.debug.action.toggleBreakpoint)</code>) in your source
      code, refresh your browser to hit the breakpoint. Details about debugging
      can be found in <a href="/docs/java/java-debugging.md">Java Debugging</a>
    </p>
    <p>
      Alternatively, you can also use Maven to package and run your project as
      steps below:
    </p>
    <ol type="1">
      <li>
        <p>
          Navigate to the directory <code>azure-spring-boot</code> and run the
          command.
        </p>
        <div class="sourceCode" id="cb3">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">mvn</span> install</a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Navigate to the directory
          <code>azure-documentdb-spring-boot-sample</code> and run the command.
        </p>
        <div class="sourceCode" id="cb4">
          <pre
            class="sourceCode bash"
          ><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="ex">mvn</span> package</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="ex">java</span> -jar target/azure-documentdb-spring-boot-sample-0.0.1-SNAPSHOT.jar</a></code></pre>
        </div>
      </li>
    </ol>
    <h2 id="next-steps">Next steps</h2>
    <ul>
      <li>
        To containerize and deploy a web application, check out the
        <a href="/docs/azure/docker.md">Docker Container Tutorial</a>.
      </li>
      <li>
        To learn more about Java Debugging features, see the
        <a href="/docs/java/java-debugging.md">Java Debugging Tutorial</a>.
      </li>
    </ul>
  </body>
</html>
