### Backend

Since this is a frontend track, you donâ€™t want to spend too much time setting up the backend. This is why you use [Graphcool](https://www.graph.cool/), a service that provides a production-ready GraphQL API out-of-the-box.

### The Data Model

Youâ€™ll use the [Graphcool CLI](https://www.graph.cool/docs/reference/cli/overview-kie1quohli/) to generate the server based on the data model that you need for the app. Speaking of the data model, here is what the final version of it looks like written in the [GraphQL Schema Definition Language](https://www.graph.cool/docs/faq/graphql-sdl-schema-definition-language-kr84dktnp0/) (SDL):

    type User {
      name: String!
      links: [Link!]! @relation(name: "UsersLinks")
      votes: [Vote!]! @relation(name: "UsersVotes")
    }

    type Link {
      url: String!
      postedBy: User! @relation(name: "UsersLinks")
      votes: [Vote!]! @relation(name: "VotesOnLink")
    }

    type Vote {
      user: User! @relation(name: "UsersVotes")
      link: Link! @relation(name: "VotesOnLink")
    }

### Creating the GraphQL Server

For starting out, youâ€™re not going to use the full data model that you saw above. Thatâ€™s because you want to evolve the schema when it becomes necessary for the features that you implement.

For now, youâ€™ll just use the `Link` type to create the backend. The first thing you need to do to get your GraphQL server is install the Graphcool CLI with npm.

Open up a terminal window and type the following:

    npm install -g graphcool

> **NOTE**: This tutorial uses the [legacy](https://www.graph.cool/docs/reference/service-definition/legacy-console-projects-aemieb1aev) version of [Graphcool](https://www.graph.cool/) and will be updated soon to use the new [Graphcool Framework](https://blog.graph.cool/introducing-the-graphcool-framework-d9edab2a7816). The CLI commands mentioned in tutorial are outdated, you can read more about the new CLI [here](https://www.graph.cool/docs/reference/cli/overview-kie1quohli/). If you still want to go through this tutorial, you can install the old version of the CLI using `npm install -g graphcool@0.4`.

Now you can go and create the server.

Type the following command into the terminal:

    graphcool init --schema https://graphqlbin.com/hn-starter.graphql --name Hackernews

This will execute the `graphcool init` command with two arguments:

- `--schema`: This option accepts a `.graphql`-schema thatâ€™s either stored _locally_ or at a _remote URL_. In your case, youâ€™re using the starter schema stored at https://graphqlbin.com/hn-starter.graphql, you take a look at it in a bit.
- `--name`: This is the name of the Graphcool project youâ€™re creating, here youâ€™re simply calling it `Hackernews`.

Note that this command will open up a browser window first and ask you to authenticate on the Graphcool platform.

The schema thatâ€™s stored at https://graphqlbin.com/hn-starter.graphql only defines the `Link` type for now:

    type Link @model {
      description: String!
      url: String!
    }

Once the project is created, youâ€™ll find the [Graphcool Project File](https://www.graph.cool/docs/reference/cli/project-files-ow2yei7mew/)(`project.graphcool`) in the directory where you executed the command. It should look similar to this:

    # project: cj4k7j28p7ujs014860czx89p
    # version: 2

    type Link @model {
      url: String!
      description: String!
      createdAt: DateTime!
      id: ID! @isUnique
      updatedAt: DateTime!
    }

    type File @model {
      contentType: String!
      createdAt: DateTime!
      id: ID! @isUnique
      name: String!
      secret: String! @isUnique
      size: Int!
      updatedAt: DateTime!
      url: String! @isUnique
    }

    type User @model {
      createdAt: DateTime!
      id: ID! @isUnique
      updatedAt: DateTime!
    }

The top of the file contains some metadata about the project, namely the _project ID_ and the _version number of the schema_.

The [`User`](https://www.graph.cool/docs/reference/schema/system-artifacts-uhieg2shio/#user-type) and [`File`](https://www.graph.cool/docs/reference/schema/system-artifacts-uhieg2shio/#file-type) types are generated by Graphcool and have some special characteristics. `User` can be used for _authentication_ and `File` for _file management_.

Also notice that each type has three fields called `id`, `createdAt` and `updatedAt`. These are managed by the system and read-only for you.

### Populate The Database & GraphQL Playgrounds

Before you move on to setup the frontend, go ahead and create some initial data in the project so youâ€™ve got something to see once you start rendering data in the app!

Youâ€™ll do this by using a GraphQL [Playground](https://www.graph.cool/docs/reference/console/playground-oe1ier4iej/) which is an interactive environment that allows you to send queries and mutations. Itâ€™s a great way to explore the capabilities of an API.

Open up a terminal and navigate to the directory where `project.graphcool`is located. Then execute the following command:

    graphcool playground

This command will read the project ID from the project file and open up a GraphQL Playground in a browser.

The left pane of the Playground is the _editor_ that you can use to write your queries, mutations, and even subscriptions. Once you click the play button in the middle, the response to the request will be displayed in the _results_ pane on the right.

Copy the following two mutations into the _editor_ pane:

    mutation CreateGraphcoolLink {
      createLink(
        description: "The coolest GraphQL backend ðŸ˜Ž",
        url: "https://graph.cool") {
        id
      }
    }

    mutation CreateApolloLink {
      createLink(
        description: "The best GraphQL client",
        url: "http://dev.apollodata.com/") {
        id
      }
    }

Since youâ€™re adding two mutations to the editor at once, the mutations need to have _operation names_. In your case, these are `CreateGraphcoolLink` and `CreateApolloLink`.

Click the _Play_-button in the middle of the two panes and select each mutation from the dropdown exactly once.

This creates two new `Link` records in the database. You can verify that the mutations actually worked by either viewing the currently stored data in the [data browser](https://www.graph.cool/docs/reference/console/data-browser-och3ookaeb/) (simply click _DATA_ in the left side-menu) or by sending the following query in the already open Playground (you will need to comment out the two mutations to send this query in the Playground):

    {
      allLinks {
        id
        description
        url
      }
    }

If everything went well, the query will return the following data:

    {
      "data": {
        "allLinks": [
          {
            "id": "cj4jo6xxat8o901420m0yy60i",
            "description": "The coolest GraphQL backend ðŸ˜Ž",
            "url": "https://graph.cool"
          },
          {
            "id": "cj4jo6z4it8on0142p7q015hc",
            "description": "The best GraphQL client",
            "url": "http://dev.apollodata.com/"
          }
        ]
      }
    }

### Frontend

### Creating the App

Next, you are going to create the Ember app! As mentioned in the beginning, youâ€™ll use the `ember-cli` for that.

If you havenâ€™t already, you need to install `ember-cli` using npm:

    npm install -g ember-cli

Next, you can use it to create your Ember application:

    ember new hackernews-ember-apollo

This will create a new directory called `hackernews-ember-apollo` that has all the basic configuration setup.

Make sure everything works by navigating into the directory and starting the app:

    cd hackernews-ember-apollo
    yarn start

This will open a browser and navigate to `http://localhost:4200` where the app is running. If everything went well, youâ€™ll see the following:

![Open the browser to localhost:4200](http://i.imgur.com/ZZlb4ms.png)

Next, go move `project.graphcool` into the `hackernews-ember-apollo` directory to manage everything in one place.

    mv ../project.graphcool .

Your project structure should now look as follows:

    .
    â”œâ”€â”€ .editorconfig
    â”œâ”€â”€ .ember-cli
    â”œâ”€â”€ .eslintrc.js
    â”œâ”€â”€ .git
    â”œâ”€â”€ .gitignore
    â”œâ”€â”€ .travis.yml
    â”œâ”€â”€ .watchmanconfig
    â”œâ”€â”€ README.md
    â”œâ”€â”€ app
    â”œâ”€â”€ config
    â”œâ”€â”€ dist
    â”œâ”€â”€ ember-cli-build.js
    â”œâ”€â”€ node_modules
    â”œâ”€â”€ package.json
    â”œâ”€â”€ project.graphcool
    â”œâ”€â”€ public
    â”œâ”€â”€ testem.js
    â”œâ”€â”€ tests
    â”œâ”€â”€ tmp
    â”œâ”€â”€ vendor

### Prepare Styling

This tutorial is about the concepts of GraphQL and how you can use it from within an Ember application, so you want to spend the least time on styling issues and in-depth Ember concepts. To ease up usage of CSS in this project, youâ€™ll use the [Tachyons](http://tachyons.io/) library which provides a number of CSS classes.

In your terminal add the `ember-cli-tachyons-shim` add-on:

    ember install ember-cli-tachyons-shim

Since you still want to have a bit more custom styling here and there, you also prepared some styles for you that you need to include in the project.

Open `app/styles/app.css` and add the following:

    body {
      font-family: Verdana, Geneva, sans-serif;
      margin: 0;
      padding: 0;
    }

    input {
      max-width: 500px;
    }

    .gray {
      color: #828282;
    }

    .orange {
      background-color: #ff6600;
    }

    .background-gray {
      background-color: rgb(246, 246, 239);
    }

    .f11 {
      font-size: 11px;
    }

    .w85 {
      width: 85%;
    }

    .button {
      background-color: buttonface;
      border-color: buttonface;
      border-style: outset;
      border-width: 2px;
      color: black;
      cursor: pointer;
      font-family: monospace;
      font-size: 10pt;
      max-width: 250px;
      padding: 2px 6px 3px;
      text-align: center;
    }

### Installing Apollo

Next, you need to pull in the functionality of Apollo which is exposed in the `ember-apollo-client` add-on:

    ember install ember-apollo-client

Thatâ€™s it, youâ€™re ready to write some code! ðŸš€

### Configuring `Apollo`

Apollo abstracts away all lower-lever networking logic and provides a nice interface to the GraphQL API. In contrast to working with REST APIs, you donâ€™t have to deal with constructing your own HTTP requests any more - instead you can simply write queries and mutations and send them using the `ember-apollo-client`.

The first thing you have to do when using Apollo is configure your `ApolloClient` instance. It needs to know the endpoint of your GraphQL API so it can deal with the network connections.

Open `config/environment.js` and add the following inside the `ENV` object:

    apollo: {
      apiURL: '__SIMPLE_API_ENDPOINT__'
    },

Next you need to replace the placeholder for the GraphQL endpoint with your actual endpoint. But where do you get your endpoint from?

There are two ways for you to get your endpoint. You can either open the [Graphcool Console](https://console.graph.cool/) and click the _Endoints_-button in the bottom-left corner. The second option is to use the CLI.

In the terminal, navigate to your project root directory, where `project.graphcool`, is located and execute the following command:

    graphcool endpoints

Copy the endpoint for the `Simple API` and paste it into `config/environment.js` to replace the current placeholder `__SIMPLE_API_ENDPOINT__`.

### Removing the welcome message

To remove the welcome message you need to do two small things.

Inside of `app/templates/application.hbs` remove the `{{welcome-page}}`component.

Also, in your terminal remove the `ember-welcome-page` add-on:

    npm uninstall ember-welcome-page --save-dev

Then remove the extraneous files by running:

    npm prune

Thatâ€™s it! Now you are all set to start building your app! ðŸ˜Ž
