<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2015-04-13" />
  <title>Map Preprocessed Code to Source Code</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Map Preprocessed Code to Source Code</h1>
<p class="date">2015-04-13</p>
</header>
<p>Keep your client-side code readable and debuggable even after you’ve combined, minified or compiled it. Use source maps to map your source code to your compiled code.</p>
<h2 id="summary-summary">Summary {: #summary }</h2>
<ul>
<li>Use Source Maps to map minified code to source code. You can then read and debug compiled code in its original source.</li>
<li>Only use preprocessors capable of producing Source Maps.</li>
<li>Verify that your web server can serve Source Maps.</li>
</ul>
<h2 id="get-started-with-preprocessors-get_started_with_preprocessors">Get started with preprocessors {: #get_started_with_preprocessors }</h2>
<p>This article explains how to interact with JavaScript Source Maps in the DevTools Sources Panel.</p>
<h2 id="use-a-supported-preprocessor-use_a_supported_preprocessor">Use a supported preprocessor {: #use_a_supported_preprocessor }</h2>
<p>You need to use a minifier that’s capable of creating source maps. For an extended view, see the <a href="https://github.com/ryanseddon/source-map/wiki/Source-maps:-languages,-tools-and-other-info">Source maps: languages, tools and other info</a> wiki page.</p>
<p>The following types of preprocessors are commonly used in combination with Source Maps:</p>
<ul>
<li>Transpilers (<a href="https://babeljs.io/">Babel</a>, <a href="https://github.com/google/traceur-compiler/wiki/Getting-Started">Traceur</a>)</li>
<li>Compilers (<a href="https://github.com/google/closure-compiler">Closure Compiler</a>, <a href="http://www.typescriptlang.org/">TypeScript</a>, <a href="http://coffeescript.org">CoffeeScript</a>, <a href="https://www.dartlang.org">Dart</a>)</li>
<li>Minifiers (<a href="https://github.com/mishoo/UglifyJS">UglifyJS</a>)</li>
</ul>
<h2 id="source-maps-in-devtools-sources-panel-source_maps_in_devtools_sources_panel">Source Maps in DevTools Sources panel {: #source_maps_in_devtools_sources_panel }</h2>
<p>Source Maps from preprocessors cause DevTools to load your original files in addition to your minified ones. You then use the originals to set breakpoints and step through code. Meanwhile, Chrome is actually running your minified code. This gives you the illusion of running a development site in production.</p>
<p>When running Source Maps in DevTools, you’ll notice that the JavaScript isn’t compiled and you can see all the individual JavaScript files it references. This is using source mapping, but behind the scenes actually runs the compiled code. Any errors, logs and breakpoints will map to the dev code for awesome debugging! So in effect it gives you the illusion that you’re running a dev site in production.</p>
<h3 id="enable-source-maps-in-settings-enable_source_maps_in_settings">Enable Source Maps in settings {: #enable_source_maps_in_settings }</h3>
<p>Source Maps are enabled by default (as of Chrome 39), but if you’d like to double-check or enable them, first open DevTools and click the settings cog {% Img src=“image/admin/6OvQcMgStUCLS2kGRYn7.png”, alt=“gear”, width=“18”, height=“18” %}. Under <strong>Sources</strong>, check <strong>Enable JavaScript Source Maps</strong>. You might also check <strong>Enable CSS Source Maps</strong>.</p>
<p>{% Img src=“image/admin/YGj3osOPCRzs4zWSEjNe.jpg”, alt=“Enable Source Maps”, width=“800”, height=“402” %}</p>
<h3 id="debugging-with-source-maps-debugging_with_source_maps">Debugging with Source Maps {: #debugging_with_source_maps }</h3>
<p>When <a href="/docs/devtools/javascript/#code-stepping">debugging your code</a> and Source Maps enabled, Source Maps will show in two places:</p>
<ol type="1">
<li>In the console (the link to source should be the original file, not the generated one)</li>
<li>When stepping through code (the links in the call stack should open the original source file)</li>
</ol>
<h2 id="sourceurl-and-displayname-sourceurl_and_displayname"><span class="citation" data-cites="sourceURL">@sourceURL</span> and displayName {: #sourceurl_and_displayname }</h2>
<p>While not part of the Source Map spec, the <code>@sourceURL</code> allows you to make development much easier when working with evals. This helper looks very similar to the <code>//# sourceMappingURL</code> property and is actually mentioned in the Source Map V3 specifications.</p>
<p>By including the following special comment in your code, which will be evaled, you can name evals and inline scripts and styles so they appear as more logical names in your DevTools.</p>
<p><code>//# sourceURL=source.coffee</code></p>
<p>Navigate to this <strong><a href="http://www.thecssninja.com/demo/source_mapping/compile.html">demo</a></strong>, then:</p>
<ul>
<li>Open the DevTools and go to the <strong>Sources</strong> panel.</li>
<li>Enter in a filename into the <em>Name your code:</em> input field.</li>
<li>Click on the <strong>compile</strong> button.</li>
<li>An alert will appear with the evaluated sum from the CoffeeScript source.</li>
</ul>
<p>If you expand the <em>Sources</em> sub-panel you will now see a new file with the custom filename you entered earlier. If you double-click to view this file it will contain the compiled JavaScript for our original source. On the last line, however, will be a <code>// @sourceURL</code> comment indicating what the original source file was. This can greatly help with debugging when working with language abstractions.</p>
<p>{% Img src=“image/admin/KJAs60U1FMmwVUTjElkV.jpg”, alt=“Working with sourceURL”, width=“800”, height=“403” %}</p>
</body>
</html>
