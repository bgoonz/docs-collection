<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2014-02-28" />
  <title>Opening links in Chrome for iOS</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Opening links in Chrome for iOS</h1>
<p class="date">2014-02-28</p>
</header>
<p>The easiest way to have your iOS app open links in Chrome is to use the <a href="https://github.com/GoogleChrome/OpenInChrome">OpenInChromeController class</a>. This API is described here along with the URI schemes it supports.</p>
<h2 id="using-openinchromecontroller-to-open-links">Using OpenInChromeController to open links</h2>
<p>The <strong>OpenInChromeController</strong> class provides methods that encapsulate the URI schemes and the scheme replacement process also described in this document. Use this class to check if Chrome is installed or to specify the URL to open.</p>
<h3 id="methods">Methods</h3>
<ul>
<li><strong>isChromeInstalled</strong>: returns YES if Chrome is installed</li>
<li><strong>openInChrome</strong>: opens a given URL in Chrome</li>
</ul>
<p>For example, use the OpenInChromeController class as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">if</span> ([openInController_ isChromeInstalled]) {</a>
<a class="sourceLine" id="cb1-2" title="2">    [openInController_ openInChrome:urlToOpen];</a>
<a class="sourceLine" id="cb1-3" title="3">}</a></code></pre></div>
<h2 id="downloading-the-class-file">Downloading the class file</h2>
<p>The OpenInChromeController class file is available <a href="https://github.com/GoogleChrome/OpenInChrome">here</a>. Copy it into your Xcode installation.</p>
<p>The rest of this document describes the underpinnings of this API.</p>
<h2 id="uri-schemes">URI schemes</h2>
<p>Chrome for iOS handles the following URI Schemes:</p>
<ul>
<li><strong>googlechrome</strong> for http</li>
<li><strong>googlechromes</strong> for https</li>
</ul>
<p>To check if Chrome is installed, an app can simply check if either of these URI schemes is available:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb2-1" title="1">[[UIApplication sharedApplication] canOpenURL:</a>
<a class="sourceLine" id="cb2-2" title="2">    [NSURL URLWithString:<span class="st">@&quot;googlechrome://&quot;</span>]];</a></code></pre></div>
<p>This step is useful in case an app would like to change the UI depending on if Chrome is installed or not. For instance the app could add an option to open URLs in Chrome in a share menu or action sheet.</p>
<p>To actually open a URL in Chrome, the URI scheme provided in the URL must be changed from <strong>http</strong> or <strong>https</strong> to the Google Chrome equivalent of <strong>googlechrome</strong> or <strong>googlechromes</strong> respectively. The following sample code opens a URL in Chrome:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb3-1" title="1">NSURL *inputURL = &lt;the URL to open&gt;;</a>
<a class="sourceLine" id="cb3-2" title="2">NSString *scheme = inputURL.scheme;</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">// Replace the URL Scheme with the Chrome equivalent.</span></a>
<a class="sourceLine" id="cb3-5" title="5">NSString *chromeScheme = nil;</a>
<a class="sourceLine" id="cb3-6" title="6"><span class="kw">if</span> ([scheme isEqualToString:<span class="st">@&quot;http&quot;</span>]) {</a>
<a class="sourceLine" id="cb3-7" title="7">  chromeScheme = <span class="st">@&quot;googlechrome&quot;</span>;</a>
<a class="sourceLine" id="cb3-8" title="8">} <span class="kw">else</span> <span class="kw">if</span> ([scheme isEqualToString:<span class="st">@&quot;https&quot;</span>]) {</a>
<a class="sourceLine" id="cb3-9" title="9">  chromeScheme = <span class="st">@&quot;googlechromes&quot;</span>;</a>
<a class="sourceLine" id="cb3-10" title="10">}</a>
<a class="sourceLine" id="cb3-11" title="11"></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">// Proceed only if a valid Google Chrome URI Scheme is available.</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="kw">if</span> (chromeScheme) {</a>
<a class="sourceLine" id="cb3-14" title="14">  NSString *absoluteString = [inputURL absoluteString];</a>
<a class="sourceLine" id="cb3-15" title="15">  NSRange rangeForScheme = [absoluteString rangeOfString:<span class="st">@&quot;:&quot;</span>];</a>
<a class="sourceLine" id="cb3-16" title="16">  NSString *urlNoScheme =</a>
<a class="sourceLine" id="cb3-17" title="17">      [absoluteString substringFromIndex:rangeForScheme.location];</a>
<a class="sourceLine" id="cb3-18" title="18">  NSString *chromeURLString =</a>
<a class="sourceLine" id="cb3-19" title="19">      [chromeScheme stringByAppendingString:urlNoScheme];</a>
<a class="sourceLine" id="cb3-20" title="20">  NSURL *chromeURL = [NSURL URLWithString:chromeURLString];</a>
<a class="sourceLine" id="cb3-21" title="21"></a>
<a class="sourceLine" id="cb3-22" title="22">  <span class="co">// Open the URL with Chrome.</span></a>
<a class="sourceLine" id="cb3-23" title="23">  [[UIApplication sharedApplication] openURL:chromeURL];</a>
<a class="sourceLine" id="cb3-24" title="24">}</a></code></pre></div>
<p>If Chrome is installed, the above code converts the URI scheme found in the URL to the Google Chrome equivalent. When Google Chrome opens, the URL passed as a parameter will be opened in a new tab.</p>
<p>If Chrome is not installed the user can be prompted to download it from the App Store. If the user agrees, the app can open the App Store download page using the following:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb4-1" title="1">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:</a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="st">@&quot;itms-apps://itunes.apple.com/us/app/chrome/id535886823&quot;</span>]];</a></code></pre></div>
</body>
</html>
