<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2014-02-28" />
  <title>Getting Started: WebView-based Applications for Web Developers</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Getting Started: WebView-based Applications for Web Developers</h1>
<p class="date">2014-02-28</p>
</header>
<p>Getting started with the Android WebView is fairly simple, whether you want load a remote URL or display pages stored in your app.</p>
<p>This tutorial walks you through creating a new Android Project, adding a WebView, loading a remote URL, and then loading a local HTML page.</p>
<p><strong>Note:</strong> This tutorial assumes you’re a developer with limited or no experience with the Android development environment, but have some experience with Java. If you’re already familiar with programming for Android, you may want to refer to to <a href="http://developer.android.com/guide/webapps/webview.html">Building Web Apps in WebView</a> on the Android developer site instead.</p>
<h2 id="install-android-studio">Install Android Studio</h2>
<p>This tutorial uses <a href="http://developer.android.com/sdk/installing/studio.html">Android Studio</a>, the new design-and-build IDE for Android. So you’ll need start off by installing Android Studio, as described here:</p>
<p><a href="http://developer.android.com/sdk/installing/studio.html">http://developer.android.com/sdk/installing/studio.html</a></p>
<h2 id="create-a-new-android-project">Create a New Android Project</h2>
<p>When the installation completes, Android Studio launches and displays the welcome screen.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547040438.png”, alt=“The welcome screen.”, width=“1378”, height=“1021” %}</p>
<p>To create a new project:</p>
<ol type="1">
<li>Click <strong>New Project</strong>.</li>
<li><p>On the next page, enter your application name, package name and target SDKs, and click <strong>Next</strong>.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547132601.png”, alt=“Creating a new project.”, width=“1378”, height=“1021” %}</p>
<p><strong>Note:</strong> If you only intend to support the Chromium WebView (rather than the old WebKit WebView) set <strong>Minimum required SDK</strong> to API 19: Android 4.4 (KitKat).</p></li>
<li><p>On the next page, you’re prompted to enter an application icon. (You can change the icon later, so don’t worry if you don’t have one right now.) When you’re done, click <strong>Next</strong>.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547168938.png”, alt=“Creating an application icon.”, width=“1378”, height=“1021” %}</p></li>
<li><p>The next page lets you select the main Android activity for your application. For the purposes of this guide, select <strong>Blank Activity</strong> and click <strong>Next</strong>.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547277493.png”, alt=“Selecting the main activity.”, width=“1378”, height=“1021” %}</p>
<p><strong>Note:</strong> An Android Activity can be viewed as a screen of an app. In this case, the application’s main activity will hold the web view. If you’re planning to venture further into native Android development, you can find more information in the <a href="http://developer.android.com/guide/components/activities.html">Android Activities API guide</a></p></li>
<li><p>The next page lets you change the names for the default Activity and layout. Click <strong>Finish</strong> to accept the defaults and create the project.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547305190.png”, alt=“The screen for changing the default activity name.”, width=“1378”, height=“1021” %}</p>
<p>You now have a new Android project. Next, to add the WebView!</p></li>
</ol>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547397240.png”, alt=“The new Android project.”, width=“1378”, height=“993” %}</p>
<p><strong>Note:</strong> After you have your project created, make sure you have the KitKat SDK installed. Go to <strong>Tools</strong> &gt; <strong>Android</strong> &gt; <strong>SDK Manager</strong> and make sure you have <strong>Android 4.4 (API 19)</strong> installed.</p>
<h2 id="add-the-webview">Add the WebView</h2>
<p>Android Studio will give you some boilerplate code to set up your application. Your project’s structure should look something like this:</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547451314.png”, alt=“A screenshot of the file hierarchy.”, width=“1378”, height=“2359” %}</p>
<p>A few of the more import folders are identified in the picture:</p>
<ol type="1">
<li><code>src/main/java</code>. Android Java source code.</li>
<li><code>src/main/res</code>. Resources used by the native application.</li>
<li><code>src/main/res/drawable-_type_</code>. Image resources used by the native application.</li>
<li><code>src/main/res/layout</code>. XML layout files that define the structure of UI components.</li>
<li><code>src/main/res/values</code>. Dimensions, strings, and other values that you might not want to hard-code in your application.</li>
<li><code>src/main/AndroidManifest.xml</code>. The manifest file defines what’s included in the application: activities, permissions, themes, and so on.</li>
</ol>
<p>You need to add a <a href="http://developer.android.com/reference/android/webkit/WebView.html">WebView</a> to the main activity’s layout.</p>
<ol type="1">
<li><p>Open the <code>activity_main.xml</code> file in the <code>src/main/res/layout</code> directory if it is not already open. (You may also see a <code>fragment_main.xml</code> file. You can ignore this, as it’s not required for this tutorial.)</p>
<p>Select the <strong>Text</strong> tab at the bottom of the of the <code>activity_main.xml</code> editor to see the XML markup.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547496059.png”, alt=“The XML markup.”, width=“1378”, height=“442” %}</p>
<p>This file defines the layout for your main activity, and the <strong>Preview</strong> panes show the a preview of the activity. The <strong>Blank Activity</strong> layout doesn’t include any children. You’ll need to add the WebView.</p></li>
<li><p>In the XML pane, remove the self-closing slash from the end of the <code>FrameLayout</code> element, and add the <WebView> element and a new closing tag, as shown:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">&lt;FrameLayout</span><span class="ot"> xmlns:android=</span><span class="st">&quot;http://schemas.android.com/apk/res/android&quot;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="ot">     xmlns:tools=</span><span class="st">&quot;http://schemas.android.com/tools&quot;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="ot">     android:id=</span><span class="st">&quot;@+id/container&quot;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="ot">     android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="ot">     android:layout_height=</span><span class="st">&quot;match_parent&quot;</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="ot">     tools:context=</span><span class="st">&quot;.MainActivity&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-7" title="7">     tools:ignore=&quot;MergeRootFrame&quot;&gt;</a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9">         <span class="kw">&lt;WebView</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="ot">         android:id=</span><span class="st">&quot;@+id/activity_main_webview&quot;</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="ot">         android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="ot">         android:layout_height=</span><span class="st">&quot;match_parent&quot;</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="kw">&lt;/FrameLayout&gt;</span></a></code></pre></div></li>
<li><p>To use the WebView you need to reference it in the Activity. Open the Java source file for the main activity, <code>MainActivity.java</code> in the <code>src/main/java/&lt;PackageName&gt;</code> directory.</p>
<p>Add the lines shown in bold.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">public</span> <span class="kw">class</span> MainActivity <span class="kw">extends</span> Activity {</a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="kw">private</span> WebView mWebView;</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="at">@Override</span></a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onCreate</span>(Bundle savedInstanceState) {</a>
<a class="sourceLine" id="cb2-7" title="7">        <span class="kw">super</span>.<span class="fu">onCreate</span>(savedInstanceState);</a>
<a class="sourceLine" id="cb2-8" title="8">        <span class="fu">setContentView</span>(R.<span class="fu">layout</span>.<span class="fu">activity_main</span>);</a>
<a class="sourceLine" id="cb2-9" title="9"></a>
<a class="sourceLine" id="cb2-10" title="10">        mWebView = (WebView) <span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">activity_main_webview</span>);</a></code></pre></div>
<p>The existing code in the <code>onCreate</code> method does the work of hooking up the Activity with the layout. The added lines create a new member variable, <code>mWebView</code>, to refer to the web view.</p>
<p>Remove the following code:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">if</span> (savedInstanceState == <span class="kw">null</span>) {</a>
<a class="sourceLine" id="cb3-2" title="2">    <span class="fu">getSupportFragmentManager</span>().<span class="fu">beginTransaction</span>()</a>
<a class="sourceLine" id="cb3-3" title="3">        .<span class="fu">add</span>(R.<span class="fu">id</span>.<span class="fu">container</span>, <span class="kw">new</span> <span class="fu">PlaceholderFragment</span>())</a>
<a class="sourceLine" id="cb3-4" title="4">        .<span class="fu">commit</span>();</a>
<a class="sourceLine" id="cb3-5" title="5">}</a></code></pre></div>
<p>The WebView is identified by the resource ID, which is specified by this line in the layout file:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb4-1" title="1">android:id=<span class="st">&quot;@+id/activity_main_webview&quot;</span></a></code></pre></div>
<p>After adding the code, you’ll see some warning messages in the margin of the editor. This is because you haven’t imported the right classes for WebView. Luckily Android Studio can help you fill in the missing classes. The easiest way to do this is click and hover over an unknown class name and wait for a popup showing a “quick fix” – in this case, adding an <code>import</code> statment for the <code>WebView</code> class.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547546460.png”, alt=“The quick fix popup.”, width=“1378”, height=“284” %}</p>
<p>Press Alt + Enter (Option + Enter on Mac) to accept the quick fix.</p>
<p>WebView in hand you can move on to setting it up and and loading some juicy web content.</p></li>
</ol>
<h2 id="enable-javascript">Enable JavaScript</h2>
<p>WebViews don’t allow JavaScript by default. To run a web application in the web view, you need to explicitly enable JavaScript by adding the following lines to the <code>onCreate</code> method:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb5-1" title="1"><span class="co">// Enable Javascript</span></a>
<a class="sourceLine" id="cb5-2" title="2">WebSettings webSettings = mWebView.<span class="fu">getSettings</span>();</a>
<a class="sourceLine" id="cb5-3" title="3">webSettings.<span class="fu">setJavaScriptEnabled</span>(<span class="kw">true</span>);</a></code></pre></div>
<h2 id="load-a-remote-url">Load a Remote URL</h2>
<p>If you’re going to load data from a remote URL, your application needs <a href="http://developer.android.com/guide/topics/security/permissions.html">permission</a> to access the internet. This permission needs to be added in the <a href="http://developer.android.com/guide/topics/manifest/manifest-intro.html">application’s manifest file</a>.</p>
<ol type="1">
<li><p>Open the <code>AndroidManifest.xml</code> file in the <code>src/res</code> directory. Add the line in bold before the closing </manifest> tag.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;utf-8&quot;<span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">&lt;manifest</span> <span class="er">...</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb6-3" title="3">...</a>
<a class="sourceLine" id="cb6-4" title="4"> </a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="kw">&lt;/application&gt;</span></a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.INTERNET&quot;</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="er">&lt;</span>/manifest&gt;</a></code></pre></div></li>
<li><p>The next step is to call the <code>loadUrl</code> method on the webview. Add the following line to the end of the <code>onCreate</code> method.</p>
<p><code>**mWebView.loadUrl("[http://beta.html5test.com/][8]");**</code></p>
<p>Now try running the project. If you don’t have a device handy, you can create an emulator (AVD or Android Virtual Device) by going to <strong>Tools</strong> &gt; <strong>Android</strong> &gt; <strong>AVD Manager</strong>.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547603429.jpg”, alt=“Loading a URL in the WebView.”, width=“1378”, height=“2626” %}</p></li>
</ol>
<p><strong>Note:</strong> To detect when a URL has started and finished loading, use <a href="http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageStarted(android.webkit.WebView,%20java.lang.String,%20android.graphics.Bitmap)"><code>WebViewClient.onPageStarted</code></a> and <a href="http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageFinished(android.webkit.WebView,%20java.lang.String)"><code>WebViewClient.onPageFinished</code>.</a></p>
<h3 id="handling-navigation">Handling Navigation</h3>
<p>Now try changing the URL you’re loading to <code>http://www.html5rocks.com/</code> and rerun your application. You’ll notice something strange.</p>
<p>If you run the application now with a site that has a redirect like <code>html5rocks.com</code>, your app ends up opening the site in a browser on the device, not in your WebView – probably not what you expected. This is because of the way the WebView handles navigation events.</p>
<p>Here’s the sequence of events:</p>
<ol type="1">
<li>The WebView tries to load the original URL from the remote server, and gets a redirect to a new URL.</li>
<li>The WebView checks if the system can handle a view intent for the URL, if so the system handles the URL navigation, otherwise the WebView will navigate internally (i.e. the user has no browser installed on their device).</li>
<li>The system picks the user’s preferred application for handling an <code>http://</code> URL scheme – that is, the user’s default browser. If you have more than one browser installed, you may see a dialog at this point.</li>
</ol>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547691304.png”, alt=“A browser selection dialog.”, width=“1378”, height=“952” %}</p>
<p>If you’re using a WebView inside an Android application to display some simple web content (for example, a help page), this may be exactly what you want to do. However, for more sophisticated applications, you may want to handle the navigation links yourself.</p>
<p>To handle navigation inside the WebView you need to override the WebView’s <code>WebViewClient</code>, which handles various events generated by the WebView. You can use it to control how the WebView handles link clicks and page redirects.</p>
<p>The default implementation of <code>WebViewClient</code> makes <strong>any</strong> URL open in the WebView:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb7-1" title="1"><span class="co">// Force links and redirects to open in the WebView instead of in a browser</span></a>
<a class="sourceLine" id="cb7-2" title="2">mWebView.<span class="fu">setWebViewClient</span>(<span class="kw">new</span> <span class="fu">WebViewClient</span>());</a></code></pre></div>
<p>This is a good step forward, but what if you want to handle links for your site only, while opening other URLs in a browser?</p>
<p>To achieve this you need to extend the <code>WebViewClient</code> class and implement the <code>shouldOverrideUrlLoading</code> method. This method is called whenever the WebView tries to navigate to a different URL. If it returns false, the WebView opens the URL itself. (The default implementation <em>always</em> returns false, which is why it works in the previous example.)</p>
<p>Create a new class:</p>
<ol type="1">
<li><p>Right-click the package name of your app and select <strong>New</strong> &gt; <strong>Java Class</strong></p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/1604547739137.png”, alt=“Creating a new Java class.”, width=“1378”, height=“584” %}</p></li>
<li>Enter <code>MyAppWebViewClient</code> as the class name and click <strong>OK</strong></li>
<li><p>In the new <code>MyAppWebViewClient.java</code> file, add the following code (changes shown in bold):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">public</span> <span class="kw">class</span> MyAppWebViewClient <span class="kw">extends</span> WebViewClient {</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3">        <span class="at">@Override</span></a>
<a class="sourceLine" id="cb8-4" title="4">        <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">shouldOverrideUrlLoading</span>(WebView view, <span class="bu">String</span> url) {</a>
<a class="sourceLine" id="cb8-5" title="5">            <span class="kw">if</span>(Uri.<span class="fu">parse</span>(url).<span class="fu">getHost</span>().<span class="fu">endsWith</span>(<span class="st">&quot;html5rocks.com&quot;</span>)) {</a>
<a class="sourceLine" id="cb8-6" title="6">                <span class="kw">return</span> <span class="kw">false</span>;</a>
<a class="sourceLine" id="cb8-7" title="7">            }</a>
<a class="sourceLine" id="cb8-8" title="8">             </a>
<a class="sourceLine" id="cb8-9" title="9">            Intent intent = <span class="kw">new</span> <span class="fu">Intent</span>(Intent.<span class="fu">ACTION_VIEW</span>, Uri.<span class="fu">parse</span>(url));</a>
<a class="sourceLine" id="cb8-10" title="10">            view.<span class="fu">getContext</span>().<span class="fu">startActivity</span>(intent);</a>
<a class="sourceLine" id="cb8-11" title="11">            <span class="kw">return</span> <span class="kw">true</span>;</a>
<a class="sourceLine" id="cb8-12" title="12">        }</a>
<a class="sourceLine" id="cb8-13" title="13">    }</a></code></pre></div>
<p>The new code defines <code>MyAppWebViewClient</code> as a subclass of <code>WebViewClient</code> and implements the <code>shouldOverrideUrlLoading</code> method.</p>
<p>The <code>shouldOverrideUrlLoading</code> method is called whenever the WebView is about to load a URL. This implementation checks for the String “html5rocks.com” at the end of the host name of the URL. If the string exists, the method returns false, which tells the platform <strong>not</strong> to override the URL, but to load it in the WebView.</p>
<p>For any other hostname, the method makes a request to the system to open the URL. It does this by creating a new Android <a href="http://developer.android.com/reference/android/content/Intent.html">Intent</a> and using it to launch a new activity. Returning true at the end of the method prevents the URL from being loaded into the WebView.</p></li>
<li><p>To use your new custom <a href="http://developer.android.com/reference/android/webkit/WebViewClient.html">WebViewClient</a>, add the following lines to your <code>MainActivity</code> class:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb9-1" title="1"><span class="co">// Stop local links and redirects from opening in browser instead of WebView</span></a>
<a class="sourceLine" id="cb9-2" title="2">    mWebView.<span class="fu">setWebViewClient</span>(<span class="kw">new</span> <span class="fu">MyAppWebViewClient</span>());</a></code></pre></div>
<p>Now, a user can click any of the HTML5Rocks links and stay within the app, but links to external sites are opened in a browser.</p></li>
</ol>
<h3 id="handling-the-android-back-button">Handling the Android Back Button</h3>
<p>As you start playing around and navigating the awesome HTML5Rocks articles, hitting the back button on Android exits the application, even though you’ve explored a few pages of the site.</p>
<p>WebView has a method <code>canGoBack</code> which tells you if there is anything on the page stack that can be popped. All you need to do is detect a back button press and determine if you should step back through the WebView’s history or allow the platform to determine the correct behaviour. Inside your MainActivity class, add the following method (in bold):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">public</span> <span class="kw">class</span> MainActivity <span class="kw">extends</span> Activity {</a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"> <span class="kw">private</span> WebView mWebView;</a>
<a class="sourceLine" id="cb10-4" title="4"></a>
<a class="sourceLine" id="cb10-5" title="5"> <span class="at">@Override</span></a>
<a class="sourceLine" id="cb10-6" title="6"> <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onCreate</span>(Bundle savedInstanceState) {</a>
<a class="sourceLine" id="cb10-7" title="7">     ...</a>
<a class="sourceLine" id="cb10-8" title="8"> }</a>
<a class="sourceLine" id="cb10-9" title="9"></a>
<a class="sourceLine" id="cb10-10" title="10">    <span class="at">@Override</span></a>
<a class="sourceLine" id="cb10-11" title="11">    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onBackPressed</span>() {</a>
<a class="sourceLine" id="cb10-12" title="12">        <span class="kw">if</span>(mWebView.<span class="fu">canGoBack</span>()) {</a>
<a class="sourceLine" id="cb10-13" title="13">            mWebView.<span class="fu">goBack</span>();</a>
<a class="sourceLine" id="cb10-14" title="14">        } <span class="kw">else</span> {</a>
<a class="sourceLine" id="cb10-15" title="15">            <span class="kw">super</span>.<span class="fu">onBackPressed</span>();</a>
<a class="sourceLine" id="cb10-16" title="16">        }</a>
<a class="sourceLine" id="cb10-17" title="17">    }</a>
<a class="sourceLine" id="cb10-18" title="18"></a>
<a class="sourceLine" id="cb10-19" title="19">    <span class="at">@Override</span></a>
<a class="sourceLine" id="cb10-20" title="20">    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">onCreateOptionsMenu</span>(<span class="bu">Menu</span> menu) {</a>
<a class="sourceLine" id="cb10-21" title="21">       ...</a>
<a class="sourceLine" id="cb10-22" title="22">    }</a>
<a class="sourceLine" id="cb10-23" title="23"></a>
<a class="sourceLine" id="cb10-24" title="24">}</a></code></pre></div>
<h2 id="loading-html-files-from-the-file-system">Loading HTML files from the file system</h2>
<p>A big advantage of using a WebView inside an installable application is that you can store assets inside the app. This lets your app work offline and improves load times, since the WebView can retrieve assets directly from the local file system.</p>
<p>To store files such as HTML, JavaScript, and CSS locally, put them in the assets directory. This is a reserved directory that Android uses for raw files that your app may need access to (i.e. files it knows it should minimise or compress).</p>
<p>In your project, create the <code>assets</code> directory in main (<code>src/main/assets</code>).</p>
<p>Generally it’s good practice to keep your web files in a subdirectory, so create a www directory and put all your web content in it.</p>
<p><strong>Note:</strong> Absolute paths do not work in the WebView when referring to other files, such as CSS and JavaScript. So make sure you make all references relative, instead of absolute (for example, instead of “/pages/somelink.html”, use “./pages/somelink.html”).</p>
<p>Once you have everything in your assets directory, it’s as simple as loading in the appropriate file:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb11-1" title="1">mWebView.<span class="fu">loadUrl</span>(<span class="st">&quot;file:///android_asset/www/index.html&quot;</span>);</a></code></pre></div>
<p>You’ll want to tweak the <code>shouldOverrideUrlLoading</code> method so it opens a browser for non-local pages:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">public</span> <span class="kw">class</span> MyAppWebViewClient <span class="kw">extends</span> WebViewClient {</a>
<a class="sourceLine" id="cb12-2" title="2">    <span class="at">@Override</span></a>
<a class="sourceLine" id="cb12-3" title="3">    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">shouldOverrideUrlLoading</span>(WebView view, <span class="bu">String</span> url) {</a>
<a class="sourceLine" id="cb12-4" title="4">        <span class="kw">if</span>(Uri.<span class="fu">parse</span>(url).<span class="fu">getHost</span>().<span class="fu">length</span>() == <span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb12-5" title="5">            <span class="kw">return</span> <span class="kw">false</span>;</a>
<a class="sourceLine" id="cb12-6" title="6">        }</a>
<a class="sourceLine" id="cb12-7" title="7"></a>
<a class="sourceLine" id="cb12-8" title="8">        Intent intent = <span class="kw">new</span> <span class="fu">Intent</span>(Intent.<span class="fu">ACTION_VIEW</span>, Uri.<span class="fu">parse</span>(url));</a>
<a class="sourceLine" id="cb12-9" title="9">        view.<span class="fu">getContext</span>().<span class="fu">startActivity</span>(intent);</a>
<a class="sourceLine" id="cb12-10" title="10">        <span class="kw">return</span> <span class="kw">true</span>;</a>
<a class="sourceLine" id="cb12-11" title="11">    }</a>
<a class="sourceLine" id="cb12-12" title="12"></a>
<a class="sourceLine" id="cb12-13" title="13">}</a></code></pre></div>
<p>Now you are set to build a great WebView app!</p>
<p>For tips on getting the visuals just right, see <a href="/docs/multidevice/webview/pixelperfect/">Pixel-Perfect UI in the WebView</a>.</p>
<p>If you run into trouble, the Chrome DevTools are your friends. See <a href="/devtools/docs/remote-debugging">Remote Debugging on Android</a> to get started.</p>
</body>
</html>
