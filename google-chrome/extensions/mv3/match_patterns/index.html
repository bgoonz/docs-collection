<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2012-09-18" />
  <title>Match patterns</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Match patterns</h1>
<p class="date">2012-09-18</p>
</header>
<p><a href="/docs/extensions/mv3/declare_permissions#host-permissions">Host permissions</a> and <a href="/docs/extensions/mv3/content_scripts">content script</a> matching are based on a set of URLs defined by match patterns. A match pattern is essentially a URL that begins with a permitted scheme (<code>http</code>, <code>https</code>, <code>file</code>, or <code>ftp</code>, and that can contain ‘<code>*</code>’ characters. The special pattern <code>&lt;all_urls&gt;</code> matches any URL that starts with a permitted scheme. Each match pattern has 3 parts:</p>
<ul>
<li><p><em>scheme</em>—for example, <code>http</code> or <code>file</code> or <code>*</code></p>
<div class="aside aside--note">
Access to <code>file</code> URLs isn’t automatic. The user must visit the extensions management page and opt in to <code>file</code> access for each extension that requests it.
</div></li>
<li><em>host</em>—for example, <code>www.google.com</code> or <code>*.google.com</code> or <code>*</code>; if the scheme is <code>file</code>, there is no <em>host</em> part</li>
<li><p><em>path</em>—for example, <code>/*</code>, <code>/foo*</code>, or <code>/foo/bar</code>. The path must be present in a host permission, but is always treated as <code>/*</code>.</p></li>
</ul>
<p>Here’s the basic syntax:</p>
<pre class="text"><code>&amp;lt;url-pattern&amp;gt; := &amp;lt;scheme&amp;gt;://&amp;lt;host&amp;gt;&amp;lt;path&amp;gt;
&amp;lt;scheme&amp;gt; := &#39;*&#39; | &#39;http&#39; | &#39;https&#39; | &#39;file&#39; | &#39;ftp&#39; | &#39;urn&#39;
&amp;lt;host&amp;gt; := &#39;*&#39; | &#39;*.&#39; &amp;lt;any char except &#39;/&#39; and &#39;*&#39;&amp;gt;+
&amp;lt;path&amp;gt; := &#39;/&#39; &amp;lt;any chars&amp;gt;</code></pre>
<p>The meaning of ‘<code>*</code>’ depends on whether it’s in the <em>scheme</em>, <em>host</em>, or <em>path</em> part. If the <em>scheme</em> is <code>*</code>, then it matches either <code>http</code> or <code>https</code>, and <strong>not</strong> <code>file</code>, <code>ftp</code>, or <code>urn</code>. If the <em>host</em> is just <code>*</code>, then it matches any host. If the <em>host</em> is <code>*._hostname_</code>, then it matches the specified host or any of its subdomains. In the <em>path</em> section, each ‘<code>*</code>’ matches 0 or more characters. The following table shows some valid patterns.</p>
<p>Note: <code>urn</code> scheme is available since Chrome 91.</p>
<table class="fixed-table width-full">
<tbody>
<tr>
<th style="margin-left:0; padding-left:0">
Pattern
</th>
<th style="margin-left:0; padding-left:0">
What it does
</th>
<th style="margin-left:0; padding-left:0">
Examples of matching URLs
</th>
</tr>
<tr>
<td>
<code>https://<em>/</em></code>
</td>
<td>
Matches any URL that uses the <code>https</code> scheme
</td>
<td>
https://www.google.com/<br>https://example.org/foo/bar.html
</td>
</tr>
<tr>
<td>
<code>https://<em>/foo</em></code>
</td>
<td>
Matches any URL that uses the <code>https</code> scheme, on any host, as long as the path starts with <code>/foo</code>
</td>
<td>
https://example.com/foo/bar.html<br>https://www.google.com/foo<b></b>
</td>
</tr>
<tr>
<td>
<code>https://<em>.google.com/foo</em>bar</code>
</td>
<td>
Matches any URL that uses the <code>https</code> scheme, is on a google.com host (such as www.google.com, docs.google.com, or google.com), as long as the path starts with <code>/foo</code> and ends with <code>bar</code>
</td>
<td>
https://www.google.com/foo/baz/bar<br>https://docs.google.com/foobar
</td>
</tr>
<tr>
<td>
<code>https://example.org/foo/bar.html</code>
</td>
<td>
Matches the specified URL
</td>
<td>
https://example.org/foo/bar.html
</td>
</tr>
<tr>
<td>
<code>file:///foo*</code>
</td>
<td>
Matches any local file whose path starts with <code>/foo</code>
</td>
<td>
file:///foo/bar.html<br>file:///foo
</td>
</tr>
<tr>
<td>
<code>http://127.0.0.1/*</code>
</td>
<td>
Matches any URL that uses the <code>http</code> scheme and is on the host 127.0.0.1
</td>
<td>
http://127.0.0.1/<br>http://127.0.0.1/foo/bar.html
</td>
</tr>
<tr>
<td>
<code><em>://mail.google.com/</em></code>
</td>
<td>
Matches any URL that starts with <code>http://mail.google.com</code> or <code>https://mail.google.com</code>.
</td>
<td>
http://mail.google.com/foo/baz/bar<br>https://mail.google.com/foobar
</td>
</tr>
<tr>
<td>
<code>urn:*</code>
</td>
<td>
Matches any URL that starts with <code>urn:</code>.
</td>
<td>
urn:uuid:54723bea-c94e-480e-80c8-a69846c3f582<br>urn:uuid:cfa40aff-07df-45b2-9f95-e023bcf4a6da
</td>
</tr>
<tr>
<td>
<code>&lt;all_urls&gt;</code>
</td>
<td>
Matches any URL that uses a permitted scheme. (See the beginning of this section for the list of permitted schemes.)
</td>
<td>
http://example.org/foo/bar.html<br>file:///bar/baz.html
</td>
</tr>
</tbody>
</table>
<p>Here are some examples of <em>invalid</em> pattern matches:</p>
<table class="fixed-table width-full">
<tbody>
<tr>
<th style="margin-left:0; padding-left:0">
Bad pattern
</th>
<th style="margin-left:0; padding-left:0">
Why it’s bad
</th>
</tr>
<tr>
<td>
<code>https://www.google.com</code>
</td>
<td>
No <em>path</em>
</td>
</tr>
<tr>
<td>
<code>https://*foo/bar</code>
</td>
<td>
’*’ in the <em>host</em> can be followed only by a ‘.’ or ‘/’
</td>
</tr>
<tr>
<td>
<code>https://foo.*.bar/baz </code>
</td>
<td>
If ’*’ is in the <em>host</em>, it must be the first character
</td>
</tr>
<tr>
<td>
<code>http:/bar</code>
</td>
<td>
Missing <em>scheme</em> separator (“/” should be “//”)
</td>
</tr>
<tr>
<td>
<code>foo://*</code>
</td>
<td>
Invalid <em>scheme</em>
</td>
</tr>
</tbody>
</table>
<p>Some schemes are not supported in all contexts.</p>
</body>
</html>
