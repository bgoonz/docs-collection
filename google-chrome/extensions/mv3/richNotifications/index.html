<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2014-06-25" />
  <title>Rich notifications API</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Rich notifications API</h1>
<p class="date">2014-06-25</p>
</header>
<div class="aside aside--note">
<strong>Platform difference:</strong> In Chrome version 59, notifications appear differently for Mac OS X users. Instead of Chrome’s own notifications, users see native Mac OS X notifications. <a href="https://developers.google.com/web/updates/2017/04/native-mac-os-notifications">Learn more in this article</a>.
</div>
<p>The <a href="/docs/extensions/reference/notifications">rich notifications API</a> lets you create notifications using templates and show these notifications to users in the user’s system tray:</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/tAzH8Og2Lql9nAcIRMOA.png”, alt=“Notifications in system user tray”, height=“375”, width=“354” %}</p>
<h2 id="how-they-look-look">How they look {: #look }</h2>
<p>Rich notifications come in four different flavors: basic, image, list, and progress. All notifications include a title, message, small icon displayed to the left of the notification message, and a contextMessage field, which is displayed as a 3rd text field in a lighter color font.</p>
<p>A basic image:</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/ZNTfa7vVa0sor219W0dk.png”, alt=“Basic notification”, height=“175”, width=“479” %}</p>
<p>List notifications display any number of list items:</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/vFV3s1EW9gAPTog3khPE.png”, alt=“List notification”, height=“200”, width=“400” %}</p>
<p>Image notifications include an image preview:</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/vtc3JD29GPhnAZSjxljc.png”, alt=“Image notification”, height=“400”, width=“365” %}</p>
<p>Progress notifications show a progress bar:</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/cKPXPoLP0vqqenR88z9M.png”, alt=“Progress notification”, height=“205”, width=“389” %}</p>
<h2 id="how-they-behave-behave">How they behave {: #behave }</h2>
<p>On Chrome OS, notifications show up in a user’s system tray, and stay in the system tray until the user dismisses them. The system tray keeps a count of all new notifications. Once a users sees the notifications in the system tray, the count is reset to zero.</p>
<p>Notifications can be assigned a priority between -2 to 2. Priorities &lt; 0 are shown in the ChromeOS notification center, and produce an error on other platforms. Priority 0 is the default priority. Priorities &gt; 0 are shown for increasing duration and more high priority notifications can be displayed in the system tray.</p>
<p>{% Aside %} <strong>Platform difference:</strong> The <code>code</code> priority does not affect the order of notifications in Chrome version 59+ on macOS. {% endAside %}</p>
<p>In addition to displaying information, all notification types can include up to two action items. When users click on an action item, your extension can respond with the appropriate action. For example, when the user clicks on “Reply”, the email app opens and the user can complete the reply:</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/CozjuLjsi01Ch9KNBoAY.png”, alt=“Action in notification”, height=“275”, width=“392” %}</p>
<h2 id="how-to-develop-them-develop">How to develop them {: #develop }</h2>
<p>To use this API, call the <a href="/docs/extensions/reference/notifications#method-create">notifications.create</a> method, passing in the notification details via the <code>options</code> parameter:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="va">chrome</span>.<span class="va">notifications</span>.<span class="at">create</span>(id<span class="op">,</span> options<span class="op">,</span> creationCallback)<span class="op">;</span></a></code></pre></div>
<p>The <a href="/docs/extensions/reference/notifications#type-NotificationOptions">notifications.NotificationOptions</a> must include a <a href="/docs/extensions/reference/notifications#type-TemplateType">notifications.TemplateType</a>, which defines available notification details and how those details are displayed.</p>
<p>{% Aside %}</p>
<p><strong>Consider integrating with GCM!</strong></p>
<p><a href="/docs/extensions/reference/gcm">Keep your users informed</a> all the time, even when your extension isn’t opened. The <a href="https://github.com/GoogleChrome/chrome-extensions-samples/tree/master/apps/samples/gcm-notifications">gcm-notifications sample</a> shows a simple integration between GCM and Rich Notifications API.</p>
<p>{% endAside %}</p>
<h3 id="create-basic-notification-basic">Create basic notification {: #basic }</h3>
<p>All template types (<code>basic</code>, <code>image</code>, <code>list</code> and <code>progress</code>) must include a notification <code>title</code> and <code>message</code>, as well as an <code>iconUrl</code>, which is a link to a small icon that is displayed to the left of the notification message.</p>
<p>Here’s an example of a <code>basic</code> template:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> opt <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;basic&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Primary Title&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Primary message to display&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">iconUrl</span><span class="op">:</span> <span class="st">&quot;url_to_small_icon&quot;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="op">}</span></a></code></pre></div>
<h3 id="create-image-notification-image">Create image notification {: #image }</h3>
<p>The <code>image</code> template type also includes an <code>imageUrl</code>, which is a link to an image that is previewed within the notification:</p>
<div class="aside aside--note">
<strong>Platform difference:</strong> Images will not be display to users using Chrome version 59+ on Mac OS X.
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> opt <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;basic&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Primary Title&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Primary message to display&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="dt">iconUrl</span><span class="op">:</span> <span class="st">&quot;url_to_small_icon&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="dt">imageUrl</span><span class="op">:</span> <span class="st">&quot;url_to_preview_image&quot;</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="op">}</span></a></code></pre></div>
<h3 id="create-list-notification-list">Create list notification {: #list }</h3>
<p>The <code>list</code> template displays <code>items</code> in a list format:</p>
<div class="aside aside--note">
<strong>Platform difference:</strong> Only the first list item is displayed to users in Chrome version 59+ on Mac OS X.
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> opt <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;list&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Primary Title&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Primary message to display&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="dt">iconUrl</span><span class="op">:</span> <span class="st">&quot;url_to_small_icon&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="dt">items</span><span class="op">:</span> [<span class="op">{</span> <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Item1&quot;</span><span class="op">,</span> <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;This is item 1.&quot;</span><span class="op">},</span></a>
<a class="sourceLine" id="cb4-7" title="7">          <span class="op">{</span> <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Item2&quot;</span><span class="op">,</span> <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;This is item 2.&quot;</span><span class="op">},</span></a>
<a class="sourceLine" id="cb4-8" title="8">          <span class="op">{</span> <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Item3&quot;</span><span class="op">,</span> <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;This is item 3.&quot;</span><span class="op">}</span>]</a>
<a class="sourceLine" id="cb4-9" title="9"><span class="op">}</span></a></code></pre></div>
<h3 id="create-progress-notification-progress">Create progress notification {: #progress }</h3>
<p>The <code>progress</code> template displays a progress bar where current progress ranges from 0 to 100:</p>
<div class="aside aside--note">
<strong>Platform difference:</strong> In Chrome version 59+ on Mac OS X, the progress bar displays as a percentage value in the title of the notification instead of displaying a progress bar.
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">var</span> opt <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;progress&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Primary Title&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Primary message to display&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="dt">iconUrl</span><span class="op">:</span> <span class="st">&quot;url_to_small_icon&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="dt">progress</span><span class="op">:</span> <span class="dv">42</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="op">}</span></a></code></pre></div>
<h2 id="listening-for-and-responding-to-events-events">Listening for and responding to events {: #events }</h2>
<p>All notifications can include event listeners and event handlers that respond to user actions (see <a href="/docs/extensions/reference/events">chrome.events</a>). For example, you can write an event handler to respond to an <a href="/docs/extensions/reference/notifications#event-onButtonClicked">notifications.onButtonClicked</a> event.</p>
<p>Event listener:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="va">chrome</span>.<span class="va">notifications</span>.<span class="va">onButtonClicked</span>.<span class="at">addListener</span>(replyBtnClick)<span class="op">;</span></a></code></pre></div>
<p>Event handler:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">function</span> replyBtnClick <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">    <span class="co">//Write function to respond to user action.</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Consider including event listeners and handlers within the <a href="/docs/apps/app_lifecycle#create_event_page">event page</a>, so that notifications can pop-up even when the extension isn’t running.</p>
</body>
</html>
