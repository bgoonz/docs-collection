<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2018-03-16" />
  <title>Design the user interface</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Design the user interface</h1>
<p class="date">2018-03-16</p>
</header>
<!-- Note to editors: this is largely identical to the MV2 version, but removes 
    browser_action and page_action in favor of action -->
<p>The extension user interface should be purposeful and minimal. Just like extensions themselves, the UI should customize or enhance the browsing experience without distracting from it.</p>
<p>This guide explores required and optional user interface features. Use it to understand how and when to implement different UI elements within an extension.</p>
<h2 id="allow-the-extension-on-all-pages-action">Allow the extension on all pages {: #action }</h2>
<p>Use an <a href="/docs/extensions/reference/action">action</a> when an extension’s features are functional in most situations. It will be displayed to the right of the user’s URL bar, hidden under the Extensions overflow menu by default, and a user can ‘pin’ it to be always visible.</p>
<h3 id="register-browser-action-browser">Register browser action {: #browser }</h3>
<p>The <code>"action"</code> field is registered in the manifest.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;My Awesome action MV3 Extension&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="er">...</span></a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="er">...</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="fu">}</span></a></code></pre></div>
<p>Declaring <code>"action"</code> keeps the icon colorized, indicating the extension is available to users.</p>
<h3 id="add-a-badge-badge">Add a badge {: #badge }</h3>
<p>Badges display a colored banner with up to four characters on top of the browser icon. They can only be used by extensions that declare <code>"action"</code> in their manifest.</p>
<p>Use badges to indicate the state of the extension. The <a href="/docs/extensions/mv3/samples#search:drink">Drink Water Event</a> sample displays a badge with “ON” to show the user they successfully set an alarm and displays nothing when the extension is idle.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/nXwAHSWLBEgT8099ITT0.png”, alt=“Badge On”, height=“72”, width=“72” %}</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/pNz8UgfTBMmcf7fE9wja.png”, alt=“Badge Off”, height=“72”, width=“72” %}</p>
<p>Set the text of the badge by calling <a href="/docs/extensions/reference/action#method-setBadgeText"><code>chrome.action.setBadgeText</code></a> and the banner color by calling <a href="/docs/extensions/reference/action#method-setBadgeBackgroundColor"><code>chrome.action.setBadgeBackgroundColor</code></a> .</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">chrome</span>.<span class="va">action</span>.<span class="at">setBadgeText</span>(<span class="op">{</span><span class="dt">text</span><span class="op">:</span> <span class="st">&#39;ON&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="va">chrome</span>.<span class="va">action</span>.<span class="at">setBadgeBackgroundColor</span>(<span class="op">{</span><span class="dt">color</span><span class="op">:</span> <span class="st">&#39;#4688F1&#39;</span><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="define-rules-for-activating-the-extension-activate_pages">Define rules for activating the extension{: #activate_pages }</h2>
<p>It’s possible to use <a href="/docs/extensions/reference/declarativeContent/">declarativeContent</a> to enable and disable the action based on the current URL being shown. See the <a href="docs/extensions/reference/action/#emulating-pageactions-with-declarativecontent">example as part of declarativeContent</a>.</p>
<h2 id="provide-the-extension-icons">Provide the extension icons</h2>
<p>An extension requires at least one icon to represent it. Provide icons in PNG format for the best visual results, although any format supported by WebKit including BMP, GIF, ICO, and JPEG is accepted.</p>
<h3 id="designate-toolbar-icons-icons">Designate toolbar icons {: #icons }</h3>
<p>Icons specific to the toolbar are registered in the <code>"default_icon"</code> field under <a href="/docs/extensions/reference/action"><code>action</code></a> in the manifest. Including multiple sizes is encouraged to scale for the 16-dip space. At minimum, 16x16 and 32x32 sizes are recommended.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb3-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;My Awesome page_action Extension&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="dt">&quot;default_icon&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">      <span class="dt">&quot;16&quot;</span><span class="fu">:</span> <span class="st">&quot;extension_toolbar_icon16.png&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-7" title="7">      <span class="dt">&quot;32&quot;</span><span class="fu">:</span> <span class="st">&quot;extension_toolbar_icon32.png&quot;</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="er">...</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="fu">}</span></a></code></pre></div>
<p>All icons should be square or they may be distorted. If no icons are supplied, Chrome will add a generic one to the toolbar.</p>
<h3 id="create-and-register-additional-icons-icon_size">Create and register additional icons {: #icon_size }</h3>
<p>Include additional icons in the following sizes for uses outside of the toolbar.</p>
<table>
<tbody>
<tr>
<th>
Icon Size
</th>
<th>
Icon Use
</th>
</tr>
<tr>
<td>
16x16
</td>
<td>
favicon on the extension’s pages
</td>
</tr>
<tr>
</tr>
<tr>
<td>
32x32
</td>
<td>
Windows computers often require this size. Providing this option will prevent size distortion from shrinking the 48x48 option.
</td>
</tr>
<tr>
</tr>
<tr>
<td>
48x48
</td>
<td>
displays on the extensions management page
</td>
</tr>
<tr>
</tr>
<tr>
<td>
128x128
</td>
<td>
displays on installation and in the Chrome Webstore
</td>
</tr>
<tr>
</tr>
</tbody>
</table>
<p>Register icons in the manifest under the <code>"icons"</code> field.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb4-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;My Awesome Extension&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="dt">&quot;icons&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="dt">&quot;16&quot;</span><span class="fu">:</span> <span class="st">&quot;extension_icon16.png&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="dt">&quot;32&quot;</span><span class="fu">:</span> <span class="st">&quot;extension_icon32.png&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-7" title="7">    <span class="dt">&quot;48&quot;</span><span class="fu">:</span> <span class="st">&quot;extension_icon48.png&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-8" title="8">    <span class="dt">&quot;128&quot;</span><span class="fu">:</span> <span class="st">&quot;extension_icon128.png&quot;</span></a>
<a class="sourceLine" id="cb4-9" title="9">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb4-10" title="10">  <span class="er">...</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="fu">}</span></a></code></pre></div>
<h2 id="additional-ui-features-additional_features">Additional UI features {: #additional_features }</h2>
<h3 id="popup-popup">Popup {: #popup }</h3>
<p>A popup is an HTML file that is displayed in a special window when the user clicks the toolbar icon. A popup works very similarly to a web page; it can contain links to stylesheets and script tags, but does not allow inline JavaScript.</p>
<p>The <a href="/docs/extensions/mv3/samples#search:drink">Drink Water Event</a> example popup displays available timer options. Users set an alarm by clicking one of the provided buttons.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/JVduBMXnyUorfNjFZmue.png”, alt=“Popup sample screenshot”, height=“561”, width=“413” %}</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">&lt;html&gt;</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="kw">&lt;title&gt;</span>Water Popup<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb5-6" title="6">      <span class="kw">&lt;img</span><span class="ot"> src=</span><span class="st">&quot;./stay_hydrated.png&quot;</span><span class="ot"> id=</span><span class="st">&quot;hydrateImage&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb5-7" title="7">      <span class="kw">&lt;button</span><span class="ot"> id=</span><span class="st">&quot;sampleSecond&quot;</span><span class="ot"> value=</span><span class="st">&quot;0.1&quot;</span><span class="kw">&gt;</span>Sample Second<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb5-8" title="8">      <span class="kw">&lt;button</span><span class="ot"> id=</span><span class="st">&quot;min15&quot;</span><span class="ot"> value=</span><span class="st">&quot;15&quot;</span><span class="kw">&gt;</span>15 Minutes<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb5-9" title="9">      <span class="kw">&lt;button</span><span class="ot"> id=</span><span class="st">&quot;min30&quot;</span><span class="ot"> value=</span><span class="st">&quot;30&quot;</span><span class="kw">&gt;</span>30 Minutes<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb5-10" title="10">      <span class="kw">&lt;button</span><span class="ot"> id=</span><span class="st">&quot;cancelAlarm&quot;</span><span class="kw">&gt;</span>Cancel Alarm<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;popup.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<p>The popup can be registered in the manifest under the <code>"action"</code> key.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb6-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Drink Water Event&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="dt">&quot;default_popup&quot;</span><span class="fu">:</span> <span class="st">&quot;popup.html&quot;</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="er">...</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="fu">}</span></a></code></pre></div>
<p>Popups can also be set dynamically by calling <a href="/docs/extensions/reference/action#method-setPopup"><code>action.setPopup</code></a> or <a href="/docs/extensions/reference/action#method-setPopup"><code>action.setPopup</code></a>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">chrome</span>.<span class="va">storage</span>.<span class="va">local</span>.<span class="at">get</span>(<span class="st">&#39;signed_in&#39;</span><span class="op">,</span> (data) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="cf">if</span> (<span class="va">data</span>.<span class="at">signed_in</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="va">chrome</span>.<span class="va">action</span>.<span class="at">setPopup</span>(<span class="op">{</span><span class="dt">popup</span><span class="op">:</span> <span class="st">&#39;popup.html&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="va">chrome</span>.<span class="va">action</span>.<span class="at">setPopup</span>(<span class="op">{</span><span class="dt">popup</span><span class="op">:</span> <span class="st">&#39;popup_sign_in.html&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="tooltip-tooltip">Tooltip {: #tooltip }</h3>
<p>Use a tooltip to give short descriptions or instructions to users when hovering over the browser icon.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/Go8aQg0vd0f2hkOFElLK.png”, alt=“A screenshot of an example tooltip”, height=“157”, width=“519” %}</p>
<p>Tooltips are registered in the <code>"default_title"</code> field under the <code>"action"</code> key. in the manifest.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb8-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Tab Flipper&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb8-5" title="5">    <span class="dt">&quot;default_title&quot;</span><span class="fu">:</span> <span class="st">&quot;Press Ctrl(Win)/Command(Mac)+Shift+Right/Left to flip tabs&quot;</span></a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="er">...</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="fu">}</span></a></code></pre></div>
<p>Tooltips can also be set or updated by calling <a href="/docs/extensions/reference/action#method-setTitle"><code>action.setTitle</code></a>.</p>
<p>Specialized locale strings are implemented with <a href="/docs/extensions/reference/i18n">Internationalization</a>. Create directories to house language specific messages within a folder called <code>_locales</code>, like this:</p>
<ul>
<li><code>_locales/en/messages.json</code></li>
<li><code>_locales/es/messages.json</code></li>
</ul>
<p><a href="/docs/extensions/mv3/i18n-messages">Format messages</a> inside of each language’s <code>messages.json</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb9-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="dt">&quot;__MSG_tooltip__&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Hello!&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Tooltip Greeting.&quot;</span></a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="fu">}</span></a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb10-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="dt">&quot;__MSG_tooltip__&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Hola!&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Tooltip Greeting.&quot;</span></a>
<a class="sourceLine" id="cb10-5" title="5">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="fu">}</span></a></code></pre></div>
<p>Include the name of the message in the tooltip field instead of the message to enable localization.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb11-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="dt">&quot; name&quot;</span><span class="fu">:</span> <span class="st">&quot;Tab Flipper&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb11-5" title="5">    <span class="dt">&quot;default_title&quot;</span><span class="fu">:</span> <span class="st">&quot;__MSG_tooltip__&quot;</span></a>
<a class="sourceLine" id="cb11-6" title="6">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="er">...</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="fu">}</span></a></code></pre></div>
<h3 id="click-event">Click Event</h3>
<p>It’s possible to install a click handler for when the user clicks the action item. However, this won’t fire if the action has a popup (default or otherwise).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="va">chrome</span>.<span class="va">action</span>.<span class="va">onClicked</span>.<span class="at">addListener</span>(<span class="kw">function</span>(tab) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="va">chrome</span>.<span class="va">action</span>.<span class="at">setTitle</span>(<span class="op">{</span><span class="dt">tabId</span><span class="op">:</span> <span class="va">tab</span>.<span class="at">id</span><span class="op">,</span> <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;You are on tab:&quot;</span> <span class="op">+</span> <span class="va">tab</span>.<span class="at">id</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="omnibox-omnibox">Omnibox {: #omnibox }</h3>
<p>Users can invoke extension functionality through the <a href="/docs/extensions/reference/omnibox">omnibox</a>. Include the <code>"omnibox"</code> field in the manifest and designate a keyword. The <a href="https://github.com/GoogleChrome/chrome-extensions-samples/tree/main/api/omnibox/new-tab-search">Omnibox New Tab Search</a> sample extension uses “nt” as the keyword.</p>
<pre class="json/3"><code>{
  &quot;name&quot;: &quot;Omnibox New Tab Search&quot;,\
  ...
  &quot;omnibox&quot;: { &quot;keyword&quot; : &quot;nt&quot; },
  &quot;default_icon&quot;: {
    &quot;16&quot;: &quot;newtab_search16.png&quot;,
    &quot;32&quot;: &quot;newtab_search32.png&quot;
  }
  ...
}</code></pre>
<p>When the user types “nt” into the omnibox, it activates the extension. To signal this to the user, it grayscales the provided 16x16 icon and includes it in the omnibox next to the extension name.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/T0jCZDUVfuEANigPV6bY.png”, alt=“Active Omnibox Extension”, height=“70”, width=“576” %}</p>
<p>The extension listens to the <a href="/docs/extensions/reference/omnibox#event-onInputEntered"><code>omnibox.onInputEntered</code></a> event. After it’s triggered, the extension opens a new tab containing a Google search for the user’s entry.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="va">chrome</span>.<span class="va">omnibox</span>.<span class="va">onInputEntered</span>.<span class="at">addListener</span>(<span class="kw">function</span>(text) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="co">// Encode user input for special characters , / ? : @ &amp; = + $ #</span></a>
<a class="sourceLine" id="cb14-3" title="3">  <span class="kw">const</span> newURL <span class="op">=</span> <span class="st">&#39;https://www.google.com/search?q=&#39;</span> <span class="op">+</span> <span class="at">encodeURIComponent</span>(text)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-4" title="4">  <span class="va">chrome</span>.<span class="va">tabs</span>.<span class="at">create</span>(<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> newURL <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="context-menu-context_menu">Context menu {: #context_menu }</h3>
<p>Add new <a href="/docs/extensions/reference/contextMenus">context menu</a> options by granting the <code>"contextMenus"</code> permission in the manifest.</p>
<pre class="json/4"><code>{
  &quot;name&quot;: &quot;Global Google Search&quot;,
  ...
  &quot;permissions&quot;: [
    &quot;contextMenus&quot;,
    &quot;storage&quot;
  ],
  &quot;icons&quot;: {
    &quot;16&quot;: &quot;globalGoogle16.png&quot;,
    &quot;48&quot;: &quot;globalGoogle48.png&quot;,
    &quot;128&quot;: &quot;globalGoogle128.png&quot;
  }
  ...
}</code></pre>
<p>The 16x16 icon is displayed next to the new menu entry.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/jpA0DLCg2sEnwIf4FkLp.png”, alt=“Context Menu Icon”, height=“500”, width=“500” %}</p>
<p>Create a context menu by calling <a href="/docs/extensions/reference/contextMenus#method-create"><code>contextMenus.create</code></a> in the <a href="/docs/extensions/mv3/migrating_to_service_workers">background script</a>. This should be done under the <a href="/docs/extensions/reference/runtime#event-onInstalled"><code>runtime.onInstalled</code></a> listener event.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="va">chrome</span>.<span class="va">runtime</span>.<span class="va">onInstalled</span>.<span class="at">addListener</span>(<span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">  <span class="cf">for</span> (<span class="kw">const</span> key <span class="kw">of</span> <span class="va">Object</span>.<span class="at">keys</span>(kLocales)) <span class="op">{</span></a>
<a class="sourceLine" id="cb16-3" title="3">    <span class="va">chrome</span>.<span class="va">contextMenus</span>.<span class="at">create</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb16-4" title="4">      <span class="dt">id</span><span class="op">:</span> key<span class="op">,</span></a>
<a class="sourceLine" id="cb16-5" title="5">      <span class="dt">title</span><span class="op">:</span> kLocales[key]<span class="op">,</span></a>
<a class="sourceLine" id="cb16-6" title="6">      <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;normal&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb16-7" title="7">      <span class="dt">contexts</span><span class="op">:</span> [<span class="st">&#39;selection&#39;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb16-8" title="8">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">const</span> kLocales <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-2" title="2">  <span class="st">&#39;com.au&#39;</span><span class="op">:</span> <span class="st">&#39;Australia&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-3" title="3">  <span class="st">&#39;com.br&#39;</span><span class="op">:</span> <span class="st">&#39;Brazil&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-4" title="4">  <span class="st">&#39;ca&#39;</span><span class="op">:</span> <span class="st">&#39;Canada&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-5" title="5">  <span class="st">&#39;cn&#39;</span><span class="op">:</span> <span class="st">&#39;China&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-6" title="6">  <span class="st">&#39;fr&#39;</span><span class="op">:</span> <span class="st">&#39;France&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-7" title="7">  <span class="st">&#39;it&#39;</span><span class="op">:</span> <span class="st">&#39;Italy&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-8" title="8">  <span class="st">&#39;co.in&#39;</span><span class="op">:</span> <span class="st">&#39;India&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-9" title="9">  <span class="st">&#39;co.jp&#39;</span><span class="op">:</span> <span class="st">&#39;Japan&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-10" title="10">  <span class="st">&#39;com.ms&#39;</span><span class="op">:</span> <span class="st">&#39;Mexico&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-11" title="11">  <span class="st">&#39;ru&#39;</span><span class="op">:</span> <span class="st">&#39;Russia&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-12" title="12">  <span class="st">&#39;co.za&#39;</span><span class="op">:</span> <span class="st">&#39;South Africa&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-13" title="13">  <span class="st">&#39;co.uk&#39;</span><span class="op">:</span> <span class="st">&#39;United Kingdom&#39;</span></a>
<a class="sourceLine" id="cb17-14" title="14"><span class="op">};</span></a></code></pre></div>
<p>The Global Google Search context menu example creates multiple options from the list in <a href="/docs/extensions/examples/api/contextMenus/global_context_search/locales.js">locales.js</a>. When an extension contains more than one context menu, Google Chrome automatically collapses them into a single parent menu.</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/LhrliaEhN82maJmeNp7f.png”, alt=“Multiple Context Menus will Collapse”, height=“606”, width=“800” %}</p>
<h3 id="commands-commands">Commands {: #commands }</h3>
<p>Extensions can define specific <a href="/docs/extensions/reference/commands">commands</a> and bind them to a key combination. Register one or more commands in the manifest under the <code>"commands"</code> field.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb18-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Tab Flipper&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="dt">&quot;commands&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb18-5" title="5">    <span class="dt">&quot;flip-tabs-forward&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb18-6" title="6">      <span class="dt">&quot;suggested_key&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb18-7" title="7">        <span class="dt">&quot;default&quot;</span><span class="fu">:</span> <span class="st">&quot;Ctrl+Shift+Right&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb18-8" title="8">        <span class="dt">&quot;mac&quot;</span><span class="fu">:</span> <span class="st">&quot;Command+Shift+Right&quot;</span></a>
<a class="sourceLine" id="cb18-9" title="9">      <span class="fu">},</span></a>
<a class="sourceLine" id="cb18-10" title="10">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Flip tabs forward&quot;</span></a>
<a class="sourceLine" id="cb18-11" title="11">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb18-12" title="12">    <span class="dt">&quot;flip-tabs-backwards&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb18-13" title="13">      <span class="dt">&quot;suggested_key&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb18-14" title="14">        <span class="dt">&quot;default&quot;</span><span class="fu">:</span> <span class="st">&quot;Ctrl+Shift+Left&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb18-15" title="15">        <span class="dt">&quot;mac&quot;</span><span class="fu">:</span> <span class="st">&quot;Command+Shift+Left&quot;</span></a>
<a class="sourceLine" id="cb18-16" title="16">      <span class="fu">},</span></a>
<a class="sourceLine" id="cb18-17" title="17">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Flip tabs backwards&quot;</span></a>
<a class="sourceLine" id="cb18-18" title="18">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb18-19" title="19">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb18-20" title="20">  <span class="er">...</span></a>
<a class="sourceLine" id="cb18-21" title="21"><span class="fu">}</span></a></code></pre></div>
<p>Commands can be used to provide new or alternative browser shortcuts. The <a href="/docs/extensions/mv3/samples#search:tab%20flipper">Tab Flipper</a> sample extension listens to the <a href="/docs/extensions/reference/commands#event-onCommand"><code>commands.onCommand</code></a> event in the <a href="/docs/extensions/mv3/migrating_to_service_workers">background script</a> and defines functionality for each registered combination.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="va">chrome</span>.<span class="va">commands</span>.<span class="va">onCommand</span>.<span class="at">addListener</span>(command <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="co">// command will be &quot;flip-tabs-forward&quot; or &quot;flip-tabs-backwards&quot;</span></a>
<a class="sourceLine" id="cb19-3" title="3"></a>
<a class="sourceLine" id="cb19-4" title="4">  <span class="va">chrome</span>.<span class="va">tabs</span>.<span class="at">query</span>(<span class="op">{</span><span class="dt">currentWindow</span><span class="op">:</span> <span class="kw">true</span><span class="op">},</span> tabs <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-5" title="5">    <span class="co">// Sort tabs according to their index in the window.</span></a>
<a class="sourceLine" id="cb19-6" title="6">    <span class="va">tabs</span>.<span class="at">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> <span class="va">a</span>.<span class="at">index</span> <span class="op">-</span> <span class="va">b</span>.<span class="at">index</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-7" title="7">    <span class="kw">const</span> activeIndex <span class="op">=</span> <span class="va">tabs</span>.<span class="at">findIndex</span>((tab) <span class="kw">=&gt;</span> <span class="va">tab</span>.<span class="at">active</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-8" title="8">    <span class="kw">const</span> lastTab <span class="op">=</span> <span class="va">tabs</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb19-9" title="9">    <span class="kw">let</span> newIndex <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb19-10" title="10">    <span class="cf">if</span> (command <span class="op">===</span> <span class="st">&#39;flip-tabs-forward&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-11" title="11">      newIndex <span class="op">=</span> activeIndex <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> lastTab : activeIndex <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb19-12" title="12">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span>  <span class="co">// &#39;flip-tabs-backwards&#39;</span></a>
<a class="sourceLine" id="cb19-13" title="13">      newIndex <span class="op">=</span> activeIndex <span class="op">===</span> lastTab <span class="op">?</span> <span class="dv">0</span> : activeIndex <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb19-14" title="14">    <span class="op">}</span></a>
<a class="sourceLine" id="cb19-15" title="15">    <span class="va">chrome</span>.<span class="va">tabs</span>.<span class="at">update</span>(tabs[newIndex].<span class="at">id</span><span class="op">,</span> <span class="op">{</span><span class="dt">active</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">highlighted</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-16" title="16">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-17" title="17"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="override-pages-override">Override pages {: #override }</h3>
<p>An extension can <a href="/docs/extensions/mv3/override">override</a> and replace the History, New Tab, or Bookmarks web page with a custom HTML file. Like a <a href="/docs/extensions/mv3/user_interface/#popup">popup</a>, it can include specialized logic and style, but does not allow inline JavaScript. A single extension is limited to overriding only one of the three possible pages.</p>
<p>Register an override page in the manifest under the <code>"chrome_url_overrides"</code> field.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb20-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb20-2" title="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Awesome Override Extension&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb20-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb20-4" title="4"></a>
<a class="sourceLine" id="cb20-5" title="5">  <span class="dt">&quot;chrome_url_overrides&quot;</span> <span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb20-6" title="6">    <span class="dt">&quot;newtab&quot;</span><span class="fu">:</span> <span class="st">&quot;override_page.html&quot;</span></a>
<a class="sourceLine" id="cb20-7" title="7">  <span class="fu">},</span></a>
<a class="sourceLine" id="cb20-8" title="8">  <span class="er">...</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="fu">}</span></a></code></pre></div>
<p>The <code>"newtab"</code> field should be replaced with <code>"bookmarks"</code> or <code>"history"</code> when overriding those pages.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">&lt;html&gt;</span></a>
<a class="sourceLine" id="cb21-2" title="2">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb21-3" title="3">  <span class="kw">&lt;title&gt;</span>New Tab<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb21-4" title="4">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb21-5" title="5">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb21-6" title="6">    <span class="kw">&lt;h1&gt;</span>Hello World<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb21-7" title="7">    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;logic.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></a>
<a class="sourceLine" id="cb21-8" title="8">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb21-9" title="9"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
</body>
</html>
