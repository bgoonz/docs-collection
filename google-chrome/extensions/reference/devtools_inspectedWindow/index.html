<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>index</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p>Use <code>chrome.devtools.inspectedWindow</code> to interact with the inspected window: obtain the tab ID for the inspected page, evaluate the code in the context of inspected window, reload the page, or obtain the list of resources within the page.</p>
<p>See <a href="/docs/extensions/mv3/devtools">DevTools APIs summary</a> for general introduction to using Developer Tools APIs.</p>
<h2 id="overview">Overview</h2>
<p>The <a href="#property-tabId"><code>tabId</code></a> property provides the tab identifier that you can use with the <a href="/docs/extensions/reference/tabs"><code>chrome.tabs.*</code></a> API calls. However, please note that <code>chrome.tabs.*</code> API is not exposed to the Developer Tools extension pages due to security considerations—you will need to pass the tab ID to the background page and invoke the <code>chrome.tabs.*</code> API functions from there.</p>
<p>The <code>reload</code> method may be used to reload the inspected page. Additionally, the caller can specify an override for the user agent string, a script that will be injected early upon page load, or an option to force reload of cached resources.</p>
<p>Use the <code>getResources</code> call and the <code>onResourceContent</code> event to obtain the list of resources (documents, stylesheets, scripts, images etc) within the inspected page. The <code>getContent</code> and <code>setContent</code> methods of the <code>Resource</code> class along with the <code>onResourceContentCommitted</code> event may be used to support modification of the resource content, for example, by an external editor.</p>
<h2 id="executing-code-in-the-inspected-window-executing-code">Executing Code in the Inspected Window {: #executing-code }</h2>
<p>The <code>eval</code> method provides the ability for extensions to execute JavaScript code in the context of the inspected page. This method is powerful when used in the right context and dangerous when used inappropriately. Use the <a href="/docs/extensions/reference/tabs#method-executeScript"><code>tabs.executeScript</code></a> method unless you need the specific functionality that the <code>eval</code> method provides.</p>
<p>Here are the main differences between the <code>eval</code> and <code>tabs.executeScript</code> methods:</p>
<ul>
<li>The <code>eval</code> method does not use an isolated world for the code being evaluated, so the JavaScript state of the inspected window is accessible to the code. Use this method when access to the JavaScript state of the inspected page is required.</li>
<li>The execution context of the code being evaluated includes the <a href="https://developers.google.com/web/tools/chrome-devtools/">Developer Tools console API</a>. For example, the code can use <code>inspect</code> and <code>$0</code>.</li>
<li>The evaluated code may return a value that is passed to the extension callback. The returned value has to be a valid JSON object (it may contain only primitive JavaScript types and acyclic references to other JSON objects). <em>Please observe extra care while processing the data received from the inspected page—the execution context is essentially controlled by the inspected page; a malicious page may affect the data being returned to the extension.</em></li>
</ul>
<p>{% Aside ‘caution’ %}</p>
<p><strong>Important:</strong> Due to the security considerations explained above, the <a href="/docs/extensions/reference/tabs#method-executeScript"><code>tabs.executeScript</code></a> method is the preferred way for an extension to access DOM data of the inspected page in cases where the access to JavaScript state of the inspected page is not required.</p>
<p>{% endAside %}</p>
<p>Note that a page can include multiple different JavaScript execution contexts. Each frame has its own context, plus an additional context for each extension that has content scripts running in that frame.</p>
<p>By default, the <code>eval</code> method executes in the context of the main frame of the inspected page.</p>
<p>The <code>eval</code> method takes an optional second argument that you can use to specify the context in which the code is evaluated. This <em>options</em> object can contain one or more of the following keys:</p>
<dl>
<dt><code>frameURL</code></dt>
<dd><p>Use to specify a frame other than the inspected page’s main frame.</p>
</dd>
<dt><code>contextSecurityOrigin</code></dt>
<dd><p>Use to select a context within the specified frame according to its <a href="https://www.ietf.org/rfc/rfc6454.txt">web origin</a>.</p>
</dd>
<dt><code>useContentScriptContext</code></dt>
<dd><p>If true, execute the script in the same context as the extensions’s content scripts. (Equivalent to specifying the extensions’s own web orgin as the context security origin.) This can be used to exchange data with the content script.</p>
</dd>
</dl>
<h2 id="examples">Examples</h2>
<p>The following code checks for the version of jQuery used by the inspected page:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="va">chrome</span>.<span class="va">devtools</span>.<span class="va">inspectedWindow</span>.<span class="at">eval</span>(</a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="st">&quot;jQuery.fn.jquery&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">function</span>(result<span class="op">,</span> isException) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="cf">if</span> (isException) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;the page is not using jQuery&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-7" title="7">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;The page is using jQuery v&quot;</span> <span class="op">+</span> result)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-10" title="10">)<span class="op">;</span></a></code></pre></div>
<p>You can find more examples that use Developer Tools APIs in <a href="/docs/extensions/mv3/samples#search:devtools">Samples</a>.</p>
</body>
</html>
