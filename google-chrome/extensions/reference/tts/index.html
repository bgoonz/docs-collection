<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>index</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h2 id="overview">Overview</h2>
<p>Chrome provides native support for speech on Windows (using SAPI 5), Mac OS X, and Chrome OS, using speech synthesis capabilities provided by the operating system. On all platforms, the user can install extensions that register themselves as alternative speech engines.</p>
<h2 id="generating-speech">Generating speech</h2>
<p>Call <code>speak()</code> from your extension or Chrome App to speak. For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">speak</span>(<span class="st">&#39;Hello, world.&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>To stop speaking immediately, just call <code>stop()</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">stop</span>()<span class="op">;</span></a></code></pre></div>
<p>You can provide options that control various properties of the speech, such as its rate, pitch, and more. For example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">speak</span>(<span class="st">&#39;Hello, world.&#39;</span><span class="op">,</span> <span class="op">{</span><span class="st">&#39;rate&#39;</span><span class="op">:</span> <span class="fl">2.0</span><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>It’s also a good idea to specify the language so that a synthesizer supporting that language (and regional dialect, if applicable) is chosen.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">speak</span>(<span class="st">&#39;Hello, world.&#39;</span><span class="op">,</span> <span class="op">{</span><span class="st">&#39;lang&#39;</span><span class="op">:</span> <span class="st">&#39;en-US&#39;</span><span class="op">,</span> <span class="st">&#39;rate&#39;</span><span class="op">:</span> <span class="fl">2.0</span><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>By default, each call to <code>speak()</code> interrupts any ongoing speech and speaks immediately. To determine if a call would be interrupting anything, you can call <code>isSpeaking()</code>. In addition, you can use the <code>enqueue</code> option to cause this utterance to be added to a queue of utterances that will be spoken when the current utterance has finished.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">speak</span>(<span class="st">&#39;Speak this first.&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">speak</span>(</a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="st">&#39;Speak this next, when the first sentence is done.&#39;</span><span class="op">,</span> <span class="op">{</span><span class="st">&#39;enqueue&#39;</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>A complete description of all options can be found in the <a href="#method-speak"><code>tts.speak</code></a> below. Not all speech engines will support all options.</p>
<p>To catch errors and make sure you’re calling <code>speak()</code> correctly, pass a callback function that takes no arguments. Inside the callback, check <a href="/docs/extensions/runtime#property-lastError"><code>runtime.lastError</code></a> to see if there were any errors.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">speak</span>(</a>
<a class="sourceLine" id="cb6-2" title="2">  utterance<span class="op">,</span></a>
<a class="sourceLine" id="cb6-3" title="3">  options<span class="op">,</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="cf">if</span> (<span class="va">chrome</span>.<span class="va">runtime</span>.<span class="at">lastError</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-6" title="6">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Error: &#39;</span> <span class="op">+</span> <span class="va">chrome</span>.<span class="va">runtime</span>.<span class="va">lastError</span>.<span class="at">message</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb6-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-9" title="9">)<span class="op">;</span></a></code></pre></div>
<p>The callback returns right away, before the engine has started generating speech. The purpose of the callback is to alert you to syntax errors in your use of the TTS API, not to catch all possible errors that might occur in the process of synthesizing and outputting speech. To catch these errors too, you need to use an event listener, described below.</p>
<h2 id="listening-to-events">Listening to events</h2>
<p>To get more real-time information about the status of synthesized speech, pass an event listener in the options to <code>speak()</code>, like this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">speak</span>(</a>
<a class="sourceLine" id="cb7-2" title="2">  utterance<span class="op">,</span></a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="op">{</span></a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="dt">onEvent</span><span class="op">:</span> <span class="kw">function</span>(event) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-5" title="5">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Event &#39;</span> <span class="op">+</span> <span class="va">event</span>.<span class="at">type</span> <span class="op">+</span> <span class="st">&#39; at position &#39;</span> <span class="op">+</span> <span class="va">event</span>.<span class="at">charIndex</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6">      <span class="cf">if</span> (<span class="va">event</span>.<span class="at">type</span> <span class="op">==</span> <span class="st">&#39;error&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-7" title="7">        <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Error: &#39;</span> <span class="op">+</span> <span class="va">event</span>.<span class="at">errorMessage</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-8" title="8">      <span class="op">}</span></a>
<a class="sourceLine" id="cb7-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb7-10" title="10">  <span class="op">},</span></a>
<a class="sourceLine" id="cb7-11" title="11">  callback</a>
<a class="sourceLine" id="cb7-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>Each event includes an event type, the character index of the current speech relative to the utterance, and for error events, an optional error message. The event types are:</p>
<ul>
<li><code>'start'</code>: The engine has started speaking the utterance.</li>
<li><code>'word'</code>: A word boundary was reached. Use <code>event.charIndex</code> to determine the current speech position.</li>
<li><code>'sentence'</code>: A sentence boundary was reached. Use <code>event.charIndex</code> to determine the current speech position.</li>
<li><code>'marker'</code>: An SSML marker was reached. Use <code>event.charIndex</code> to determine the current speech position.</li>
<li><code>'end'</code>: The engine has finished speaking the utterance.</li>
<li><code>'interrupted'</code>: This utterance was interrupted by another call to <code>speak()</code> or <code>stop()</code> and did not finish.</li>
<li><code>'cancelled'</code>: This utterance was queued, but then cancelled by another call to <code>speak()</code> or <code>stop()</code> and never began to speak at all.</li>
<li><code>'error'</code>: An engine-specific error occurred and this utterance cannot be spoken. Check <code>event.errorMessage</code> for details.</li>
</ul>
<p>Four of the event types—<code>'end'</code>, <code>'interrupted'</code>, <code>'cancelled'</code>, and <code>'error'</code>—are <em>final</em>. After one of those events is received, this utterance will no longer speak and no new events from this utterance will be received.</p>
<p>Some voices may not support all event types, and some voices may not send any events at all. If you do not want to use a voice unless it sends certain events, pass the events you require in the <code>requiredEventTypes</code> member of the options object, or use <code>getVoices()</code> to choose a voice that meets your requirements. Both are documented below.</p>
<h2 id="ssml-markup">SSML markup</h2>
<p>Utterances used in this API may include markup using the <a href="https://www.w3.org/TR/speech-synthesis">Speech Synthesis Markup Language (SSML)</a>. If you use SSML, the first argument to <code>speak()</code> should be a complete SSML document with an XML header and a top-level <code>&lt;speak&gt;</code> tag, not a document fragment.</p>
<p>For example:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">speak</span>(</a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="st">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&#39;</span> <span class="op">+</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="st">&#39;&lt;speak&gt;&#39;</span> <span class="op">+</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="st">&#39;  The &lt;emphasis&gt;second&lt;/emphasis&gt; &#39;</span> <span class="op">+</span></a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="st">&#39;  word of this sentence was emphasized.&#39;</span> <span class="op">+</span></a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="st">&#39;&lt;/speak&gt;&#39;</span></a>
<a class="sourceLine" id="cb8-7" title="7">)<span class="op">;</span></a></code></pre></div>
<p>Not all speech engines will support all SSML tags, and some may not support SSML at all, but all engines are required to ignore any SSML they don’t support and to still speak the underlying text.</p>
<h2 id="choosing-a-voice">Choosing a voice</h2>
<p>By default, Chrome chooses the most appropriate voice for each utterance you want to speak, based on the language. On most Windows, Mac OS X, and Chrome OS systems, speech synthesis provided by the operating system should be able to speak any text in at least one language. Some users may have a variety of voices available, though, from their operating system and from speech engines implemented by other Chrome extensions. In those cases, you can implement custom code to choose the appropriate voice, or to present the user with a list of choices.</p>
<p>To get a list of all voices, call <code>getVoices()</code> and pass it a function that receives an array of <code>TtsVoice</code> objects as its argument:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="va">chrome</span>.<span class="va">tts</span>.<span class="at">getVoices</span>(</a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="kw">function</span>(voices) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">voices</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-4" title="4">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Voice &#39;</span> <span class="op">+</span> i <span class="op">+</span> <span class="st">&#39;:&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-5" title="5">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  name: &#39;</span> <span class="op">+</span> voices[i].<span class="at">voiceName</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-6" title="6">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  lang: &#39;</span> <span class="op">+</span> voices[i].<span class="at">lang</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-7" title="7">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  extension id: &#39;</span> <span class="op">+</span> voices[i].<span class="at">extensionId</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  event types: &#39;</span> <span class="op">+</span> voices[i].<span class="at">eventTypes</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb9-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-11" title="11">)<span class="op">;</span></a></code></pre></div>
</body>
</html>
