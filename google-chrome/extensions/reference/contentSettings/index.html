<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>index</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h2 id="manifest">Manifest</h2>
<p>You must declare the “contentSettings” permission in your extension’s manifest to use the API. For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;My extension&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="er">...</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">&quot;permissions&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="st">&quot;contentSettings&quot;</span></a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="er">...</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="fu">}</span></a></code></pre></div>
<h2 id="content-setting-patterns">Content setting patterns</h2>
<p>You can use patterns to specify the websites that each content setting affects. For example, <code>https://*.youtube.com/*</code> specifies youtube.com and all of its subdomains. The syntax for content setting patterns is the same as for <a href="/docs/extensions/mv2/match_patterns">match patterns</a>, with a few differences:</p>
<ul>
<li>For <code>http</code>, <code>https</code>, and <code>ftp</code> URLs, the path must be a wildcard (<code>/*</code>). For <code>file</code> URLs, the path must be completely specified and <strong>must not</strong> contain wildcards.</li>
<li>In contrast to match patterns, content setting patterns can specify a port number. If a port number is specified, the pattern only matches websites with that port. If no port number is specified, the pattern matches all ports.</li>
</ul>
<h3 id="pattern-precedence">Pattern precedence</h3>
<p>When more than one content setting rule applies for a given site, the rule with the more specific pattern takes precedence.</p>
<p>For example, the following patterns are ordered by precedence:</p>
<ol type="1">
<li><code>https://www.example.com/*</code></li>
<li><code>https://*.example.com/*</code> (matching example.com and all subdomains)</li>
<li><code>&lt;all_urls&gt;</code> (matching every URL)</li>
</ol>
<p>Three kinds of wildcards affect how specific a pattern is:</p>
<ul>
<li>Wildcards in the port (for example <code>https://www.example.com:*/*</code>)</li>
<li>Wildcards in the scheme (for example <code>*://www.example.com:123/*</code>)</li>
<li>Wildcards in the hostname (for example <code>https://*.example.com:123/*</code>)</li>
</ul>
<p>If a pattern is more specific than another pattern in one part but less specific in another part, the different parts are checked in the following order: hostname, scheme, port. For example, the following patterns are ordered by precedence:</p>
<ol type="1">
<li><code>https://www.example.com:*/*</code> Specifies the hostname and scheme.</li>
<li><code>*:/www.example.com:123/*</code> Not as high, because although it specifies the hostname, it doesn’t specify the scheme.</li>
<li><code>https://*.example.com:123/*</code> Lower because although it specifies the port and scheme, it has a wildcard in the hostname.</li>
</ol>
<h2 id="primary-and-secondary-patterns">Primary and secondary patterns</h2>
<p>The URL taken into account when deciding which content setting to apply depends on the content type. For example, for <a href="#property-notifications"><code>contentSettings.notifications</code></a> settings are based on the URL shown in the omnibox. This URL is called the “primary” URL.</p>
<p>Some content types can take additional URLs into account. For example, whether a site is allowed to set a <a href="#property-cookies"><code>contentSettings.cookies</code></a> is decided based on the URL of the HTTP request (which is the primary URL in this case) as well as the URL shown in the omnibox (which is called the “secondary” URL).</p>
<p>If multiple rules have primary and secondary patterns, the rule with the more specific primary pattern takes precedence. If there multiple rules have the same primary pattern, the rule with the more specific secondary pattern takes precedence. For example, the following list of primary/secondary pattern pairs is ordered by precedence:</p>
<table>
<tbody>
<tr>
<th>
Precedence
</th>
<th>
Primary pattern
</th>
<th>
Secondary pattern
</th>
</tr>
<tr>
<td>
1
</td>
<td>
<code>https://www.moose.com/*</code>,
</td>
<td>
<code>https://www.wombat.com/*</code>
</td>
</tr>
<tr>
<td>
2
</td>
<td>
<code>https://www.moose.com/*</code>,
</td>
<td>
<code>&lt;all_urls&gt;</code>
</td>
</tr>
<tr>
<td>
3
</td>
<td>
<code>&lt;all_urls&gt;</code>,
</td>
<td>
<code>https://www.wombat.com/*</code>
</td>
</tr>
<tr>
<td>
4
</td>
<td>
<code>&lt;all_urls&gt;</code>,
</td>
<td>
<code>&lt;all_urls&gt;</code>
</td>
</tr>
</tbody>
</table>
<h2 id="resource-identifiers">Resource identifiers</h2>
<p>Resource identifiers allow you to specify content settings for specific subtypes of a content type. Currently, the only content type that supports resource identifiers is <a href="#property-plugins"><code>contentSettings.plugins</code></a>, where a resource identifier identifies a specific plugin. When applying content settings, first the settings for the specific plugin are checked. If there are no settings found for the specific plugin, the general content settings for plugins are checked.</p>
<p>For example, if a content setting rule has the resource identifier <code>adobe-flash-player</code> and the pattern <code>&lt;all_urls&gt;</code>, it takes precedence over a rule without a resource identifier and the pattern <code>https://www.example.com/*</code>, even if that pattern is more specific.</p>
<p>You can get a list of resource identifiers for a content type by calling the <a href="#method-ContentSetting-getResourceIdentifiers"><code>contentSettings.ContentSetting.getResourceIdentifiers</code></a> method. The returned list can change with the set of installed plugins on the user’s machine, but Chrome tries to keep the identifiers stable across plugin updates.</p>
<h2 id="examples">Examples</h2>
<p>You can find samples of this API on the <a href="/docs/extensions/mv2/samples#search:contentSettings">sample page</a>.</p>
</body>
</html>
