<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2015-01-05" />
  <title>Shared modules</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Shared modules</h1>
<p class="date">2015-01-05</p>
</header>
<p>{% include ‘partials/extensions/mv2-legacy-page.md’ %}</p>
<p><em>Shared Modules</em> are permissionless collections of resources that can be shared between other extensions and apps. Common uses of Shared Modules are:</p>
<ul>
<li>As an API. You can distribute a Shared Module that can provide HTML, JS, and other source to provide an API which can be updated independently of the extensions that depend on it. This can be useful for runtimes and game engines, where apps are often smaller payloads of data that run on the Shared Module’s code.</li>
<li>As a download optimization. The Shared Module contains common resources used by many extensions. It’s downloaded once, the first time a dependent extension is installed.</li>
</ul>
<h2 id="manifest-manifest">Manifest {: #manifest }</h2>
<p>Shared Modules are used through two <a href="/docs/extensions/mv2/tabs">manifest</a> fields: export and import.</p>
<p>The <em>export</em> field indicates an extension is a Shared Module that exports its resources:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;My Shared Module&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">&quot;export&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="er">//</span> <span class="er">Optional</span> <span class="er">list</span> <span class="er">of</span> <span class="er">extension</span> <span class="er">IDs</span> <span class="er">explicitly</span> <span class="er">allowed</span> <span class="er">to</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="er">//</span> <span class="er">import</span> <span class="er">this</span> <span class="er">Shared</span> <span class="er">Module&#39;s</span> <span class="er">resources.</span>  <span class="er">If</span> <span class="er">no</span> <span class="er">allowlist</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="er">//</span> <span class="er">is</span> <span class="er">given</span><span class="fu">,</span> <span class="er">all</span> <span class="er">extensions</span> <span class="er">are</span> <span class="er">allowed</span> <span class="er">to</span> <span class="er">import</span> <span class="er">it.</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="dt">&quot;allowlist&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb1-9" title="9">      <span class="st">&quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb1-10" title="10">      <span class="st">&quot;bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&quot;</span></a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb1-12" title="12">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="er">//</span> <span class="er">Note:</span> <span class="er">no</span> <span class="er">permissions</span> <span class="er">are</span> <span class="er">allowed</span> <span class="er">in</span> <span class="er">Shared</span> <span class="er">Modules</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="fu">}</span></a></code></pre></div>
<p>The <em>import</em> field is used by extensions and apps to declare that they depend on the resources from particular Shared Modules:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;My Importing Extension&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="er">...</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">&quot;import&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;cccccccccccccccccccccccccccccccc&quot;</span><span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;dddddddddddddddddddddddddddddddd&quot;</span></a>
<a class="sourceLine" id="cb2-8" title="8">     <span class="st">&quot;minimum_version&quot;</span><span class="er">:</span> <span class="st">&quot;0.5&quot;</span> <span class="er">//</span> <span class="er">optional</span></a>
<a class="sourceLine" id="cb2-9" title="9">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="fu">}</span></a></code></pre></div>
<h2 id="accessing-resources-accessing_resources">Accessing resources {: #accessing_resources }</h2>
<p>Shared Module resources are accessed by a reserved path <em>_modules/<shared_module_id></em> in the root of your importing extension. For example, to include the script ‘foo.js’ from a Shared Module with ID “cccccccccccccccccccccccccccccccc”, use this path from the root of your extension:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;_modules/cccccccccccccccccccccccccccccccc/foo.js&quot;</span><span class="kw">&gt;</span></a></code></pre></div>
<p>If the importing extension has ID “aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa”, then the full URL to resources in the Shared Module is:</p>
<pre class="text"><code>chrome-extension://aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/_modules/cccccccccccccccccccccccccccccccc/</code></pre>
<p>Note that since resources from Shared Modules are overlaid into the origin of the importing extension, all privileges granted to the importing extension are available to code in Shared Modules. Also, the Shared Module is able to access resources in the importing extension by using absolute paths.</p>
<h2 id="install-uninstall-install_uninstall">Install / uninstall {: #install_uninstall }</h2>
<p>A Shared Module is automatically installed from the Chrome Web Store when needed by a dependent extension, and automatically uninstalled when the last extension which references it is uninstalled. In order to upload an extension which uses a Shared Module, the Shared Module must be published in the Chrome Web Store and the extension must not be restricted from using the Shared Module by its allowlist.</p>
<p>During development, you will need to manually install any Shared Modules your extension uses. Automatic installs do not happen for extensions that are side-loaded or loaded as unpacked extensions. For locally installed, unpacked Shared Modules, you must use the <a href="/docs/extensions/mv2/manifest/key">key</a> field to ensure the Shared Modules use the correct IDs.</p>
</body>
</html>
