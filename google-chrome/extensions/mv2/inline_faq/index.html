<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2018-06-12" />
  <title>Inline-installation deprecation migration FAQ</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Inline-installation deprecation migration FAQ</h1>
<p class="date">2018-06-12</p>
</header>
<p>{% include ‘partials/extensions/mv2-legacy-page.md’ %}</p>
<p>As of 06/12/2018, inline installation is deprecated. For more information, read our <a href="https://blog.chromium.org/2018/06/improving-extension-transparency-for.html">Chromium Blog post</a>.</p>
<h2 id="timeline-questions-timeline_questions">Timeline questions {: #timeline_questions }</h2>
<h3 id="what-will-change-on-2018-06-12-change_jun12">What will change on 2018-06-12? {: #change_jun12 }</h3>
<p>Any Chrome Web Store item, such as extensions and apps, first published on or after 2018-06-12 will have inline-installation disabled. “Disabled” means that inline installation attempts will be automatically redirected to the item’s details page on the Chrome Web Store where the user can complete the installation. Nothing will change for existing items in the store that were first published before this date.</p>
<h3 id="what-will-change-on-2018-09-12-change_sep12">What will change on 2018-09-12? {: #change_sep12 }</h3>
<p>The disabling will apply to ALL items regardless of publish date. 100% of inline installation attempts for all items will be redirected to the Chrome Web Store where users can complete the install.</p>
<h3 id="what-do-i-need-to-do-before-2018-09-12-what_do_sept12">What do I need to do before 2018-09-12? {: #what_do_sept12 }</h3>
<p>You don’t need to change anything, but we suggest you review your installation flow and replace the <code>chrome.webstore.install()</code> call with a navigation directly to your item’s Chrome Web Store listing. Doing that now lets you verify it produces the best user experience.</p>
<p>We also recommend that you incorporate the new Chrome Web Store <a href="/webstore/branding#badge">download badge</a> into your install flow on your site.</p>
<h3 id="what-will-change-in-m71-dec-2018-change_dec18">What will change in M71 (Dec 2018)? {: #change_dec18 }</h3>
<p>Beginning in M71, Chrome will no longer support the <code>chrome.webstore.install()</code> method and calling it will fail, resulting in a broken installation flow on your site. At this point calls to the API will throw a JavaScript TypeError. You should remove any calls to the API method before this date.</p>
<h2 id="after-inline-installation-is-disabled-after_disabled">After inline-installation is disabled {: #after_disabled }</h2>
<h3 id="what-will-the-installation-flow-look-like-future_flow">What will the installation flow look like? {: #future_flow }</h3>
<p>When your site calls <code>chrome.webstore.install()</code>, Chrome will no longer trigger a dialog immediately but will instead open a new foreground tab to the details page of the Chrome WebStore (i.e. https://chrome.google.com/webstore/detail/<item-id>). From there, the user can go through the standard installation process by clicking “install”, and a dialog will prompt the user to read permissions and install or cancel. After the dialog is dismissed, the tab will remain on the Chrome Web Store.</p>
<h3 id="how-can-i-tell-if-my-installation-was-successful-if_successful">How can I tell if my installation was successful? {: #if_successful }</h3>
<p>When you call <code>chrome.webstore.install()</code>, the failureCallback will be triggered with an error saying that the user was redirected to the Chrome Web Store. It will not indicate whether the installation was successful or not. Remember that beginning in Chrome 71, calls to <code>chrome.webstore.install()</code> will fail so the failureCallback will never be executed.</p>
<p>Without this API, your site can still detect if your item is already installed by communicating between the extension and your web site. This can be done through extension messaging and the <a href="/docs/extensions/mv2/messaging#external-webpage">externally_connectable</a> property in the manifest.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="er">&quot;externally_connectable&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">&quot;matches&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;https://www.example.com/*&quot;</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="fu">}</span></a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">// JS running on https://example.com</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="va">chrome</span>.<span class="va">runtime</span>.<span class="at">sendMessage</span>(<span class="st">&#39;&lt;extension id&gt;&#39;</span><span class="op">,</span> <span class="op">&lt;</span>message<span class="op">&gt;,</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="cf">if</span> (<span class="va">chrome</span>.<span class="va">runtime</span>.<span class="at">lastError</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-5" title="5">      <span class="co">// Extension is not installed.</span></a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="op">}</span> <span class="cf">catch</span> (e) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="co">// Extension is not installed.</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="op">}</span></a></code></pre></div>
<h3 id="how-do-i-trigger-an-informational-page-after-installation-trigger">How do I trigger an informational page after installation? {: #trigger }</h3>
<p>Use the <a href="/docs/extensions/runtime#event-onInstalled">chrome.runtime</a> event and open a new tab after installation. Here’s an example to use in your background page:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">chrome</span>.<span class="va">runtime</span>.<span class="va">onInstalled</span>.<span class="at">addListener</span>(<span class="kw">function</span> <span class="at">listener</span>(details) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="cf">if</span> (<span class="va">details</span>.<span class="at">reason</span> <span class="op">===</span> <span class="va">chrome</span>.<span class="va">runtime</span>.<span class="va">OnInstalledReason</span>.<span class="at">INSTALL</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="va">chrome</span>.<span class="va">tabs</span>.<span class="at">create</span>(<span class="op">{</span><span class="dt">url</span><span class="op">:</span> <span class="st">&quot;https://www.example.com/&quot;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="va">chrome</span>.<span class="va">runtime</span>.<span class="va">onInstalled</span>.<span class="at">removeListener</span>(listener)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="can-i-get-an-exception-exception">Can I get an exception? {: #exception }</h3>
<p>No. This policy change applies to all items in the Chrome Web Store without exception.</p>
</body>
</html>
