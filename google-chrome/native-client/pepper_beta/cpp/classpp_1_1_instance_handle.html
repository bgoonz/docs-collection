<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>classpp_1_1_instance_handle</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<p>—json {“title”:“pp::InstanceHandle Class Reference”} —</p>
<p><a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle-members/">List of all members.</a></p>
<h2 id="public-member-functions">Public Member Functions</h2>
<table>
<tbody>
<tr class="odd">
<td style="text-align: right;">
 
</td>
<td>
<a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle#aa9e22c3dc382054c2f3dd816396348dc" class="el">InstanceHandle</a> (<a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance/" class="el">Instance</a> *instance)
</td>
</tr>
<tr class="even">
<td style="text-align: right;">
 
</td>
<td>
<a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle#a9f001cc657a9b9b9307dfa5b20d31856" class="el">InstanceHandle</a> (PP_Instance <a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle#ac413eef4320841121cae58be977d1f7d" class="el">pp_instance</a>)
</td>
</tr>
<tr class="odd">
<td style="text-align: right;">
PP_Instance 
</td>
<td>
<a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle#ac413eef4320841121cae58be977d1f7d" class="el">pp_instance</a> () const
</td>
</tr>
</tbody>
</table>
<hr />
<p><span id="details" class="anchor" style="margin: 0;"></span></p>
<h2 id="detailed-description">Detailed Description</h2>
<p>An instance handle identifies an instance in a constructor for a resource.</p>
<p>This class solves two different problems:</p>
<ol type="1">
<li><p>A <a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance/" class="el">pp::Instance</a> object’s lifetime is managed by the system on the main pepper thread of the module. This means that it may get destroyed at any time based on something that happens on the web page. Therefore, it’s not safe to refer to a <code>pp::Instance</code> object on a background thread. Instead, we need to pass some kind of identifier to resource constructors so that they may safely be used on background threads. If the instance becomes invalid, the resource creation will fail on the background thread, but it won’t crash.</p></li>
<li><p><code>PP_Instance</code> would be a good identifier to use for this case. However, using <code>PP_Instance</code> in the constructor to resources is problematic because it is just a typedef for an integer, as is a <code>PP_Resource</code>. Many resources have alternate constructors that just take an existing <code>PP_Resource</code>, so the constructors would be ambiguous. Having this wrapper around a <code>PP_Instance</code> prevents this ambiguity, and also provides a nice place to consolidate an implicit conversion from <code>pp::Instance*</code> for prettier code on the main thread (you can just pass “this” to resource constructors in your instance objects).</p></li>
</ol>
<p>You should always pass an <code>InstanceHandle</code> to background threads instead of a <code>pp::Instance</code>, and use them in resource constructors and code that may be used from background threads.</p>
<hr />
<h2 id="constructor-destructor-documentation">Constructor &amp; Destructor Documentation</h2>
<p><span id="aa9e22c3dc382054c2f3dd816396348dc" class="anchor" style="margin: 0;"></span></p>
<table>
<tbody>
<tr class="odd">
<td>
<a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle#aa9e22c3dc382054c2f3dd816396348dc" class="el">pp::InstanceHandle::InstanceHandle</a>
</td>
<td>
(
</td>
<td>
<a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance/" class="el">Instance</a> * 
</td>
<td>
<em>instance</em>
</td>
<td>
)
</td>
<td>
</td>
</tr>
</tbody>
</table>
<p>Implicit constructor for converting a <code>pp::Instance</code> to an instance handle.</p>
<strong>Parameters:</strong><br />

<table>
<tbody>
<tr class="odd">
<td>
[in]
</td>
<td>
instance
</td>
<td>
The instance with which this <code>InstanceHandle</code> will be associated.
</td>
</tr>
</tbody>
</table>
<p><span id="a9f001cc657a9b9b9307dfa5b20d31856" class="anchor" style="margin: 0;"></span></p>
<table>
<tbody>
<tr class="odd">
<td>
<a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle#aa9e22c3dc382054c2f3dd816396348dc" class="el">pp::InstanceHandle::InstanceHandle</a>
</td>
<td>
(
</td>
<td>
PP_Instance 
</td>
<td>
<em>pp_instance</em>
</td>
<td>
)
</td>
<td>
<code> [inline, explicit]</code>
</td>
</tr>
</tbody>
</table>
<p>This constructor explicitly converts a <code>PP_Instance</code> to an instance handle.</p>
<p>This should not be implicit because it can make some resource constructors ambiguous. <code>PP_Instance</code> is just a typedef for an integer, as is <code>PP_Resource</code>, so the compiler can get confused between the two.</p>
<strong>Parameters:</strong><br />

<table>
<tbody>
<tr class="odd">
<td>
[in]
</td>
<td>
pp_instance
</td>
<td>
The instance with which this <code>InstanceHandle</code> will be associated.
</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="member-function-documentation">Member Function Documentation</h2>
<p><span id="ac413eef4320841121cae58be977d1f7d" class="anchor" style="margin: 0;"></span></p>
<table>
<tbody>
<tr class="odd">
<td>
PP_Instance <a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle#ac413eef4320841121cae58be977d1f7d" class="el">pp::InstanceHandle::pp_instance</a>
</td>
<td>
(
</td>
<td>
</td>
<td>
)
</td>
<td>
const<code> [inline]</code>
</td>
</tr>
</tbody>
</table>
<p>The <a href="/docs/native-client/pepper_beta/cpp/classpp_1_1_instance_handle#ac413eef4320841121cae58be977d1f7d" class="el" title="The pp_instance() function returns the PP_Instance.">pp_instance()</a> function returns the <code>PP_Instance</code>.</p>
<p><strong>Returns:</strong><br />
A <code>PP_Instance</code> internal instance handle.</p>
<hr />
<p>The documentation for this class was generated from the following file:</p>
<ul>
<li><a href="/docs/native-client/pepper_beta/cpp/instance__handle_8h/" class="el">instance_handle.h</a></li>
</ul>
</body>
</html>
