<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2020-02-04" />
  <title>Lay of the Land</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Lay of the Land</h1>
<p class="date">2020-02-04</p>
</header>
<p>There’s a fair amount of ecosystem around Trusted Web Activities and it can be quite difficult to see how everything relates and what you should use. This article hopes to address that.</p>
<p>If you are new to Trusted Web Activities or just looking for the recommended set of tools you should be using today, here’s what you need to be aware of:</p>
<ul>
<li><a href="https://github.com/GoogleChromeLabs/bubblewrap/">Bubblewrap</a>: a NodeJS tool that allows developers to create and build an Android APK that wraps an existing PWA. The generated application is powered by Trusted Web Activities, but this is transparent to the developer. No Android development experience is required. Check the <a href="https://github.com/GoogleChromeLabs/bubblewrap/blob/master/README.md">Bubblewrap documentation</a> to get started.</li>
<li><a href="https://github.com/GoogleChrome/android-browser-helper">android-browser-helper</a>: an Android Library that encapsulates the Trusted Web Activities protocol. Recommended for developers who are familiar with Android development and want to use Trusted Web Activities as one of the Activities in their Android App or make customisations that are not supported by Bubblewrap. To get started with android-browser-helper, check the <a href="/docs/android/trusted-web-activity/integration-guide">documentation</a> and our <a href="https://github.com/GoogleChrome/android-browser-helper/tree/master/demos">demos</a>.</li>
</ul>
<p>The next section gives a brief summary of all the projects in relation to each other. Finally (for the really curious) there’s a history section to show you how we got here and where we’re planning to go in the near future.</p>
<h2 id="an-overview-of-the-libraries-library-overview">An overview of the libraries {: #library-overview }</h2>
<p>Here’s a short, single sentence summary of each of the libraries you may end up using:</p>
<ul>
<li><a href="https://developer.android.com/jetpack/androidx/releases/browser">androidx.browser</a>, an Android library for interacting with the browser installed on the user’s device.</li>
<li>The <a href="https://github.com/GoogleChrome/android-browser-helper">Android Browser Helper</a>, a library building on androidx.browser for Trusted Web Activity clients providing convenience methods and sensible defaults.</li>
<li><a href="https://github.com/GoogleChromeLabs/bubblewrap/">Bubblewrap</a>, a tool to create Trusted Web Activities from PWAs without touching any Java code.</li>
</ul>
<p>In addition, each of these libraries/tools replaces an older one:</p>
<ul>
<li><strong>androidx.browser</strong> replaces the <a href="https://developer.android.com/topic/libraries/support-library/packages#custom-tabs">Custom Tabs Support Library</a>.</li>
<li>The <strong>Android Browser Helper</strong> should be used instead of the <a href="https://github.com/GoogleChrome/custom-tabs-client">custom-tabs-client</a>.</li>
<li><strong>Bubblewrap</strong> should be used instead of <a href="https://github.com/GoogleChromeLabs/svgomg-twa">svgomg-twa</a>.</li>
</ul>
<h2 id="history-history">History {: #history }</h2>
<h3 id="the-android-support-library-android-support-library">The Android Support Library {: #android-support-library }</h3>
<p>The <a href="https://developer.android.com/topic/libraries/support-library">Android Support Library</a> extends the Android platform with new APIs and compatibility features. It is split across multiple packages, with the <a href="https://developer.android.com/topic/libraries/support-library/packages#custom-tabs">Custom Tabs Support Library</a> containing functionality for interacting with browsers on the user’s system. Development of the <strong>Custom Tabs Support Library</strong> was primarily done in the <a href="https://github.com/GoogleChrome/custom-tabs-client">custom-tabs-client</a> GitHub repo, with the changes being upstreamed back into the <strong>Android Support Library</strong>.</p>
<p>A <a href="/docs/android/custom-tabs">Custom Tab</a> is an Android Activity that uses a browser to display a web page. The primary benefit for the developer is that it can be themed and has a close button, so the user still remains in the developer’s app (instead of leaving the app and going to the full browsing experience). As an Android API, Custom Tabs can be supported by any browser and will use the user’s default browser (although this can be overridden by developers).</p>
<p>Because <a href="/docs/android/trusted-web-activity">Trusted Web Activities</a> are built on top of Custom Tabs, they started their life in this <strong>custom-tabs-client</strong> library. Trusted Web Activities remove the Custom Tabs top bar when the user is browsing a site owned by the app’s developer. This opens the doors to seamless integration of your website within a native Android app, and can be used to create apps where all functionality is provided by the web.</p>
<h3 id="androidx-androidx">AndroidX {: #androidx }</h3>
<p>The <strong>Android Support Library</strong> was later rebranded as <a href="https://developer.android.com/jetpack/androidx">AndroidX</a>, which itself is part of a larger effort to improve developer experience called <a href="https://developer.android.com/jetpack">JetPack</a>. So, Custom Tabs and Trusted Web Activities had to move from the <strong>Custom Tabs Support Library</strong> to the new <a href="https://developer.android.com/jetpack/androidx/releases/browser">androidx.browser</a>.</p>
<p>Some of the code that we had written in custom-tabs-client was appropriate for a library of Trusted Web Activity helper classes, but not for an Android API. Code dealing with checking for out of date Chrome versions and prompting the user to update or making decisions about how data should be stored could not move into AndroidX. Therefore, we created an alternative library to contain these parts of <strong>custom-tabs-client</strong> that couldn’t go into <strong>androidx.browser</strong>, and so the <a href="https://github.com/GoogleChrome/android-browser-helper">Android Browser Helper</a> was born.</p>
<p>The <strong>Android Browser Helper</strong> was created to contain code that can be specific to browsers (not just Chrome, we’re open to code specifically for other browsers) and can make concrete decisions that libraries shouldn’t. We took this opportunity to generally separate the roles of these two libraries:</p>
<ul>
<li><strong>androidx.browser</strong> contains the basic building blocks for interacting with browsers on the user’s system.</li>
<li>The <strong>Android Browser Helper</strong> contains convenient to use and sensible default implementations.</li>
</ul>
<h3 id="bootstrapping-bootstrapping">Bootstrapping {: #bootstrapping }</h3>
<p>Developers are busy people, with a lot of work to do and deadlines to match. To help with this, we created two tools to let user’s bootstrap their Trusted Web Activity.</p>
<p>The first (and oldest) is <a href="https://github.com/GoogleChromeLabs/svgomg-twa">svgomg-twa</a>, which is a GitHub hosted Android Project that launches a Trusted Web Activity. It was originally designed to be a demo project which evolved into more of a template. Users can clone that repo and modify the <a href="https://github.com/GoogleChromeLabs/svgomg-twa/blob/master/app/build.gradle">build.gradle</a> file to point to their own website, build it and produce a Trusted Web Activity without touching any Java code. (Getting the Digital Asset Links to verified does require more effort, read more <a href="/docs/android/trusted-web-activity/quick-start">here</a>.)</p>
<p><strong>svgomg-twa</strong> started out depending on custom-tabs-client, but then moved over to the Android Browser Helper (and transitively androidx.browser).</p>
<p>The newest and shiniest tool is <a href="https://github.com/GoogleChromeLabs/bubblewrap/">Bubblewrap</a>, a Node.js tool that will take your Web App Manifest and generate a Trusted Web Activity for you. This is the easiest way to create a Trusted Web Activity from an existing PWA and doesn’t require any Android development knowledge.</p>
<h2 id="near-future-near-future">Near Future {: #near-future }</h2>
<p>We will be deprecating <strong>svgomg-twa</strong> for two reasons:</p>
<ul>
<li><strong>Bubblewrap</strong> essentially generates a filled out <strong>svgomg-twa</strong> for a developer. It does this interactively and can take the configuration from a Web App manifest (which a PWA will likely already have).</li>
<li>If developers want a reference for how to start their own Trusted Web Activity project from scratch, they can look at the Android Browser Helpers <a href="https://github.com/GoogleChrome/android-browser-helper/tree/master/demos">demos</a> directory.</li>
</ul>
<p>New developers should use <strong>Bubblewrap</strong> to generate their project instead. If you’re already using <strong>svgomg-twa</strong> and have made some heavy modifications, you’ll be fine to continue doing so, but won’t get updates.</p>
<p>We plan to make <strong>Bubblewrap</strong> as capable as possible, so if there’s an obvious feature missing or you come across a bug, feel free to <a href="https://github.com/GoogleChromeLabs/bubblewrap/issues/new">create an issue</a>.</p>
</body>
</html>
