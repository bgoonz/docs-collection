<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2021-05-18" />
  <title>First-Party Sets</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">First-Party Sets</h1>
<p class="date">2021-05-18</p>
</header>
<!--lint disable no-smart-quotes-->
<h2 id="implementation-status">Implementation status</h2>
<ul>
<li><a href="https://web.dev/origin-trials/">In origin trial</a> Chrome 89 to 93.</li>
<li><a href="https://developer.chrome.com/origintrials/#/view_trial/988540118207823873">Register for origin trial</a>.</li>
<li><a href="https://chromestatus.com/feature/5640066519007232">Chrome Platform Status</a>.</li>
<li><a href="https://www.chromium.org/updates/first-party-sets">Chromium Projects</a>.</li>
</ul>
<h2 id="why-do-we-need-first-party-sets">Why do we need First-Party Sets?</h2>
<p>{% YouTube id=‘cNJ8mZ-J3F8’ %}</p>
<p>Web pages are composed of content from multiple <a href="/docs/privacy-sandbox/glossary#origin">origins</a>. Some content is first-party and comes from the top-level site the user is visiting. Other content may come from third parties, such as ads, embedded media, or shared resources such as JavaScript libraries from <a href="https://www.cloudflare.com/en-gb/learning/cdn/what-is-a-cdn/">CDNs</a>. Third parties may also want to correlate user activity across different sites by using mechanisms such as <a href="/docs/privacy-sandbox/glossary#origin">cookies</a>.</p>
<p>Browsers are proposing privacy models that restrict access to user identity within a cross-site context. However, many organizations have related sites with different domain names, such as domains for different countries (<code>example.com</code> and <code>example.co.uk</code>, for example). It should be possible to allow related domain names with an appropriate relationship, perhaps common ownership, to declare themselves as belonging to the same first party, so browsers treat those domains as first-party in situations where first party and third party are treated differently.</p>
<p>Any solution would also need to prevent abuse of the system. For example, it should not be possible to declare organizations that include unrelated sites with different owners, in order to gain first-party privileges.</p>
<h2 id="how-do-first-party-sets-work">How do First-Party Sets work?</h2>
<p>A website can declare that it is a member (or owner) of a set of web domains by serving a manifest file that defines its relationship to the other domains: a JSON file at a <code>.well-known/first-party-set</code> address.</p>
<p>Suppose <code>a.example</code>, <code>b.example</code>, and <code>c.example</code> wish to form a first-party set owned by <code>a.example</code>. The sites would then serve the following resources:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="er">//</span> <span class="er">https://a.example/.well-known/first-party-set</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="dt">&quot;owner&quot;</span><span class="fu">:</span> <span class="st">&quot;a.example&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">&quot;members&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;b.example&quot;</span><span class="ot">,</span> <span class="st">&quot;c.example&quot;</span><span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="er">...</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="fu">}</span></a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="er">//</span> <span class="er">https://b.example/.well-known/first-party-set</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="dt">&quot;owner&quot;</span><span class="fu">:</span> <span class="st">&quot;a.example&quot;</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="fu">}</span></a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="er">//</span> <span class="er">https://c.example/.well-known/first-party-set</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-15" title="15">    <span class="dt">&quot;owner&quot;</span><span class="fu">:</span> <span class="st">&quot;a.example&quot;</span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="fu">}</span></a></code></pre></div>
<p>The owner domain hosts a manifest file that lists its member domains. A browser can ask a member website to specify its owner, and then check the owner’s manifest to verify the relationship.</p>
<p>Browser policies are expected to prevent abuse or misuse. For example, First-Party Sets must not enable the exchange of user information across unrelated sites, or the grouping of sites that are not owned by the same entity. One possible way for a site to register could be for the site to submit their proposed group of domains to a public tracker (such as a dedicated GitHub repository) along with information needed to satisfy browser policy. Verification of the owner’s control over member domains may also require a challenge to be served at a <code>.well-known</code> URL on each of the domains in the set.</p>
<p>The complementary proposal to First-Party Sets is the <code>SameParty</code> cookie attribute. Specifying the <code>SameParty</code> attribute on a cookie instructs the browser to include the cookie when its context is part of the same First-Party Set as the top-level context.</p>
<p>For example, for the First-Party Set described above, a.example can set the following cookie:</p>
<p><code>Set-Cookie: session=123; Secure; SameSite=Lax; SameParty</code></p>
<p>This means that when a visitor on b.example or c.example makes a request to a.example, the <code>session</code> cookie is included on that request.</p>
<hr />
<h2 id="engage-and-share-feedback">Engage and share feedback</h2>
<ul>
<li><strong>Origin trial</strong>: Register and take part in the <a href="https://developer.chrome.com/origintrials/#/view_trial/988540118207823873">Chrome origin trial</a>.</li>
<li><strong>GitHub</strong>: Read the <a href="https://github.com/privacycg/first-party-sets">proposal</a>, <a href="https://github.com/privacycg/first-party-sets/issues">raise questions and follow discussion</a>.</li>
<li><strong>Developer support</strong>: Ask questions and join discussions on the <a href="https://github.com/GoogleChromeLabs/privacy-sandbox-dev-support">Privacy Sandbox Developer Support repo</a>.</li>
</ul>
<h2 id="find-out-more">Find out more</h2>
<ul>
<li><a href="https://github.com/privacycg/first-party-sets">First-Party Sets technical explainer</a></li>
<li><a href="https://chromestatus.com/feature/5640066519007232">Chrome Platform Status</a>.</li>
<li><a href="https://www.chromium.org/updates/first-party-sets">Chromium Projects</a>.</li>
</ul>
</body>
</html>
