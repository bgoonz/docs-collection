
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=7767ec14407de">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Visual searching with the Web Perception Toolkit</title>
<meta name="description" content="Wouldn't it be great if users could search your site using their camera? " />

<link rel="canonical" href="https://web.dev/perception-toolkit/" />

<meta itemprop="name" content="Visual searching with the Web Perception Toolkit" />
<meta itemprop="description" content="Wouldn't it be great if users could search your site using their camera? " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/perception-toolkit/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Visual searching with the Web Perception Toolkit" />
<meta property="og:description" content="Wouldn't it be great if users could search your site using their camera? " />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="A series of screens shows a phone camera scanning an image and generating a link." />
<meta property="tag" content="visual-search" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Visual searching with the Web Perception Toolkit" />
<meta name="twitter:description" content="Wouldn't it be great if users could search your site using their camera? " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>








<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=0e57c3ac28fa5', 'module');




  loadScript('/js/content.js?v=43cb2075f666a', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="30" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
  

  
    <img     alt="A series of screens shows a phone camera scanning an image and generating a link."     class="w-hero w-hero--cover"     decoding="auto"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/SJQDe005xR0Cvu9JPt78.png?auto=format&w=1600 1600w"          width="1600"   />
  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#visual-searching-with-the-web-perception-toolkit" class="w-toc__header--link">
        Visual searching with the Web Perception Toolkit
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#how-does-it-work">How does it work?</a></li><li><a href="#structured-data">Structured data</a></li><li><a href="#the-user-experience">The user experience</a></li><li><a href="#formatting-cards">Formatting cards</a></li><li><a href="#conclusion">Conclusion</a></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@medleyjp"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    <a class="w-actions__fab w-actions__fab--subscribe gc-analytics-event" data-category="web.dev" data-label="view-subscribe" data-action="click" href="/newsletter/">
  <span>subscribe</span>
</a>

  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      
        <div class="w-post-breadcrumbs">
          <ul class="w-breadcrumbs">
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link w-breadcrumbs__link--left-justify gc-analytics-event"
      data-category="web.dev"
      data-label="post, home breadcrumb"
      data-action="click"
      href="/"
    >
      Home
    </a>
  </li>

  <svg
    class="w-breadcrumbs__icon"
    xmlns="http://www.w3.org/2000/svg"
    height="24"
    viewBox="0 0 24 24"
    width="24"
    aria-hidden="true"
  >
    <path d="M0 0h24v24H0V0z" fill="none" />
    <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
  </svg>

  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link gc-analytics-event"
      data-category="web.dev"
      data-label="post, path breadcrumb"
      data-action="click"
      href=/blog
    >
      All articles
    </a>
  </li>
</ul>
        </div>
      

      <h1 id="visual-searching-with-the-web-perception-toolkit" class="w-article-header__headline">Visual searching with the Web Perception Toolkit</h1>
      
        <p class="w-article-header__subhead w-mb--non">
          Easy to use real-world interactivity.
        </p>
      

      
        <div class="w-author__published">
          <time>May 7, 2019</time>
          
        </div>
      
      

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/joemedley/"><img     alt="Joe Medley"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/ynJFmvKEbD9diZZsTdkD.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/ynJFmvKEbD9diZZsTdkD.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/ynJFmvKEbD9diZZsTdkD.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/ynJFmvKEbD9diZZsTdkD.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/ynJFmvKEbD9diZZsTdkD.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/ynJFmvKEbD9diZZsTdkD.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/joemedley/">Joe Medley</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/medleyjp"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/jpmedley">GitHub</a>
      </li>
      
      
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <p>Wouldn't it be great if users could search your site using their camera? Imagine
this. Your site is Razor McShaveyface. Your customers tell you they have trouble
finding the right cartridges for their razor when they reorder. They don't know
the right keywords for your product search. And let's be honest, they probably
never will.</p>
<p>What if they never need to? What if they could point their phone's camera at the
UPC code on package and your site could present them with the right cartridge
and a big red &quot;reorder&quot; button?</p>
<p>Think of other ways you can use a camera on a site. Imagine a site that
supports in-store price checking. Imagine getting information about a museum
exhibit or historical marker. Imagine identifying real-world landmarks in games
like geocaching or scavenger hunts.</p>
<p><a href="https://github.com/GoogleChromeLabs/perception-toolkit" rel="noopener">The Web Perception Toolkit</a>
makes these camera-based scenarios possible. In some cases you can even create
an experience without writing code.</p>
<h2 id="how-does-it-work">How does it work? <a class="w-headline-link" href="#how-does-it-work">#</a></h2>
<p>The open-source Web Perception Toolkit helps you add visual search to your
website. It passes a device camera stream through a set of detectors that map
real-world objects, here called &quot;targets&quot;, to content on your site. This mapping is defined
using Structured Data (JSON-LD) on your site. With this data, you can present the right information in a customizable
UI.</p>
<p>I'll show you enough of this to give you a taste of how it works. For a complete
explanation, check out the <a href="https://perceptiontoolkit.dev/getting-started/" rel="noopener">Getting
Started</a> guide, the <a href="https://perceptiontoolkit.dev/documentation/" rel="noopener">toolkit
reference</a>, the <a href="https://io.perceptiontoolkit.dev/" rel="noopener">I/O Sandbox demo</a> and the <a href="https://github.com/GoogleChromeLabs/perception-toolkit/tree/master/demo" rel="noopener">sample demos</a>.</p>
<h2 id="structured-data">Structured data <a class="w-headline-link" href="#structured-data">#</a></h2>
<p>The toolkit can't find just any target in the camera's view. You must provide it
with linked JSON data for the targets you want it to recognize. This data also
contains information about those targets that will be shown to the user.</p>
<p>The data is all you need to create a user experience like the one in the image
below. If you do nothing else, the Web Perception Toolkit can identify targets,
then show and hide cards based on the information provided in the data. Try this
for yourself using our <a href="https://github.com/GoogleChromeLabs/perception-toolkit/tree/master/demo/artifact-map" rel="noopener">artifact-map
demo</a>.</p>
<figure class="w-figure">
  <img     alt="The default interface is available by using just the linked data."     class="w-screenshot"     decoding="async"     height="518"          loading="lazy"     sizes="(min-width: 300px) 300px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/UD5t3RD9HZ7OIHVaAg31.png?auto=format&w=600 600w"          width="300"   />
  <figcaption class="w-figcaption w-figcaption--center">
    The default interface.
  </figcaption>
</figure>
<p>Add data to your site with a JSON linked data file, included using a <code>&lt;script&gt;</code>
tag and the <code>&quot;application/ld+json&quot;</code> MIME type.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>application/ld+json<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//path/to/your/sitemap.jsonld<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>The file itself looks something like this:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token string">"@context"</span><span class="token operator">:</span> <span class="token string">"https://schema.googleapis.com/"</span><span class="token punctuation">,</span><br>    <span class="token string">"@type"</span><span class="token operator">:</span> <span class="token string">"ARArtifact"</span><span class="token punctuation">,</span><br>    <span class="token string">"arTarget"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token string">"@type"</span><span class="token operator">:</span> <span class="token string">"Barcode"</span><span class="token punctuation">,</span><br>      <span class="token string">"text"</span><span class="token operator">:</span> <span class="token string">"012345678912"</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token string">"arContent"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token string">"@type"</span><span class="token operator">:</span> <span class="token string">"WebPage"</span><span class="token punctuation">,</span><br>      <span class="token string">"url"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/demo/artifact-map/products/product1.html"</span><span class="token punctuation">,</span><br>      <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"Product 1"</span><span class="token punctuation">,</span><br>      <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"This is a product with a barcode"</span><span class="token punctuation">,</span><br>      <span class="token string">"image"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/demo/artifact-map/products/product1.png"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre>
</web-copy-code><h2 id="the-user-experience">The user experience <a class="w-headline-link" href="#the-user-experience">#</a></h2>
<p>What if you want more than the default user experience? The toolkit gives you
lifecycle events, Card and Button objects for crafting the user experience
around those events, and an easy way to style the cards. I'm going to show a
little of this with code based losely on our <a href="https://perceptiontoolkit.dev/getting-started/" rel="noopener">Getting
Started</a> guide.</p>
<p>The most important lifecycle event is <code>PerceivedResults</code>, which is fired every
time a target is found. A target can be a real-world object or a marker such as
a bar code or QR code.</p>
<p>The process for responding to this event is the same as for any other event with
an exception already alluded to. If you don't implement the event, a user
interface is automatically created using structured data. To override this
behavior start your event handler by calling<code>event.preventDefault()</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onPerceivedResults</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// preventDefault() to stop default result Card from showing.</span><br>  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// Process the event.</span><br><span class="token punctuation">}</span><br>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>PerceptionToolkit<span class="token punctuation">.</span>Events<span class="token punctuation">.</span>PerceivedResults<span class="token punctuation">,</span> onPerceivedResults<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Let's look at the event more closely. The event itself contains arrays of
markers and targets that it has both found and lost. When targets are found in
the world, the even fires and passes found objects in <code>event.found</code>. Similarly,
when targets pass from the camera view the event fires again, passing lost
objects in <code>event.lost</code>. This helps account for hand and marker movements:
cameras not held steadily enough, dropped markers, that kind of thing.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onPerceivedResults</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// preventDefault() to stop default result Card from showing</span></span><br><span class="highlight-line">  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">const</span> <span class="token punctuation">{</span> found<span class="token punctuation">,</span> lost <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">;</span></mark><br><span class="highlight-line">  <span class="token comment">// Deal with lost and found objects.</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>Next, you show an appropriate card based on what the toolkit found.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onPerceivedResults</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> found<span class="token punctuation">,</span> lost <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">;</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lost<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token comment">// Object not found.</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token comment">// Show a card with an offer to show the catalog.</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token comment">// Object found.</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token comment">// Show a card with a reorder button.</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>Adding cards and buttons is simply a matter of instantiating them and appending
them to a parent object. For example:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Card <span class="token punctuation">}</span> <span class="token operator">=</span> PerceptionToolkit<span class="token punctuation">.</span>Elements<span class="token punctuation">;</span><br><span class="token keyword">const</span> card <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>card<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'Your message here.'</span><br>container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span>'</code></pre>
</web-copy-code><p>Finally, here's what the whole thing looks like. Notice the conveniences I've
added to the user experience. Whether the marker is found or not, I provide
one-click access to what I think is most useful in the circumstances.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onPerceivedResults</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// preventDefault() to stop default result Card from showing</span><br>  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span> found<span class="token punctuation">,</span> lost <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span> ActionButton<span class="token punctuation">,</span> Card <span class="token punctuation">}</span> <span class="token operator">=</span> PerceptionToolkit<span class="token punctuation">.</span>Elements<span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lost<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">//Make a view catalog button.</span><br>    <span class="token keyword">const</span> button <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">ActionButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    button<span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string">'View catalog'</span><span class="token punctuation">;</span><br>    button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      card<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">//Run code to launch a catalog.</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">//Make a card for the button.</span><br>    <span class="token keyword">const</span> card <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    card<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'We wish we could help, but that\'s not our razor. Would you like to see our catalog?'</span><span class="token punctuation">;</span><br>    card<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">//Tell the toolkit it does not keep the card around</span><br>    <span class="token comment">// if it finds something it recognizes.</span><br>    card<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>notRecognized <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">//Make a reorder button.</span><br>    <span class="token keyword">const</span> button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActionButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    button<span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string">'Reorder'</span><span class="token punctuation">;</span><br>    botton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      card<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">//Run code to reorder.</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token keyword">const</span> card <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    card<span class="token punctuation">.</span>src <span class="token operator">=</span> found<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">;</span><br>    card<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h2 id="formatting-cards">Formatting cards <a class="w-headline-link" href="#formatting-cards">#</a></h2>
<p>The Web Perception Toolkit provides built-in formatting for cards and buttons
with the default stylesheet. But you can easily add your own. The provided
<code>Card</code> and <code>ActionButton</code> objects contain <code>style</code> properties (among many others)
that let you put your organizational stamp on the look and feel. To include the
default stylesheet, add a <code>&lt;link&gt;</code> element to your page.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//path/to/toolkit/styles/perception-toolkit.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p>As I said at the top, this is not an exhaustive look at the <a href="https://github.com/GoogleChromeLabs/perception-toolkit" rel="noopener">Web Perception
Toolkit</a>. Hopefully it gives
you a sense of how easy it is to add visual searching to a website. Learn more
with the <a href="https://perceptiontoolkit.dev/getting-started/" rel="noopener">Getting Started</a> guide
and the <a href="https://github.com/GoogleChromeLabs/perception-toolkit/tree/master/demo" rel="noopener">sample
demos</a>.
Dig in to the <a href="https://perceptiontoolkit.dev/documentation/" rel="noopener">toolkit
documentation</a> to learn what it
can do.</p>


    

    
  <div class="w-chips ">
    
      
    
      
    
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>May 7, 2019</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/master/src/site/content/en/blog/perception-toolkit/index.md"
      >
        Improve article
      </a>
       
    </div>

    
    <web-feedback additional-questions="api"></web-feedback>
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/blog"
  >
    Return to all articles
  </a>
</nav>
  
</div>

  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://devwebfeed.appspot.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">
              DevWeb Content Firehose
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/@ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/home"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
