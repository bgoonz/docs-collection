<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/css/main.css?v=d97fd81a1dab7" />

    <link
      rel="preload"
      as="font"
      crossorigin
      href="/fonts/material-icons/regular.woff2"
    />

    <link
      rel="preload"
      as="font"
      crossorigin
      href="/fonts/google-sans/regular/latin.woff2"
    />
    <link
      rel="preload"
      as="font"
      crossorigin
      href="/fonts/google-sans/bold/latin.woff2"
    />

    <meta name="theme-color" content="#fff" />

    <title>Codelab: Building a Stories component</title>
    <meta
      name="description"
      content="Learn how to build an experience similar to Instagram Stories on the web. "
    />

    <link
      rel="canonical"
      href="https://web.dev/codelab-building-a-stories-component/"
    />

    <meta itemprop="name" content="Codelab: Building a Stories component" />
    <meta
      itemprop="description"
      content="Learn how to build an experience similar to Instagram Stories on the web. "
    />
    <meta
      itemprop="image"
      content="https://web-dev.imgix.net/image/admin/0nRwu5FF7f5tHsgT9PgE.jpg?auto=format&fit=max&w=1200&fm=auto"
    />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta
      property="og:url"
      content="https://web.dev/codelab-building-a-stories-component/"
    />
    <meta property="og:site_name" content="web.dev" />
    <meta property="og:title" content="Codelab: Building a Stories component" />
    <meta
      property="og:description"
      content="Learn how to build an experience similar to Instagram Stories on the web. "
    />
    <meta
      property="og:image"
      content="https://web-dev.imgix.net/image/admin/0nRwu5FF7f5tHsgT9PgE.jpg?auto=format&fit=max&w=1200&fm=auto"
    />
    <meta property="og:image:alt" content="" />
    <meta property="tag" content="css" />
    <meta property="tag" content="dom" />
    <meta property="tag" content="javascript" />
    <meta property="tag" content="layout" />
    <meta property="tag" content="mobile" />
    <meta property="tag" content="ux" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Codelab: Building a Stories component"
    />
    <meta
      name="twitter:description"
      content="Learn how to build an experience similar to Instagram Stories on the web. "
    />
    <meta
      name="twitter:image"
      content="https://web-dev.imgix.net/image/admin/0nRwu5FF7f5tHsgT9PgE.jpg?auto=format&fit=max&w=1200&fm=auto"
    />
    <link
      rel="alternate"
      href="/feed.xml"
      type="application/atom+xml"
      data-title="web.dev feed"
    />

    <link rel="manifest" href="/manifest.webmanifest" />

    <link rel="shortcut icon" href="/images/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/images/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/images/apple-touch-icon.png"
    />
    <link
      rel="mask-icon"
      color="#0054ff"
      href="/images/safari-pinned-tab.svg"
    />

    <script>
      window.ga =
        window.ga ||
        function () {
          (ga.q = ga.q || []).push(arguments);
        };
      ga.l = +new Date();
      ga("create", "UA-126406676-2");
      ga("set", "transport", "beacon");
      ga("set", "anonymizeIp", true);
      ga("set", "page", window.location.pathname);
      ga("set", "dimension5", "4");
      ga("send", "pageview");
    </script>

    <script>
      function loadScript(url, type) {
        const s = document.createElement("script");
        s.src = url;
        if (type) {
          s.type = type;
        }
        if (type === "module") {
          s.async = false; // Preserve load order.
          const pre = document.createElement("link");
          pre.rel = "modulepreload";
          pre.href = url;
          document.head.append(pre);
          // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
          window.addEventListener("DOMContentLoaded", () => {
            document.head.append(s);
          });
        } else {
          document.head.append(s);
        }
      }
      loadScript("/js/app.js?v=53e15d8694e9c", "module");

      loadScript("/js/content.js?v=7fe77beaf3765", "module");

      loadScript("https://www.google-analytics.com/analytics.js", null);
    </script>
  </head>
  <body class="unresolved">
    <web-snackbar-container></web-snackbar-container>

    <web-header class="header-default" role="navigation">
      <button
        data-open-drawer-button
        class="w-button--svg w-button--round"
        aria-label="Open menu"
      >
        <svg
          class="icon"
          role="img"
          aria-label="menu"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          height="24"
          width="24"
        >
          <path d="M0 0h24v24H0z" fill="none" />
          <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
        </svg>

        <span class="w-tooltip w-tooltip--left">Open menu</span>
      </button>

      <a
        href="/"
        class="header-default__logo-link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Site logo"
      >
        <img
          class="header-default__logo"
          width="125"
          height="30"
          src="/images/lockup.svg"
          alt="web.dev"
        />
      </a>

      <div class="header-default__middle">
        <div class="header-default__links">
          <a
            href="/learn/"
            class="header-default__link gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Tab: Learn"
          >
            Learn
          </a>

          <a
            href="/measure/"
            class="header-default__link gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Tab: Measure"
          >
            Measure
          </a>

          <a
            href="/blog/"
            class="header-default__link gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Tab: Blog"
          >
            Blog
          </a>

          <a
            href="/about/"
            class="header-default__link gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Tab: About"
          >
            About
          </a>
        </div>
        <web-search results-id="search-main-results"></web-search>
        <web-search-results id="search-main-results"></web-search-results>
      </div>

      <web-profile-switcher-container></web-profile-switcher-container>
    </web-header>

    <web-navigation-drawer class="drawer-default" type="modal">
      <nav data-drawer-container>
        <div class="drawer-default__contents">
          <div class="drawer-default__header">
            <button
              data-drawer-close-button
              class="drawer-default__hide w-button--svg w-button--round"
              aria-label="Close"
            >
              <svg
                class="icon"
                role="img"
                aria-label="close"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                height="24"
                width="24"
              >
                <path d="M0 0h24v24H0z" fill="none" />
                <path
                  d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                />
              </svg>

              <span class="w-tooltip">Close</span>
            </button>
            <a
              href="/"
              class="gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Site logo"
            >
              <img
                width="125"
                height="30"
                class="drawer-default__logo"
                src="/images/lockup.svg"
                alt="web.dev"
              />
            </a>
          </div>
          <a
            href="/learn/"
            class="drawer-default__link gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="SideNav: Learn"
          >
            Learn
          </a>
          <a
            href="/measure/"
            class="drawer-default__link gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="SideNav: Measure"
          >
            Measure
          </a>
          <a
            href="/blog/"
            class="drawer-default__link gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="SideNav: Blog"
          >
            Blog
          </a>
          <a
            href="/about/"
            class="drawer-default__link gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="SideNav: About"
          >
            About
          </a>
        </div>
      </nav>
    </web-navigation-drawer>

    <main>
      <div id="content">
        <div class="codelab-landing-page">
          <web-codelab
            glitch="gui-challenges-stories-codelab"
            path="app/index.html"
          >
            <div class="web-codelab__instructions">
              <h1 class="w-headline w-headline--two web-codelab__headline">
                Codelab: Building a Stories component
              </h1>

              <div class="w-author__published">
                <time>Nov 25, 2020</time>
              </div>

              <div class="w-authors w-mt--xl w-pt--sm">
                <div class="w-author">
                  <a href="/authors/adamargyle/"
                    ><img
                      alt="Adam Argyle"
                      class="w-author__image"
                      decoding="async"
                      height="64"
                      loading="lazy"
                      sizes="(min-width: 64px) 64px, calc(100vw - 48px)"
                      src="https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?auto=format&fit=crop&h=64&w=64"
                      srcset="
                        https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,
                        https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,
                        https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,
                        https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,
                        https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x
                      "
                      width="64"
                  /></a>
                  <div
                    class="w-author__info"
                    style="
                      display: flex;
                      flex-direction: column;
                      justify-content: center;
                    "
                  >
                    <cite class="w-author__name">
                      <a class="w-author__name-link" href="/authors/adamargyle/"
                        >Adam Argyle</a
                      >
                    </cite>
                    <ul class="w-author__link-list">
                      <li class="w-author__link-listitem">
                        <a
                          class="w-author__link"
                          href="https://twitter.com/argyleink"
                          >Twitter</a
                        >
                      </li>
                      <li class="w-author__link-listitem">
                        <a
                          class="w-author__link"
                          href="https://github.com/argyleink"
                          >GitHub</a
                        >
                      </li>
                      <li class="w-author__link-listitem">
                        <a
                          class="w-author__link"
                          href="https://glitch.com/@argyleink"
                          >Glitch</a
                        >
                      </li>
                      <li class="w-author__link-listitem">
                        <a class="w-author__link" href="https://nerdy.dev"
                          >Blog</a
                        >
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <p>
                This codelab teaches you how to build an experience like
                Instagram Stories on the web. We'll build the component as we
                go, starting with HTML, then CSS, then JavaScript.
              </p>
              <p>
                Check out my blog post
                <a href="/building-a-stories-component"
                  >Building a Stories component</a
                >
                to learn about the progressive enhancements made while building
                this component.
              </p>
              <div class="youtube">
                <lite-youtube videoid="PzvdREGR0Xw"> </lite-youtube>
              </div>
              <div class="w-aside w-aside--note">
                <p>
                  This post assumes that you're familiar with the Instagram
                  Stories UX and will use terminology from that experience (e.g.
                  a &quot;friend's story&quot;).
                </p>
              </div>
              <h2 id="setup">
                Setup <a class="w-headline-link" href="#setup">#</a>
              </h2>
              <ol>
                <li>
                  Click <strong>Remix to Edit</strong> to make the project
                  editable.
                </li>
                <li>Open <code>app/index.html</code>.</li>
              </ol>
              <h2 id="html">
                HTML <a class="w-headline-link" href="#html">#</a>
              </h2>
              <p>
                I always aim to use
                <a
                  href="https://en.wikipedia.org/wiki/Semantic_HTML"
                  rel="noopener"
                  >semantic HTML</a
                >. Since each friend can have any number of stories, I thought
                it was meaningful to use a <code>&lt;section&gt;</code> element
                for each friend and an <code>&lt;article&gt;</code> element for
                each story. Let's start from the beginning though. First, we
                need a container for our stories component.
              </p>
              <p>
                Add a <code>&lt;div&gt;</code> element to your
                <code>&lt;body&gt;</code>:
              </p>
              <web-copy-code>
                <pre
                  class="language-html"
                ><code class="language-html"><mark class="highlight-line highlight-line-active"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stories<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></mark><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></mark></code></pre></web-copy-code
              ><!-- TODO(kayce): Why not use "friend" instead of "user"? -->
              <p>
                Add some <code>&lt;section&gt;</code> elements to represent
                friends:
              </p>
              <web-copy-code>
                <pre
                  class="language-html"
                ><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stories<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></mark><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span></code></pre>
              </web-copy-code>
              <p>
                Add some <code>&lt;article&gt;</code> elements to represent
                stories:
              </p>
              <!--

Each friend has some pictures. We'll call each picture a `.story`.
Next, let's dig into how and where we'll put pictures in this component.

### Placeholder loading technique

Let's use a placeholder loading technique for each `.story`. We'll use CSS's
`background-image` property, which allows us to specify more than one background
image. We can put them in an order so that our user picture is on top and will
show up automatically when it's done loading. To enable this, we'll put
our image URL into a custom property (`--bg`), and use it within our CSS to
layer with the loading placeholder.

-->
              <web-copy-code>
                <pre
                  class="language-html"
                ><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stories<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>story<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">--bg</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://picsum.photos/480/840<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>story<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">--bg</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://picsum.photos/480/841<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></mark><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>story<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">--bg</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://picsum.photos/481/840<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></mark><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>story<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">--bg</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://picsum.photos/481/841<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></mark><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>story<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">--bg</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://picsum.photos/482/840<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>story<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">--bg</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://picsum.photos/482/843<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>story<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">--bg</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://picsum.photos/482/844<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></mark><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span></code></pre>
              </web-copy-code>
              <ul>
                <li>
                  We're using an image service (<code>picsum.com</code>) to help
                  prototype stories.
                </li>
                <li>
                  The <code>style</code> attribute on each
                  <code>&lt;article&gt;</code> is part of a placeholder loading
                  technique, which you'll learn more about in the next section.
                </li>
              </ul>
              <h2 id="css">CSS <a class="w-headline-link" href="#css">#</a></h2>
              <p>
                Our content is ready for style. Let's turn those bones into
                something folks will want to interact with. We'll be working
                mobile-first today.
              </p>
              <h3 id=".stories">
                <code>.stories</code>
                <a class="w-headline-link" href="#.stories">#</a>
              </h3>
              <p>
                For our
                <code>&lt;div class=&quot;stories&quot;&gt;</code> container we
                want a horizontal scrolling container. We can achieve this by:
              </p>
              <ul>
                <li>
                  Making the container a
                  <a
                    href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout"
                    rel="noopener"
                    >Grid</a
                  >
                </li>
                <li>Setting each child to fill the row track</li>
                <li>
                  Making the width of each child the width of a mobile device
                  viewport
                </li>
              </ul>
              <p>
                Grid will continue placing new <code>100vw</code>-wide columns
                to the right of the previous one, until it's placed all the HTML
                elements in your markup.
              </p>
              <!-- TODO(kayce): Resize this screenshot so there's less whitespace -->
              <figure class="w-figure">
                <img
                  alt="Chrome and DevTools open with a grid visual showing the full width layout"
                  decoding="async"
                  height="465"
                  loading="lazy"
                  sizes="(min-width: 800px) 800px, calc(100vw - 48px)"
                  src="https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format"
                  srcset="
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=200   200w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=228   228w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=260   260w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=296   296w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=338   338w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=385   385w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=439   439w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=500   500w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=571   571w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=650   650w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=741   741w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=845   845w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=964   964w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=1098 1098w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=1252 1252w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=1428 1428w,
                    https://web-dev.imgix.net/image/admin/oLbxOrfO2rUqmxnnleXw.png?auto=format&w=1600 1600w
                  "
                  width="800"
                />
                <figcaption class="w-figcaption">
                  Chrome DevTools showing grid column overflow, making a
                  horizontal scroller.
                </figcaption>
              </figure>
              <p>
                Add the following CSS to the bottom of
                <code>app/css/index.css</code>:
              </p>
              <web-copy-code>
                <pre
                  class="language-css"
                ><code class="language-css"><span class="token selector">.stories</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span><br>  <span class="token property">grid</span><span class="token punctuation">:</span> 1fr / auto-flow 100%<span class="token punctuation">;</span><br>  <span class="token property">gap</span><span class="token punctuation">:</span> 1ch<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
              </web-copy-code>
              <div class="w-aside w-aside--note">
                <p>
                  Feel free to stop and study the <code>body</code> styles if
                  you like! They're handling the responsive nature of our
                  Stories component. You can also collapse the
                  <code>body</code> styles by clicking the
                  <strong>∨</strong> symbol next to <code>body</code> on line 1.
                </p>
              </div>
              <p>
                Now that we have content extending beyond the viewport, it's
                time to tell that container how to handle it. Add the
                highlighted lines of code to your <code>.stories</code> ruleset:
              </p>
              <web-copy-code>
                <pre
                  class="language-css"
                ><code class="language-css"><span class="highlight-line"><span class="token selector">.stories</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">grid</span><span class="token punctuation">:</span> 1fr / auto-flow 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">gap</span><span class="token punctuation">:</span> 1ch<span class="token punctuation">;</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token property">overflow-x</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token property">scroll-snap-type</span><span class="token punctuation">:</span> x mandatory<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token property">overscroll-behavior</span><span class="token punctuation">:</span> contain<span class="token punctuation">;</span></mark><br><span class="highlight-line">  <span class="token property">touch-action</span><span class="token punctuation">:</span> pan-x<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
              </web-copy-code>
              <p>
                We want horizontal scrolling, so we'll set
                <code>overflow-x</code> to <code>auto</code>. When the user
                scrolls we want the component to gently rest on the next story,
                so we'll use <code>scroll-snap-type: x mandatory</code>. Read
                more about this CSS in the
                <a href="/building-a-stories-component/#scroll-snap-points"
                  >CSS Scroll Snap Points</a
                >
                and
                <a href="/building-a-stories-component/#overscroll-behavior"
                  >overscroll-behavior</a
                >
                sections of my blog post.
              </p>
              <p>
                It takes both the parent container and the children to agree to
                scroll snapping, so let's handle that now. Add the following
                code to the bottom of <code>app/css/index.css</code>:
              </p>
              <web-copy-code>
                <pre
                  class="language-css"
                ><code class="language-css"><span class="token selector">.user</span> <span class="token punctuation">{</span><br>  <span class="token property">scroll-snap-align</span><span class="token punctuation">:</span> start<span class="token punctuation">;</span><br>  <span class="token property">scroll-snap-stop</span><span class="token punctuation">:</span> always<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
              </web-copy-code>
              <p>
                Your app doesn't work yet, but the video below shows what
                happens when <code>scroll-snap-type</code> is enabled and
                disabled. When enabled, each horizontal scroll snaps to the next
                story. When disabled, the browser uses its default scrolling
                behavior.
              </p>
              <figure class="w-figure">
                <video
                  playsinline
                  controls
                  autoplay
                  loop
                  muted
                  class="w-screenshot"
                >
                  <!-- <source src="https://storage.googleapis.com/web-dev-assets/macos-system-ui/system-ui_wght.webm" type="video/webm"> -->
                  <source
                    src="https://storage.googleapis.com/web-dev-assets/gui-challenges/scroll-snap-example.mp4"
                  />
                </video>
              </figure>
              <p>
                That will get you scrolling through your friends, but we still
                have an issue with the stories to solve.
              </p>
              <h3 id=".user">
                <code>.user</code>
                <a class="w-headline-link" href="#.user">#</a>
              </h3>
              <p>
                Let's create a layout in the <code>.user</code> section that
                wrangles those child story elements into place. We're going to
                use a handy stacking trick to solve this. We're essentially
                creating a 1x1 grid where the row and column have the same Grid
                alias of <code>[story]</code>, and each story grid item is going
                to try and claim that space, resulting in a stack.
              </p>
              <p>
                Add the highlighted code to your <code>.user</code> ruleset:
              </p>
              <web-copy-code>
                <pre
                  class="language-css"
                ><code class="language-css"><span class="highlight-line"><span class="token selector">.user</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">scroll-snap-align</span><span class="token punctuation">:</span> start<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">scroll-snap-stop</span><span class="token punctuation">:</span> always<span class="token punctuation">;</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token property">grid</span><span class="token punctuation">:</span> [story] 1fr / [story] 1fr<span class="token punctuation">;</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
              </web-copy-code>
              <p>
                Add the following ruleset to the bottom of
                <code>app/css/index.css</code>:
              </p>
              <web-copy-code>
                <pre
                  class="language-css"
                ><code class="language-css"><span class="token selector">.story</span> <span class="token punctuation">{</span><br>  <span class="token property">grid-area</span><span class="token punctuation">:</span> story<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
              </web-copy-code>
              <p>
                Now, without absolute positioning, floats, or other layout
                directives that take an element out of flow, we're still in
                flow. Plus, it's like barely any code, look at that! This gets
                broken down in the video and the blog post in more detail.
              </p>
              <h3 id=".story">
                <code>.story</code>
                <a class="w-headline-link" href="#.story">#</a>
              </h3>
              <p>Now we just need to style the story item itself.</p>
              <p>
                Earlier we mentioned that the <code>style</code> attribute on
                each <code>&lt;article&gt;</code> element is part of a
                placeholder loading technique:
              </p>
              <web-copy-code>
                <pre
                  class="language-html"
                ><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>story<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">--bg</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://picsum.photos/480/840<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></code></pre>
              </web-copy-code>
              <p>
                We're going to use CSS's <code>background-image</code> property,
                which allows us to specify more than one background image. We
                can put them in an order so that our user picture is on top and
                will show up automatically when it's done loading. To enable
                this, we'll put our image URL into a custom property
                (<code>--bg</code>), and use it within our CSS to layer with the
                loading placeholder.
              </p>
              <p>
                First, let's update the <code>.story</code> ruleset to replace a
                gradient with a background image once it's done loading. Add the
                highlighted code to your <code>.story</code> ruleset:
              </p>
              <web-copy-code>
                <pre
                  class="language-css"
                ><code class="language-css"><span class="highlight-line"><span class="token selector">.story</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">grid-area</span><span class="token punctuation">:</span> story<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">  <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token property">background-image</span><span class="token punctuation">:</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token function">var</span><span class="token punctuation">(</span>--bg<span class="token punctuation">)</span><span class="token punctuation">,</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> <span class="token function">lch</span><span class="token punctuation">(</span>98 0 0<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">lch</span><span class="token punctuation">(</span>90 0 0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
              </web-copy-code>
              <p>
                Setting <code>background-size</code> to
                <code>cover</code> ensures there's no empty space in the
                viewport because our image will be filling it up. Defining 2
                background images enables us to pull a neat CSS web trick called
                the <em>loading tombstone</em>:
              </p>
              <ul>
                <li>
                  Background image 1 (<code>var(--bg)</code>) is the URL we
                  passed inline in the HTML
                </li>
                <li>
                  Background image 2 (<code
                    >linear-gradient(to top, lch(98 0 0), lch(90 0 0))</code
                  >
                  is a gradient to show while the URL is loading
                </li>
              </ul>
              <p>
                CSS will automatically replace the gradient with the image, once
                the image is done downloading.
              </p>
              <p>
                Next we'll add some CSS to remove some behavior, freeing up the
                browser to move faster. Add the highlighted code to your
                <code>.story</code> ruleset:
              </p>
              <web-copy-code>
                <pre
                  class="language-css"
                ><code class="language-css"><span class="highlight-line"><span class="token selector">.story</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">grid-area</span><span class="token punctuation">:</span> story<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">background-image</span><span class="token punctuation">:</span></span><br><span class="highlight-line">    <span class="token function">var</span><span class="token punctuation">(</span>--bg<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> <span class="token function">lch</span><span class="token punctuation">(</span>98 0 0<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">lch</span><span class="token punctuation">(</span>90 0 0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">  <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token property">touch-action</span><span class="token punctuation">:</span> manipulation<span class="token punctuation">;</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
              </web-copy-code>
              <ul>
                <li>
                  <code>user-select: none</code> prevents users from
                  accidentally selecting text
                </li>
                <li>
                  <code>touch-action: manipulation</code> instructs the browser
                  that these interactions should be treated as touch events,
                  which frees up the browser from trying to decide whether
                  you're clicking a URL or not
                </li>
              </ul>
              <p>
                Last, let's add a little CSS to animate the transition between
                stories. Add the highlighted code to your
                <code>.story</code> ruleset:
              </p>
              <web-copy-code>
                <pre
                  class="language-scss"
                ><code class="language-scss"><span class="highlight-line"><span class="token selector">.story </span><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">grid-area</span><span class="token punctuation">:</span> story<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">background-image</span><span class="token punctuation">:</span></span><br><span class="highlight-line">    <span class="token function">var</span><span class="token punctuation">(</span>--bg<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> <span class="token function">lch</span><span class="token punctuation">(</span>98 0 0<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">lch</span><span class="token punctuation">(</span>90 0 0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">touch-action</span><span class="token punctuation">:</span> manipulation<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">  <span class="token property">transition</span><span class="token punctuation">:</span> opacity .3s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.4<span class="token punctuation">,</span> 0.0<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active"></mark><br><mark class="highlight-line highlight-line-active">  <span class="token selector"><span class="token parent important">&amp;</span>.seen </span><span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
              </web-copy-code>
              <p>
                The <code>.seen</code> class will be added to a story that needs
                an exit. I got the custom easing function (<code
                  >cubic-bezier(0.4, 0.0, 1,1)</code
                >) from Material Design's
                <a
                  href="https://material.io/design/motion/speed.html#easing"
                  rel="noopener"
                  >Easing</a
                >
                guide (scroll to the <em>Accerlerated easing</em> section).
              </p>
              <div class="w-aside w-aside--note">
                <p>
                  Check out
                  <a
                    href="https://drafts.csswg.org/css-nesting-1/#nest-selector"
                    rel="noopener"
                    >Nesting Selector: the <code>&amp;</code> selector</a
                  >
                  for an explanation of <code>&amp;.seen</code>.
                </p>
              </div>
              <p>
                If you've got a keen eye you probably noticed the
                <code>pointer-events: none</code> declaration and are scratching
                your head right now. I'd say this is the only downside of the
                solution so far. We need this because a
                <code>.seen.story</code> element will be on top and will receive
                taps, even though it's invisible. By setting the
                <code>pointer-events</code> to <code>none</code>, we turn the
                glass story into a window, and steal no more user interactions.
                Not too bad of a trade off, not too hard to manage here in our
                CSS right now. We're not juggling <code>z-index</code>. I'm
                feeling good about this still.
              </p>
              <h2 id="javascript">
                JavaScript <a class="w-headline-link" href="#javascript">#</a>
              </h2>
              <p>
                The interactions of a Stories component are quite simple to the
                user: tap on the right to go forward, tap on the left to go
                back. Simple things for users tends to be hard work for
                developers. We'll take care of lots of it, though.
              </p>
              <figure class="w-figure">
                <video
                  playsinline
                  controls
                  autoplay
                  loop
                  muted
                  class="w-screenshot"
                >
                  <!-- <source src="https://storage.googleapis.com/web-dev-assets/macos-system-ui/system-ui_wght.webm" type="video/webm"> -->
                  <source
                    src="https://storage.googleapis.com/web-dev-assets/gui-challenges/stories-desktop-demo.mp4"
                  />
                </video>
              </figure>
              <h3 id="setup-2">
                Setup <a class="w-headline-link" href="#setup-2">#</a>
              </h3>
              <p>
                To start out, let's compute and store as much information as we
                can. Add the following code to <code>app/js/index.js</code>:
              </p>
              <web-copy-code>
                <pre
                  class="language-js"
                ><code class="language-js"><span class="token keyword">const</span> stories <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.stories'</span><span class="token punctuation">)</span><br><span class="token keyword">const</span> median <span class="token operator">=</span> stories<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token punctuation">(</span>stories<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></code></pre>
              </web-copy-code>
              <p>
                Our first line of JavaScript grabs and stores a reference to our
                primary HTML element root. The next line calculates where the
                middle of our element is, so we can decide if a tap is to go
                forward or backward.
              </p>
              <h3 id="state">
                State <a class="w-headline-link" href="#state">#</a>
              </h3>
              <p>
                Next we make a small object with some state relevant to our
                logic. In this case, we're only interested in the current story.
                In our HTML markup, we can access it by grabbing the 1st friend
                and their most recent story. Add the highlighted code to your
                <code>app/js/index.js</code>:
              </p>
              <web-copy-code>
                <pre
                  class="language-js"
                ><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> stories <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.stories'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">const</span> median <span class="token operator">=</span> stories<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token punctuation">(</span>stories<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active"><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">  current_story<span class="token operator">:</span> stories<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span>lastElementChild</mark><br><mark class="highlight-line highlight-line-active"><span class="token punctuation">}</span></mark></code></pre></web-copy-code
              ><!-- TODO(kayce): All JS code needs semicolons: https://google.github.io/styleguide/jsguide.html#formatting-semicolons-are-required -->
              <h3 id="listeners">
                Listeners <a class="w-headline-link" href="#listeners">#</a>
              </h3>
              <p>
                We have enough logic now to start listening for user events and
                directing them.
              </p>
              <h4 id="mouse">
                Mouse <a class="w-headline-link" href="#mouse">#</a>
              </h4>
              <p>
                Let's start by listening to the <code>'click'</code> event on
                our stories container. Add the highlighted code to
                <code>app/js/index.js</code>:
              </p>
              <web-copy-code>
                <pre
                  class="language-js"
                ><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> stories <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.stories'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">const</span> median <span class="token operator">=</span> stories<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token punctuation">(</span>stories<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  current_story<span class="token operator">:</span> stories<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span>lastElementChild</span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">stories<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeName <span class="token operator">!==</span> <span class="token string">'ARTICLE'</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">return</span></mark><br><mark class="highlight-line highlight-line-active"></mark><br><mark class="highlight-line highlight-line-active">  <span class="token function">navigateStories</span><span class="token punctuation">(</span></mark><br><mark class="highlight-line highlight-line-active">    e<span class="token punctuation">.</span>clientX <span class="token operator">></span> median</mark><br><mark class="highlight-line highlight-line-active">      <span class="token operator">?</span> <span class="token string">'next'</span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token operator">:</span> <span class="token string">'prev'</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active"><span class="token punctuation">}</span><span class="token punctuation">)</span></mark></code></pre>
              </web-copy-code>
              <p>
                If a click happens and it's not on a
                <code>&lt;article&gt;</code> element we bail and do nothing. If
                it is an article, we grab the horizontal position of the mouse
                or finger with <code>clientX</code>. We haven't implemented
                <code>navigateStories</code> yet, but the argument that it takes
                specifies what direction we need to go. If that user position is
                greater than the median, we know we need to navigate to
                <code>next</code>, otherwise <code>prev</code> (previous).
              </p>
              <h4 id="keyboard">
                Keyboard <a class="w-headline-link" href="#keyboard">#</a>
              </h4>
              <p>
                Now, let's listen for keyboard presses. If the
                <kbd>Down Arrow</kbd> is pressed we navigate to
                <code>next</code>. If it's the <kbd>Up Arrow</kbd>, we go to
                <code>prev</code>.
              </p>
              <p>Add the highlighted code to <code>app/js/index.js</code>:</p>
              <web-copy-code>
                <pre
                  class="language-js"
                ><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> stories <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.stories'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">const</span> median <span class="token operator">=</span> stories<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token punctuation">(</span>stories<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  current_story<span class="token operator">:</span> stories<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span>lastElementChild</span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">stories<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeName <span class="token operator">!==</span> <span class="token string">'ARTICLE'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token keyword">return</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">navigateStories</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    e<span class="token punctuation">.</span>clientX <span class="token operator">></span> median</span><br><span class="highlight-line">      <span class="token operator">?</span> <span class="token string">'next'</span></span><br><span class="highlight-line">      <span class="token operator">:</span> <span class="token string">'prev'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!==</span> <span class="token string">'ArrowDown'</span> <span class="token operator">||</span> key <span class="token operator">!==</span> <span class="token string">'ArrowUp'</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token function">navigateStories</span><span class="token punctuation">(</span></mark><br><mark class="highlight-line highlight-line-active">      key <span class="token operator">===</span> <span class="token string">'ArrowDown'</span></mark><br><mark class="highlight-line highlight-line-active">        <span class="token operator">?</span> <span class="token string">'next'</span></mark><br><mark class="highlight-line highlight-line-active">        <span class="token operator">:</span> <span class="token string">'prev'</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active"><span class="token punctuation">}</span><span class="token punctuation">)</span></mark></code></pre>
              </web-copy-code>
              <h3 id="stories-navigation">
                Stories navigation
                <a class="w-headline-link" href="#stories-navigation">#</a>
              </h3>
              <p>
                Time to tackle the unique business logic of stories and the UX
                they've become famous for. This looks chunky and tricky, but I
                think if you take it line by line, you'll find it's quite
                digestible.
              </p>
              <p>
                Upfront, we stash some selectors that help us decide whether to
                scroll to a friend or show/hide a story. Since the HTML is where
                we're working, we'll be querying it for presence of friends
                (users) or stories (story).
              </p>
              <p>
                These variables will help us answer questions like, &quot;given
                story x, does &quot;next&quot; mean move to another story from
                this same friend or to a different friend?&quot; I did it by
                using the tree structure we built, reaching into parents and
                their children.
              </p>
              <p>
                Add the following code to the bottom of
                <code>app/js/index.js</code>:
              </p>
              <web-copy-code>
                <pre
                  class="language-js"
                ><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">navigateStories</span> <span class="token operator">=</span> <span class="token parameter">direction</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> story <span class="token operator">=</span> state<span class="token punctuation">.</span>current_story<br>  <span class="token keyword">const</span> lastItemInUserStory <span class="token operator">=</span> story<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>firstElementChild<br>  <span class="token keyword">const</span> firstItemInUserStory <span class="token operator">=</span> story<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>lastElementChild<br>  <span class="token keyword">const</span> hasNextUserStory <span class="token operator">=</span> story<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>nextElementSibling<br>  <span class="token keyword">const</span> hasPrevUserStory <span class="token operator">=</span> story<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>previousElementSibling<br><span class="token punctuation">}</span></code></pre>
              </web-copy-code>
              <p>
                Here's our business logic goal, as close to natural language as
                possible:
              </p>
              <ul>
                <li>
                  Decide how to handle the tap
                  <ul>
                    <li>If there's a next/previous story: show that story</li>
                    <li>
                      If it's the last/first story of the friend: show a new
                      friend
                    </li>
                    <li>
                      If there's no story to go to in that direction: do nothing
                    </li>
                  </ul>
                </li>
                <li>Stash the new current story into <code>state</code></li>
              </ul>
              <p>
                Add the highlighted code to your
                <code>navigateStories</code> function:
              </p>
              <web-copy-code>
                <pre
                  class="language-js"
                ><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">navigateStories</span> <span class="token operator">=</span> <span class="token parameter">direction</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> story <span class="token operator">=</span> state<span class="token punctuation">.</span>current_story</span><br><span class="highlight-line">  <span class="token keyword">const</span> lastItemInUserStory <span class="token operator">=</span> story<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>firstElementChild</span><br><span class="highlight-line">  <span class="token keyword">const</span> firstItemInUserStory <span class="token operator">=</span> story<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>lastElementChild</span><br><span class="highlight-line">  <span class="token keyword">const</span> hasNextUserStory <span class="token operator">=</span> story<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>nextElementSibling</span><br><span class="highlight-line">  <span class="token keyword">const</span> hasPrevUserStory <span class="token operator">=</span> story<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>previousElementSibling</span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">===</span> <span class="token string">'next'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastItemInUserStory <span class="token operator">===</span> story <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>hasNextUserStory<span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token keyword">return</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>lastItemInUserStory <span class="token operator">===</span> story <span class="token operator">&amp;&amp;</span> hasNextUserStory<span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">      state<span class="token punctuation">.</span>current_story <span class="token operator">=</span> story<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>lastElementChild</mark><br><mark class="highlight-line highlight-line-active">      story<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">        behavior<span class="token operator">:</span> <span class="token string">'smooth'</span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token punctuation">}</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token punctuation">}</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">else</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">      story<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'seen'</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">      state<span class="token punctuation">.</span>current_story <span class="token operator">=</span> story<span class="token punctuation">.</span>previousElementSibling</mark><br><mark class="highlight-line highlight-line-active">    <span class="token punctuation">}</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>direction <span class="token operator">===</span> <span class="token string">'prev'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">if</span> <span class="token punctuation">(</span>firstItemInUserStory <span class="token operator">===</span> story <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>hasPrevUserStory<span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token keyword">return</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>firstItemInUserStory <span class="token operator">===</span> story <span class="token operator">&amp;&amp;</span> hasPrevUserStory<span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">      state<span class="token punctuation">.</span>current_story <span class="token operator">=</span> story<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>previousElementSibling<span class="token punctuation">.</span>firstElementChild</mark><br><mark class="highlight-line highlight-line-active">      story<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>previousElementSibling<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">        behavior<span class="token operator">:</span> <span class="token string">'smooth'</span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token punctuation">}</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token punctuation">}</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">else</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">      story<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'seen'</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">      state<span class="token punctuation">.</span>current_story <span class="token operator">=</span> story<span class="token punctuation">.</span>nextElementSibling</mark><br><mark class="highlight-line highlight-line-active">    <span class="token punctuation">}</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span></mark><br><mark class="highlight-line highlight-line-active"><span class="token punctuation">}</span></mark></code></pre>
              </web-copy-code>
              <h2 id="try-it-out">
                Try it out <a class="w-headline-link" href="#try-it-out">#</a>
              </h2>
              <ul>
                <li>
                  To preview the site, press <strong>View App</strong>. Then
                  press
                  <strong>Fullscreen</strong>
                  <img
                    src="/images/glitch/fullscreen.svg"
                    alt="fullscreen"
                    style="
                      padding: 4px 8px;
                      opacity: 0.5;
                      border: 1px solid #c3c3c3;
                      border-radius: 5px;
                    "
                  />.
                </li>
              </ul>
              <h2 id="conclusion">
                Conclusion <a class="w-headline-link" href="#conclusion">#</a>
              </h2>
              <p>
                That's a wrap up for the needs I had with the component. Feel
                free to build upon it, drive it with data, and in general make
                it yours!
              </p>

              <nav class="w-article-navigation">
                <a
                  class="
                    w-article-navigation__link
                    w-article-navigation__link--back
                    w-article-navigation__link--single
                    gc-analytics-event
                  "
                  data-category="web.dev"
                  data-label="navigation, go back"
                  data-action="click"
                  href="/building-a-stories-component"
                >
                  Return to article
                </a>
              </nav>
            </div>
          </web-codelab>
        </div>
      </div>
    </main>
    <footer class="w-footer">
      <nav class="w-footer__linkboxes">
        <ul class="w-footer__linkboxes-list">
          <li class="w-footer__linkbox">
            <h3 class="w-footer__linkbox-heading">Contribute</h3>
            <ul class="w-footer__linkbox-list">
              <li class="w-footer__linkbox-item">
                <a
                  href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
                  class="w-footer__linkbox-link"
                  data-category="Site-Wide Custom Events"
                  data-label="Footer Link (index 1)"
                >
                  File a bug
                </a>
              </li>
              <li class="w-footer__linkbox-item">
                <a
                  href="https://github.com/googlechrome/web.dev"
                  class="w-footer__linkbox-link"
                  data-category="Site-Wide Custom Events"
                  data-label="Footer Link (index 2)"
                >
                  View source
                </a>
              </li>
            </ul>
          </li>
          <li class="w-footer__linkbox">
            <h3 class="w-footer__linkbox-heading">Related content</h3>
            <ul class="w-footer__linkbox-list">
              <li class="w-footer__linkbox-item">
                <a
                  href="https://blog.chromium.org/"
                  class="w-footer__linkbox-link"
                  data-category="Site-Wide Custom Events"
                  data-label="Footer Link (index 1)"
                >
                  Chrome updates
                </a>
              </li>
              <li class="w-footer__linkbox-item">
                <a
                  href="https://developers.google.com/web/"
                  class="w-footer__linkbox-link"
                  data-category="Site-Wide Custom Events"
                  data-label="Footer Link (index 2)"
                >
                  Web Fundamentals
                </a>
              </li>
              <li class="w-footer__linkbox-item">
                <a
                  href="https://developers.google.com/web/showcase/"
                  class="w-footer__linkbox-link"
                  data-category="Site-Wide Custom Events"
                  data-label="Footer Link (index 3)"
                >
                  Case studies
                </a>
              </li>
              <li class="w-footer__linkbox-item">
                <a
                  href="https://devwebfeed.appspot.com/"
                  class="w-footer__linkbox-link"
                  data-category="Site-Wide Custom Events"
                  data-label="Footer Link (index 4)"
                >
                  DevWeb Content Firehose
                </a>
              </li>
              <li class="w-footer__linkbox-item">
                <a
                  href="/podcasts/"
                  class="w-footer__linkbox-link"
                  data-category="Podcasts"
                  data-label="Footer Link (index 5)"
                >
                  Podcasts
                </a>
              </li>
              <li class="w-footer__linkbox-item">
                <a
                  href="/shows/"
                  class="w-footer__linkbox-link"
                  data-category="Shows"
                  data-label="Footer Link (index 6)"
                >
                  Shows
                </a>
              </li>
            </ul>
          </li>
          <li class="w-footer__linkbox">
            <h3 class="w-footer__linkbox-heading">Connect</h3>
            <ul class="w-footer__linkbox-list">
              <li class="w-footer__linkbox-item">
                <a
                  href="https://www.twitter.com/@ChromiumDev"
                  class="w-footer__linkbox-link"
                  data-category="Site-Wide Custom Events"
                  data-label="Footer Link (index 1)"
                >
                  Twitter
                </a>
              </li>
              <li class="w-footer__linkbox-item">
                <a
                  href="https://www.youtube.com/user/ChromeDevelopers"
                  class="w-footer__linkbox-link"
                  data-category="Site-Wide Custom Events"
                  data-label="Footer Link (index 2)"
                >
                  YouTube
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>

      <div class="w-footer__utility">
        <nav class="w-footer__utility-nav">
          <a
            href="https://developers.google.com/"
            class="w-footer__utility-logo-link"
            data-category="Site-Wide Custom Events"
            data-label="Footer Google Developers Link"
          >
            <img
              loading="lazy"
              width="185"
              height="33"
              class="w-footer__utility-logo"
              src="/images/lockup-color.png"
              alt="Google Developers"
            />
          </a>
          <ul class="w-footer__utility-list">
            <li class="w-footer__utility-item">
              <a
                class="w-footer__utility-link"
                href="https://developer.chrome.com/home"
                data-category="Site-Wide Custom Events"
                data-label="Footer Chrome Link"
              >
                Chrome
              </a>
            </li>
            <li class="w-footer__utility-item">
              <a
                class="w-footer__utility-link"
                href="https://firebase.google.com/"
                data-category="Site-Wide Custom Events"
                data-label="Footer Firebase Link"
              >
                Firebase
              </a>
            </li>
            <li class="w-footer__utility-item">
              <a
                class="w-footer__utility-link"
                href="https://cloud.google.com/"
                data-category="Site-Wide Custom Events"
                data-label="Footer Google Cloud Platform Link"
              >
                Google Cloud Platform
              </a>
            </li>
            <li class="w-footer__utility-item">
              <a
                class="w-footer__utility-link"
                href="https://developers.google.com/products"
                data-category="Site-Wide Custom Events"
                data-label="Footer All products Link"
              >
                All products
              </a>
            </li>
          </ul>
          <web-language-select current="en"></web-language-select>
        </nav>
        <nav class="w-footer__utility-nav">
          <ul class="w-footer__utility-list">
            <li class="w-footer__utility-item">
              <a
                class="w-footer__utility-link"
                href="https://policies.google.com/"
                data-category="Site-Wide Custom Events"
                data-label="Footer Terms and Privacy link"
              >
                Terms &amp; Privacy
              </a>
            </li>
            <li class="w-footer__utility-item">
              <a
                class="w-footer__utility-link"
                href="/community-guidelines/"
                data-category="Site-Wide Custom Events"
                data-label="Footer Community Guidelines link"
              >
                Community Guidelines
              </a>
            </li>
          </ul>
          <div class="w-footer__license">
            <p>
              Except as otherwise noted, the content of this page is licensed
              under the
              <a href="https://creativecommons.org/licenses/by/4.0/">
                Creative Commons Attribution 4.0 License</a
              >, and code samples are licensed under the
              <a href="https://www.apache.org/licenses/LICENSE-2.0">
                Apache 2.0 License</a
              >. For details, see the
              <a href="https://developers.google.com/site-policies">
                Google Developers Site Policies</a
              >.
            </p>
          </div>
        </nav>
      </div>
    </footer>
  </body>
</html>
