
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=b6cf18a387b1f">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>URLPattern brings routing to the web platform</title>
<meta name="description" content="An approach to standardizing common pattern matching use cases." />

<link rel="canonical" href="https://web.dev/urlpattern/" />

<meta itemprop="name" content="URLPattern brings routing to the web platform" />
<meta itemprop="description" content="An approach to standardizing common pattern matching use cases." />
<meta itemprop="image" content="https://web-dev.imgix.net/image/FNkVSAX8UDTTQWQkKftSgGe9clO2/YWhOUaN06kzk4mu93a1v.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/urlpattern/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="URLPattern brings routing to the web platform" />
<meta property="og:description" content="An approach to standardizing common pattern matching use cases." />
<meta property="og:image" content="https://web-dev.imgix.net/image/FNkVSAX8UDTTQWQkKftSgGe9clO2/YWhOUaN06kzk4mu93a1v.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="URLPattern brings routing to the web platform" />
<meta name="twitter:description" content="An approach to standardizing common pattern matching use cases." />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/FNkVSAX8UDTTQWQkKftSgGe9clO2/YWhOUaN06kzk4mu93a1v.jpg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>








<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=c6f0a60c34feb', 'module');




  loadScript('/js/content.js?v=b88895916e262', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="30" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
  

  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#urlpattern-brings-routing-to-the-web-platform" class="w-toc__header--link">
        URLPattern brings routing to the web platform
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#background">Background</a></li><li><a href="#syntax-compatibility">Syntax compatibility</a></li><li><a href="#additional-features">Additional features</a></li><li><a href="#examples">Examples</a></li><li><a href="#constructing-the-pattern">Constructing the pattern</a></li><li><a href="#using-the-pattern">Using the pattern</a></li><li><a href="#anonymous-and-named-groups">Anonymous and named groups</a></li><li><a href="#unicode-support-and-normalization">Unicode support and normalization</a></li><li><a href="#putting-it-all-together">Putting it all together</a></li><li><a href="#browser-support-and-polyfills">Browser support and polyfills</a></li><li><a href="#feedback-and-future-plans">Feedback and future plans</a></li><li><a href="#support-for-templating">Support for templating</a></li><li><a href="#future-features">Enabling future web platform features</a></li><li><a href="#acknowledgements">Acknowledgements</a></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@jeffposnick"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    <a class="w-actions__fab w-actions__fab--subscribe gc-analytics-event" data-category="web.dev" data-label="view-subscribe" data-action="click" href="/newsletter/">
  <span>subscribe</span>
</a>

  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      
        <div class="w-post-breadcrumbs">
          <ul class="w-breadcrumbs">
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link w-breadcrumbs__link--left-justify gc-analytics-event"
      data-category="web.dev"
      data-label="post, home breadcrumb"
      data-action="click"
      href="/"
    >
      Home
    </a>
  </li>

  <svg
    class="w-breadcrumbs__icon"
    xmlns="http://www.w3.org/2000/svg"
    height="24"
    viewBox="0 0 24 24"
    width="24"
    aria-hidden="true"
  >
    <path d="M0 0h24v24H0V0z" fill="none" />
    <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
  </svg>

  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link gc-analytics-event"
      data-category="web.dev"
      data-label="post, path breadcrumb"
      data-action="click"
      href=/blog
    >
      All articles
    </a>
  </li>
</ul>
        </div>
      

      <h1 id="urlpattern-brings-routing-to-the-web-platform" class="w-article-header__headline">URLPattern brings routing to the web platform</h1>
      
        <p class="w-article-header__subhead w-mb--non">
          An approach to standardizing common pattern matching use cases.
        </p>
      

      
        <div class="w-author__published">
          <time>Jul 22, 2021</time>
          
        </div>
      
      

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/jeffposnick/"><img     alt="Jeff Posnick"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/jeffposnick/">Jeff Posnick</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/jeffposnick"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/jeffposnick">GitHub</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@jeffposnick"
          >Glitch</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/jeffposnick">Blog</a>
      </li>
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <h2 id="background">Background <a class="w-headline-link" href="#background">#</a></h2>
<p>Routing is a key piece of every web application. At its heart, routing involves
taking a URL, applying some pattern matching or other app-specific logic to it,
and then, usually, displaying web content based on the result. Routing might be
implemented in a number of ways: it's sometimes code running on a server that
maps a path to files on disk, or logic in a single-page app that waits for
changes to the current location and creates a corresponding piece of DOM to
display.</p>
<p>While there is no one definitive standard, web developers have gravitated
towards a common syntax for expressing URL routing patterns that share a lot in
common with
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" rel="noopener">regular expressions</a>,
but with some domain-specific additions like tokens for matching path segments.
Popular server-side frameworks like
<a href="https://expressjs.com/en/guide/routing.html" rel="noopener">Express</a> and
<a href="https://guides.rubyonrails.org/routing.html" rel="noopener">Ruby on Rails</a> use this syntax (or
something very close to it), and JavaScript developers can use modules like
<code><a href="https://github.com/pillarjs/path-to-regexp" rel="noopener">path-to-regexp</a></code> or
<code><a href="https://github.com/lukeed/regexparam" rel="noopener">regexpparam</a></code> to add that
logic to their own code.</p>
<p><code><a href="https://github.com/WICG/urlpattern/blob/main/explainer.md#urlpattern" rel="noopener">URLPattern</a></code>
is a proposed addition to the web platform that builds on the foundation created
by these frameworks. Its goal is to standardize a routing pattern syntax,
including support for wildcards, named token groups, regular expression groups,
and group modifiers. <code>URLPattern</code> instances created with this syntax
can perform common routing tasks, like matching against full URLs or a URL
<code><a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/pathname" rel="noopener">pathname</a></code>,
and returning information about the token and group matches.</p>
<p>Another benefit to providing URL matching directly in the web platform is that a
common syntax can then be shared with <a href="#future-features">other APIs</a> that also
need to match against URLs.</p>
<h2 id="syntax-compatibility">Syntax compatibility <a class="w-headline-link" href="#syntax-compatibility">#</a></h2>
<p>A guiding philosophy for <code>URLPattern</code> is to avoid reinvention. If you're already
familiar with the routing syntax used in Express or Ruby on Rails, you shouldn't
have to learn anything new. But given the slight divergences
between syntaxes in popular routing libraries, something had to be chosen as the
base syntax, and the designers of <code>URLPattern</code> decided to use the pattern syntax
from <code>path-to-regexp</code> (though not its API surface) as the starting point.</p>
<p>This decision was made after close consultation with the current maintainer of
<code>path-to-regexp</code>.</p>
<p>The best way to familiarize yourself with the core of the supported syntax is to
refer to the
<a href="https://github.com/pillarjs/path-to-regexp#parameters" rel="noopener">documentation</a> for
<code>path-to-regexp</code>. You can
<a href="https://github.com/WICG/urlpattern/blob/main/mdn-drafts/QUICK-REFERENCE.md" rel="noopener">read the documentation</a>
intended for publication on <a href="https://developer.mozilla.org/" rel="noopener">MDN</a> in its current
home on GitHub.</p>
<h3 id="additional-features">Additional features <a class="w-headline-link" href="#additional-features">#</a></h3>
<p>The syntax of <code>URLPattern</code> is a superset of what <code>path-to-regexp</code> supports, as
<code>URLPattern</code> supports a uncommon feature among routing libraries: matching
<a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/origin" rel="noopener">origins</a>,
including wildcards in hostnames. Most other routing libraries just deal with
the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/pathname" rel="noopener">pathname</a>,
and occasionally the
<a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/search" rel="noopener">search</a> or
<a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/hash" rel="noopener">hash</a> portion of a
URL. They never have to check the origin portion of a URL, as they're only used
for same-origin routing within a self-contained web app.</p>
<p>Taking origins into account opens the door for additional use cases, like
routing cross-origin requests inside of a
<a href="https://developers.google.com/web/fundamentals/primers/service-workers" rel="noopener">service worker</a>'s
<code>fetch</code> event handler. If you're only routing same-origin URLs, you can
effectively ignore this additional feature and use <code>URLPattern</code> like
other libraries.</p>
<h2 id="examples">Examples <a class="w-headline-link" href="#examples">#</a></h2>
<h3 id="constructing-the-pattern">Constructing the pattern <a class="w-headline-link" href="#constructing-the-pattern">#</a></h3>
<p>To create a <code>URLPattern</code>, pass its constructor either strings or an object whose
properties contain info about the pattern to match against.</p>
<p>Passing an object offers the most explicit control over what pattern to use for
matching each URL component. At its most verbose, this can look like</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  protocol<span class="token operator">:</span> <span class="token string">'https'</span><span class="token punctuation">,</span><br>  username<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  password<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  hostname<span class="token operator">:</span> <span class="token string">'example.com'</span><span class="token punctuation">,</span><br>  port<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  pathname<span class="token operator">:</span> <span class="token string">'/foo/:image.jpg'</span><span class="token punctuation">,</span><br>  search<span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span><br>  hash<span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Providing an empty string for a property will only match if the corresponding
part of the URL is not set. The wildcard <code>*</code> will match any value for a given
portion of the URL.</p>
<p>The constructor offers several shortcuts for simpler usage. Completely omitting
<code>search</code> and <code>hash</code>, or any other properties, is equivalent to setting them to the
<code>'*'</code> wildcard. The above example could be simplified to</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  protocol<span class="token operator">:</span> <span class="token string">'https'</span><span class="token punctuation">,</span><br>  username<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  password<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  hostname<span class="token operator">:</span> <span class="token string">'example.com'</span><span class="token punctuation">,</span><br>  port<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  pathname<span class="token operator">:</span> <span class="token string">'/foo/:image.jpg'</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>As an additional shortcut, all of the information about the origin can be
provided in a single property, <code>baseURL</code>, leading to</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  pathname<span class="token operator">:</span> <span class="token string">'/foo/:image.jpg'</span><span class="token punctuation">,</span><br>  baseURL<span class="token operator">:</span> <span class="token string">'https://example.com'</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>All of these examples assume that your use case involves matching origins. If
you're only interested in matching on the other portions of the URL, excluding
the origin (as is the case for many &quot;traditional&quot; single-origin routing
scenarios), then you can omit the origin information entirely, and just provide
some combination of the <code>pathname</code>, <code>search</code>, and <code>hash</code> properties. As before,
omitted properties will be treated as if they were set to the <code>*</code> wildcard
pattern.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token operator">:</span> <span class="token string">'/foo/:image.jpg'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>As an alternative to passing in an object to the constructor, you can provide
either one or two strings. If one string is provided, it should represent a full
URL pattern, including pattern information used to match the origin. If you
provide two strings, the second string is used as a <code>baseURL</code>, and the first
string is considered relative to that base.</p>
<p>Whether one string or two are provided, the <code>URLPattern</code> constructor will parse
the full URL pattern, breaking it up into URL components, and map each portion
of the larger pattern to the corresponding component. This means that under the
hood, each <code>URLPattern</code> created with strings ends up being represented
the same as an equivalent <code>URLPattern</code> created with an object. The
strings constructor is just a shortcut, for those who prefer a less verbose
interface.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token string">'https://example.com/foo/:image.jpg?*#*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>When using strings to create a <code>URLPattern</code>, there are a few caveats to keep in mind.</p>
<p>Leaving a property out when using an object to construct <code>URLPattern</code> is
equivalent to providing a <code>*</code> wildcard for that property. When the full URL
string pattern is parsed, if one of the URL components is missing a value, it's
treated as if the component's property were set to <code>''</code>, which will only match
when that component is empty.</p>
<p>When using strings, you need to explicitly include the wildcards if you want
them to be used in the constructed <code>URLPattern</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// p1 and p2 are equivalent.</span><br><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token string">'/foo'</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  protocol<span class="token operator">:</span> location<span class="token punctuation">.</span>protocol<span class="token punctuation">,</span><br>  hostname<span class="token operator">:</span> location<span class="token punctuation">.</span>hostname<span class="token punctuation">,</span><br>  pathname<span class="token operator">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span><br>  search<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  hash<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// p3 and p4 are equivalent.</span><br><span class="token keyword">const</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token string">'/foo?*#*'</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> p4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  protocol<span class="token operator">:</span> location<span class="token punctuation">.</span>protocol<span class="token punctuation">,</span><br>  hostname<span class="token operator">:</span> location<span class="token punctuation">.</span>hostname<span class="token punctuation">,</span><br>  pathname<span class="token operator">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>You should also be aware that parsing a string pattern into its components is
potentially ambiguous. There are characters, like <code>:</code>, that are found in URLs
but also have special meaning in the pattern matching syntax. To avoid this
ambiguity, the <code>URLPattern</code> constructor assumes that any of those special
characters are part of a pattern, not part of the URL. If you want an ambiguous
character to be interpreted as part of the URL, make sure to escape it with a
<code>\</code> character. For example, the literal URL <code>about:blank</code> should be escaped as
<code>'about\\:blank'</code> when provided as a string.</p>
<h3 id="using-the-pattern">Using the pattern <a class="w-headline-link" href="#using-the-pattern">#</a></h3>
<p>After constructing a <code>URLPattern</code>, you have two options for using it. The
<code>test()</code> and <code>exec()</code> methods both take the same input and use the same
algorithm to check for a match, and only differ in their return value. <code>test()</code>
returns <code>true</code> when there's a match for the given input, and <code>false</code> otherwise.
<code>exec()</code> returns detailed information about the match along with capture groups,
or <code>null</code> if there is no match. The following examples demonstrate using
<code>exec()</code>, but you could swap in <code>test()</code> for any of them if you only want a
simple boolean return value.</p>
<p>One way to use the <code>test()</code> and <code>exec()</code> methods is by passing in strings.
Similar to what the constructor supports, if a single string is provided, it
should be a full URL, including the origin. If two strings are provided, the
second string is treated as a <code>baseURL</code> value, and the first string is evaluated
as relative to that base.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  pathname<span class="token operator">:</span> <span class="token string">'/foo/:image.jpg'</span><span class="token punctuation">,</span><br>  baseURL<span class="token operator">:</span> <span class="token string">'https://example.com'</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> result <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'https://example.com/foo/cat.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// result will contain info about the successful match.</span><br><span class="token comment">// const result = p.exec('/foo/cat.jpg', 'https://example.com')</span><br><span class="token comment">// is equivalent, using the baseURL syntax.</span><br><br><span class="token keyword">const</span> noMatchResult <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'https://example.com/bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// noMatchResult will be null.</span></code></pre>
</web-copy-code><p>Alternatively, you can pass the same sort of object that the constructor
supports, with properties that are set to just the portions of the URL you care
about matching.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token operator">:</span> <span class="token string">'/foo/:image.jpg'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> result <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token operator">:</span> <span class="token string">'/foo/:image.jpg'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// result will contain info about the successful match.</span></code></pre>
</web-copy-code><p>When using <code>exec()</code> on a <code>URLPattern</code> that contains wildcards or tokens, the
return value will give you information about what the corresponding values were
in the input URL. This can save you the trouble of having to parse out those
values yourself.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLPattern</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  hostname<span class="token operator">:</span> <span class="token string">':subdomain.example.com'</span><span class="token punctuation">,</span><br>  pathname<span class="token operator">:</span> <span class="token string">'/*/:image.jpg'</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> result <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'https://imagecdn1.example.com/foo/cat.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// result.hostname.groups.subdomain will be 'imagecdn1'</span><br><span class="token comment">// result.pathname.groups[0] will be 'foo', corresponding to *</span><br><span class="token comment">// result.pathname.groups.image will be 'cat'</span></code></pre>
</web-copy-code><h3 id="anonymous-and-named-groups">Anonymous and named groups <a class="w-headline-link" href="#anonymous-and-named-groups">#</a></h3>
<p>When you pass a URL string to <code>exec()</code>, you get back a value telling your which portions matched all of the pattern's groups.</p>
<p>The return value has properties that correspond to the components of the
<code>URLPattern</code>, like <code>pathname</code>. So if a group was defined as part of the
<code>pathname</code> portion of the <code>URLPattern</code>, then the matches can be found in the
return value's <code>pathname.groups</code>. The matches are represented differently
depending on whether the corresponding pattern was an anonymous or named group.</p>
<p>You can use array indices to access the values for an anonymous pattern match.
If there are multiple anonymous patterns, index <code>0</code> will represent the matching
value for the left-most one, with <code>1</code> and further indices used for subsequent
patterns.</p>
<p>When using named groups in a pattern, the matches will exposed as properties
whose names correspond to each group name.</p>
<div class="w-aside w-aside--note">
<p>If you're familiar with the
<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec" rel="noopener">exec()</a></code>
method of a
<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" rel="noopener">RegExp</a></code>
object, then the return values from <code>URLPattern.exec()</code>
method will look
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges#examples" rel="noopener">very similar</a>
when it comes to representing anonymous and named groups.</p>
</div>
<h3 id="unicode-support-and-normalization">Unicode support and normalization <a class="w-headline-link" href="#unicode-support-and-normalization">#</a></h3>
<p><code>URLPattern</code> supports Unicode characters in a few different ways.</p>
<ul>
<li>
<p>Named groups, like <code>:café</code>, can contain Unicode characters. The rules used for
valid
<a href="https://developer.mozilla.org/en-US/docs/Glossary/Identifier" rel="noopener">JavaScript identifiers</a>
apply to named groups.</p>
</li>
<li>
<p>Text within a pattern will be automatically encoded according to the same
rules used for URL encoding of that particular component. Unicode characters
within <code>pathname</code> will be
<a href="https://developer.mozilla.org/en-US/docs/Glossary/percent-encoding" rel="noopener">percent-encoded</a>,
so a <code>pathname</code> pattern like <code>/café</code> is normalized to <code>/caf%C3%A9</code>
automatically. Unicode characters in the <code>hostname</code> are automatically encoded
using <a href="https://en.wikipedia.org/wiki/Punycode" rel="noopener">Punycode</a>, rather than
percent-encoding.</p>
</li>
<li>
<p>Regular expression groups must contain only ASCII characters. Regular
expression syntax makes it difficult and unsafe to automatically encode
Unicode characters in these groups. If you want to match a Unicode character
in a regular expression group,you need to percent encode it manually, like
<code>(caf%C3%A9)</code> to match <code>café</code>.</p>
</li>
</ul>
<p>In addition to encoding Unicode characters, <code>URLPattern</code> also performs URL
normalization. For example, <code>/foo/./bar</code> in the <code>pathname</code> component is
collapsed to the equivalent <code>/foo/bar</code>.</p>
<p>When in doubt about how a given input pattern has been normalized, inspect the
constructed <code>URLPattern</code> instance using your browser's
<a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools" rel="noopener">DevTools</a>.</p>
<h2 id="putting-it-all-together">Putting it all together <a class="w-headline-link" href="#putting-it-all-together">#</a></h2>
<p>The Glitch demo embedded below illustrates a core use case of <code>URLPattern</code>
inside of a service worker's
<code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers#custom_responses_to_requests" rel="noopener">fetch event handler</a></code>,
mapping specific patterns to asynchronous functions that could generate a
response to network requests. The concepts in this example could be applied to
other routing scenarios as well, either server-side or client-side.</p>
<div class="glitch-embed-wrap" style="height: 420px; width: 100%;">
  <iframe
    allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi"
    loading="lazy"
    src="https://glitch.com/embed/#!/embed/urlpattern-sw-routing?attributionHidden=true&sidebarCollapsed=true&path=service-worker.js&previewSize=35"
    style="height: 100%; width: 100%; border: 0;"
    title="urlpattern-sw-routing on Glitch"
  ></iframe>
</div>
<h2 id="browser-support-and-polyfills">Browser support and polyfills <a class="w-headline-link" href="#browser-support-and-polyfills">#</a></h2>
<p>We're letting developers know about <code>URLPattern</code> early, and would appreciate any
<a href="https://github.com/WICG/urlpattern/issues" rel="noopener">feedback</a> based on the prerelease
interface. This article will be kept up to date with information about browser
support over time.</p>
<p><code>URLPattern</code> is not currently enabled by default in any browser, but Chrome and
Chromium-based browsers like Edge partially support <code>URLPattern</code> starting with
version 93. You can try it out by enabling the
<code>#experimental-web-platform-features</code> flag in <code>about://flags</code>.</p>
<p>The
<code><a href="https://github.com/kenchris/urlpattern-polyfill" rel="noopener">urlpattern-polyfill</a></code>
library provides a way to use the <code>URLPattern</code> interface in browsers
or environments like <a href="https://nodejs.org/" rel="noopener">Node</a> which lack built-in support. If
you use the polyfill, make sure that you use feature detection to ensure that
you're only loading it if the current environment lacks support. Otherwise,
you'll lose one of the key benefits of <code>URLPattern</code>: the fact that
support environments don't have to download and parse additional code in order
to use it.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>globalThis <span class="token operator">&amp;&amp;</span> <span class="token string">'URLPattern'</span> <span class="token keyword">in</span> globalThis<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// URLPattern is not available, so the polyfill is needed.</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h2 id="feedback-and-future-plans">Feedback and future plans <a class="w-headline-link" href="#feedback-and-future-plans">#</a></h2>
<p>Some aspects of <code>URLPattern</code> are <a href="https://github.com/WICG/urlpattern/blob/main/202012-update.md#whats-still-left-to-do" rel="noopener">still being
developed</a>,
and there are a number of
<a href="https://github.com/WICG/urlpattern/blob/main/202012-update.md#open-questions" rel="noopener">open questions</a>
about specific behaviors that may still be refined. We encourage you to try out
<code>URLPattern</code> early and provide any feedback via the
<a href="https://github.com/WICG/urlpattern/discussions" rel="noopener">Discussions</a> feature in the
associated GitHub repo.</p>
<h3 id="support-for-templating">Support for templating <a class="w-headline-link" href="#support-for-templating">#</a></h3>
<p>The <code>path-to-regexp</code> library provides a
<code><a href="https://github.com/pillarjs/path-to-regexp#compile-reverse-path-to-regexp" rel="noopener">compile() function</a></code>
that effectively reverses the routing behavior. <code>compile()</code> takes a
pattern and values for the token placeholders, and returns a string for a URL
path with those values substituted in.</p>
<p>We hope to
<a href="https://github.com/WICG/urlpattern/discussions/41" rel="noopener">add this to URLPattern</a> in
the future, but it's not within scope for the initial release.</p>
<h3 id="future-features">Enabling future web platform features <a class="w-headline-link" href="#future-features">#</a></h3>
<p>Assuming <code>URLPattern</code> becomes an established part of the web platform, other
features that could benefit from routing or pattern matching can build on top of
it as a primitive.</p>
<p>There are ongoing discussions about using <code>URLPattern</code> for proposed features
like
<a href="https://github.com/WICG/urlpattern/blob/main/explainer.md" rel="noopener">service worker scope pattern matching</a>,
<a href="https://web.dev/pwa-url-handler/#the-web-app-origin-association-file">PWAs as file handlers</a>,
and
<a href="https://github.com/jeremyroman/alternate-loading-modes/blob/main/triggers.md" rel="noopener">speculative prefetching</a>.</p>
<h2 id="acknowledgements">Acknowledgements <a class="w-headline-link" href="#acknowledgements">#</a></h2>
<p>See the <a href="https://github.com/WICG/urlpattern/blob/main/explainer.md#references--acknowledgements" rel="noopener">original explainer document</a> for a full list of acknowledgements.</p>
<p>The thumbnail image for this post is by <a href="https://unsplash.com/@megindoors?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Vic</a> on <a href="https://unsplash.com/s/photos/route-66?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>.</p>


    

    
  <div class="w-chips ">
    
      
    
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Jul 22, 2021</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/master/src/site/content/en/blog/urlpattern/index.md"
      >
        Improve article
      </a>
       
    </div>

    
    <web-feedback additional-questions=""></web-feedback>
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/blog"
  >
    Return to all articles
  </a>
</nav>
  
</div>

  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://devwebfeed.appspot.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">
              DevWeb Content Firehose
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/@ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/home"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
