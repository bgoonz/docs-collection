
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=df5318c50b715">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>content-visibility: the new CSS property that boosts your rendering performance</title>
<meta name="description" content="The CSS content-visibility property enables web content rendering performance benefits by skipping rendering of off-screen content. This article shows you how to leverage this new CSS property for faster initial load times, using the auto keyword. You will also learn about the CSS Containment Spec and other values for content-visibility that give you more control over how your content renders in the browser. " />

<link rel="canonical" href="https://web.dev/content-visibility/" />

<meta itemprop="name" content="content-visibility: the new CSS property that boosts your rendering performance" />
<meta itemprop="description" content="The CSS content-visibility property enables web content rendering performance benefits by skipping rendering of off-screen content. This article shows you how to leverage this new CSS property for faster initial load times, using the auto keyword. You will also learn about the CSS Containment Spec and other values for content-visibility that give you more control over how your content renders in the browser. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/content-visibility/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="content-visibility: the new CSS property that boosts your rendering performance" />
<meta property="og:description" content="The CSS content-visibility property enables web content rendering performance benefits by skipping rendering of off-screen content. This article shows you how to leverage this new CSS property for faster initial load times, using the auto keyword. You will also learn about the CSS Containment Spec and other values for content-visibility that give you more control over how your content renders in the browser. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="Stylized photo of a half-hidden person." />
<meta property="tag" content="css" />
<meta property="tag" content="layout" />
<meta property="tag" content="performance" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="content-visibility: the new CSS property that boosts your rendering performance" />
<meta name="twitter:description" content="The CSS content-visibility property enables web content rendering performance benefits by skipping rendering of off-screen content. This article shows you how to leverage this new CSS property for faster initial load times, using the auto keyword. You will also learn about the CSS Containment Spec and other values for content-visibility that give you more control over how your content renders in the browser. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>








<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=6868da93b446f', 'module');




  loadScript('/js/content.js?v=32c76d0bf9e9b', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="30" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
  

  
    <img     alt="Stylized photo of a half-hidden person."     class="w-hero w-hero--cover"     decoding="auto"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/lrAkOWYTyGkK2BKXoF9y.jpg?auto=format&w=1600 1600w"          width="1600"   />
  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#lesscodegreatercontent-visibilitylesscodegreater:-the-new-css-property-that-boosts-your-rendering-performance" class="w-toc__header--link">
        <code>content-visibility</code>: the new CSS property that boosts your rendering performance
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#support">Browser support</a></li><li><a href="#containment">CSS Containment</a></li><li><a href="#skipping-rendering-work-with-content-visibility">Skipping rendering work with content-visibility</a></li><li><a href="#a-note-on-accessibility">A note on accessibility</a></li><li><a href="#example">Example: a travel blog</a></li><li><a href="#specifying-the-natural-size-of-an-element-with-contain-intrinsic-size">Specifying the natural size of an element with contain-intrinsic-size</a></li><li><a href="#conclusion">Conclusion</a></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@una | i18n.authors.vladimirlevin.title"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    <a class="w-actions__fab w-actions__fab--subscribe gc-analytics-event" data-category="web.dev" data-label="view-subscribe" data-action="click" href="/newsletter/">
  <span>subscribe</span>
</a>

  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      
        <div class="w-post-breadcrumbs">
          <ul class="w-breadcrumbs">
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link w-breadcrumbs__link--left-justify gc-analytics-event"
      data-category="web.dev"
      data-label="post, home breadcrumb"
      data-action="click"
      href="/"
    >
      Home
    </a>
  </li>

  <svg
    class="w-breadcrumbs__icon"
    xmlns="http://www.w3.org/2000/svg"
    height="24"
    viewBox="0 0 24 24"
    width="24"
    aria-hidden="true"
  >
    <path d="M0 0h24v24H0V0z" fill="none" />
    <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
  </svg>

  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link gc-analytics-event"
      data-category="web.dev"
      data-label="post, path breadcrumb"
      data-action="click"
      href=/blog
    >
      All articles
    </a>
  </li>
</ul>
        </div>
      

      <h1 id="lesscodegreatercontent-visibilitylesscodegreater:-the-new-css-property-that-boosts-your-rendering-performance" class="w-article-header__headline"><code>content-visibility</code>: the new CSS property that boosts your rendering performance</h1>
      
        <p class="w-article-header__subhead w-mb--non">
          Improve initial load time by skipping the rendering of offscreen content.
        </p>
      

      
        <div class="w-author__published">
          <time>Aug 5, 2020</time>
           <span class="w-author__separator">•</span> Updated <time>Mar 9, 2021</time> 
        </div>
      
      

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/una/"><img     alt="Una Kravets"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/c4bzyDkOZ9MhBaqp0HfW.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/c4bzyDkOZ9MhBaqp0HfW.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/c4bzyDkOZ9MhBaqp0HfW.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/c4bzyDkOZ9MhBaqp0HfW.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/c4bzyDkOZ9MhBaqp0HfW.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/c4bzyDkOZ9MhBaqp0HfW.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/una/">Una Kravets</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/una"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/una">GitHub</a>
      </li>
      
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://una.im/">Blog</a>
      </li>
    </ul>
  </div>
</div>
          
            <div class="w-author">
  <a href="/authors/vladimirlevin/"><img     alt="Vladimir Levin"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/dmYne3aSCS1fj5ZfL8If.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/dmYne3aSCS1fj5ZfL8If.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/dmYne3aSCS1fj5ZfL8If.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/dmYne3aSCS1fj5ZfL8If.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/dmYne3aSCS1fj5ZfL8If.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/dmYne3aSCS1fj5ZfL8If.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/vladimirlevin/">Vladimir Levin</a>
    </cite>
    
  </div>
</div>
          
        </div>
      
    </header>

    

    <p>The
<a href="https://drafts.csswg.org/css-contain/#propdef-content-visibility" rel="noopener"><code>content-visibility</code></a>
property, launching in Chromium 85, might be one of the most impactful new CSS
properties for improving page load performance. <code>content-visibility</code> enables the
user agent to skip an element's rendering work, including layout and painting,
until it is needed. Because rendering is skipped, if a large portion of your
content is off-screen, leveraging the <code>content-visibility</code> property makes the
initial user load much faster. It also allows for faster interactions with the
on-screen content. Pretty neat.</p>
<figure class="w-figure">
  <img     alt="demo with figures representing network results"     class="w-screenshot"     decoding="async"     height="554"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/v6WcSx9Fq76lCD0iqFCQ.jpg?auto=format&w=1600 1600w"          width="800"   />
  <figcaption class="w-figcaption">In our article demo, applying <code>content-visibility: auto</code> to chunked content areas gives a <b>7x</b> rendering performance boost on initial load. Read on to learn more.</figcaption>
</figure>
<h2 id="support">Browser support <a class="w-headline-link" href="#support">#</a></h2>
<p><code>content-visibility</code> relies on primitives within the <a href="http://drafts.csswg.org/css-contain/" rel="noopener">the CSS Containment
Spec</a>. While <code>content-visibility</code> is only
supported in Chromium 85 for now (and deemed <a href="https://github.com/mozilla/standards-positions/issues/135" rel="noopener">&quot;worth
prototyping&quot;</a> for
Firefox), the Containment Spec is supported in <a href="https://caniuse.com/#feat=css-containment" rel="noopener">most modern
browsers</a>.</p>
<h2 id="containment">CSS Containment <a class="w-headline-link" href="#containment">#</a></h2>
<p>The key and overarching goal of CSS containment is to enable rendering
performance improvements of web content by providing <strong>predictable isolation of
a DOM subtree</strong> from the rest of the page.</p>
<p>Basically a developer can tell a browser what parts of the page are encapsulated
as a set of content, allowing the browsers to reason about the content without
needing to consider state outside of the subtree. Knowing which bits of content
(subtrees) contain isolated content means the browser can make optimization
decisions for page rendering.</p>
<p>There are four types of <a href="https://developers.google.com/web/updates/2016/06/css-containment" rel="noopener">CSS
containment</a>,
each a potential value for the <code>contain</code> CSS property, which can be combined
together in a space-separated list of values:</p>
<ul>
<li><code>size</code>: Size containment on an element ensures that the element's box can be
laid out without needing to examine its descendants. This means we can
potentially skip layout of the descendants if all we need is the size of the
element.</li>
<li><code>layout</code>: Layout containment means that the descendants do not affect the
external layout of other boxes on the page. This allows us to potentially skip
layout of the descendants if all we want to do is lay out other boxes.</li>
<li><code>style</code>: Style containment ensures that properties which can have effects on
more than just its descendants don't escape the element (e.g. counters). This
allows us to potentially skip style computation for the descendants if all we
want is to compute styles on other elements.</li>
<li><code>paint</code>: Paint containment ensures that the descendants of the containing box
don't display outside its bounds. Nothing can visibly overflow the element,
and if an element is off-screen or otherwise not visible, its descendants will
also not be visible. This allows us to potentially skip painting the
descendants if the element is offscreen.</li>
</ul>
<h2 id="skipping-rendering-work-with-content-visibility">Skipping rendering work with <code>content-visibility</code> <a class="w-headline-link" href="#skipping-rendering-work-with-content-visibility">#</a></h2>
<p>It may be hard to figure out which containment values to use, since browser
optimizations may only kick in when an appropriate set is specified. You can
play around with the values to see <a href="https://developers.google.com/web/updates/2016/06/css-containment" rel="noopener">what works
best</a>, or you
can use another CSS property called <code>content-visibility</code> to apply the needed
containment automatically. <code>content-visibility</code> ensures that you get the largest
performance gains the browser can provide with minimal effort from you as a
developer.</p>
<p>The content-visibility property accepts several values, but <code>auto</code> is the one
that provides immediate performance improvements. An element that has
<code>content-visibility: auto</code> gains <code>layout</code>, <code>style</code> and <code>paint</code> containment. If
the element is off-screen (and not otherwise relevant to the user—relevant
elements would be the ones that have focus or selection in their subtree), it
also gains <code>size</code> containment (and it stops
<a href="https://developers.google.com/web/updates/2018/09/inside-browser-part3#paint" rel="noopener">painting</a>
and
<a href="https://developers.google.com/web/updates/2018/09/inside-browser-part4#finding_the_event_target" rel="noopener">hit-testing</a>
its contents).</p>
<p>What does this mean? In short, if the element is off-screen its descendants are
not rendered. The browser determines the size of the element without considering
any of its contents, and it stops there. Most of the rendering, such as styling
and layout of the element's subtree are skipped.</p>
<p>As the element approaches the viewport, the browser no longer adds the <code>size</code>
containment and starts painting and hit-testing the element's content. This
enables the rendering work to be done just in time to be seen by the user.</p>
<h2 id="a-note-on-accessibility">A note on accessibility <a class="w-headline-link" href="#a-note-on-accessibility">#</a></h2>
<p>One of the features of <code>content-visibility: auto</code> is that the off-screen content remains available in the document object model and therefore, the accessibility tree (unlike with <code>visibility: hidden</code>). This means, that content can be searched for on the page, and navigated to, without waiting for it to load or sacrificing rendering performance.</p>
<p>The flip-side of this, however, is that <a href="https://www.w3.org/TR/wai-aria-1.1/#landmark_roles" rel="noopener">landmark</a> elements with style features such as <code>display: none</code> or <code>visibility: hidden</code> will also appear in the accessibility tree when off-screen, since the browser will not render these styles until they enter the viewport. To prevent these from being visible in the accessibility tree, potentially causing clutter, be sure to also add <code>aria-hidden=&quot;true&quot;</code>.</p>
<div class="w-aside w-aside--caution">
<p><strong>Caution</strong>:
In Chromium 85-89, off-screen children within <code>content-visibility: auto</code> were marked as invisible. In particular, <a href="https://marcysutton.com/content-visibility-accessible-semantics" rel="noopener">headings</a> and landmark roles were not exposed to accessibility tools. In Chromium 90 this was updated so that they are exposed.</p>
</div>
<h2 id="example">Example: a travel blog <a class="w-headline-link" href="#example">#</a></h2>
<figure class='w-figure'>
  <video controls autoplay loop muted playsinline class='w-screenshot'>
    <source src='https://storage.googleapis.com/web-dev-assets/content-visibility/travel_blog.mp4'>
  </video>
  <figcaption>In this example, we baseline our travel blog on the right, and apply <code>content-visibility: auto</code> to chunked areas on the left. The results show rendering times going from <b>232ms</b> to <b>30ms</b> on initial page load.</figcaption>
</figure>
<p>A travel blog typically contains a set of stories with a few pictures, and some
descriptive text. Here is what happens in a typical browser when it navigates to
a travel blog:</p>
<ol>
<li>A part of the page is downloaded from the network, along with any needed
resources.</li>
<li>The browser styles and lays out all of the contents of the page, without
considering if the content is visible to the user.</li>
<li>The browser goes back to step 1 until all of the page and resources are
downloaded.</li>
</ol>
<p>In step 2, the browser processes all of the contents looking for things that may
have changed. It updates the style and layout of any new elements, along with
the elements that may have shifted as a result of new updates. This is rendering
work. This takes time.</p>
<figure class="w-figure">
  <img     alt="A screenshot of a travel blog."     class="w-screenshot"     decoding="async"     height="563"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/57Zh2hjcXJjJIBSE648j.jpg?auto=format&w=1600 1600w"          width="800"   />
  <figcaption class="w-figcaption">An example of a travel blog. See <a href="https://codepen.io/una/pen/rNxEWLo">Demo on Codepen</a></figcaption>
</figure>
<p>Now consider what happens if you put <code>content-visibility: auto</code> on each of the
individual stories in the blog. The general loop is the same: the browser
downloads and renders chunks of the page. However, the difference is in the
amount of work that it does in step 2.</p>
<p>With content-visibility, it will style and layout all of the contents that are
currently visible to the user (they are on-screen). However, when processing the
story that is fully off-screen, the browser will skip the rendering work and
only style and layout the element box itself.</p>
<p>The performance of loading this page would be as if it contained full on-screen
stories and empty boxes for each of the off-screen stories. This performs much
better, with <em>expected reduction of 50% or more</em> from the rendering cost of
loading. In our example, we see a boost from a <strong>232ms</strong> rendering time to a
<strong>30ms</strong> rendering time. That's a <strong>7x</strong> performance boost.</p>
<p>What is the work that you need to do in order to reap these benefits? First, we
chunk the content into sections:</p>
<figure class="w-figure">
  <img     alt="An annotated screenshot of chunking content into sections with a CSS class."     class="w-screenshot"     decoding="async"     height="563"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/29uexe2kBwIsrAuILPnp.jpg?auto=format&w=1600 1600w"          width="800"   />
  <figcaption class="w-figcaption">Example of chunking content into sections with the <code>story</code> class applied, to receive <code>content-visibility: auto</code>. See <a href="https://codepen.io/vmpstr/pen/xxZoyMb">Demo on Codepen</a></figcaption>
</figure>
<p>Then, we apply the following style rule to the sections:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.story</span> <span class="token punctuation">{</span><br>  <span class="token property">content-visibility</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><br>  <span class="token property">contain-intrinsic-size</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span> <span class="token comment">/* Explained in the next section. */</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><div class="w-aside w-aside--note">
<p>Note that as content moves in and out of visibility, it will start
and stop being rendered as needed. However, this does not mean that the browser
will have to render and re-render the same content over and over again, since
the rendering work is saved when possible. </div></p>
<h3 id="specifying-the-natural-size-of-an-element-with-contain-intrinsic-size">Specifying the natural size of an element with <code>contain-intrinsic-size</code> <a class="w-headline-link" href="#specifying-the-natural-size-of-an-element-with-contain-intrinsic-size">#</a></h3>
<p>In order to realize the potential benefits of <code>content-visibility</code>, the browser
needs to apply size containment to ensure that the rendering results of contents
do not affect the size of the element in any way. This means that the element
will lay out as if it was empty. If the element does not have a height specified
in a regular block layout, then it will be of 0 height.</p>
<p>This might not be ideal, since the size of the scrollbar will shift, being
reliant on each story having a non-zero height.</p>
<p>Thankfully, CSS provides another property, <code>contain-intrinsic-size</code>, which
effectively specifies the natural size of the element <em>if the element is
affected by size containment</em>. In our example, we are setting it to <code>1000px</code> as
an estimate for the height and width of the sections.</p>
<p>This means it will lay out as if it had a single child of &quot;intrinsic-size&quot;
dimensions, ensuring that your unsized divs still occupy space.
<code>contain-intrinsic-size</code> acts as a placeholder size in lieu of rendered content.</p>
<div class="w-aside w-aside--note">
<p>We can use <code>IntersectionObserver</code> and <code>MutationObserver</code> to set
the correct sizes inline for each element. <a href="https://twitter.com/slightlylate" rel="noopener">Alex Russell</a> explains
how this works in <a href="https://infrequently.org/2020/12/content-visibility-scroll-fix/" rel="noopener"><code>content-visibility</code> without jittery scrollbars</a>, and <a href="https://infrequently.org/2020/12/resize-resilient-deferred-rendering/" rel="noopener">Resize-Resilient <code>content-visibility</code> Fixes</a>.</p>
</div>
## Hiding content with `content-visibility: hidden`
<p>What if you want to keep the content unrendered regardless of whether or not it
is on-screen, while leveraging the benefits of cached rendering state? Enter:
<code>content-visibility: hidden</code>.</p>
<p>The <code>content-visibility: hidden</code> property gives you all of the same benefits of
unrendered content and cached rendering state as <code>content-visibility: auto</code> does
off-screen. However, unlike with <code>auto</code>, it does not automatically start to
render on-screen.</p>
<p>This gives you more control, allowing you to hide an element's contents and
later unhide them quickly.</p>
<p>Compare it to other common ways of hiding element's contents:</p>
<ul>
<li><code>display: none</code>: hides the element and destroys its rendering state. This
means unhiding the element is as expensive as rendering a new element with the
same contents.</li>
<li><code>visibility: hidden</code>: hides the element and keeps its rendering state. This
doesn't truly remove the element from the document, as it (and it's subtree)
still takes up geometric space on the page and can still be clicked on. It
also updates the rendering state any time it is needed even when hidden.</li>
</ul>
<p><code>content-visibility: hidden</code>, on the other hand, hides the element while
preserving its rendering state, so, if there are any changes that need to
happen, they only happen when the element is shown again (i.e. the
<code>content-visibility: hidden</code> property is removed).</p>
<p>Some great use cases for <code>content-visibility: hidden</code> are when implementing
advanced virtual scrollers, and measuring layout. They're also great for
single-page applications (SPA's). Inactive app views can be left in the DOM with
<code>content-visibility: hidden</code> applied to prevent their display but maintain their
cached state. This makes the view quick to render when it becomes active again.</p>
<div class="w-aside w-aside--note">
<p>In an experiment, Facebook engineers observed an up to 250ms improvement in
navigation times when going back to previously cached views.</p>
</div>
<h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p><code>content-visibility</code> and the CSS Containment Spec mean some exciting performance
boosts are coming right to your CSS file. For more information on these
properties, check out:</p>
<ul>
<li><a href="http://drafts.csswg.org/css-contain/" rel="noopener">The CSS Containment Spec</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Containment" rel="noopener">MDN Docs on CSS
Containment</a></li>
<li><a href="https://github.com/w3c/csswg-drafts" rel="noopener">CSSWG Drafts</a></li>
</ul>


    

    
  <div class="w-chips ">
    
      
    
      
    
      
        
        <a class="w-chip" href="/tags/css/">CSS</a>
      
    
      
        
        <a class="w-chip" href="/tags/layout/">Layout</a>
      
    
      
        
        <a class="w-chip" href="/tags/performance/">Performance</a>
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Mar 9, 2021</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/master/src/site/content/en/blog/content-visibility/index.md"
      >
        Improve article
      </a>
       
    </div>

    
    <web-feedback additional-questions="api"></web-feedback>
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/blog"
  >
    Return to all articles
  </a>
</nav>
  
</div>

  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://devwebfeed.appspot.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">
              DevWeb Content Firehose
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/@ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/home"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
