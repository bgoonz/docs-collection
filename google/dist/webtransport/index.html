
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=a661d43da6d24">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Experimenting with WebTransport</title>
<meta name="description" content="WebTransport is a new API offering low-latency, bidirectional, client-server messaging. Learn more about its use cases, and how to give feedback about the future of the implementation." />

<link rel="canonical" href="https://web.dev/webtransport/" />

<meta itemprop="name" content="Experimenting with WebTransport" />
<meta itemprop="description" content="WebTransport is a new API offering low-latency, bidirectional, client-server messaging. Learn more about its use cases, and how to give feedback about the future of the implementation." />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/webtransport/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Experimenting with WebTransport" />
<meta property="og:description" content="WebTransport is a new API offering low-latency, bidirectional, client-server messaging. Learn more about its use cases, and how to give feedback about the future of the implementation." />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="Photo of fast-moving traffic. " />
<meta property="tag" content="capabilities" />
<meta property="tag" content="network" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Experimenting with WebTransport" />
<meta name="twitter:description" content="WebTransport is a new API offering low-latency, bidirectional, client-server messaging. Learn more about its use cases, and how to give feedback about the future of the implementation." />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>








<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=5efdbb1508962', 'module');




  loadScript('/js/content.js?v=caa31a647e122', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="30" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
  

  
    <img     alt="Photo of fast-moving traffic."     class="w-hero w-hero--cover w-hero--center"     decoding="auto"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/Wh6q6ughWxUYcu4iOutU.jpg?auto=format&w=1600 1600w"          width="1600"   />
  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#experimenting-with-webtransport" class="w-toc__header--link">
        Experimenting with WebTransport
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#background">Background</a></li><li><a href="#what's-webtransport">What's WebTransport?</a></li><li><a href="#use-cases">Use cases</a></li><li><a href="#status">Current status</a></li><li><a href="#webtransport's-relationship-to-other-technologies">WebTransport's relationship to other technologies</a></li><li><a href="#is-webtransport-a-replacement-for-websockets">Is WebTransport a replacement for WebSockets?</a></li><li><a href="#is-webtransport-the-same-as-a-udp-socket-api">Is WebTransport the same as a UDP Socket API?</a></li><li><a href="#is-webtransport-an-alternative-to-webrtc-data-channels">Is WebTransport an alternative to WebRTC data channels?</a></li><li><a href="#try-it-out">Try it out</a></li><li><a href="#using-the-api">Using the API</a></li><li><a href="#connecting-to-a-server">Connecting to a server</a></li><li><a href="#datagram">Datagram APIs</a></li><li><a href="#stream">Streams APIs </a></li><li><a href="#more-examples">More examples</a></li><li><a href="#register-for-ot">Enabling support during the origin trial</a></li><li><a href="#webtransport-in-chrome's-devtools">WebTransport in Chrome's DevTools</a></li><li><a href="#privacy-and-security-considerations">Privacy and security considerations</a></li><li><a href="#feedback">Feedback </a></li><li><a href="#feedback-about-the-api-design">Feedback about the API design</a></li><li><a href="#problem-with-the-implementation">Problem with the implementation?</a></li><li><a href="#planning-to-use-the-api">Planning to use the API?</a></li><li><a href="#general-discussion">General discussion</a></li><li><a href="#acknowledgements">Acknowledgements</a></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@jeffposnick"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    <a class="w-actions__fab w-actions__fab--subscribe gc-analytics-event" data-category="web.dev" data-label="view-subscribe" data-action="click" href="/newsletter/">
  <span>subscribe</span>
</a>

  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      
        <div class="w-post-breadcrumbs">
          <ul class="w-breadcrumbs">
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link w-breadcrumbs__link--left-justify gc-analytics-event"
      data-category="web.dev"
      data-label="post, home breadcrumb"
      data-action="click"
      href="/"
    >
      Home
    </a>
  </li>

  <svg
    class="w-breadcrumbs__icon"
    xmlns="http://www.w3.org/2000/svg"
    height="24"
    viewBox="0 0 24 24"
    width="24"
    aria-hidden="true"
  >
    <path d="M0 0h24v24H0V0z" fill="none" />
    <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
  </svg>

  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link gc-analytics-event"
      data-category="web.dev"
      data-label="post, path breadcrumb"
      data-action="click"
      href=/blog
    >
      All articles
    </a>
  </li>
</ul>
        </div>
      

      <h1 id="experimenting-with-webtransport" class="w-article-header__headline">Experimenting with WebTransport</h1>
      
        <p class="w-article-header__subhead w-mb--non">
          WebTransport is a new API offering low-latency, bidirectional, client-server messaging. Learn more about its use cases, and how to give feedback about the future of the implementation.
        </p>
      

      
        <div class="w-author__published">
          <time>Jun 8, 2020</time>
           <span class="w-author__separator">â€¢</span> Updated <time>Feb 23, 2021</time> 
        </div>
      
      

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/jeffposnick/"><img     alt="Jeff Posnick"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/jeffposnick/">Jeff Posnick</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/jeffposnick"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/jeffposnick">GitHub</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@jeffposnick"
          >Glitch</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/jeffposnick">Blog</a>
      </li>
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <div class="w-aside w-aside--caution">
<p><strong>Caution</strong>:
This proposal continues to change during the origin trial period. There
may be a divergence between the browser implementation and the information in this
article.</p>
<p>For the latest on this evolving proposal, please read refer to the
<a href="https://w3c.github.io/webtransport/" rel="noopener">editor's draft of WebTransport</a>.</p>
<p>Once the proposal stabilizes, we will update this article and associated code
samples with up to date information.</p>
</div>
<h2 id="background">Background <a class="w-headline-link" href="#background">#</a></h2>
<h3 id="what's-webtransport">What's WebTransport? <a class="w-headline-link" href="#what's-webtransport">#</a></h3>
<p><a href="https://w3c.github.io/webtransport/" rel="noopener">WebTransport</a> is a web API that uses the <a href="https://quicwg.org/base-drafts/draft-ietf-quic-http.html" rel="noopener">HTTP/3</a> protocol as a bidirectional transport. It's intended for two-way communications between a web client and an HTTP/3 server. It supports sending data both unreliably via its <a href="#datagram">datagram APIs</a>, and reliably via its <a href="#stream">streams APIs</a>.</p>
<p><a href="https://tools.ietf.org/html/draft-ietf-quic-datagram-00" rel="noopener">Datagrams</a> are ideal for sending and receiving data that do not need strong delivery guarantees. Individual packets of data are limited in size by the <a href="https://en.wikipedia.org/wiki/Maximum_transmission_unit" rel="noopener">maximum transmission unit (MTU)</a> of the underlying connection, and may or may not be transmitted successfully, and if they are transferred, they may arrive in an arbitrary order. These characteristics make the datagram APIs ideal for low-latency, best-effort data transmission. You can think of datagrams as <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol" rel="noopener">user datagram protocol (UDP)</a> messages, but encrypted and congestion-controlled.</p>
<p>The streams APIs, in contrast, provide <a href="https://en.wikipedia.org/wiki/Reliability_(computer_networking)" rel="noopener">reliable</a>, ordered data transfer. They're <a href="https://quicwg.org/base-drafts/draft-ietf-quic-transport.html#name-streams" rel="noopener">well-suited</a> to scenarios where you need to send or receive one or more streams of ordered data. Using multiple WebTransport streams is analogous to establishing multiple <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol" rel="noopener">TCP</a> connections, but since HTTP/3 uses the lighter-weight <a href="https://www.chromium.org/quic" rel="noopener">QUIC</a> protocol under the hood, they can be opened and closed without as much overhead.</p>
<h3 id="use-cases">Use cases <a class="w-headline-link" href="#use-cases">#</a></h3>
<p>This a small list of possible ways developers might use WebTransport.</p>
<ul>
<li>Sending game state at a regular interval with minimal latency to a server via small, unreliable, out-of-order messages.</li>
<li>Receiving media streams pushed from a server with minimal latency, independent of other data streams.</li>
<li>Receiving notifications pushed from a server while a web page is open.</li>
</ul>
<p>As part of the origin trial process, we're interested in <a href="#feedback">hearing more</a> about how you plan to use WebTransport.</p>
<div class="w-aside w-aside--note">
<p>Many of the concepts in this proposal were previously experimented with as part of the earlier QuicTransport origin trial, which did not end up being released as part of Chrome.</p>
<p>WebTransport helps with similar use cases as QuicTransport, with the primary difference being that <a href="https://quicwg.org/base-drafts/draft-ietf-quic-http.html" rel="noopener">HTTP/3</a> instead of <a href="https://www.chromium.org/quic" rel="noopener">QUIC</a> is the underlying transport protocol.</p>
</div>
<h2 id="status">Current status <a class="w-headline-link" href="#status">#</a></h2>
<div class="w-table-wrapper">
<div class="w-table-wrapper">
<table>
<thead>
<tr>
<th>Step</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. Create explainer</td>
<td><a href="https://github.com/w3c/webtransport/blob/main/explainer.md" rel="noopener">Complete</a></td>
</tr>
<tr>
<td>2. Create initial draft of specification</td>
<td><a href="https://w3c.github.io/webtransport/" rel="noopener">Complete</a></td>
</tr>
<tr>
<td><strong>3. Gather feedback and iterate design</strong></td>
<td><a href="#feedback"><strong>In Progress</strong></a></td>
</tr>
<tr>
<td><strong>4. Origin trial</strong></td>
<td><a href="#register-for-ot"><strong>In Progress</strong></a></td>
</tr>
<tr>
<td>5. Launch</td>
<td>Not Started</td>
</tr>
</tbody>
</table>
</div></div>
<h2 id="webtransport's-relationship-to-other-technologies">WebTransport's relationship to other technologies <a class="w-headline-link" href="#webtransport's-relationship-to-other-technologies">#</a></h2>
<h3 id="is-webtransport-a-replacement-for-websockets">Is WebTransport a replacement for WebSockets? <a class="w-headline-link" href="#is-webtransport-a-replacement-for-websockets">#</a></h3>
<p>Maybe. There are use cases where either <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" rel="noopener">WebSockets</a> or WebTransport might be valid communication protocols to use.</p>
<p>WebSockets communications are modeled around a single, reliable, ordered stream of messages, which is fine for some types of communication needs. If you need those characteristics, then WebTransport's streams APIs can provide them as well. In comparison, WebTransport's datagram APIs provide low-latency delivery, without guarantees about reliability or ordering, so they're not a direct replacement for WebSockets.</p>
<p>Using WebTransport, via the datagram APIs or via multiple concurrent Streams API instances, means that you don't have to worry about <a href="https://en.wikipedia.org/wiki/Head-of-line_blocking" rel="noopener">head-of-line blocking</a>, which can be an issue with WebSockets. Additionally, there are performance benefits when establishing new connections, as the underlying <a href="https://www.fastly.com/blog/quic-handshake-tls-compression-certificates-extension-study" rel="noopener">QUIC handshake</a> is faster than starting up TCP over TLS.</p>
<p>WebTransport is part of a new draft specification, and as such the WebSocket ecosystem around client and server libraries is currently much more robust. If you need something that works &quot;out of the box&quot; with common server setups, and with broad web client support, WebSockets is a better choice today.</p>
<h3 id="is-webtransport-the-same-as-a-udp-socket-api">Is WebTransport the same as a UDP Socket API? <a class="w-headline-link" href="#is-webtransport-the-same-as-a-udp-socket-api">#</a></h3>
<p>No. WebTransport is not a <a href="https://www.w3.org/TR/raw-sockets/" rel="noopener">UDP Socket API</a>. While WebTransport uses HTTP/3, which in turn uses UDP &quot;under the hood,&quot; WebTransport has requirements around encryption and congestion control that make it more than a basic UDP Socket API.</p>
<h3 id="is-webtransport-an-alternative-to-webrtc-data-channels">Is WebTransport an alternative to WebRTC data channels? <a class="w-headline-link" href="#is-webtransport-an-alternative-to-webrtc-data-channels">#</a></h3>
<p>Yes, for client-server connections. WebTransport shares many of the same properties as <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel" rel="noopener">WebRTC data channels</a>, although the underlying protocols are different.</p>
<div class="w-aside w-aside--note">
<p>WebRTC data channels support peer-to-peer communications, but WebTransport only supports client-server connection. If you have multiple clients that need to talk directly to each other, then WebTransport isn't a viable alternative.</p>
</div>
<p>Generally, running a HTTP/3-compatible server requires less setup and configuration than maintaining a WebRTC server, which involves understanding multiple protocols (<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Connectivity#ICE_candidates" rel="noopener">ICE</a>, <a href="https://webrtc-security.github.io/#4.3.1." rel="noopener">DTLS</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCSctpTransport" rel="noopener">SCTP</a>) in order to get a working transport. WebRTC entails many more moving pieces that could lead to failed client/server negotiations.</p>
<p>The WebTransport API was designed with the web developer use cases in mind, and should feel more like writing modern web platform code than using WebRTC's data channel interfaces. <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=302019" rel="noopener">Unlike WebRTC</a>, WebTransport is supported inside of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" rel="noopener">Web Workers</a>, which allows you to perform client-server communications independent of a given HTML page. Because WebTransport exposes a <a href="https://streams.spec.whatwg.org/" rel="noopener">Streams</a>-compliant interface, it supports optimizations around <a href="https://streams.spec.whatwg.org/#backpressure" rel="noopener">backpressure</a>.</p>
<p>However, if you already have a working WebRTC client/server setup that you're happy with, switching to WebTransport may not offer many advantages.</p>
<h2 id="try-it-out">Try it out <a class="w-headline-link" href="#try-it-out">#</a></h2>
<p>The best way to experiment with WebTransport is to start up a compatible HTTP/3 server locally. (Unfortunately, a public reference server compatible with the latest specification is not currently available.) You can then use this page with a <a href="https://googlechrome.github.io/samples/webtransport/client.html" rel="noopener">basic JavaScript client</a> to try out client/server communications.</p>
<h2 id="using-the-api">Using the API <a class="w-headline-link" href="#using-the-api">#</a></h2>
<p>WebTransport was designed on top of modern web platform primitives, like the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Streams_API" rel="noopener">Streams API</a>. It relies heavily on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" rel="noopener">promises</a>, and works well with <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await" rel="noopener"><code>async</code> and <code>await</code></a>.</p>
<p>The WebTransport <a href="#register-for-ot">origin trial</a> supports three distinct types of traffic: datagrams, as well as both unidirectional and bidirectional streams.</p>
<h3 id="connecting-to-a-server">Connecting to a server <a class="w-headline-link" href="#connecting-to-a-server">#</a></h3>
<p>You can connect to a HTTP/3 server by creating a <code>WebTransport</code> instance. The scheme of the URL should be <code>https</code>. You need to explicitly specify the port number.</p>
<p>You should use the <code>ready</code> promise to wait for the connection to be established. This promise will not be fulfilled until the setup is complete, and will reject if the connection fails at the QUIC/TLS stage.</p>
<p>The <code>closed</code> promise fulfills when the connection closes normally, and rejects if the closure was unexpected.</p>
<p>If the server rejects the connection due to a <a href="https://tools.ietf.org/html/draft-vvv-webtransport-quic-01#section-3.2" rel="noopener">client indication</a> error (e.g. the path of the URL is invalid), then that causes <code>closed</code> to reject, while <code>ready</code> remains unresolved.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://example.com:4999/foo/bar'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> transport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebTransport</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Optionally, set up functions to respond to</span><br><span class="token comment">// the connection closing:</span><br>transport<span class="token punctuation">.</span>closed<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The HTTP/3 connection to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> closed gracefully.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'The HTTP/3 connection to ${url} closed due to ${error}.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Once .ready fulfills, the connection can be used.</span><br><span class="token keyword">await</span> transport<span class="token punctuation">.</span>ready<span class="token punctuation">;</span></code></pre>
</web-copy-code><h3 id="datagram">Datagram APIs <a class="w-headline-link" href="#datagram">#</a></h3>
<p>Once you have a WebTransport instance that's connected to a server, you can use it to send and receive discrete bits of data, known as <a href="https://en.wikipedia.org/wiki/Datagram" rel="noopener">datagrams</a>.</p>
<p>The <code>writeable</code> getter returns a <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/WritableStream" rel="noopener">WritableStream</a></code>, which a web client can use to send data to the server. The <code>readable</code> getter returns a <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" rel="noopener">ReadableStream</a></code>, allowing you to listen for data from the server. Both streams are inherently unreliable, so it is possible that the data you write will not be received by the server, and vice versa.</p>
<p>Both types of streams use <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" rel="noopener">Uint8Array</a></code> instances for data transfer.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Send two datagrams to the server.</span><br><span class="token keyword">const</span> writer <span class="token operator">=</span> transport<span class="token punctuation">.</span>datagrams<span class="token punctuation">.</span>writable<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> data1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Read datagrams from the server.</span><br><span class="token keyword">const</span> reader <span class="token operator">=</span> transport<span class="token punctuation">.</span>datagrams<span class="token punctuation">.</span>readable<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">,</span> done<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">break</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token comment">// value is a Uint8Array.</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><div class="w-aside w-aside--note">
<p>Chrome does not <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=929585" rel="noopener">currently</a> expose an <a href="https://github.com/whatwg/streams/issues/778" rel="noopener">async iterator</a> for a <code>ReadableStream</code>. For the time being, using the <code>getReader()</code> method combined with a <code>while()</code> loop is the best way to read from the stream.</p>
</div>
<h3 id="stream">Streams APIs  <a class="w-headline-link" href="#stream">#</a></h3>
<p>Once you've connected to the server, you could also use WebTransport to send and receive data via its Streams APIs.</p>
<p>Each chunk of all streams is a <code>Uint8Array</code>. Unlike with the Datagram APIs, these streams are reliable. But each stream is independent, so data order across streams is not guaranteed.</p>
<h4 id="sendstream">SendStream <a class="w-headline-link" href="#sendstream">#</a></h4>
<p>A <code><a href="https://wicg.github.io/web-transport/#sendstream" rel="noopener">SendStream</a></code> is created by the web client using the <code>createSendStream()</code> method of a <code>WebTransport</code> instance, which returns a promise for the <code>SendStream</code>.</p>
<p>Use the <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/WritableStreamDefaultWriter/close" rel="noopener">close()</a></code> method of the <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/WritableStreamDefaultWriter" rel="noopener">WritableStreamDefaultWriter</a></code> to close the associated HTTP/3 connection. The browser tries to send all pending data before actually closing the associated connection.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Send two Uint8Arrays to the server.</span><br><span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">await</span> transport<span class="token punctuation">.</span><span class="token function">createSendStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> writer <span class="token operator">=</span> stream<span class="token punctuation">.</span>writable<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> data1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">try</span> <span class="token punctuation">{</span><br>  <span class="token keyword">await</span> writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'All data has been sent.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">An error occurred: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Similarly, use the <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/WritableStreamDefaultWriter/abort" rel="noopener">abort()</a></code> method of the <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/WritableStreamDefaultWriter" rel="noopener">WritableStreamDefaultWriter</a></code> to send a <a href="https://tools.ietf.org/html/draft-ietf-quic-transport-27#section-19.4" rel="noopener">QUIC RESET_STREAM</a> to the server. When using <code>abort()</code>, the browser may discard any pending data that hasn't yet been sent.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> ws <span class="token operator">=</span> <span class="token keyword">await</span> transport<span class="token punctuation">.</span><span class="token function">createSendStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> writer <span class="token operator">=</span> ws<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> writer<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Not all the data may have been written.</span></code></pre>
</web-copy-code><h4 id="receivestream">ReceiveStream <a class="w-headline-link" href="#receivestream">#</a></h4>
<p>A <code><a href="https://wicg.github.io/web-transport/#receivestream" rel="noopener">ReceiveStream</a></code> is initiated by the server. Obtaining a <code>ReceiveStream</code> is a two-step process for a web client. First, it calls the <code>receiveStreams()</code> method of a <code>WebTransport</code> instance, which returns a <code>ReadableStream</code>. Each chunk of that <code>ReadableStream</code>, is, in turn, a <code>ReceiveStream</code> that can be used to read <code>Uint8Array</code> instances sent by the server.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readFrom</span><span class="token punctuation">(</span><span class="token parameter">receiveStream</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> reader <span class="token operator">=</span> receiveStream<span class="token punctuation">.</span>readable<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> <span class="token punctuation">{</span>done<span class="token punctuation">,</span> value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">break</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token comment">// value is a Uint8Array</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> rs <span class="token operator">=</span> transport<span class="token punctuation">.</span><span class="token function">receiveStreams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> reader <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>done<span class="token punctuation">,</span> value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">break</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token comment">// value is an instance of ReceiveStream</span><br>  <span class="token keyword">await</span> <span class="token function">readFrom</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>You can detect stream closure using the <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultReader/closed" rel="noopener">closed</a></code> promise of the <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultReader" rel="noopener">ReadableStreamDefaultReader</a></code>. When the underlying HTTP/3 connection is <a href="https://tools.ietf.org/html/draft-ietf-quic-transport-27#section-19.8" rel="noopener">closed with the FIN bit</a>, the <code>closed</code> promise is fulfilled after all the data is read. When the HTTP/3 connection is closed abruptly (for example, by <code><a href="https://tools.ietf.org/html/draft-ietf-quic-transport-27#section-19.4" rel="noopener">STREAM_RESET</a></code>), then the <code>closed</code> promise rejects.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Assume an active receiveStream</span><br><span class="token keyword">const</span> reader <span class="token operator">=</span> receiveStream<span class="token punctuation">.</span>readable<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>reader<span class="token punctuation">.</span>closed<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The receiveStream closed gracefully.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'The receiveStream closed abruptly.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h4 id="bidirectionalstream">BidirectionalStream <a class="w-headline-link" href="#bidirectionalstream">#</a></h4>
<p>A <code><a href="https://wicg.github.io/web-transport/#bidirectional-stream" rel="noopener">BidirectionalStream</a></code> might be created either by the server or the client.</p>
<p>Web clients can create one using the <code>createBidirectionalStream()</code> method of a <code>WebTransport</code> instance, which returns a promise for a <code>BidirectionalStream</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">await</span> transport<span class="token punctuation">.</span><span class="token function">createBidirectionalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// stream is a BidirectionalStream</span><br><span class="token comment">// stream.readable is a ReadableStream</span><br><span class="token comment">// stream.writable is a WritableStream</span></code></pre>
</web-copy-code><p>You can listen for a <code>BidirectionalStream</code> created by the server with the <code>receiveBidirectionalStreams()</code> method of a <code>WebTransport</code> instance, which returns a <code>ReadableStream</code>. Each chunk of that <code>ReadableStream</code>, is, in turn, a <code>BidirectionalStream</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> rs <span class="token operator">=</span> transport<span class="token punctuation">.</span><span class="token function">receiveBidrectionalStreams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> reader <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>done<span class="token punctuation">,</span> value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">break</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token comment">// value is a BidirectionalStream</span><br>  <span class="token comment">// value.readable is a ReadableStream</span><br>  <span class="token comment">// value.writable is a WritableStream</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>A <code>BidirectionalStream</code> is just a combination of a <code>SendStream</code> and <code>ReceiveStream</code>. The examples from the previous two sections explain how to use each of them.</p>
<h3 id="more-examples">More examples <a class="w-headline-link" href="#more-examples">#</a></h3>
<p>The <a href="https://wicg.github.io/web-transport/" rel="noopener">WebTransport draft specification</a> includes a number of additional inline examples, along with full documentation for all of the methods and properties.</p>
<h2 id="register-for-ot">Enabling support during the origin trial <a class="w-headline-link" href="#register-for-ot">#</a></h2>
<ol>
<li><a href="https://developer.chrome.com/origintrials/#/view_trial/793759434324049921" rel="noopener">Request a token</a> for your origin.</li>
<li>Add the token to your pages. There are two ways to do that:
<ul>
<li>Add an <code>origin-trial</code> <code>&lt;meta&gt;</code> tag to the head of each page. For example,
this may look something like: <br>
<code>&lt;meta http-equiv=&quot;origin-trial&quot; content=&quot;TOKEN_GOES_HERE&quot;&gt;</code></li>
<li>If you can configure your server, you can also add the token
using an <code>Origin-Trial</code> HTTP header. The resulting response header should
look something like:<br>
<code>Origin-Trial: TOKEN_GOES_HERE</code></li>
</ul>
</li>
</ol>
<h3 id="webtransport-in-chrome's-devtools">WebTransport in Chrome's DevTools <a class="w-headline-link" href="#webtransport-in-chrome's-devtools">#</a></h3>
<p>Unfortunately, <a href="https://developers.google.com/web/tools/chrome-devtools" rel="noopener">Chrome's DevTools</a> support for WebTransport is not ready for the start of the origin trial. You can &quot;star&quot; <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1069742" rel="noopener">this Chrome issue</a> to be notified about updates on the DevTools interface.</p>
<h2 id="privacy-and-security-considerations">Privacy and security considerations <a class="w-headline-link" href="#privacy-and-security-considerations">#</a></h2>
<p>See the <a href="https://wicg.github.io/web-transport/#privacy-security" rel="noopener">corresponding section</a> of the draft specification for authoritative guidance.</p>
<h2 id="feedback">Feedback  <a class="w-headline-link" href="#feedback">#</a></h2>
<p>The Chrome team wants to hear your thoughts and experiences using this API throughout the origin trial process.</p>
<h3 id="feedback-about-the-api-design">Feedback about the API design <a class="w-headline-link" href="#feedback-about-the-api-design">#</a></h3>
<p>Is there something about the API that's awkward or doesn't work as expected? Or are there missing pieces that you need to implement your idea?</p>
<p>File an issue on the <a href="https://github.com/WICG/web-transport/issues" rel="noopener">Web Transport GitHub repo</a>, or add your thoughts to an existing issue.</p>
<h3 id="problem-with-the-implementation">Problem with the implementation? <a class="w-headline-link" href="#problem-with-the-implementation">#</a></h3>
<p>Did you find a bug with Chrome's implementation?</p>
<p>File a bug at <a href="https://new.crbug.com" rel="noopener">https://new.crbug.com</a>. Include as much detail as you can, along with simple instructions for reproducing.</p>
<h3 id="planning-to-use-the-api">Planning to use the API? <a class="w-headline-link" href="#planning-to-use-the-api">#</a></h3>
<p>Your public support helps Chrome prioritize features, and shows other browser vendors how critical it is to support them.</p>
<ul>
<li>Be sure you have signed up for the <a href="https://developer.chrome.com/origintrials/#/view_trial/793759434324049921" rel="noopener">origin trial</a> to show your interest and provide your domain and contact info.</li>
<li>Send a tweet to <a href="https://twitter.com/chromiumdev" rel="noopener">@ChromiumDev</a> using the hashtag
<a href="https://twitter.com/search?q=%23WebTransport&amp;src=typed_query&amp;f=live" rel="noopener"><code>#WebTransport</code></a>
and details on where and how you're using it.</li>
</ul>
<h3 id="general-discussion">General discussion <a class="w-headline-link" href="#general-discussion">#</a></h3>
<p>You can use the <a href="https://groups.google.com/a/chromium.org/g/web-transport-dev" rel="noopener">web-transport-dev Google Group</a> for general questions or problems that don't fit into one of the other categories.</p>
<h2 id="acknowledgements">Acknowledgements <a class="w-headline-link" href="#acknowledgements">#</a></h2>
<p>This article incorporates information from the <a href="https://github.com/wicg/web-transport/blob/master/explainer.md" rel="noopener">WebTransport Explainer</a>, <a href="https://wicg.github.io/web-transport/" rel="noopener">draft specification</a>, and <a href="https://docs.google.com/document/d/1UgviRBnZkMUq4OKcsAJvIQFX6UCXeCbOtX_wMgwD_es/edit#" rel="noopener">related design docs</a>. Thank you to the respective authors for providing that foundation.</p>
<p><em>The hero image on this post is by <a href="https://unsplash.com/photos/dPgPoiUIiXk" rel="noopener">Robin Pierre</a> on Unsplash.</em></p>


    

    
  <div class="w-chips ">
    
      
    
      
    
      
        
        <a class="w-chip" href="/tags/capabilities/">Capabilities</a>
      
    
      
        
        <a class="w-chip" href="/tags/network/">Network</a>
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Feb 23, 2021</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/master/src/site/content/en/blog/webtransport/index.md"
      >
        Improve article
      </a>
       
    </div>

    
    <web-feedback additional-questions="api"></web-feedback>
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/blog"
  >
    Return to all articles
  </a>
</nav>
  
</div>

  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://devwebfeed.appspot.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 4)">
              DevWeb Content Firehose
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/@ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/home"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
